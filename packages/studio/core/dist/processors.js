var QS=Object.defineProperty;var Ss=(r,e)=>{for(var t in e)QS(r,t,{get:e[t],enumerable:!0})};var fu=r=>r,R=r=>r!=null,Fs=r=>r===null;var ja=r=>r===void 0,La=r=>r!==void 0,Ka=r=>r==null,Cy=(r,e)=>r!=null?e(r):void 0,q=(r,e="asDefined failed")=>r??N(Ns(e)),Ke=(r,e)=>r instanceof e,Be=(r,e)=>r instanceof e?r:N(`${r} is not instance of ${e}`),Ry=(r,e)=>{r instanceof e||N(`${r} is not instance of ${e}`)};var Ns=r=>r instanceof Function?r():r;var _=(r,...e)=>r?.apply(null,e),lo=r=>R(r)&&typeof r=="object",Oy=(r,e,t)=>{if(!(e in r))return!1;let n=r[e];return t==="null"?n===null:typeof n===t},__=(r,...e)=>{let t=r;for(let n of e){if(!lo(t)||!(n in t))return;t=t[n]}return t},Fn=r=>{throw new Error(`Unhandled ${r}`)},N=r=>{throw typeof r=="string"?new Error(r):r},B=(r,e)=>r?void 0:N(Ns(e));var Bs=r=>new Proxy({},{get(){return N(r)}});var My=class{value;status="success";constructor(e){this.value=e}error=Bs("Cannot access error when succeeded")},Ty=class{error;status="failure";constructor(e){this.error=e}value=Bs("Cannot access value when failed")},$s=r=>{try{return new My(r())}catch(e){return new Ty(e)}};var Nn=(r,e)=>Object.keys(e).length===0?N("Empty enum object (are you using `const enum`?)"):Object.keys(e).filter(i=>isNaN(Number(i))).map(i=>e[i]).includes(r)?r:N(`Invalid enum value: ${String(r)}`),mr=()=>{};var P_=r=>{};var Vy;(function(r){r[r.Ascending=1]="Ascending",r[r.Descending=-1]="Descending"})(Vy||(Vy={}));var D=class{static#e=Object.freeze(new Array(0));static empty=()=>this.#e;static clear=e=>{e.length=0};static replace=(e,t)=>{e.length=0,e.push(...t)};static consume=(e,t)=>{for(let n=0;n<e.length;)t(e[n])?e.splice(n,1):n++};static peekFirst=e=>e.at(0)??null;static peekLast=e=>e.at(-1)??null;static getFirst=(e,t)=>q(e.at(0),t);static getLast=(e,t)=>q(e.at(-1),t);static getPrev=(e,t)=>{let n=e.indexOf(t);return n===-1?N(`${t} not found in ${e}`):q(e.at((n-1)%e.length),"Internal Error")};static getNext=(e,t)=>{let n=e.indexOf(t);return n===-1?N(`${t} not found in ${e}`):q(e.at((n+1)%e.length),"Internal Error")};static removeLast=(e,t)=>q(e.pop(),t);static create=(e,t)=>{let n=new Array(t);for(let i=0;i<t;i++)n[i]=e(i);return n};static equals=(e,t)=>{if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0};static satisfy=(e,t)=>{if(e.length<2)return!0;let n=e[0];for(let i=1;i<e.length;i++)if(!t(n,e[i]))return!1;return!0};static remove=(e,t)=>{let n=e.indexOf(t);if(n===-1)return N(`${t} not found in ${e}`);e.splice(n,1)};static removeIf=(e,t)=>{for(let n=e.length-1;n>=0;n--)t(e[n])&&e.splice(n,1)};static removeOpt=(e,t)=>{let n=e.indexOf(t);return n===-1?!1:(e.splice(n,1),!0)};static hasDuplicates=e=>new Set(e).size<e.length;static removeDuplicates=e=>{let t=0,n=new Set;for(let i of e)n.has(i)||(n.add(i),e[t++]=i);return e.length=t,e};static removeDuplicateKeys=(e,t)=>{let n=0,i=new Set;for(let o of e){let s=o[t];i.has(s)||(i.add(s),e[n++]=o)}return e.length=n,e};static subtract(e,t,n){return e.filter(i=>!t.some(o=>n(i,o)))}static intersect(e,t,n){return e.filter(i=>t.some(o=>n(i,o)))}static merge(e,t,n){return[...e.filter(i=>!t.some(o=>n(i,o))),...t]}static*iterate(e){for(let t=0;t<e.length;t++)yield e[t]}static*iterateReverse(e){for(let t=e.length-1;t>=0;t--)yield e[t]}static*iterateStateFull(e){let t=e.length-1;for(let n=0;n<=t;n++)yield{value:e[n],isFirst:n===0,isLast:n===t}}static*iterateAdjacent(e){if(!(e.length<=1))for(let t=1,n=e[0];t<e.length;t++){let i=e[t];yield[n,i],n=i}}static isSorted(e,t=Vy.Ascending){if(e.length<2)return!0;let n=e[0];for(let i=1;i<e.length;i++){let o=e[i];if(Math.sign(n-o)===t)return!1;n=o}return!0}static toRecord(e,t){return e.reduce((n,i)=>(n[t(i)]=i,n),{})}static concatArrayBuffers(e,t){let n=new ArrayBuffer(e.byteLength+t.byteLength),i=new Uint8Array(n);return i.set(new Uint8Array(e),0),i.set(new Uint8Array(t),e.byteLength),n}};var g;(function(r){r.wrap=t=>R(t)?new e(t):r.None,r.from=t=>r.wrap(t()),r.tryFrom=t=>{try{return r.wrap(t())}catch{return r.None}},r.execute=(t,...n)=>r.wrap(t?.apply(null,n)),r.async=t=>t.then(n=>r.wrap(n),()=>r.None);class e{#e;constructor(n){this.#e=q(n)}unwrap(){return this.#e}unwrapOrElse(n){return this.#e}unwrapOrNull(){return this.#e}unwrapOrUndefined(){return this.#e}contains(n){return n===this.#e}match(n){return n.some(this.#e)}ifSome(n){return n(this.#e)}ifAbsent(n){}isEmpty(){return!1}nonEmpty(){return!0}map(n){return r.wrap(n(this.#e))}mapOr(n,i){return n(this.#e)}flatMap(n){return n(this.#e)}equals(n){return this.unwrapOrNull()===n.unwrapOrNull()}assert(n){return this}toString(){return`{Option.Some(${this.#e})}`}get[Symbol.toStringTag](){return this.toString()}}r.Some=e,r.None=new class{unwrap=t=>N(R(t)?Ns(t):"unwrap failed");unwrapOrElse=t=>Ns(t);unwrapOrNull=()=>null;unwrapOrUndefined=()=>{};contains=t=>!1;match=t=>t.none();ifSome=t=>{};ifAbsent=t=>t(void 0);isEmpty=()=>!0;nonEmpty=()=>!1;map=t=>r.None;mapOr=(t,n)=>Ns(n);flatMap=t=>r.None;equals=t=>t.isEmpty();assert=t=>N(Ns(t)??"assert failed");toString=()=>"{Option.None}";get[Symbol.toStringTag](){return this.toString()}}})(g||(g={}));var Bn;(function(r){r.async=e=>e.then(t=>r.ok(t),t=>r.err(t)),r.tryGet=e=>{try{return r.ok(e())}catch(t){return r.err(t)}},r.ok=e=>new class{value;constructor(t){this.value=t}asOption=()=>g.wrap(this.value);failureReason=()=>{throw new Error("Attempt was successful.")};isFailure=()=>!1;isSuccess=()=>!0;result=()=>this.value;map=t=>{try{return r.ok(t(this.value))}catch(n){return r.err(n)}};flatMap=t=>t(this.value);match=t=>t.ok(this.value);toVoid=()=>r.ok(void 0);failure=()=>{throw new Error("Attempt was successful.")};toString=()=>`{Success: ${this.value}`;get[Symbol.toStringTag](){return"Success"}}(e),r.Ok=new class{constructor(){}asOption=()=>g.None;failureReason=()=>{throw new Error("Attempt was successful.")};isFailure=()=>!1;isSuccess=()=>!0;result=()=>{};map=e=>r.ok(e());flatMap=e=>e();match=e=>e.ok();toVoid=()=>r.ok(void 0);failure=()=>{throw new Error("Attempt was successful.")};toString=()=>"{Success: Ok";get[Symbol.toStringTag](){return"Success"}},r.err=e=>new class{reason;constructor(t){this.reason=t}asOption=()=>g.None;failureReason=()=>this.reason;isFailure=()=>!0;isSuccess=()=>!1;result=()=>N(`'${this.reason}'`);map=()=>this;flatMap=()=>this;match=t=>t.err(this.reason);toVoid=()=>r.err(this.reason);failure=()=>this;toString=()=>`{Failure: ${this.reason}`;get[Symbol.toStringTag](){return"Failure"}}(e)})(Bn||(Bn={}));var Le;(function(r){r.exact=(e,t,n)=>{let i=0,o=e.length-1;for(;i<=o;){let s=i+o>>>1,a=n(e[s],t);if(a===0)return s;a<0?i=s+1:o=s-1}return-1},r.exactMapped=(e,t,n,i)=>{let o=0,s=e.length-1;for(;o<=s;){let a=o+s>>>1,c=n(i(e[a]),t);if(c===0)return a;c<0?o=a+1:s=a-1}return-1},r.leftMost=(e,t,n)=>{let i=0,o=e.length;for(;i<o;){let s=i+o>>>1;n(e[s],t)<0?i=s+1:o=s}return i},r.rightMost=(e,t,n)=>{let i=0,o=e.length;for(;i<o;){let s=i+o>>>1;n(e[s],t)<=0?i=s+1:o=s}return o-1},r.stableInsert=(e,t,n)=>{let i=0,o=e.length;for(;i<o;){let s=i+o>>>1;n(e[s],t)<0?i=s+1:o=s}for(;i<e.length&&n(e[i],t)===0;)i++;return i},r.leftMostMapped=(e,t,n,i)=>{let o=0,s=e.length;for(;o<s;){let a=o+s>>>1;n(i(e[a]),t)<0?o=a+1:s=a}return o},r.rightMostMapped=(e,t,n,i)=>{let o=0,s=e.length;for(;o<s;){let a=o+s>>>1;n(i(e[a]),t)<=0?o=a+1:s=a}return s-1},r.rangeMapped=(e,t,n,i)=>[r.leftMostMapped(e,t,n,i),r.rightMostMapped(e,t,n,i)]})(Le||(Le={}));var st=class{static every=(e,t)=>(e&t)===t;static some=(e,t)=>(e&t)>0;#e;#t;constructor(e=32){this.#e=e,this.#t=new Int32Array((e-1>>>5)+1)}getBit(e){let t=e>>>5,n=1<<e-(t<<5);return(this.#t[t]&n)!==0}setBit(e,t){let n=e>>>5,i=1<<e-(n<<5),o=this.#t[n],s=t?o|i:o&~i;return s===o?!1:(this.#t[n]=s,!0)}isEmpty(){return this.#t.every(e=>e===0)}nonEmpty(){return this.#t.some(e=>e>0)}set buffer(e){this.#t.set(new Int32Array(e))}get buffer(){return this.#t.buffer}replace(e){let t=new Int32Array(e),n=!1;for(let i=0;i<t.length;i++)this.#t[i]!==t[i]&&(this.#t[i]=t[i],n=!0);return n}toString(){let e="";for(let t of D.iterateReverse(this.#t))e+=t.toString(2).padStart(32,"0");return e.substring(e.length-this.#e)}clear(){this.#t.fill(0)}};var lp=class{#e;#t=null;constructor(e){this.#e=e}invalidate=()=>this.#t=null;get(){return this.#t===null&&(this.#t=this.#e()),this.#t}terminate(){this.invalidate()}};var dt=class r{static parseCssRgbOrRgba(e){let t=e.match(/\(([^)]+)\)/)?.at(1)?.split(",")?.map(Number);if(R(t)&&t.every(n=>!isNaN(n))){if(t.length===3)return[t[0]/255,t[1]/255,t[2]/255,1];if(t.length===4)return[t[0]/255,t[1]/255,t[2]/255,t[3]]}throw new Error(`${e} is not proper formatted. Example: 'rgb(255, 255, 255)' or 'rgba(255, 255, 255, 1)'`)}static hslToHex(e,t,n){let i=c=>(c+e/30)%12,o=t*Math.min(n,1-n),s=c=>n-o*Math.max(-1,Math.min(i(c)-3,Math.min(9-i(c),1))),a=c=>Math.round(c*255).toString(16).padStart(2,"0");return`#${a(s(0))}${a(s(8))}${a(s(4))}`}static hexToHsl(e){let t=e.startsWith("#")?e.slice(1):e,n=parseInt(t.slice(0,2),16)/255,i=parseInt(t.slice(2,4),16)/255,o=parseInt(t.slice(4,6),16)/255,s=Math.max(n,i,o),a=Math.min(n,i,o),c=(s+a)/2,l=0,d=0;if(s!==a){let h=s-a;switch(d=c>.5?h/(2-s-a):h/(s+a),s){case n:l=((i-o)/h+(i<o?6:0))*60;break;case i:l=((o-n)/h+2)*60;break;case o:l=((n-i)/h+4)*60;break}}return{h:l,s:d,l:c}}static hslStringToHex(e){let[t,n,i]=e.match(/\d+(\.\d+)?/g).map(Number);return r.hslToHex(t,n/100,i/100)}#e;#t;#r;#i;constructor(e,t,n,i=1){this.#e=e,this.#t=t,this.#r=n,this.#i=i}opacity(e){return new r(this.#e,this.#t,this.#r,e)}brightness(e){let t=Math.max(0,Math.min(100,this.#r+e));return new r(this.#e,this.#t,t,this.#i)}saturate(e){return new r(this.#e,this.#t*e,this.#r,this.#i)}fade(e){let t=this.#t*(1-Math.sqrt(e)),n=this.#r+(100-this.#r)*e**3;return new r(this.#e,t,n,this.#i)}toString(){return this.#i===1?`hsl(${this.#e}, ${this.#t}%, ${this.#r}%)`:`hsla(${this.#e}, ${this.#t}%, ${this.#r}%, ${this.#i})`}};var co=(r,e)=>r-e;var Si=Math.PI*2,eI=Math.PI/2,zy=Math.PI/4,tI=1/Math.sqrt(2),X=(r,e,t)=>Math.max(e,Math.min(r,t)),Wr=r=>Math.max(0,Math.min(r,1)),E_=(r,e)=>e+(1-2*e)*Math.max(0,Math.min(r,1)),$n=(r,e)=>Math.floor(r/e)*e;var cp=(r,e,t)=>r+(e-r)*t,S_=(r,e,t)=>r*Math.pow(e/r,t);var mu=(r,e)=>YS(r/e)*e,YS=r=>r-Math.floor(r),kn=r=>Math.pow(2,Math.ceil(Math.log(r)/Math.log(2)));var Uy=(r,e)=>r*e/((2*e-1)*(r-1)+e);var Zr;(function(r){r.valueAt=({slope:i,steps:o,y0:s,y1:a},c)=>r.normalizedAt(c/o,i)*(a-s)+s,r.normalizedAt=(i,o)=>{if(o>.499999&&o<.500001)return i;{let s=X(o,1e-15,.999999999999999);return s*s/(1-s*2)*(Math.pow((1-s)/s,2*i)-1)}},r.inverseAt=(i,o)=>{let s=X(o,1e-15,.999999999999999);return Math.log(i*(1-2*s)/(s*s)+1)/(2*Math.log((1-s)/s))},r.coefficients=i=>{let o=r.valueAt(i,1),a=(r.valueAt(i,2)-o)/(o-i.y0),c=o-a*i.y0;return{m:a,q:c}};function*t(i,o,s,a){let{m:c,q:l}=r.coefficients({slope:i,steps:o,y0:s,y1:a});for(let d=0,h=s;d<o;d++)yield h=c*h+l}r.walk=t;function*n(i,o){let s=1/o,a=r.normalizedAt(s,i),l=(r.normalizedAt(2*s,i)-a)/a;for(let d=0,h=0;d<o;d++)yield h=l*h+a}r.walkNormalized=n,r.byHalf=(i,o,s,a)=>({slope:r.slopeByHalf(o,s,a),steps:i,y0:o,y1:a}),r.slopeByHalf=(i,o,s)=>Math.abs(s-i)<1e-6?.5:(o-i)/(s-i)})(Zr||(Zr={}));var Hi=new DataView(new ArrayBuffer(8)),tr;(function(r){r.MIN_VALUE=-2147483648,r.MAX_VALUE=2147483647,r.toByte=e=>(Hi.setInt8(0,e),Hi.getInt8(0)),r.toShort=e=>(Hi.setInt16(0,e),Hi.getInt16(0)),r.toInt=e=>(Hi.setInt32(0,e),Hi.getInt32(0))})(tr||(tr={}));var In;(function(r){let n=new ArrayBuffer(Float32Array.BYTES_PER_ELEMENT),i=new Float32Array(n),o=new Int32Array(n);r.floatToIntBits=s=>{let a=r.floatToRawIntBits(s);return(a&2139095040)===2139095040&&(a&8388607)!==0?2143289344:a},r.intBitsToFloat=s=>(o[0]=s,i[0]),r.floatToRawIntBits=s=>(i[0]=s,o[0]),r.toFloat32=s=>(Hi.setFloat32(0,s),Hi.getFloat32(0))})(In||(In={}));var uo;(function(r){r.floatToIntBits=e=>{let t=In.floatToIntBits(e),n=t>>>16&32768,i=(t&2147483647)+4096;return i>=1199570944?(t&2147483647)>=1199570944?i<2139095040?n|31744:n|31744|(t&8388607)>>>13:n|31743:i>=947912704?n|i-939524096>>>13:i<855638016?n:(i=(t&2147483647)>>>23,n|(t&8388607|8388608)+(8388608>>>i-102)>>>126-i)},r.intBitsToFloat=e=>{let t=e&1023,n=e&31744;if(n===31744)n=261120;else if(n!==0){if(n+=114688,t===0&&n>115712)return In.intBitsToFloat((e&32768)<<16|n<<13|1023)}else if(t!==0){n=115712;do t<<=1,n-=1024;while((t&1024)===0);t&=1023}return In.intBitsToFloat((e&32768)<<16|(n|t)<<13)}})(uo||(uo={}));var up;(function(r){let e=9218868437227405312n,t=4503599627370495n,n=new ArrayBuffer(BigInt64Array.BYTES_PER_ELEMENT),i=new Float64Array(n),o=new BigInt64Array(n);r.float64ToLongBits=s=>{let a=r.float64ToRawLongBits(s);return(a&e)===e&&(a&t)!==0n?0x7ff8000000000000n:a},r.longBitsToFloat64=s=>(o[0]=s,i[0]),r.float64ToRawLongBits=s=>(i[0]=s,o[0]),r.clamp=s=>(Hi.setFloat64(0,s),Hi.getFloat64(0))})(up||(up={}));var Qe=class{static*empty(){}static one(e){return[e]}static count(e){let t=0;for(let n of e)t++;return t}static some(e,t){for(let n of e)if(t(n))return!0;return!1}static every(e,t){for(let n of e)if(!t(n))return!1;return!0}static reduce(e,t,n){let i=n,o=0;for(let s of e)i=t(i,s,o++);return i}static includes(e,t){for(let n of e)if(n===t)return!0;return!1}static forEach(e,t){for(let n of e)t(n)}static*map(e,t){let n=0;for(let i of e)yield t(i,n++)}static*take(e,t){let n=0;for(let i of e){if(n++>=t)return;yield i}}static filter(e,t){let n=[];for(let i of e)t(i)&&n.push(i);return n}static filterMap(e,t){let n=[];for(let i of e){let o=t(i);R(o)&&n.push(o)}return n}static reverse(e){let t=[];for(let n of e)t.push(n);return t.reverse()}static*pairWise(e){let t=e[Symbol.iterator](),{done:n,value:i}=t.next(),o=i;if(n!==!0)for(;;){let{done:s,value:a}=t.next();if(s===!0){yield[o,null];return}yield[o,a],o=a}}};var Ze=class r{static create(e=1024){return this.use(new ArrayBuffer(e))}static use(e,t=0){return new r(new DataView(e,t))}littleEndian=!1;#e;#t=0;constructor(e){this.#e=e}get remaining(){return this.#e.byteLength-this.#t}get position(){return this.#t}set position(e){e<0?N(`position(${e}) cannot be negative.`):e>this.#e.byteLength?N(`position(${e}) is outside range (${this.#e.byteLength}).`):this.#t=e}writeBoolean(e){this.writeByte(e?1:0)}writeByte(e){this.#r(1),this.#e.setInt8(this.#t++,e)}writeShort(e){this.#r(Int16Array.BYTES_PER_ELEMENT),this.#e.setInt16(this.#t,e,this.littleEndian),this.#t+=Int16Array.BYTES_PER_ELEMENT}writeInt(e){this.#r(Int32Array.BYTES_PER_ELEMENT),this.#e.setInt32(this.#t,e,this.littleEndian),this.#t+=Int32Array.BYTES_PER_ELEMENT}writeLong(e){this.#r(BigInt64Array.BYTES_PER_ELEMENT),this.#e.setBigInt64(this.#t,e,this.littleEndian),this.#t+=BigInt64Array.BYTES_PER_ELEMENT}writeFloat(e){this.#r(Float32Array.BYTES_PER_ELEMENT),this.#e.setFloat32(this.#t,e,this.littleEndian),this.#t+=Float32Array.BYTES_PER_ELEMENT}writeDouble(e){this.#r(Float64Array.BYTES_PER_ELEMENT),this.#e.setFloat64(this.#t,e,this.littleEndian),this.#t+=Float64Array.BYTES_PER_ELEMENT}writeBytes(e){this.#r(e.length);for(let t=0;t<e.length;++t)this.#e.setInt8(this.#t++,e[t])}writeString(e){let t=e.length;this.#r(Int32Array.BYTES_PER_ELEMENT+t*Int16Array.BYTES_PER_ELEMENT),this.writeInt(t);for(let n=0;n<t;n++)this.writeShort(e.charCodeAt(n))}toArrayBuffer(){return this.#e.buffer.slice(0,this.#t)}#r(e){let t=this.#e.byteLength;if(this.#t+e>t){let n=this.#e;this.#e=new DataView(new ArrayBuffer(kn(t+e)));for(let i=0;i<this.#t;i++)this.#e.setInt8(i,n.getInt8(i))}}},Wa=class{#e=0;writeByte(e){this.#e++}writeShort(e){this.#e+=2}writeInt(e){this.#e+=4}writeLong(e){this.#e+=8}writeFloat(e){this.#e+=4}writeDouble(e){this.#e+=8}writeBoolean(e){this.#e++}writeBytes(e){this.#e+=e.length}writeString(e){this.#e+=e.length+4}get count(){return this.#e}},dp=class{#e;#t=0;constructor(e=32){this.#e=new Int8Array(e)}result(){return this.#e}equals(e){return e===this?!0:this.#e.every((t,n)=>e.#e[n]===t)}writeBoolean(e){this.writeByte(e?31:11)}writeShort(e){this.writeByte(e&255),this.writeByte(e>>>8&255)}writeByte(e){this.#t>=this.#e.length&&(this.#t=0),this.#e[this.#t++]^=e}writeInt(e){this.writeByte(e&255),this.writeByte(e>>>8&255),this.writeByte(e>>>16&255),this.writeByte(e>>>24&255)}writeBytes(e){e.forEach(t=>this.writeByte(t))}writeFloat(e){this.writeInt(In.floatToIntBits(e))}writeDouble(e){this.writeLong(up.float64ToLongBits(e))}writeLong(e){this.writeByte(Number(e)&255),this.writeByte(Number(e>>8n)&255),this.writeByte(Number(e>>16n)&255),this.writeByte(Number(e>>24n)&255),this.writeByte(Number(e>>32n)&255),this.writeByte(Number(e>>40n)&255),this.writeByte(Number(e>>48n)&255),this.writeByte(Number(e>>56n)&255)}writeString(e){for(let t=0;t<e.length;t++)this.writeShort(e.charCodeAt(t))}toHexString(){return Array.from(Qe.map(this.#e.values(),e=>(e&255).toString(16).padStart(2,"0"))).join("")}},Ge=class{littleEndian=!1;#e;#t=0;constructor(e,t=0){this.#e=new DataView(e,t)}get position(){return this.#t}set position(e){e<0?N(`position(${e}) cannot be negative.`):e>this.#e.byteLength?N(`position(${e}) is outside range (${this.#e.byteLength}).`):this.#t=e}readByte(){return this.#e.getInt8(this.#t++)}readShort(){let e=this.#e.getInt16(this.#t,this.littleEndian);return this.#t+=Int16Array.BYTES_PER_ELEMENT,e}readInt(){let e=this.#e.getInt32(this.#t,this.littleEndian);return this.#t+=Int32Array.BYTES_PER_ELEMENT,e}readLong(){let e=this.#e.getBigInt64(this.#t,this.littleEndian);return this.#t+=BigInt64Array.BYTES_PER_ELEMENT,e}readFloat(){let e=this.#e.getFloat32(this.#t,this.littleEndian);return this.#t+=Float32Array.BYTES_PER_ELEMENT,e}readDouble(){let e=this.#e.getFloat64(this.#t,this.littleEndian);return this.#t+=Float64Array.BYTES_PER_ELEMENT,e}readBoolean(){return this.readByte()===1}readBytes(e){for(let t=0;t<e.length;t++)e[t]=this.readByte()}readString(){let e=this.readInt(),t="";for(let n=0;n<e;n++)t+=String.fromCharCode(this.readShort());return t}available(e){return this.#t+e<=this.#e.byteLength}remaining(){return this.#e.byteLength-this.#t}skip(e){this.position+=e}};var XS=r=>R(r)?r.value!==void 0?"value":r.get!==void 0?"get":N(`Cannot resolve method key of ${r}`):N("Cannot resolve method key of undefined descriptor"),Za=(r,e,t)=>{if(!R(t))return function(o,s){if(s&&s.kind==="getter")return function(){let a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this),e);if(!R(a?.get))return N(`Cannot find getter for property '${e}'`);let c=a.get.apply(this);return Object.defineProperty(this,e,{value:c,configurable:!1,writable:!1,enumerable:!1}),c}};let n=XS(t),i=q(t[n]);return{[n]:function(...o){if(o.length>0)return N("lazy accessory must not have any construction parameters");let s=i.apply(this);return Object.defineProperty(this,e,{value:n==="get"?s:()=>s,configurable:!1,writable:!1,enumerable:!1}),s}}};var F_;(function(r){r.Transient=Object.freeze({modify:(e,t)=>g.wrap(e()),mark:()=>{}})})(F_||(F_={}));var Dn;(function(r){function*e(){}r.empty=e,r.next=n=>{let{value:i,done:o}=n.next();return o?null:i};function*t(...n){for(let i of n)for(let o of i)yield o}r.flatten=t})(Dn||(Dn={}));var Ga;(function(r){r[r.T=0]="T",r[r.R=1]="R",r[r.B=2]="B",r[r.L=3]="L"})(Ga||(Ga={}));var qa;(function(r){r[r.TL=0]="TL",r[r.TR=1]="TR",r[r.BR=2]="BR",r[r.BL=3]="BL"})(qa||(qa={}));var N_;(function(r){r.outerTangentPoints=(e,t)=>{let n=t.x-e.x,i=t.y-e.y,o=Math.atan2(i,n)+Math.acos((e.r-t.r)/Math.sqrt(n*n+i*i)),s=Math.cos(o),a=Math.sin(o);return[{x:e.x+e.r*s,y:e.y+e.r*a},{x:t.x+t.r*s,y:t.y+t.r*a}]}})(N_||(N_={}));var B_;(function(r){r.zero=()=>({x:0,y:0}),r.create=(e,t)=>({x:e,y:t}),r.clone=e=>({...e}),r.floor=e=>({x:Math.floor(e.x),y:Math.floor(e.y)}),r.length=e=>Math.sqrt(e.x*e.x+e.y*e.y),r.distance=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),r.add=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),r.subtract=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),r.scaleBy=(e,t)=>({x:e.x*t,y:e.y*t}),r.scaleTo=(e,t)=>{let n=t/r.length(e);return{x:e.x*n,y:e.y*n}},r.fromClient=e=>({x:e.clientX,y:e.clientY})})(B_||(B_={}));var gu;(function(r){r.Empty=Object.freeze({x:0,y:0,width:0,height:0}),r.corners=e=>{let t=e.x,n=e.y,i=t+e.width,o=n+e.height;return[{x:t,y:n},{x:i,y:n},{x:i,y:o},{x:t,y:o}]},r.inflate=(e,t)=>({x:e.x-t,y:e.y-t,width:e.width+t*2,height:e.height+t*2}),r.contains=(e,t)=>{let n=t.x>=e.x&&t.y>=e.y,i=t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height;return n&&i},r.isPointInside=(e,t)=>e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height,r.intersect=(e,t)=>{let n=Math.max(e.x,t.x),i=Math.min(e.x+e.width,t.x+t.width),o=Math.min(e.y+e.height,t.y+t.height),s=Math.max(e.y,t.y);return i>n&&o>s},r.axis=(e,t)=>{switch(t){case Ga.T:return e.y;case Ga.R:return e.x+e.width;case Ga.B:return e.y+e.height;case Ga.L:return e.x;default:return Fn(t)}},r.corner=(e,t)=>{switch(t){case qa.TL:return{x:e.x,y:e.y};case qa.TR:return{x:e.x+e.width,y:e.y};case qa.BR:return{x:e.x+e.width,y:e.y+e.height};case qa.BL:return{x:e.x,y:e.y+e.height};default:return Fn(t)}},r.center=e=>({x:e.x+e.width*.5,y:e.y+e.height*.5}),r.isEmpty=e=>e.width===0||e.height===0,r.union=(e,t)=>{if(r.isEmpty(e))r.isEmpty(t)||(e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height);else if(!r.isEmpty(t)){let n=t.x,i=t.y,o=Math.min(e.x,n),s=Math.min(e.y,i);e.width=Math.max(e.x+e.width,n+t.width)-o,e.height=Math.max(e.y+e.height,i+t.height)-s,e.x=o,e.y=s}}})(gu||(gu={}));var $_;(function(r){r.width=e=>e.xMax-e.xMin,r.height=e=>e.yMax-e.yMin,r.from=(e,t)=>{e.xMin=t.xMin,e.xMax=t.xMax,e.yMin=t.yMin,e.yMax=t.yMax},r.extend=(e,t)=>{e.xMin-=t,e.yMin-=t,e.xMax+=t,e.yMax+=t},r.padding=(e,[t,n,i,o])=>(e.xMin+=o,e.yMin+=t,e.xMax-=n,e.yMax-=i,e),r.intersectPoint=(e,t)=>e.xMin<=t.x&&t.x<e.xMax&&e.yMin<=t.y&&t.y<e.yMax,r.intersectThat=(e,t)=>t.xMin<e.xMax&&t.xMax>e.xMin&&t.yMin<e.yMax&&t.yMax>e.yMin,r.center=e=>({x:(e.xMin+e.xMax)*.5,y:(e.yMin+e.yMax)*.5})})($_||($_={}));var k_;(function(r){r.Identity=Object.freeze([0,0,0,0])})(k_||(k_={}));var I_;(function(r){r.intersects=(n,i,o,s,a,c,l,d)=>{let h=e(n,i,o,s,a,c),f=e(n,i,o,s,l,d);if((h|f)===0||(h&f)!==0)return!1;let v=t(a,c,l,d,n,o);return v!==t(a,c,l,d,i,o)||v!==t(a,c,l,d,i,s)||v!==t(a,c,l,d,n,s)};let e=(n,i,o,s,a,c)=>{let l=0;return a<=n?l|=1:a>=i&&(l|=2),c<=o?l|=8:c>=s&&(l|=4),l},t=(n,i,o,s,a,c)=>(o-n)*(c-i)-(a-n)*(s-i)>=0})(I_||(I_={}));var D_;(function(r){r.Identity={valueToAxis:e=>e,axisToValue:e=>e},r.toClamped=(e,t,n)=>({valueToAxis:i=>e.valueToAxis(X(i,t,n)),axisToValue:i=>X(e.axisToValue(i),t,n)}),r.createClamped=(e,t)=>({valueToAxis:n=>X(n,e,t),axisToValue:n=>X(n,e,t)})})(D_||(D_={}));var M_;(function(r){r.fromBuffers=async(...e)=>{let t=e.reduce((o,s)=>o+s.byteLength,0),n=new Uint8Array(t),i=0;for(let o of e)n.set(new Uint8Array(o),i),i+=o.byteLength;return await crypto.subtle.digest("SHA-256",n)},r.equals=(e,t)=>{B(e.byteLength===32,"First hash has invalid length"),B(t.byteLength===32,"Second hash has invalid length");let n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<32;o++)if(n[o]!==i[o])return!1;return!0},r.toString=e=>Array.from(new Uint8Array(e)).map(t=>t.toString(16).padStart(2,"0")).join("")})(M_||(M_={}));var vu;(function(r){r.intersect1D=(e,t,n,i)=>Math.max(e,n)<=Math.min(t,i)})(vu||(vu={}));var xt=class{#e=new Set;#t;constructor(){this.#t=new Proxy({},{get:(e,t)=>(...n)=>this.#e.forEach(i=>Object.getPrototypeOf(i)===Object.getPrototypeOf({})?_(i[t],...n):i[t]?.apply(i,n))})}get proxy(){return this.#t}get size(){return this.#e.size}subscribe(e){return this.#e.add(e),{terminate:()=>this.#e.delete(e)}}forEach(e){this.#e.forEach(e)}terminate(){this.#e.clear()}};var T_=(r,...e)=>new Proxy([],{get(t,n){if(typeof n=="string"){let i=Number(n);if(!isNaN(i)&&i>=0&&Number.isInteger(i))return new r(...e)}return n===Symbol.iterator?function*(){for(;;)yield new r(...e)}:t[n]},has(t,n){if(typeof n=="string"){let i=Number(n);if(!isNaN(i)&&i>=0)return!0}return n in t}});var ks=class{static createIfAbsent(e,t,n){let i=e.get(t);return i===void 0&&(i=n(t),e.set(t,i)),i}};var yu=class r{static#e=Object.freeze(new Set);static empty=()=>r.#e};var Is=class r{#e;#t;constructor(e,t){this.#e=new Map(e),this.#t=g.wrap(t),this.#t.ifSome(n=>Array.from(this.#e.values()).forEach(i=>i.sort(n)))}[Symbol.iterator](){return this.#e.entries()}clear(){this.#e.clear()}containsEntry(e,t){return Qe.some(this.#e.entries(),n=>e===n[0]&&n[1].includes(t))}containsKey(e){return Qe.includes(this.#e.keys(),e)}containsValue(e){return Qe.some(this.#e.values(),t=>t.includes(e))}get(e){return this.#e.get(e)??D.empty()}isEmpty(){return this.keyCount()===0}add(e,t){let n=ks.createIfAbsent(this.#e,e,()=>[]);if(this.#t.isEmpty())n.push(t);else{let i=Le.stableInsert(n,t,this.#t.unwrap());n.splice(i,0,t)}}addAll(e,t){let n=ks.createIfAbsent(this.#e,e,()=>[]);n.push(...t),this.#t.nonEmpty()&&n.sort(this.#t.unwrap())}remove(e,t){let n=this.#e.get(e);if(n===void 0)return!1;{let i=n.indexOf(t);return i===-1?!1:(n.splice(i,1),n.length===0&&this.#e.delete(e),!0)}}removeFromKeyIf(e,t){let n=this.#e.get(e);if(n===void 0)return null;{let i=n.findIndex(t);if(i===-1)return null;{let o=n.splice(i,1)[0];return n.length===0&&this.#e.delete(e),o}}}removeValueIf(e){let t=[];for(let[n,i]of this.#e.entries())for(let o of i.filter(s=>e(s)))t.push([n,o]);for(let[n,i]of t)this.remove(n,i);return new Set(t.map(([,n])=>n))}removeKey(e){let t=this.#e.get(e);return this.#e.delete(e),t??D.empty()}forEach(e){Qe.forEach(this.#e.entries(),t=>e(t[0],t[1]))}keyCount(){return this.#e.size}keys(){return this.#e.keys()}sortKeys(e){let t=this.clone(),n=Array.from(this.keys()).sort(e);this.#e.clear();for(let i of n)this.addAll(i,t.get(i));return this}clone(){let e=new r;return this.#e.forEach((t,n)=>{e.#e.set(n,t.map(i=>i))}),e}},Ha=class r{map;constructor(e){this.map=new Map(e?.map(t=>{let n=t[0],i=t[1];return[n,new Set(i)]}))}clear(){this.map.clear()}containsEntry(e,t){return Qe.some(this.map.entries(),n=>e===n[0]&&n[1].has(t))}containsKey(e){return Qe.includes(this.map.keys(),e)}containsValue(e){return Qe.some(this.map.values(),t=>t.has(e))}get(e){return this.map.get(e)??yu.empty()}isEmpty(){return this.keyCount()===0}add(e,t){ks.createIfAbsent(this.map,e,()=>new Set).add(t)}addAll(e,t){let n=ks.createIfAbsent(this.map,e,()=>new Set);for(let i of t)n.add(i)}remove(e,t){let n=this.map.get(e);return n===void 0?!1:n.delete(t)?(n.size===0&&this.map.delete(e),!0):!1}removeValueIf(e){let t=new Set;for(let[n,i]of this.map.entries()){for(let o of i)e(o)&&(i.delete(o),t.add(o));i.size===0&&this.map.delete(n)}return t}removeFromKeyIf(e,t){let n=this.map.get(e);if(n===void 0)return null;for(let i of n)if(t(i))return n.delete(i),n.size===0&&this.map.delete(e),i;return null}removeKey(e){let t=this.map.get(e);return this.map.delete(e),t??yu.empty()}forEach(e){Qe.forEach(this.map.entries(),t=>e(t[0],t[1]))}keyCount(){return this.map.size}keys(){return this.map.keys()}sortKeys(e){let t=this.clone(),n=Array.from(this.keys()).sort(e);this.map.clear();for(let i of n)this.addAll(i,t.get(i));return this}clone(){let e=new r;return this.map.forEach((t,n)=>{e.map.set(n,new Set(Array.from(t)))}),e}};var W=Object.freeze({Empty:{terminate:mr},create:r=>({terminate:r}),many:(...r)=>({terminate:()=>{for(;r.length>0;)r.pop().terminate()}})}),j=class r{#e=[];isEmpty(){return this.#e.length===0}nonEmpty(){return this.#e.length>0}own(e){return this.#e.push(e),e}ownAll(...e){for(let t of e)this.#e.push(t)}spawn(){let e=new r;return e.own({terminate:()=>D.removeOpt(this.#e,e)}),this.own(e)}terminate(){for(;this.#e.length>0;)this.#e.pop().terminate()}};var ne=class{static subscribeMany(e,...t){return W.many(...t.map(n=>n.subscribe(()=>e(n))))}#e=new Set;subscribe(e){return this.#e.add(e),{terminate:()=>this.#e.delete(e)}}isEmpty(){return this.#e.size===0}notify(e){this.#e.forEach(t=>t(e))}observers(){return this.#e}terminate(){this.#e.clear()}};var Ir;(function(r){let e=Object.freeze({});r.empty=()=>e,r.mergeNoOverlap=(t,n)=>{let i=new Set(Object.keys(t));for(let o of Object.keys(n))if(i.has(o))return N(`'${o}' is an overlapping key`);return{...t,...n}},r.include=(t,...n)=>{let i={};for(let o of n)i[o]=t[o];return i},r.exclude=(t,...n)=>{let i=new Set(n);return Object.entries(t).reduce((o,[s,a])=>(i.has(s)||(o[s]=a),o),{})},r.overwrite=(t,n)=>Object.assign(t,n)})(Ir||(Ir={}));var C_;(function(r){r.seal=e=>new class{getValue(){return e}subscribe(t){return W.Empty}catchupAndSubscribe(t){return t(this),W.Empty}}})(C_||(C_={}));var R_;(function(r){r.False=new class{getValue(){return!1}setValue(e){}subscribe(e){return W.Empty}catchupAndSubscribe(e){return e(this),W.Empty}},r.inverseBoolean=e=>new class{getValue(){return!e.getValue()}setValue(t){e.setValue(!t)}subscribe(t){return e.subscribe(t)}catchupAndSubscribe(t){return t(this),this.subscribe(t)}}})(R_||(R_={}));var ho=class{#e;#t=g.None;constructor(e){this.#e=new ne,this.wrap(e)}wrap(e){this.wrapOption(g.wrap(e))}wrapOption(e){this.#t.equals(e)||(this.#t=e,this.#e.notify(this))}clear(e){this.#t.isEmpty()||(R(e)&&e(this.#t.unwrap()),this.#t=g.None,this.#e.notify(this))}assert(e){return this.#t.assert(e),this}contains(e){return this.#t.contains(e)}equals(e){return this.#t.equals(e)}flatMap(e){return this.#t.flatMap(e)}ifSome(e){return this.#t.ifSome(e)}ifAbsent(e){return this.#t.ifAbsent(e)}isEmpty(){return this.#t.isEmpty()}map(e){return this.#t.map(e)}mapOr(e,t){return this.#t.mapOr(e,t)}match(e){return this.#t.match(e)}nonEmpty(){return this.#t.nonEmpty()}unwrap(e){return this.#t.unwrap(e)}unwrapOrElse(e){return this.#t.unwrapOrElse(e)}unwrapOrNull(){return this.#t.unwrapOrNull()}unwrapOrUndefined(){return this.#t.unwrapOrUndefined()}subscribe(e){return this.#e.subscribe(()=>e(this))}catchupAndSubscribe(e){return e(this),this.#e.subscribe(()=>e(this))}terminate(){this.#e.terminate()}};var rr=class{#e;#t=g.None;#r;constructor(e,t){this.#e=new ne,this.#r=t?.guard(e)??e,this.#t=g.wrap(t)}setValue(e){this.#t.nonEmpty()&&(e=this.#t.unwrap().guard(e)),this.#r!==e&&(this.#r=e,this.#e.notify(this))}getValue(){return this.#r}subscribe(e){return this.#e.subscribe(e)}catchupAndSubscribe(e){return e(this),this.#e.subscribe(e)}terminate(){this.#e.terminate()}toString(){return`{DefaultObservableValue value: ${this.#r}`}};var jy=class{#e;#t;#r;constructor(e,t){this.#e=e,this.#t=t,this.#r=t-e}x(e){return(this.clamp(e)-this.#e)/this.#r}y(e){return this.#e+X(e,0,1)*this.#r}clamp(e){return X(e,this.#e,this.#t)}floating(){return!0}},Ly=class{#e;#t;#r;constructor(e,t){this.#e=X(Math.round(e),tr.MIN_VALUE,tr.MAX_VALUE),this.#t=X(Math.round(t),tr.MIN_VALUE,tr.MAX_VALUE),this.#r=this.#t-this.#e}x(e){return(this.clamp(e)-this.#e)/this.#r}y(e){return this.#e+Math.round(X(e,0,1)*this.#r)}clamp(e){return X(Math.round(e),this.#e,this.#t)}floating(){return!1}},Ky=class{#e;#t;#r;constructor(e,t){this.#e=e,this.#t=t,this.#r=Math.log(t/e)}x(e){return Math.log(X(e,this.#e,this.#t)/this.#e)/this.#r}y(e){return this.#e*Math.exp(X(e,0,1)*this.#r)}clamp(e){return Math.min(this.#t,Math.max(this.#e,e))}floating(){return!0}},Wy=class{#e;constructor(e){this.#e=e}x(e){let t=this.#e.findIndex(n=>n===e);return t===-1?N(`Could not find index for ${e}`):t/(this.#e.length-1)}y(e){let t=Math.round(X(e,0,1)*(this.#e.length-1));return t>-1?q(this.#e.at(t),`Could not find value for ${e}`):N(`Index ${t} is out of box.`)}clamp(e){return e}floating(){return!1}},Zy=class{#e;#t;#r;#i;#n;constructor(e,t,n){this.#e=e,this.#t=n;let i=e*e,o=n*n,s=t*t,a=e+n-2*t,c=n-t;this.#r=((2*n-t)*e-t*n)/a,this.#i=(c*i+(s-o)*e+t*o-s*n)/(i+(2*n-4*t)*e+o-4*t*n+4*s),this.#n=-c/a}y(e){return e<=0?Number.NEGATIVE_INFINITY:e>=1?this.#t:this.#r-this.#i/(e+this.#n)}x(e){return this.#e>=e?0:this.#t<=e?1:-this.#i/(e-this.#r)-this.#n}clamp(e){return Math.min(this.#t,e)}floating(){return!0}},P;(function(r){r.linear=(o,s)=>new jy(o,s),r.linearInteger=(o,s)=>new Ly(o,s),r.exponential=(o,s)=>new Ky(o,s),r.values=o=>new Wy(o),r.decibel=(o,s,a)=>new Zy(o,s,a);let e=new class{x(o){return o?1:0}y(o){return o>=.5}clamp(o){return o}floating(){return!1}},t=r.linear(0,1),n=r.linear(-1,1);r.bool=e;let i=r.decibel(-72,-12,0);r.unipolar=()=>t,r.bipolar=()=>n,r.DefaultDecibel=i})(P||(P={}));var A;(function(r){r.percent=({bipolar:o,fractionDigits:s}={})=>new e("%",s,!1,o),r.numeric=({unit:o,fractionDigits:s,unitPrefix:a,bipolar:c}={})=>new e(o,s,a,c),r.indices=(o,s)=>new class{x(a){return{unit:o,value:s[a]}}y(a){let c=s.indexOf(a);return c===-1?{type:"unknown",value:"\u{1F4A3}"}:{type:"explicit",value:c}}},r.values=(o,s,a)=>new class{x(c){return{unit:o,value:a.at(s.indexOf(c))??"N/A"}}y(c){let l=a.indexOf(c);return l===-1?{type:"unknown",value:"\u{1F4A3}"}:{type:"explicit",value:s[l]}}},r.bool=new class{y(o){switch(o.trim()){case"on":case"yes":case"true":return{type:"explicit",value:!0};default:return{type:"explicit",value:!1}}}x(o){return{value:o?"On":"Off",unit:""}}},r.boolValues=(o,s)=>new class{y(a){switch(a.trim()){case s:case"on":case"yes":case"true":return{type:"explicit",value:!0};case o:default:return{type:"explicit",value:!1}}}x(a){return{value:a?"On":"Off",unit:""}}};class e{#e;#t;#r;#i;constructor(s,a,c,l){this.#e=s??"",this.#t=a??0,this.#r=c??!1,this.#i=l??!1}y(s){let a=s.trim(),c=parseFloat(a);if(isNaN(c))return{type:"unknown",value:a};if(this.#e==="%")return{type:"explicit",value:c/100};if(a.endsWith("%"))return{type:"unitValue",value:this.#i?X(c/200+.5,0,1):X(c/100,0,1)};{a.endsWith(this.#e)&&this.#e.length>0&&(a=a.slice(0,-this.#e.length));let h=/(\d+)(\D+)/.exec(a)?.at(2)?.at(0);if(R(h)){let f=t.indexOf(h);if(f>-1)return{type:"explicit",value:c*Math.pow(10,(f-4)*3)}}return{type:"explicit",value:c}}}x(s){if(Number.isNaN(s))return{value:"\u{1F4A3}",unit:this.#e};if(Number.isFinite(s)){if(this.#e==="%")return this.#i?{value:(s*200-100).toFixed(this.#t),unit:this.#e}:{value:(s*100).toFixed(this.#t),unit:this.#e};if(this.#r){let{value:a,prefix:c}=i(s);return{value:a.toFixed(this.#t),unit:`${c}${this.#e}`}}else return{value:s.toFixed(this.#t),unit:this.#e}}else return{value:s===Number.POSITIVE_INFINITY?"\u221E":"-\u221E",unit:this.#e}}}let t=Object.freeze(["p","n","\u03BC","m","","k","M","G","T"]),n=o=>Math.log(o)/Math.log(9.999999999999998),i=o=>{let s=Math.floor(n(o)/3),a=t[s+4];return R(a)?{value:o*Math.pow(10,s*-3),prefix:a}:{value:o,prefix:""}};r.decible=r.numeric({unit:"db",fractionDigits:1}),r.panning=r.percent({unit:"%",fractionDigits:0})})(A||(A={}));var po;(function(r){r.alwaysTrue=()=>!0,r.alwaysFalse=()=>!1,r.definedPredicate=e=>e!=null})(po||(po={}));var O_;(function(r){r.Empty=Object.freeze(e=>{}),r.split=(e,t)=>{let n=new Float32Array(t);return D.create(i=>o=>{n[i]=o,e(n.reduce((s,a)=>s+a,0)/t)},t)},r.splitWithWeights=(e,t)=>{let n=t.length,i=new Float32Array(n);if(t.length===0)return N("Weights must not be empty");if(t.some(a=>a<=0))return N("Weights must be greater than zero");let o=t.reduce((a,c)=>a+c,0),s=o>0?t.map(a=>a/o):D.create(()=>1/n,n);return D.create(a=>c=>{i[a]=c,e(i.reduce((l,d,h)=>l+d*s[h],0))},n)}})(O_||(O_={}));var Ja;(function(r){r.create=(e=252854082)=>new Gy(e),r.monotoneAscending=(e,t=128,n=r.create())=>{let i=e.length;if(i<2)return N("Array must have at least 2 elements");let o=0;for(let a=1;a<i;a++){let c=Math.floor(n.uniform()*(1+t))+1;e[a]=c,o+=c}let s=0;e[0]=0;for(let a=1;a<i;a++)s+=e[a],e[a]=s/o;return e}})(Ja||(Ja={}));var Gy=class{#e=0;constructor(e){this.setSeed(e)}setSeed(e){this.#e=e&4294967295}nextDouble(e,t){return e+this.uniform()*(t-e)}nextInt(e,t){return e+Math.floor(this.uniform()*(t-e))}nextElement(e){return e[Math.floor(this.uniform()*e.length)]}nextBoolean(){return this.uniform()<.5}uniform(){let e=this.#e+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}};var gr;(function(r){class e{}r.createBuilder=n=>{let i=o=>{let s=o instanceof Array?[]:{};return Object.entries(o).forEach(([a,c])=>{c instanceof e?s[a]=c.initialValue():typeof c=="object"&&(s[a]=i(c))}),s};return()=>new t(n,Object.seal(i(n)))},r.bool=new class extends e{read(n){return n.readByte()===1}write(n,i){n.writeByte(i?1:0)}initialValue(){return!1}},r.int8=new class extends e{read(n){return n.readByte()}write(n,i){n.writeByte(i)}initialValue(){return 0}},r.int16=new class extends e{read(n){return n.readShort()}write(n,i){n.writeShort(i)}initialValue(){return 0}},r.int32=new class extends e{read(n){return n.readInt()}write(n,i){n.writeInt(i)}initialValue(){return 0}},r.float=new class extends e{read(n){return n.readFloat()}write(n,i){n.writeFloat(i)}initialValue(){return 0}},r.double=new class extends e{read(n){return n.readDouble()}write(n,i){n.writeDouble(i)}initialValue(){return 0}},r.int64=new class extends e{read(n){return n.readLong()}write(n,i){n.writeLong(i)}initialValue(){return 0n}},r.floats=n=>new class extends e{read(i,o){for(let s=0;s<o.length;s++)o[s]=i.readFloat();return o}write(i,o){for(let s=0;s<o.length;s++)i.writeFloat(o[s])}initialValue(){return new Float32Array(n)}},r.doubles=n=>new class extends e{read(i,o){for(let s=0;s<o.length;s++)o[s]=i.readDouble();return o}write(i,o){for(let s=0;s<o.length;s++)i.writeDouble(o[s])}initialValue(){return new Float64Array(n)}};class t{#e;#t;#r;constructor(i,o){this.#e=i,this.#t=o,this.#r=this.#i()}get object(){return this.#t}get bytesTotal(){return this.#r}read(i){let o=(s,a)=>{Object.entries(s).forEach(([c,l])=>{let d=a;l instanceof e?d[c]=l.read(i,d[c]):typeof l=="object"&&o(l,d[c])})};o(this.#e,this.#t)}write(i){let o=(s,a)=>{Object.entries(s).forEach(([c,l])=>{let d=a;l instanceof e?l.write(i,d[c]):typeof l=="object"&&o(l,d[c])})};o(this.#e,this.#t)}#i(){let i=new Wa;return this.write(i),i.count}}})(gr||(gr={}));var Qa=class{#e;#t;#r;constructor(e,t){this.#e=e,this.#t=t,this.#r=[]}add(e,t=!1){let n=this.#e(e),i=Le.leftMostMapped(this.#r,n,this.#t,this.#e),o=this.#r[i];return R(o)&&this.#t(this.#e(o),n)===0?t?(this.#r.splice(i,1,e),!0):!1:(this.#r.splice(i,0,e),!0)}getOrCreate(e,t){let n=Le.leftMostMapped(this.#r,e,this.#t,this.#e),i=this.#r[n];if(R(i)&&this.#t(this.#e(i),e)===0)return i;let o=t(e);return this.#r.splice(n,0,o),o}addMany(e){for(let t of e)this.#r.push(t);try{return this.#r.sort((t,n)=>{let i=this.#t(this.#e(t),this.#e(n));if(i===0)throw"cancel";return i}),!0}catch(t){if(t==="cancel"){let n=new Map(this.entries());return this.#r.splice(0,this.#r.length,...n.values()),this.#r.sort((i,o)=>this.#t(this.#e(i),this.#e(o))),!1}return N(t)}}removeByValue(e){return this.removeByKey(this.#e(e))}removeByKey(e){let t=Le.leftMostMapped(this.#r,e,this.#t,this.#e),n=this.#r[t];return R(n)&&this.#t(this.#e(n),e)===0?(this.#r.splice(t,1),n):N(`Could not remove ${e}`)}removeByKeyIfExist(e){let t=Le.leftMostMapped(this.#r,e,this.#t,this.#e),n=this.#r[t];return R(n)&&this.#t(this.#e(n),e)===0?(this.#r.splice(t,1),n):null}removeRange(e,t){this.#r.splice(e,(t??this.#r.length)-e)}removeByPredicate(e){let t=0,n=this.#r.length;for(;--n>=0;)e(this.#r[n])&&(this.#r.splice(n,1),t++);return t}get(e){return q(this.#i(e),`Unknown key: ${e}`)}getOrThrow(e,t){let n=this.#i(e);if(R(n))return n;throw t()}opt(e){return g.wrap(this.#i(e))}getOrNull(e){return this.#i(e)??null}getByIndex(e){return this.#r[e]}hasKey(e){return R(this.#i(e))}hasValue(e){return R(this.#i(this.#e(e)))}size(){return this.#r.length}isEmpty(){return this.#r.length===0}forEach(e){this.values().forEach(e)}values(){return this.#r}entries(){return this.#r.map(e=>[this.#e(e),e])}clear(){D.clear(this.#r)}[Symbol.iterator](){return this.#r.values()}#i(e){let t=Le.leftMostMapped(this.#r,e,this.#t,this.#e),n=this.#r[t];return R(n)&&this.#t(this.#e(n),e)===0?n:void 0}};var V_;(function(r){r.hyphenToCamelCase=e=>e.replace(/-([a-z])/g,t=>t[1].toUpperCase()),r.fallback=(e,t)=>R(e)&&e.length>0?e:t,r.endsWithDigit=e=>/\d$/.test(e),r.nonEmpty=(e,t)=>R(e)&&e.trim().length>0?e:t,r.toArrayBuffer=e=>{let t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return t},r.getUniqueName=(e,t)=>{let n=new Set(e),i=t,o=1;if(n.has(t)||n.has(`${t} 1`))o=2;else return t;for(;n.has(i=`${t} ${o++}`););return i}})(V_||(V_={}));var Ya=(()=>{let r=g.None;return{info:e=>r.match({none:()=>Promise.resolve(),some:t=>t.info(e)}),approve:e=>r.match({none:()=>Promise.resolve(!0),some:t=>t.approve(e)}),progress:e=>r.match({none:()=>({message:"",terminate:mr}),some:t=>t.progress(e)}),install:e=>{B(r.isEmpty(),"RuntimeNotification already installed"),r=g.wrap(e)}}})();var z_;(function(r){let e=new ne;r.subscribe=t=>e.subscribe(t),r.dispatch=t=>e.notify(t)})(z_||(z_={}));var fo=class r{static POSITIVE_INFINITY=new r(Number.POSITIVE_INFINITY);static millis=e=>new r(e);static seconds=e=>new r(e*r.#e);static minutes=e=>new r(e*r.#t);static hours=e=>new r(e*r.#r);static days=e=>new r(e*r.#i);static#e=1e3;static#t=6e4;static#r=36e5;static#i=864e5;#n;constructor(e){this.#n=e}millis(){return this.#n}absSeconds(){return Math.abs(this.#n)/r.#e}absMinutes(){return Math.abs(this.#n)/r.#t}absHours(){return Math.abs(this.#n)/r.#r}absDays(){return Math.abs(this.#n)/r.#i}split(){return{d:Math.floor(this.absDays()),h:Math.floor(this.absHours())%24,m:Math.floor(this.absMinutes())%60,s:Math.floor(this.absSeconds())%60}}isNow(){return this.#n===0}isPast(){return this.#n<0}isFuture(){return this.#n>0}toUnitString(){let e,t,n=Math.floor(Math.abs(this.#n)/1e3),i=Math.floor(n/60),o=Math.floor(i/60),s=Math.floor(o/24);return n<60?(e=n,t="second"):i<60?(e=i,t="minute"):o<24?(e=o,t="hour"):(e=s,t="day"),new Intl.RelativeTimeFormat("en",{numeric:"auto",style:"long"}).format(e*Math.sign(this.#n),t)}toString(){if(isNaN(this.#n))return"NaN";if(!isFinite(this.#n))return"\u221E";let{d:e,h:t,m:n,s:i}=this.split();return e>0?[r.#o("d",e),r.#o("h",t),r.#o("m",n),r.#o("s",i)].join(", "):t>0?[r.#o("h",t),r.#o("m",n),r.#o("s",i)].join(", "):n>0?[r.#o("m",n),r.#o("s",i)].join(", "):i>0?r.#o("s",i):"now"}static#o=(e,t)=>{switch(e){case"d":return`${t} ${t<2?"day":"days"}`;case"h":return`${t} ${t<2?"hour":"hours"}`;case"m":return`${t} ${t<2?"minute":"minutes"}`;case"s":return`${t} ${t<2?"second":"seconds"}`;default:return Fn(e)}}};var Xa;(function(r){let e;(function(t){t[t.READING=0]="READING",t[t.READ=1]="READ",t[t.WRITING=2]="WRITING",t[t.WRITTEN=3]="WRITTEN"})(e||(e={})),r.writer=(t,n,i)=>{if(t.bytesTotal+1>n.byteLength)return N("Insufficient memory allocated.");let o=new Uint8Array(n),s=Ze.use(n,1);return Atomics.store(o,0,e.READ),{tryWrite:()=>Atomics.compareExchange(o,0,e.READ,e.WRITING)===e.WRITING?(i(t.object),s.position=0,t.write(s),Atomics.store(o,0,e.WRITTEN),!0):!1}},r.reader=(t,n)=>{let i=new SharedArrayBuffer(t.bytesTotal+1),o=new Uint8Array(i),s=new Ge(i,1);return{buffer:i,tryRead:()=>Atomics.compareExchange(o,0,e.WRITTEN,e.READING)===e.READING?(s.position=0,t.read(s),n(t.object),Atomics.store(o,0,e.READ),!0):!1}}})(Xa||(Xa={}));var E;(function(r){r.length=16,r.generate=()=>e(crypto.getRandomValues(new Uint8Array(r.length))),r.sha256=async t=>{let n=typeof process<"u"&&process.env?.VITEST==="true";return crypto.subtle.digest("SHA-256",n?new Uint8Array(t.slice(0)):t).then(i=>e(new Uint8Array(i.slice(0,r.length))))},r.validateBytes=t=>r.parse(r.toString(t)),r.validateString=t=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t),r.asString=t=>r.validateString(t)?t:N(`Invalid UUID format: ${t}`),r.fromDataInput=t=>{let n=new Uint8Array(r.length);return t.readBytes(new Int8Array(n.buffer)),n},r.toDataOutput=(t,n)=>t.writeBytes(new Int8Array(n.buffer)),r.toString=t=>{let n=D.create(i=>(i+256).toString(16).substring(1),256);return n[t[0]]+n[t[1]]+n[t[2]]+n[t[3]]+"-"+n[t[4]]+n[t[5]]+"-"+n[t[6]]+n[t[7]]+"-"+n[t[8]]+n[t[9]]+"-"+n[t[10]]+n[t[11]]+n[t[12]]+n[t[13]]+n[t[14]]+n[t[15]]},r.parse=t=>{let n=t.replace(/-/g,"").toLowerCase();if(n.length!==32)return N("Invalid UUID format");let i=new Uint8Array(r.length);for(let o=0,s=0;o<32;o+=2,s++)i[s]=parseInt(n.slice(o,o+2),16);return i},r.Comparator=(t,n)=>{if(t.length!==r.length||n.length!==r.length)return N("Unexpected array length for uuid(v4)");for(let i=0;i<r.length;i++){let o=t[i]-n[i];if(o!==0)return o}return 0},r.equals=(t,n)=>r.Comparator(t,n)===0,r.newSet=t=>new Qa(t,r.Comparator),r.Lowest=r.parse("00000000-0000-4000-8000-000000000000"),r.Highest=r.parse("FFFFFFFF-FFFF-4FFF-BFFF-FFFFFFFFFFFF"),r.fromInt=t=>{let n=new Uint8Array(r.Lowest),i=new Uint8Array(new Uint32Array([t]).buffer);for(let o=0;o<4;o++)n[o]=i[o];return n},r.zType=t=>t.string().refine(n=>r.validateString(n),{message:"Invalid UUID format"}).transform(n=>n);let e=t=>(B(t.length===r.length,"UUID must be 16 bytes long"),t[6]=t[6]&15|64,t[8]=t[8]&63|128,t)})(E||(E={}));var U_;(function(r){r.create=o=>R(o)?R(o?.snap)?r.snap(o?.trackLength,o?.snap?.snapLength,Array.isArray(o?.snap?.threshold)?o?.snap.threshold:[o?.snap?.threshold]):r.identity(o?.trackLength):r.identity(),r.snap=(o=e,s=t,a)=>new i(o,s/o,a),r.identity=(o=e)=>new n(o);let e=128,t=24;class n{length;#e=NaN;#t=NaN;#r=1;constructor(s){this.length=s}begin(s){this.#t=this.#e=s}moveBy(s){B(!isNaN(this.#t),()=>"value has never been set"),this.#e+=s/this.length*this.#r,this.#t=X(this.#e,0,1)}ratio(s){this.#r=s}value(){return B(!isNaN(this.#t),()=>"value has never been set"),this.#t}disable(){}enable(){}}class i{#e;#t;#r;#i;#n=NaN;#o=NaN;#s=1;#l=!0;constructor(s,a,c){B(a>0,()=>`margin(${a}) must be greater then 0`),B(D.isSorted(c),()=>"thresholds are not sorted"),B(a<s,()=>`margin(${a}) must be lower then length(${s})`),this.#e=s,this.#t=a,this.#r=c,this.#i=c.map((l,d)=>l+d*this.#t)}begin(s){this.#n=this.#l?this.valueToX(s):s,this.#o=s}moveBy(s){B(isFinite(this.#o)&&isFinite(this.#n),()=>"value has never been set (moveBy)"),this.#n+=s/this.#e*this.#s,this.#o=this.#l?this.xToValue(this.#n):X(this.#n,0,1)}ratio(s){this.#s=s}value(){return B(isFinite(this.#o),()=>"value has never been set (value)"),this.#o}disable(){this.#l&&(this.#l=!1,this.#n=this.xToValue(this.#n))}enable(){this.#l||(this.#l=!0,this.#n=this.valueToX(this.#n))}valueToX(s){let a=Le.rightMost(this.#r,s,co);if(a<0)return s;{let c=this.#i[a],l=this.#r[a];return s===l?c+this.#t/2:c+this.#t+(s-l)}}xToValue(s){let a=X(s,0,1+this.#t*this.#r.length),c=Le.rightMost(this.#i,a,co);if(c<0)return a;{let l=this.#i[c],d=this.#r[c];return a>l+this.#t?a-(l+this.#t)+d:d}}get margin(){return this.#t}}})(U_||(U_={}));var hp;(function(r){class e extends Error{}r.Warning=e,r.warn=n=>{throw new e(n)};class t extends Error{constructor(i){super(`${i} not found`)}}r.FileNotFound=t,r.AbortError=typeof DOMException>"u"?{name:"AbortError",message:""}:Object.freeze(new DOMException("AbortError")),r.isAbort=n=>n===r.AbortError||r.isDOMException(n)&&n.name==="AbortError",r.CatchAbort=n=>n===r.AbortError?void 0:N(n),r.isOverconstrained=n=>lo(n)&&"constraint"in n,r.isDOMException=n=>lo(n)&&Oy(n,"name","string")&&Oy(n,"message","string"),r.toString=n=>{let i=o=>o.split(`
`).slice(0,4).join(`
`);if(n instanceof Error)return i(n.stack||n.message);if(typeof n=="string")return n;if(n&&typeof n=="object"){let o=n;if(o.stack)return i(o.stack);if(o.message)return o.message;try{return JSON.stringify(n,null,2)}catch{}}return String(n)}})(hp||(hp={}));var pp=Symbol.for("@openDAW/lib-std");globalThis[pp]?console.debug(`%c${pp.description}%c is already available in ${globalThis.constructor.name}.`,"color: hsl(10, 83%, 60%)","color: inherit"):(globalThis[pp]=!0,console.debug(`%c${pp.description}%c is now available in ${globalThis.constructor.name}.`,"color: hsl(200, 83%, 60%)","color: inherit"));var pe=class r{static Empty=new r(2);#e;constructor(e=2){this.#e=D.create(()=>new Float32Array(128),e)}clear(e,t){this.#e.forEach(n=>n.fill(0,e,t))}numChannels(){return this.#e.length}getChannel(e){return e<this.numChannels()?this.#e[e]:this.#e[this.numChannels()-1]}assertSanity(){B(!this.#e.some(e=>e.some(t=>isNaN(t))),"AudioBuffer is invalid (NaN)")}channels(){return this.#e}replace(e){this.replaceInto(e.#e)}replaceInto(e){B(e.length===2,"mixLayout: target.length must be 2"),B(this.#e.length===1||this.#e.length===2,"mixLayout: target.length must be 1 or 2"),this.#e.length===1?(e[0].set(this.#e[0]),e[1].set(this.#e[0])):(e[0].set(this.#e[0]),e[1].set(this.#e[1]))}mixInto(e){B(e.length===2,"mixLayout: target.length must be 2"),B(this.#e.length===1||this.#e.length===2,"mixLayout: target.length must be 1 or 2");let[t,n]=e;if(this.#e.length===1){let[i]=this.#e;for(let o=0;o<128;o++)t[o]+=i[o],n[o]+=i[o]}else{let[i,o]=this.#e;for(let s=0;s<128;s++)t[s]+=i[s],n[s]+=o[s]}}};var at;(function(r){r[r.Idle=0]="Idle",r[r.Attack=1]="Attack",r[r.Decay=2]="Decay",r[r.Sustain=3]="Sustain",r[r.Release=4]="Release"})(at||(at={}));var el=class{#e;#t=at.Idle;#r=0;#i=0;#n=0;#o=0;#s=0;#l=0;#a=0;#c=0;#u=0;constructor(e){this.#e=1/e}get gate(){return this.#t!==at.Idle&&this.#t!==at.Release}get complete(){return this.#t===at.Idle}get value(){return this.#r}get phase(){return this.#i}set(e,t,n,i){this.#n=e,this.#o=t,this.#s=n,this.#l=i,this.#h()}#h(){switch(this.#t){case at.Attack:{let e=1-this.#r;this.#a=e*this.#e/Math.max(this.#n,1e-6);break}case at.Decay:{let e=this.#r-this.#s;this.#c=e*this.#e/Math.max(this.#o,1e-6);break}case at.Release:{let e=this.#r;this.#u=e*this.#e/Math.max(this.#l,1e-6);break}case at.Sustain:case at.Idle:{this.#a=this.#e/Math.max(this.#n,1e-6),this.#c=(1-this.#s)*this.#e/Math.max(this.#o,1e-6),this.#u=this.#s*this.#e/Math.max(this.#l,1e-6);break}}}gateOn(){this.#t=at.Attack}gateOff(){this.#t!==at.Idle&&(this.#t=at.Release,this.#h())}forceStop(){this.#t=at.Idle,this.#r=0}process(e,t,n){for(let i=t;i<n;)switch(this.#t){case at.Attack:for(;i<n;){if(this.#r+=this.#a,this.#r>=1){this.#r=1,this.#i=1,e[i++]=this.#r,this.#t=at.Decay,this.#h();break}e[i++]=this.#i=this.#r}break;case at.Decay:for(;i<n;){if(this.#r-=this.#c,this.#r<=this.#s){this.#r=this.#s,this.#i=2,e[i++]=this.#r,this.#t=at.Sustain,this.#h();break}this.#i=1+(1-this.#r)/(1-this.#s),e[i++]=this.#r}break;case at.Sustain:e.fill(this.#s,i,n);return;case at.Release:for(;i<n;){if(this.#r-=this.#u,this.#r<=0){this.#r=0,this.#i=0,e[i++]=this.#r,this.#t=at.Idle,this.#h();break}this.#i=3+(1-this.#r/this.#s),e[i++]=this.#r}break;case at.Idle:e.fill(0,i,n);return}}};var j_;(function(r){function e(t,n,i={}){let{interval:o=64,scanSteps:s=1024,scanSamples:a=2048,minBPM:c=90,maxBPM:l=180}=i,d=new Float32Array(Math.floor(t.length/o)),h=0,f=0,v=0;for(let H of t){let xe=Math.abs(H);h+=(xe-h)*(xe>h?1/8:1/512),++f===o&&(f=0,d[v++]=h)}if(!d.length)return NaN;let m=(H,xe)=>H[Math.floor(xe)]??0,y=H=>n/(H/60)/o,x=H=>n/(H*o)*60,S=[-32,-16,-8,-4,-2,-1,1,2,4,8,16,32],C=[-.5,-.25,.25,.5],V=H=>{let xe=Math.random()*d.length,Te=m(d,xe),et=0,er=0;for(let Nt of S){let Pe=1/Math.abs(Nt);et+=Pe*Math.abs(m(d,xe+Nt*H)-Te),er+=Pe}for(let Nt of C){let Pe=Math.abs(Nt);et-=Pe*Math.abs(m(d,xe+Nt*H)-Te),er+=Pe}return et/er},K=H=>{let xe=0;for(let Te=0;Te<a;++Te)xe+=V(H);return xe/a},G=y(c),ye=y(l),ke=(G-ye)/s,re=c,be=1/0;for(let H=ye;H<=G;H+=ke){let xe=x(H),Te=K(H)*(c/xe);Te<be&&(be=Te,re=xe)}return re}r.detect=e})(j_||(j_={}));var Ji=class{a1=0;a2=0;b0=0;b1=0;b2=0;constructor(){this.identity()}identity(){this.setNormalizedCoefficients(1,0,0,1,0,0)}setLowpassParams(e,t=Math.SQRT1_2){if(e=X(e,0,1),e>=.5)this.setNormalizedCoefficients(1,0,0,1,0,0);else if(e>0){let n=Si*e,i=Math.sin(n)/(2*t),o=Math.cos(n),s=(1-o)/2,a=s,c=2*s,l=s,d=1+i,h=-2*o,f=1-i;this.setNormalizedCoefficients(a,c,l,d,h,f)}else this.setNormalizedCoefficients(0,0,0,1,0,0);return this}setHighpassParams(e,t=Math.SQRT1_2){if(e=X(e,0,1),e===1)this.setNormalizedCoefficients(0,0,0,1,0,0);else if(e>0){let n=Si*e,i=Math.sin(n)/(2*t),o=Math.cos(n),s=(1+o)/2,a=s,c=-2*s,l=s,d=1+i,h=-2*o,f=1-i;this.setNormalizedCoefficients(a,c,l,d,h,f)}else this.setNormalizedCoefficients(1,0,0,1,0,0);return this}setNormalizedCoefficients(e,t,n,i,o,s){let a=1/i;return this.b0=e*a,this.b1=t*a,this.b2=n*a,this.a1=o*a,this.a2=s*a,this}setLowShelfParams(e,t){e=X(e,0,1);let n=Math.pow(10,t/40);if(e===1)this.setNormalizedCoefficients(n*n,0,0,1,0,0);else if(e>0){let i=Si*e,s=.5*Math.sin(i)*Math.sqrt((n+1/n)*(1/1-1)+2),a=Math.cos(i),c=2*Math.sqrt(n)*s,l=n+1,d=n-1,h=n*(l-d*a+c),f=2*n*(d-l*a),v=n*(l-d*a-c),m=l+d*a+c,y=-2*(d+l*a),x=l+d*a-c;this.setNormalizedCoefficients(h,f,v,m,y,x)}else this.setNormalizedCoefficients(1,0,0,1,0,0);return this}setHighShelfParams(e,t){e=X(e,0,1);let n=Math.pow(10,t/40);if(e===1)this.setNormalizedCoefficients(1,0,0,1,0,0);else if(e>0){let i=Si*e,s=.5*Math.sin(i)*Math.sqrt((n+1/n)*(1/1-1)+2),a=Math.cos(i),c=2*Math.sqrt(n)*s,l=n+1,d=n-1,h=n*(l+d*a+c),f=-2*n*(d+l*a),v=n*(l+d*a-c),m=l-d*a+c,y=2*(d-l*a),x=l-d*a-c;this.setNormalizedCoefficients(h,f,v,m,y,x)}else this.setNormalizedCoefficients(n*n,0,0,1,0,0);return this}setPeakingParams(e,t,n){e=X(e,0,1),t=Math.max(0,t);let i=Math.pow(10,n/40);if(e>0&&e<1)if(t>0){let o=Si*e,s=Math.sin(o)/(2*t),a=Math.cos(o),c=1+s*i,l=-2*a,d=1-s*i,h=1+s/i,f=-2*a,v=1-s/i;this.setNormalizedCoefficients(c,l,d,h,f,v)}else this.setNormalizedCoefficients(i*i,0,0,1,0,0);else this.setNormalizedCoefficients(1,0,0,1,0,0);return this}setAllpassParams(e,t){if(e=X(e,0,1),t=Math.max(0,t),e>0&&e<1)if(t>0){let n=Si*e,i=Math.sin(n)/(2*t),o=Math.cos(n),s=1-i,a=-2*o,c=1+i,l=1+i,d=-2*o,h=1-i;this.setNormalizedCoefficients(s,a,c,l,d,h)}else this.setNormalizedCoefficients(-1,0,0,1,0,0);else this.setNormalizedCoefficients(1,0,0,1,0,0);return this}setNotchParams(e,t){if(e=X(e,0,1),t=Math.max(0,t),e>0&&e<1)if(t>0){let n=Si*e,i=Math.sin(n)/(2*t),o=Math.cos(n),s=1,a=-2*o,c=1,l=1+i,d=-2*o,h=1-i;this.setNormalizedCoefficients(s,a,c,l,d,h)}else this.setNormalizedCoefficients(0,0,0,1,0,0);else this.setNormalizedCoefficients(1,0,0,1,0,0);return this}setBandpassParams(e,t){if(e=Math.max(0,e),t=Math.max(0,t),e>0&&e<1){let n=Si*e;if(t>0){let i=Math.sin(n)/(2*t),o=Math.cos(n),s=i,a=0,c=-i,l=1+i,d=-2*o,h=1-i;this.setNormalizedCoefficients(s,a,c,l,d,h)}else this.setNormalizedCoefficients(1,0,0,1,0,0)}else this.setNormalizedCoefficients(0,0,0,1,0,0);return this}getFrequencyResponse(e,t,n){B(e.length===t.length&&e.length===n.length,"Array lengths do not match");let i=this.b0,o=this.b1,s=this.b2,a=this.a1,c=this.a2;for(let l=0;l<e.length;++l){let d=-Math.PI*2*e[l],h=Math.cos(d),f=Math.sin(d),v=i+((o+s*h)*h-s*f*f),m=(o+s*h)*f+s*f*h,y=1+((a+c*h)*h-c*f*f),x=(a+c*h)*f+c*f*h,S=y*y+x*x,C=(v*y+m*x)/S,V=(m*y-v*x)/S;t[l]=Math.sqrt(C*C+V*V),n[l]=Math.atan2(V,C)}}};var wt=class{#e=0;#t=0;#r=0;#i=0;reset(){this.#e=0,this.#t=0,this.#r=0,this.#i=0}process({a1:e,a2:t,b0:n,b1:i,b2:o},s,a,c,l){let d=this.#e,h=this.#t,f=this.#r,v=this.#i;for(let m=c;m<l;m++){let y=s[m],x=a[m]=n*y+i*d+o*h-e*f-t*v+1e-18-1e-18;h=d,d=y,v=f,f=x}this.#e=d,this.#t=h,this.#r=f,this.#i=v}processFrame({a1:e,a2:t,b0:n,b1:i,b2:o},s){let a=n*s+i*this.#e+o*this.#t-e*this.#r-t*this.#i+1e-18-1e-18;return this.#t=this.#e,this.#e=s,this.#i=this.#r,this.#r=a,a}},mo=class{#e;#t;constructor(e){this.#e=D.create(()=>new wt,e),this.#t=this.#e.length}get order(){return this.#t}set order(e){this.#t!==e&&(this.#t=e,this.reset())}reset(){this.#e.forEach(e=>e.reset())}process(e,t,n,i,o){for(let s=0;s<this.#t;s++)this.#e[s].process(e,t,n,i,o),t=n}processFrame(e,t){for(let n=0;n<this.#t;n++)t=this.#e[n].processFrame(e,t);return t}},xu=512,fp=class{#e;#t=new Ji;#r;#i=-1;constructor(e,t,n){this.#r=new mo(4),this.#e=new Float32Array(xu+1);let i=Math.log(t/e),o=1/n;for(let s=0;s<=xu;s++)this.#e[s]=e*Math.exp(s/xu*i)*o}get order(){return this.#r.order}set order(e){this.#r.order=e}reset(){this.#r.reset()}process(e,t,n,i,o,s){let a=this.#e,c=this.#r,l=this.#t,d=i/c.order**1.25,h=o,f=this.#i;for(;h<s;){let v=Math.floor(Wr(n[h])*xu),m=h+1;for(;m<s&&Math.floor(Wr(n[m])*xu)===v;)++m;v!==f&&(f=v,l.setLowpassParams(a[v],d)),c.process(l,e,t,h,m),h=m}this.#i=f}};var L_=Math.log(10)/20,wu=(r=60,e=440)=>e*Math.pow(2,(r+3)/12-6);var Oe=r=>Math.exp(r*L_),qy=r=>Math.log(r)/L_,tl=r=>Oe(20*Math.log10(r));var eF=.02,K_=1e3,mp=class{#e;#t;#r;#i;#n;#o;#s=NaN;#l=NaN;#a=0;#c=0;#u=0;#h=8;#d=0;#p=1;#f=!1;constructor(e){this.#e=e,this.#t=Math.ceil(e*eF)|0,this.#r=new Ji,this.#r.setLowpassParams(.5),this.#i=[new wt,new wt],this.#n=[new Float32Array(128),new Float32Array(128)],this.#o=new Float32Array(2)}process(e,t,n,i){let[o,s]=e,[a,c]=t,[l,d]=this.#n;this.#i[0].process(this.#r,o,l,n,i),this.#i[1].process(this.#r,s,d,n,i);let h=Oe(this.#d),f=Oe(-this.#d/2),v=this.#e/this.#s,m=Math.pow(2,this.#h)-1,y=1/m;for(let x=n;x<i;x++)this.#c>0&&(this.#s+=this.#a,--this.#c===0&&(this.#a=0,this.#s=this.#l),this.#r.setLowpassParams(Math.max(this.#s,K_)/this.#e)),this.#u+=1,this.#u>=v&&(this.#u-=v,this.#o[0]=X(Math.round(l[x]*h*m)*y,-1,1),this.#o[1]=X(Math.round(d[x]*h*m)*y,-1,1)),a[x]=(o[x]*(1-this.#p)+this.#o[0]*this.#p)*f,c[x]=(s[x]*(1-this.#p)+this.#o[1]*this.#p)*f;this.#f=!0}setCrush(e){let t=S_(20,this.#e*.5,e);this.#f&&isFinite(this.#s)?(this.#l=t,this.#a=(t-this.#s)/this.#t,this.#c=this.#t):(this.#s=t,this.#r.setLowpassParams(Math.max(this.#s,K_)/this.#e))}setBitDepth(e){this.#h=X(e,1,16)}setBoost(e){this.#d=e}setMix(e){this.#p=Wr(e)}reset(){this.#f=!1,this.#l=NaN,this.#a=0,this.#c=0,this.#u=0,this.#o.fill(0),this.#i[0].reset(),this.#i[1].reset()}};var W_;(function(r){r.Major=[0,2,4,5,7,9,11],r.Minor=[0,2,3,5,7,8,10],r.Minor7=[0,3,7,10],r.Minor9=[0,3,7,10,14],r.Dominant7=[0,2,4,5,7,9,10],r.NoteLabels=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],r.compile=(e,t,n,i)=>D.create(o=>{let s=n+o*2,a=e[s%7]+Math.floor(s/7)*12;return t+a},i),r.toString=e=>r.NoteLabels[e%12]+(Math.floor(e/12)-2)})(W_||(W_={}));var gp=class r{static#e=10;#t=1;#r=0;#i=0;#n=0;#o=0;#s=0;set(e,t,n){this.#t=e,this.#r=t*r.#e,this.#i=cp(1e-5,1-1e-5,n),this.#n=2**Math.abs(this.#r),this.#o=1/this.#i,this.#s=1/(1-this.#i)}compute(e){let t=e-Math.floor(e),n,i,o,s;return this.#r<0?(n=1-t,i=1-this.#i,o=this.#s,s=this.#o):(n=t,i=this.#i,o=this.#o,s=this.#s),n<=i?1-(1-n*o)**this.#n*this.#t:((1-n)*s)**this.#n*this.#t-this.#t+1}};var bu;(function(r){r.Comparator=(e,t)=>e.position-t.position,r.PositionExtractor=e=>e.position})(bu||(bu={}));var Ds;(function(r){r.complete=e=>e.position+e.duration,r.DescendingComparator=(e,t)=>r.complete(t)-r.complete(e)})(Ds||(Ds={}));var vr;(function(r){r.globalToLocal=(t,n)=>mu(n-t.position+t.loopOffset,t.loopDuration),r.locateLoop=({position:t,complete:n,loopOffset:i,loopDuration:o},s,a)=>{let c=t-i,l=c+o;if(c>=a||l<=s)return g.None;let d=Math.max(c,s),h=Math.min(l,a);return g.wrap({index:0,rawStart:c,rawEnd:l,regionStart:Math.max(c,t),regionEnd:Math.min(l,n),resultStart:d,resultEnd:h,resultStartValue:c<d?(d-c)/o:0,resultEndValue:l>h?(h-c)/o:1})};function*e({position:t,complete:n,loopOffset:i,loopDuration:o},s,a){let c=t-i,l=Math.max(t,s),d=Math.min(n,a),h=Math.floor((l-c)/o),f=c+h*o;for(;f<d;){let v=f+o,m=Math.max(f,t),y=Math.min(v,n),x=Math.max(f,l),S=Math.min(v,d),C=f<x?(x-f)/o:0,V=v>S?(S-f)/o:1;yield{index:h++,rawStart:f,rawEnd:v,regionStart:m,regionEnd:y,resultStart:x,resultEnd:S,resultStartValue:C,resultEndValue:V},f=v}}r.locateLoops=e})(vr||(vr={}));var go=class r{static DefaultComparator=(e,t)=>e.position-t.position;static create(e){return new r(e??r.DefaultComparator)}#e;constructor(e){this.#e=new vp(e)}add(e){this.#e.add(e)}remove(e){return this.#e.remove(e)}contains(e){return this.#e.contains(e)}clear(){this.#e.clear()}optAt(e){return this.#e.optAt(e)}asArray(){return this.#e.asArray()}lowerEqual(e,t){return this.#e.lowerEqual(e,t)}greaterEqual(e,t){return this.#e.greaterEqual(e,t)}floorLastIndex(e){return this.#e.floorLastIndex(e)}ceilFirstIndex(e){return this.#e.ceilFirstIndex(e)}iterateFrom(e,t){return this.#e.isEmpty()?Dn.empty():this.#e.iterateFrom(e,t)}iterateRange(e,t,n){return this.#e.isEmpty()?Dn.empty():this.#e.iterate(this.#e.ceilFirstIndex(e),t,n)}length(){return this.#e.length()}isEmpty(){return this.#e.isEmpty()}onIndexingChanged(){this.#e.onIndexingChanged()}},vo=class r{static Comparator=(e,t)=>e.position-t.position;static create(e){return new r(e)}#e;constructor(e=r.Comparator){this.#e=new vp(e)}add(e){this.#e.add(e)}remove(e){return this.#e.remove(e)}contains(e){return this.#e.contains(e)}clear(){this.#e.clear()}optAt(e){return this.#e.optAt(e)}asArray(){return this.#e.asArray()}lowerEqual(e,t){return this.#e.lowerEqual(e,t)}greaterEqual(e,t){return this.#e.greaterEqual(e,t)}floorLastIndex(e){return this.#e.floorLastIndex(e)}ceilFirstIndex(e){return this.#e.ceilFirstIndex(e)}iterateFrom(e,t){return this.#e.isEmpty()?Dn.empty():this.#e.iterateFrom(e,t)}iterateRange(e,t){if(this.#e.isEmpty())return Dn.empty();let n=Math.max(0,this.#e.floorLastIndex(e)),i=this.#e.optAt(n);if(i===null)return Dn.empty();for(;i.position+i.duration<=e;)if(i=this.#e.optAt(++n),i===null||i.position>=t)return Dn.empty();return this.#e.iterate(n,t)}length(){return this.#e.length()}isEmpty(){return this.#e.isEmpty()}onIndexingChanged(){this.#e.onIndexingChanged()}},rl=class{#e;constructor(){this.#e=[]}addAndRetain(e){if(this.#e.length===0)this.#e.push(e);else{let t=Le.leftMost(this.#e,e,Ds.DescendingComparator);this.#e.splice(t,0,e)}}*overlapping(e,t){let n=this.#e.filter(i=>i.position<=e&&e<i.position+i.duration);yield*R(t)?n.sort(t):n}*releaseLinearCompleted(e){if(this.#e.length!==0)for(let t=this.#e.length-1;t>=0;t--){let n=this.#e[t];if(Ds.complete(n)<e)this.#e.splice(t,1),yield n;else return}}*releaseAll(){if(this.#e.length!==0)for(let e=this.#e.length-1;e>=0;e--){let t=this.#e[e];Number.POSITIVE_INFINITY>t.duration&&(this.#e.splice(e,1),yield t)}}isEmpty(){return this.#e.length===0}nonEmpty(){return this.#e.length>0}clear(){D.clear(this.#e)}},vp=class{comparator;#e=[];#t=!1;modCount=0;constructor(e){this.comparator=e}add(e){++this.modCount,this.#e.push(e),this.#e.length>1&&(this.#t=!0)}remove(e){++this.modCount;let t=this.#e.indexOf(e);return t===-1?!1:(this.#e.splice(t,1),!0)}contains(e){if(this.#e.length===0)return!1;this.#t&&this.#r();let n=e.position,i=Le.leftMostMapped(this.#e,n,co,bu.PositionExtractor);for(let o=i;o<this.#e.length;o++){let s=this.#e[o];if(s===e)return!0;if(s.position!==n)return!1}return!1}clear(){++this.modCount,D.clear(this.#e),this.#t=!1}optAt(e){return e<0||e>=this.#e.length?null:(this.#t&&this.#r(),this.#e[e])}asArray(){return this.#t&&this.#r(),this.#e}lowerEqual(e,t){if(t===void 0)return this.optAt(this.floorLastIndex(e));let n=this.floorLastIndex(e);for(;n>=0;){let i=this.#e[n--];if(t(i))return i}return null}greaterEqual(e,t){if(t===void 0)return this.optAt(this.ceilFirstIndex(e));let n=this.ceilFirstIndex(e);for(;n<this.#e.length;){let i=this.#e[n++];if(t(i))return i}return null}floorLastIndex(e){return this.#t&&this.#r(),Le.rightMostMapped(this.#e,e,co,bu.PositionExtractor)}ceilFirstIndex(e){return this.#t&&this.#r(),Le.leftMostMapped(this.#e,e,co,bu.PositionExtractor)}iterateFrom(e,t){let n=this.floorLastIndex(e),i=n;if(i<0)return this.iterate(0,tr.MAX_VALUE,t);for(;i>=0;){let o=this.optAt(i);if(o!==null&&t!==void 0&&t(o))return this.iterate(i,tr.MAX_VALUE,t);i--}return this.iterate(n,tr.MAX_VALUE,t)}length(){return this.#e.length}isEmpty(){return this.#e.length===0}onIndexingChanged(){this.#t=this.length()>1}*iterate(e,t,n=po.alwaysTrue){for(this.#t&&this.#r();e<this.#e.length;){let i=this.#e[e++];if(i.position>=t)return;n(i)&&(yield i)}}#r(){this.#e.sort(this.comparator),this.#t=!1}};var yp=class r{static reverse(e){return e=(e&1431655765)<<1|e>>>1&1431655765,e=(e&858993459)<<2|e>>>2&858993459,e=(e&252645135)<<4|e>>>4&252645135,e=e<<24|(e&65280)<<8|e>>>8&65280|e>>>24,e}#e;#t;#r;#i;constructor(e){this.#e=e;let t=e/2;this.#t=32-Math.floor(Math.log2(e))|0,this.#r=new Float32Array(t),this.#i=new Float32Array(t);for(let n=0;n<t;n++){let i=2*Math.PI*n/e;this.#r[n]=Math.cos(i),this.#i[n]=Math.sin(i)}}process(e,t){let n,i,o,s;for(let l=0;l<this.#e;++l)i=r.reverse(l)>>>this.#t,i>l&&(s=e[l],e[l]=e[i],e[i]=s,s=t[l],t[l]=t[i],t[i]=s);let a=this.#r,c=this.#i;for(let l=2;l<=this.#e;l<<=1){let d=l>>1,h=this.#e/l;for(n=0;n<this.#e;n+=l){let f=n+d;for(i=n,o=0;i<f;i++,o=o+h|0){let v=i+d|0,m=a[o],y=c[o],x=e[v],S=t[v],C=x*m+S*y,V=S*m-x*y,K=e[i],G=t[i];e[v]=K-C,t[v]=G-V,e[i]=K+C,t[i]=G+V}}if(l===this.#e)break}}};var Hy=r=>{let e=.25*r+.25;return 4*(Math.abs(e-Math.round(e))-.25)};var Jy=(r,e)=>Math.floor(3840/e)*r,Z_=(r,e=4,t=4)=>{let n=Jy(1,t),i=Math.floor(r/n),o=Math.floor(i/e),a=(Math.floor(r)-Jy(o*e,t))%n,c=Math.floor(a/240),l=a%240;return{bars:o,beats:i-o*e,semiquavers:c,ticks:l}},G_=(r,e)=>r*e/60*960,q_=(r,e)=>r*60/960/e,tF=(r,e)=>e*60/960/r,rF=(r,e,t)=>G_(r/t,e),iF=(r,e,t)=>q_(r,e)*t,Y={Bar:3840,Quarter:960,SemiQuaver:240,fromSignature:Jy,toParts:Z_,secondsToPulses:G_,pulsesToSeconds:q_,secondsToBpm:tF,samplesToPulses:rF,pulsesToSamples:iF,toString:(r,e=4,t=4)=>{let{bars:n,beats:i,semiquavers:o,ticks:s}=Z_(r|0,e,t);return`${n+1}.${i+1}.${o+1}:${s}`}};var ir;(function(r){r.builder=()=>new e,r.toDouble=([t,n])=>t/n,r.toPPQN=([t,n])=>Y.fromSignature(t,n);class e{#e=[];add(n){return this.#e.push(n),this}asArray(){return this.#e}asAscendingArray(){return this.#e.toSorted((n,i)=>r.toDouble(n)-r.toDouble(i))}asDescendingArray(){return this.#e.toSorted((n,i)=>r.toDouble(i)-r.toDouble(n))}}})(ir||(ir={}));var Qi=class{static*iterate(e,t,n){let i=Math.ceil(e/n),o=i*n;for(;o<t;)yield o,o=++i*n}static*iterateWithIndex(e,t,n){let i=Math.ceil(e/n),o=i*n;for(;o<t;)yield{position:o,index:i},o=++i*n}};var il=class{#e=0;#t=NaN;#r=NaN;#i=0;#n=0;constructor(){}reset(){this.#e=0,this.#t=NaN,this.#r=NaN,this.#i=0,this.#n=0}init(e){this.#e=e,isNaN(this.#t)&&(this.#t=this.#e)}currentFrequency(){return this.#t}glideTo(e,t){if(t===0){this.#e=e;return}this.#e=this.#t,this.#r=e,this.#i=0,this.#n=t}process(e,t,n,i){if(isNaN(this.#r)){for(let o=n;o<i;o++)e[o]*=this.#e;this.#t=this.#e}else{let o=Y.samplesToPulses(1,t,sampleRate);for(let s=n;s<i;s++){if(this.#i+=o/this.#n,this.#i>=1){this.#i=1,this.#e=this.#r,this.#r=NaN;for(let a=s;a<i;a++)e[a]*=this.#e;break}e[s]*=this.#t=this.#e+(this.#r-this.#e)*this.#i}}}advance(e,t,n){if(isNaN(this.#r))this.#t=this.#e;else{let i=Y.samplesToPulses(n-t,e,sampleRate);this.#i+=i/this.#n,this.#i>=1?(this.#i=1,this.#e=this.#t=this.#r,this.#r=NaN):this.#t=this.#e+(this.#r-this.#e)*this.#i}}};var xp=class{#e;#t;constructor(){this.#e=[],this.#t=new Map}addVertex(e){B(!this.#e.includes(e),"Vertex already exists"),this.#e.push(e),B(!this.#t.has(e),"Predecessor already exists"),this.#t.set(e,[])}removeVertex(e){D.remove(this.#e,e);let t=this.#t.delete(e);B(t,"Predecessor does not exists")}getPredecessors(e){return this.#t.get(e)??D.empty()}predecessors(){return this.#t}vertices(){return this.#e}addEdge([e,t]){let n=q(this.#t.get(t),`[add] Edge has unannounced vertex. (${t})`);B(!n.includes(e),`${e} is already marked.`),n.push(e)}removeEdge([e,t]){let n=q(this.#t.get(t),`[remove] Edge has unannounced vertex. (${t})`);B(n.includes(e),`${e} is not marked.`),D.remove(n,e)}isEmpty(){return this.#e.length===0}},wp=class{#e;#t;#r;#i;#n;constructor(e){this.#e=e,this.#t=[],this.#r=new Set,this.#i=new Set,this.#n=new Map}update(){this.#o(),this.#e.vertices().forEach(e=>this.#s(e))}sorted(){return this.#t}hasLoops(){return this.#i.size!==0}#o(){this.#l();let e=new Map;for(let n of this.#e.vertices())this.#n.set(n,new Set),e.set(n,new Set);for(let n of this.#e.vertices())for(let i of this.#e.getPredecessors(n))q(this.#n.get(i),`Could not find Successor for ${i}`).add(n);let t;do{t=!1;for(let n of this.#e.vertices()){q(e.get(n)).clear();for(let i of q(this.#n.get(n)))for(let o of q(this.#n.get(i)))this.#n.get(n)?.has(o)||(t=!0,q(e.get(n)).add(o))}for(let n of this.#e.vertices()){let i=q(this.#n.get(n));q(e.get(n)).forEach(o=>i.add(o))}}while(t)}#s(e){if(!this.#r.has(e)){this.#r.add(e);for(let t of this.#e.getPredecessors(e)){if(q(this.#n.get(e)).has(t)){this.#i.add(e),this.#i.add(t);continue}this.#s(t)}this.#t.push(e)}}#l(){D.clear(this.#t),this.#r.clear(),this.#i.clear(),this.#n.clear()}};var Au;(function(r){r.Identity={warp:e=>e,unwarp:e=>e}})(Au||(Au={}));var bp=class{#e;constructor(e){this.#e=e}warp(e){return this.#t(!0,e)}unwarp(e){return this.#t(!1,e)}#t(e,t){let n=this.#e.duration(),i=$n(t,n),o=(t-i)/n,s=e?this.#e.fx(o):this.#e.fy(o);return i+s*n}};var ze;(function(r){r[r.sine=0]="sine",r[r.triangle=1]="triangle",r[r.saw=2]="saw",r[r.square=3]="square"})(ze||(ze={}));var Ap=class{sampleRate;#e=0;constructor(e){this.sampleRate=e}fill(e,t,n,i,o){let s=n/this.sampleRate;switch(t){case ze.sine:{for(let a=i;a<o;a++)e[a]=Math.sin(this.#e*Math.PI*2),this.#e+=s,this.#e>=1&&(this.#e-=1);break}case ze.triangle:{for(let a=i;a<o;a++){let c=this.#e%1;e[a]=4*Math.abs(c-.5)-1,this.#e+=s,this.#e>=1&&(this.#e-=1)}break}case ze.saw:{for(let a=i;a<o;a++){let c=this.#e%1;e[a]=2*c-1,this.#e+=s,this.#e>=1&&(this.#e-=1)}break}case ze.square:{for(let a=i;a<o;a++){let c=this.#e%1;e[a]=c<.5?1:-1,this.#e+=s,this.#e>=1&&(this.#e-=1)}break}}}reset(){this.#e=0}};var Yi;(function(r){r[r.Linear=0]="Linear",r[r.EqualPower=1]="EqualPower"})(Yi||(Yi={}));var _p;(function(r){r.BlackKeyIndices=[1,3,6,8,10],r.BlackKeyBits=r.BlackKeyIndices.reduce((t,n)=>t|=1<<n,0),r.Names={English:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],German:["C","Cis","D","Dis","E","F","Fis","G","Gis","A","Ais","H"],Solfege:["Do","Do#","R\xE9","R\xE9#","Mi","Fa","Fa#","Sol","Sol#","La","La#","Si"],French:["Do","Do#","R\xE9","R\xE9#","Mi","Fa","Fa#","Sol","Sol#","La","La#","Si"],Spanish:["Do","Do#","Re","Re#","Mi","Fa","Fa#","Sol","Sol#","La","La#","Si"],Japanese:["\u30C9","\u30C9\u266F","\u30EC","\u30EC\u266F","\u30DF","\u30D5\u30A1","\u30D5\u30A1\u266F","\u30BD","\u30BD\u266F","\u30E9","\u30E9\u266F","\u30B7"]},r.isBlackKey=t=>(r.BlackKeyBits&1<<t%12)!==0,r.toFullString=t=>`${r.Names.English[t%12]}${Math.floor(t/12)-2}`,r.keyboardTracking=(t,n)=>Wr((t-60)*n);class e{#e;#t;constructor(n,...i){this.#e=n,this.#t=i.reduce((o,s)=>o|=1<<s,0)}get name(){return this.#e}get bits(){return this.#t}has(n){return(this.#t&1<<n%12)!==0}equals(n){return this.#t===n.bits}}r.StockScales=[new e("Major",0,2,4,5,7,9,11),new e("Natural Minor",0,2,3,5,7,8,10),new e("Harmonic Minor",0,2,3,5,7,8,11),new e("Melodic Minor",0,2,3,5,7,9,11),new e("Dorian",0,2,3,5,7,9,10),new e("Phrygian",0,1,3,5,7,8,10),new e("Lydian",0,2,4,6,7,9,11),new e("Mixolydian",0,2,4,5,7,9,10),new e("Locrian",0,1,3,5,6,8,10),new e("Pentatonic Major",0,2,4,7,9),new e("Pentatonic Minor",0,3,5,7,10),new e("Blues",0,3,5,6,7,10),new e("Whole Tone",0,2,4,6,8,10),new e("Diminished",0,2,3,5,6,8,9,11),new e("Augmented",0,3,4,7,8,11)]})(_p||(_p={}));var nr;(function(r){r.isOfType=e=>e.type==="note-event",r.Comparator=(e,t)=>{let n=e.position-t.position;if(n!==0)return n;let i=e.pitch-t.pitch;return i!==0?i:0},r.curveFunc=(e,t)=>t<0?e**2**-t:1-(1-e)**2**t,r.inverseCurveFunc=(e,t)=>t<0?e**2**t:1-Math.max(0,1-e)**2**-t,r.CompleteComparator=(e,t)=>{let n=Ds.complete(e)-Ds.complete(t);return n!==0?n:e.pitch-t.pitch}})(nr||(nr={}));var _u=class{#e;#t=0;#r=0;constructor(e){this.#e=1/e}generate(e,t,n,i,o){let s=t*this.#e;switch(n){case ze.sine:this.#i(e,s,i,o);break;case ze.saw:this.#n(e,s,i,o);break;case ze.square:this.#o(e,s,i,o);break;case ze.triangle:this.#s(e,s,i,o);break}}generateFromFrequencies(e,t,n,i,o){switch(n){case ze.sine:this.#l(e,t,i,o);break;case ze.saw:this.#a(e,t,i,o);break;case ze.square:this.#c(e,t,i,o);break;case ze.triangle:this.#u(e,t,i,o);break}}#i(e,t,n,i){let o=this.#t;for(let s=n;s<i;s++)e[s]=Math.sin(2*Math.PI*(o%1)),o+=t;this.#t=o}#n(e,t,n,i){let o=this.#t;for(let s=n;s<i;s++){let a=o%1;e[s]=2*a-1-Xi(a,t),o+=t}this.#t=o}#o(e,t,n,i){let o=this.#t;for(let s=n;s<i;s++){let a=o%1;e[s]=(a<.5?1:-1)+Xi(a,t)-Xi((a+.5)%1,t),o+=t}this.#t=o}#s(e,t,n,i){let o=this.#t,s=this.#r,a=4*t;for(let c=n;c<i;c++){let l=o%1,d=(l<.5?1:-1)+Xi(l,t)-Xi((l+.5)%1,t);s=s*.9995+d*a,e[c]=s,o+=t}this.#t=o,this.#r=s}#l(e,t,n,i){let o=this.#e,s=this.#t;for(let a=n;a<i;a++)e[a]=Math.sin(2*Math.PI*(s%1)),s+=t[a]*o;this.#t=s}#a(e,t,n,i){let o=this.#e,s=this.#t;for(let a=n;a<i;a++){let c=t[a]*o,l=s%1;e[a]=2*l-1-Xi(l,c),s+=c}this.#t=s}#c(e,t,n,i){let o=this.#e,s=this.#t;for(let a=n;a<i;a++){let c=t[a]*o,l=s%1;e[a]=(l<.5?1:-1)+Xi(l,c)-Xi((l+.5)%1,c),s+=c}this.#t=s}#u(e,t,n,i){let o=this.#e,s=this.#t,a=this.#r;for(let c=n;c<i;c++){let l=t[c]*o,d=s%1,h=(d<.5?1:-1)+Xi(d,l)-Xi((d+.5)%1,l);a=a*.9995+h*(4*l),e[c]=a,s+=l}this.#t=s,this.#r=a}},Xi=(r,e)=>r<e?(r/=e,r+r-r*r-1):r>1-e?(r=(r-1)/e,r*r+r+r+1):0;var Mn;(function(r){r.zero=()=>({ll:0,lr:0,rl:0,rr:0}),r.identity=()=>({ll:1,lr:0,rl:0,rr:1}),r.update=(e,{gain:t,panning:n,invertL:i,invertR:o,stereo:s,swap:a},c=Yi.EqualPower)=>{let[l,d]=r.panningToGains(n,c),h=l*t,f=d*t;i&&(h*=-1),o&&(f*=-1);let v=Math.max(0,-s),m=Math.max(0,s),y=1-m,x=1+m,S=v*.5,C=1-v,V=(y+x)*.5,K=(y-x)*.5,G=(y-x)*.5,ye=(y+x)*.5,ke=h*(S+C)*V+f*S*K,re=h*(S+C)*G+f*S*ye,be=h*S*V+f*(S+C)*K,H=h*S*G+f*(S+C)*ye;a?(e.ll=re,e.rl=ke,e.lr=H,e.rr=be):(e.ll=ke,e.lr=be,e.rl=re,e.rr=H)},r.panningToGains=(e,t)=>{let n=X(e,-1,1);switch(t){case Yi.Linear:return[Math.min(1-n,1),Math.min(n+1,1)];case Yi.EqualPower:return[Math.cos((n+1)*zy),Math.sin((n+1)*zy)]}},r.applyFrame=(e,t,n)=>[e.ll*t+e.rl*n,e.lr*t+e.rr*n],r.processFrames=(e,t,n,i,o)=>{let[s,a]=t,[c,l]=n;for(let d=i;d<o;d++){let h=s[d],f=a[d];c[d]=e.ll*h+e.rl*f,l[d]=e.lr*h+e.rr*f}},r.replaceFrames=(e,[t,n],i,o)=>{for(let s=i;s<o;s++){let a=t[s],c=n[s];t[s]=e.ll*a+e.rl*c,n[s]=e.lr*a+e.rr*c}}})(Mn||(Mn={}));var Zt;(function(r){r.linear=(n,i=.005)=>new e(Math.ceil(n*i)|0),r.stereoMatrix=(n,i=.005)=>new t(Math.ceil(n*i)|0);class e{#e;#t=0;#r=0;#i=0;#n=0;constructor(i){this.#e=i}set(i,o){this.#t!==i&&(o===!0?(this.#r=i,this.#i=(i-this.#t)/this.#e,this.#n=this.#e):(this.#t=this.#r=i,this.#i=0,this.#n=0))}get(){return this.#t}moveAndGet(){return 0<this.#n&&(this.#t+=this.#i,--this.#n===0&&(this.#i=0,this.#t=this.#r)),this.#t}isFixed(i){return this.#t===i&&this.#n===0}isInterpolating(){return this.#n>0}}class t{#e;#t=Mn.zero();#r=Mn.zero();#i=Mn.zero();#n=0;constructor(i){this.#e=i}update(i,o,s){Mn.update(this.#r,i,o),s===!0?(this.#i.ll=(this.#r.ll-this.#t.ll)/this.#e,this.#i.lr=(this.#r.lr-this.#t.lr)/this.#e,this.#i.rl=(this.#r.rl-this.#t.rl)/this.#e,this.#i.rr=(this.#r.rr-this.#t.rr)/this.#e,this.#n=this.#e):(this.#t.ll=this.#r.ll,this.#t.lr=this.#r.lr,this.#t.rl=this.#r.rl,this.#t.rr=this.#r.rr,this.#i.ll=0,this.#i.lr=0,this.#i.rl=0,this.#i.rr=0,this.#n=0)}processFrames(i,o,s,a){let[c,l]=i,[d,h]=o;if(this.isInterpolating())for(let f=s;f<a;f++){let v=c[f],m=l[f],y=this.moveAndGet();d[f]=y.ll*v+y.rl*m,h[f]=y.lr*v+y.rr*m}else{let f=this.#r;for(let v=s;v<a;v++){let m=c[v],y=l[v];d[v]=f.ll*m+f.rl*y,h[v]=f.lr*m+f.rr*y}}}set(i,o){this.#o(i)||(o===!0?(this.#r.ll=i.ll,this.#r.lr=i.lr,this.#r.rl=i.rl,this.#r.rr=i.rr,this.#i.ll=(i.ll-this.#t.ll)/this.#e,this.#i.lr=(i.lr-this.#t.lr)/this.#e,this.#i.rl=(i.rl-this.#t.rl)/this.#e,this.#i.rr=(i.rr-this.#t.rr)/this.#e,this.#n=this.#e):(this.#t.ll=this.#r.ll=i.ll,this.#t.lr=this.#r.lr=i.lr,this.#t.rl=this.#r.rl=i.rl,this.#t.rr=this.#r.rr=i.rr,this.#i.ll=0,this.#i.lr=0,this.#i.rl=0,this.#i.rr=0,this.#n=0))}get(){return this.#t}moveAndGet(){return 0<this.#n&&(this.#t.ll+=this.#i.ll,this.#t.lr+=this.#i.lr,this.#t.rl+=this.#i.rl,this.#t.rr+=this.#i.rr,--this.#n===0&&(this.#i.ll=0,this.#i.lr=0,this.#i.rl=0,this.#i.rr=0,this.#t.ll=this.#r.ll,this.#t.lr=this.#r.lr,this.#t.rl=this.#r.rl,this.#t.rr=this.#r.rr)),this.#t}isFixed(i){return this.#o(i)&&this.#n===0}isInterpolating(){return this.#n>0}#o(i){return this.#t.ll===i.ll&&this.#t.lr===i.lr&&this.#t.rl===i.rl&&this.#t.rr===i.rr}}r.StereoMatrixRamp=t})(Zt||(Zt={}));var Pu=new Float32Array([-.00048076361,0,.00174689293,0,-.00421638042,0,.00854519755,0,-.01627072692,0,.03203375191,0,-.08251235634,0,.31203505397,.5,.31203505397,0,-.08251235634,0,.03203375191,0,-.01627072692,0,.00854519755,0,-.00421638042,0,.00174689293,0,-.00048076361]),Qy=new Float32Array(12),H_=new Float32Array(11);for(let r=0,e=0,t=0;r<Pu.length;r++)r%2===0?Qy[e++]=Pu[r]:H_[t++]=Pu[r];var Yy=class{#e=new Float32Array(Qy.length);#t=new Float32Array(Pu.length);#r=0;#i=0;reset(){this.#e.fill(0),this.#t.fill(0),this.#r=0,this.#i=0}upsample(e,t,n,i){let o=this.#e,s=Qy,a=H_;for(let c=n;c<i;c++){let l=e[c],d=(c-n)*2;o[this.#r]=l;let h=0;for(let v=0;v<s.length;v++){let m=(this.#r-v+o.length)%o.length;h+=o[m]*s[v]}t[d]=h*2;let f=0;for(let v=0;v<a.length;v++){let m=(this.#r-v+o.length-1)%o.length;f+=o[m]*a[v]}t[d+1]=f*2,this.#r=(this.#r+1)%o.length}}downsample(e,t,n,i){let o=this.#t,s=Pu;for(let a=n;a<i;a++){let c=(a-n)*2;o[this.#i]=e[c],this.#i=(this.#i+1)%o.length,o[this.#i]=e[c+1],this.#i=(this.#i+1)%o.length;let l=0;for(let d=0;d<s.length;d++){let h=(this.#i-1-d+o.length)%o.length;l+=o[h]*s[d]}t[a]=l}}},Pp=class{#e;#t;#r;constructor(e){this.#e=e;let t=e===2?1:e===4?2:3;this.#t=D.create(()=>new Yy,t),this.#r=D.create(n=>new Float32Array(128*(2<<n)),t-1)}reset(){this.#t.forEach(e=>e.reset())}upsample(e,t,n,i){let o=i-n,s=e,a=n,c=i;for(let l=0;l<this.#t.length;l++){let h=l===this.#t.length-1?t:this.#r[l];this.#t[l].upsample(s,h,a,c),s=h,a=0,c=o*(2<<l)}}downsample(e,t,n,i){let o=i-n,s=e,a=o*this.#e;for(let c=this.#t.length-1;c>=0;c--){let l=c===0,d=l?t:this.#r[c-1],h=l?n:0,f=l?i:a/2;this.#t[c].downsample(s,d,h,f),s=d,a=f}}},Ep=class{#e;#t;constructor(e){this.#e=new Pp(e),this.#t=new Pp(e)}reset(){this.#e.reset(),this.#t.reset()}upsample(e,t,n,i){this.#e.upsample(e[0],t[0],n,i),this.#t.upsample(e[1],t[1],n,i)}downsample(e,t,n,i){this.#e.downsample(e[0],t[0],n,i),this.#t.downsample(e[1],t[1],n,i)}};var nl=class{#e;#t;#r;#i;constructor(e){this.#e=new Float32Array(e),this.#t=1/e,this.#r=0,this.#i=0}pushPop(e){let t=e*e;return this.#i-=this.#e[this.#r],this.#i+=t,this.#e[this.#r]=t,++this.#r===this.#e.length&&(this.#r=0),this.#i<=0?0:Math.sqrt(this.#i*this.#t)}processBlock(e,t,n){let i=this.#e,o=i.length,s=this.#r,a=this.#i;for(let c=t;c<n;c++){let l=e[c]*e[c];a+=l-i[s],i[s]=l,++s===o&&(s=0)}return this.#r=s,this.#i=a,a<=0?0:Math.sqrt(a*this.#t)}clear(){this.#e.fill(0),this.#i=0,this.#r=0}};var Sp=class r{static#e=.003;static#t=.02;#r;#i;#n=0;constructor(e){this.#r=Math.pow(.01,1/(r.#e*e)),this.#i=Math.pow(.01,1/(r.#t*e))}clear(){this.#n=0}replace(e,t,n){let i=this.#r,o=this.#i,[s,a]=e.channels(),c=this.#n;for(let l=t;l<n;++l){let d=s[l],h=a[l],f=Math.max(Math.abs(d),Math.abs(h));if(c=f>c?i*(c-f)+f:o*(c-f)+f,c>1){let v=1/c;s[l]=d*v,a[l]=h*v}}this.#n=c}};var Fi=class{#e;value=0;constructor(e,t){this.#e=1-Math.exp(-1/(e*t))}process(e){return this.value+=this.#e*(e-this.value),this.value}};var Fp=class{#e=new j;#t;#r;constructor(e){this.#t=this.#e.own(new ne),this.#e.own(e.subscribe(t=>{this.#r=t.getValue(),this.#t.notify(this)})),this.#r=e.getValue()}subscribe(e){return this.#t.subscribe(e)}getTempoAt(e){return this.#r}positionToSeconds(e){return Y.pulsesToSeconds(e,this.#r)}positionToPPQN(e){return Y.secondsToPulses(e,this.#r)}intervalToSeconds(e,t){return Y.pulsesToSeconds(t-e,this.#r)}intervalToPPQN(e,t){return Y.secondsToPulses(t-e,this.#r)}terminate(){this.#t.terminate()}};var Vt;(function(r){r.Musical="musical",r.Seconds="seconds"})(Vt||(Vt={}));var ol;(function(r){function e(n,i,o){return new ex(n,i,o)}r.musical=e;function t(n,i,o,s){return new Xy(n,i,o,s)}r.aware=t})(ol||(ol={}));var Xy=class{#e;#t;#r;#i;constructor(e,t,n,i){this.#i=i,this.#t=t,this.#r=n,this.#e=e}toPPQN(){let e=this.#i.getValue();if(this.getTimeBase()===Vt.Musical)return e;let t=this.#r.getValue(),n=this.#e.positionToSeconds(t),i=n+e;return this.#e.intervalToPPQN(n,i)}fromPPQN(e){if(this.getTimeBase()===Vt.Musical)this.#i.setValue(e);else{let t=this.#r.getValue(),n=this.#e.intervalToSeconds(t,t+e);this.#i.setValue(n)}}toSeconds(){let e=this.#i.getValue();if(this.getTimeBase()===Vt.Seconds)return e;let t=this.#r.getValue();return this.#e.intervalToSeconds(t,t+e)}toSamples(e){return this.toSeconds()*e}rawValue(){return this.#i.getValue()}getTimeBase(){return Nn(this.#t.getValue(),Vt)}},ex=class{#e;#t;#r;constructor(e,t,n){this.#r=n,this.#t=t,this.#e=e}toPPQN(){return this.#r.getValue()}fromPPQN(e){this.#r.setValue(e)}toSeconds(){let e=this.#r.getValue(),t=this.#t.getValue();return this.#e.intervalToSeconds(t,t+e)}toSamples(e){return this.toSeconds()*e}rawValue(){return this.#r.getValue()}getTimeBase(){return Vt.Musical}};var Np=Y.fromSignature(1,384);var yo={None:{type:"none"},Linear:{type:"linear"},Curve:r=>({type:"curve",slope:r})},Bp;(function(r){r.Comparator=(i,o)=>{let s=i.position-o.position;if(s!==0)return s;let a=i.index-o.index;return a!==0?a:i===o?0:N(`${i} and ${o} are identical in terms of comparison`)};function*e(i,o,s){if(i.isEmpty())return Qe.empty();for(let a of i.iterateFrom(o))if(yield a,a.position>=s)return}r.iterateWindow=e,r.nextEvent=(i,o)=>{let s=i.asArray(),a=Le.rightMost(s,o,r.Comparator);return a===-1?null:s[a+1]??null},r.valueAt=(i,o,s)=>{if(i.isEmpty())return s;let a=i.iterateFrom(o),{done:c,value:l}=a.next();if(c)return s;if(l.position<=o){let{done:d,value:h}=a.next();if(d)return l.value;if(o<h.position)return n(l,h,o);if(l.interpolation===yo.None)return l.value}return l.value};function*t(i,o,s,a){if(i.isEmpty())return;let c=i.iterateFrom(o),{done:l,value:d}=c.next();if(l)return;let h=s/a,f=d;if(f.position>o){for(;o<f.position;)if(yield{position:o,value:f.value},o+=h,o>s)return;f.position<=s&&(yield f)}for(;o<=s;){let{done:v,value:m}=c.next();if(v)break;for(;o<m.position;){if(o>s)return;yield{position:o,value:n(f,m,o)},o+=h}m.position<s&&(f.interpolation===yo.None&&(yield{position:m.position,value:f.value}),yield m),f=m}for(;o<=s;)yield{position:o,value:f.value},o+=h}r.quantise=t;let n=({value:i,position:o,interpolation:s},a,c)=>s.type==="none"?i:s.type==="linear"?i+(c-o)/(a.position-o)*(a.value-i):s.type==="curve"?Zr.valueAt({slope:s.slope,steps:a.position-o,y0:i,y1:a.value},c-o):N("Unknown interpolation")})(Bp||(Bp={}));var Eu;(function(r){let e;(function(t){t[t.Bartlett=0]="Bartlett",t[t.Blackman=1]="Blackman",t[t.BlackmanHarris=2]="BlackmanHarris",t[t.Hamming=3]="Hamming",t[t.Hanning=4]="Hanning"})(e=r.Type||(r.Type={})),r.create=(t,n)=>{let i=new Float32Array(n),o=Math.PI/(n-1);switch(t){case e.Bartlett:{let s=(n>>1)-1,a=0;for(;a<=s;++a)i[a]=2*a/(n-1);for(;a<n;++a)i[a]=2-2*a/(n-1);return i}case e.Blackman:{let s=2*o,a=4*o;for(let c=0;c<n;++c)i[c]=.42323-.49755*Math.cos(s*c)+.07922*Math.cos(a*c);return i}case e.BlackmanHarris:{let s=2*o,a=4*o,c=6*o;for(let l=0;l<n;++l)i[l]=.35875-.48829*Math.cos(s*l)+.14128*Math.cos(a*l)-.01168*Math.cos(c*l);return i}case e.Hamming:{let s=2*o;for(let a=0;a<n;++a)i[a]=.54-.46*Math.cos(s*a);return i}case e.Hanning:{let s=2*o;for(let a=0;a<n;++a)i[a]=.5-.5*Math.cos(s*a);return i}}}})(Eu||(Eu={}));var $p=Symbol.for("@openDAW/lib-dsp");globalThis[$p]?console.debug(`%c${$p.description}%c is already available in ${globalThis.constructor.name}.`,"color: hsl(10, 83%, 60%)","color: inherit"):(globalThis[$p]=!0,console.debug(`%c${$p.description}%c is now available in ${globalThis.constructor.name}.`,"color: hsl(200, 83%, 60%)","color: inherit"));var kp=class extends AudioWorkletProcessor{#e;#t;#r;#i;#n;#o=0;constructor({processorOptions:{sab:e,numberOfChannels:t,rmsWindowInSeconds:n,valueDecay:i}}){super(),this.#e=t,this.#t=new Float32Array(t),this.#r=new Float32Array(t),this.#i=D.create(()=>new nl(sampleRate*n),t);let o=gr.createBuilder({peak:gr.floats(t),rms:gr.floats(t)})();this.#n=Xa.writer(o,e,s=>{let a=Math.exp(-(128*this.#o)/(sampleRate*i));for(let c=0;c<t;++c){let l=this.#t[c],d=this.#r[c];s.peak[c]=l,s.rms[c]=Math.sqrt(d),this.#t[c]=l*a,this.#r[c]=d*a}this.#o=0})}process([e]){for(let t=0;t<this.#e;++t){let n=e[t];if(n===void 0)this.#t[t]=0,this.#r[t]=0;else{let i=this.#i[t],o=this.#t[t],s=this.#r[t];for(let a=0;a<128;++a){let c=n[a];o=Math.max(o,Math.abs(c)),s=Math.max(s,i.pushPop(c*c))}this.#t[t]=o,this.#r[t]=s}}return this.#o++,this.#n.tryWrite(),!0}};var fe=class r{static newSet(e){return new Qa(e,r.Comparator)}static compose=(e,...t)=>{let n=t.length===0?this.#e:new Int16Array(t);return B(n.every((i,o)=>i===t[o]),`fieldKeys (${n.join(",")}) only allows i16`),new r(e,n)};static decode(e){let t=e.split("/");return B(t.length>0,"Unable to parse Address"),r.compose(E.parse(t[0]),...t.slice(1).map(n=>parseInt(n)))}static reconstruct(e){return this.compose(e[0],...e[1])}static boxRange(e,t,n){let i=e.values(),o=Le.leftMostMapped(i,t,E.Comparator,n),s=i.length;if(o<0||o>=s)return null;for(let a=o;a<s;a++)if(E.Comparator(n(i[a]),t)!==0)return o<a?[o,a]:null;return[o,s]}static Comparator=(e,t)=>{let n=E.Comparator(e.#t,t.#t);if(n!==0)return n;let i=Math.min(e.#r.length,t.#r.length);for(let o=0;o<i;o++){let s=e.#r[o]-t.#r[o];if(s!==0)return s}return e.#r.length-t.#r.length};static MinimalComparator=(e,t)=>{let n=E.Comparator(e.#t,t.#t);if(n!==0)return n;let i=Math.min(e.#r.length,t.#r.length);for(let o=0;o<i;o++){let s=e.#r[o]-t.#r[o];if(s!==0)return s}return 0};static LengthComparator=(e,t)=>{let n=E.Comparator(e.#t,t.#t);return n!==0?n:t.#r.length-e.#r.length};static#e=new Int16Array(0);#t;#r;constructor(e,t){this.#t=e,this.#r=t}get uuid(){return this.#t}get fieldKeys(){return this.#r}isBox(){return this.#r.length===0}isContent(){return!this.isBox()}equals(e){return r.Comparator(this,e)===0}compareTo(e){return r.Comparator(this,e)}append(e){return new r(this.#t,new Int16Array([...this.#r,e]))}startsWith(e){return E.Comparator(e.#t,this.#t)===0&&e.#r.length<=this.#r.length&&e.#r.every((t,n)=>this.#r[n]===t)}write(e){e.writeBytes(new Int8Array(this.#t.buffer)),e.writeByte(this.#r.length),this.#r.forEach(t=>e.writeShort(t))}moveTo(e){return new r(e,this.#r)}decompose(){return[this.#t,this.#r]}toJSON(){return{uuid:Array.from(this.#t.values()),fields:Array.from(this.#r.values())}}toArrayBuffer(){let e=new Uint8Array(E.length+this.#r.length);return e.set(this.#t,0),e.set(this.#r,E.length),e.buffer}toString(){return[E.toString(this.#t),...this.#r].join("/")}static read(e){let t=E.fromDataInput(e),n=e.readByte();return r.compose(t,...D.create(()=>e.readShort(),n))}},Ms;(function(r){r.AddressReader=e=>e.address,r.Comparator=({address:e},{address:t})=>fe.Comparator(e,t),r.equals=(e,t)=>{let[n,i]=Le.rangeMapped(t,e,fe.Comparator,r.AddressReader);return t.slice(n,i+1)},r.startsWith=(e,t)=>{let[n,i]=Le.rangeMapped(t,e,fe.MinimalComparator,r.AddressReader);return t.slice(n,i+1).filter(o=>o.address.startsWith(e))},r.endsWith=(e,t)=>{let n=Le.leftMostMapped(t,e,fe.LengthComparator,r.AddressReader),i=Le.rightMostMapped(t,e,fe.MinimalComparator,r.AddressReader);return t.slice(n,i+1).filter(o=>e.startsWith(o.address))}})(Ms||(Ms={}));var en=class r{static validate(e,t){if(e.address.equals(t.address))return g.wrap(`PointerField cannot point to itself: ${e}`);if(!t.pointerRules.accepts.some(n=>n===e.pointerType)){let n=t.pointerRules.accepts.join(", ");return g.wrap(`${String(e.pointerType)} does not satisfy any of the allowed types (${n}).`)}return g.None}#e;#t;constructor(e){this.#e=e,this.#t=new xt}subscribe(e,...t){return this.#r(this.#t,e,t)}catchupAndSubscribe(e,...t){let n=fe.newSet(i=>i.address);return n.addMany(this.filter(...t)),n.forEach(i=>e.onAdded(i)),this.subscribe({onAdded:i=>{n.add(i)&&e.onAdded(i)},onRemoved:i=>{n.removeByKey(i.address),e.onRemoved(i)}},...t)}filter(...e){return e.length===0?this.incoming():Qe.filter(this.incoming().values(),t=>e.some(n=>n===t.pointerType))}size(){return this.incoming().length}isEmpty(){return this.size()===0}nonEmpty(){return this.size()>0}contains(e){return this.incoming().some(t=>e.address.equals(t.address))}incoming(){return this.#e.graph.edges().incomingEdgesOf(this.#e).slice()}onAdded(e){let t=r.validate(e,this.#e);if(t.nonEmpty())return N(t.unwrap());this.#t.proxy.onAdded(e)}onRemoved(e){this.#t.proxy.onRemoved(e)}toString(){return`{Pointers ${this.#e.address}, pointers: ${this.incoming().values().map(e=>e.toString())}}`}#r(e,t,n){return e.subscribe({onAdded:i=>{(n.length===0||n.some(o=>o===i.pointerType))&&t.onAdded(i)},onRemoved:i=>{(n.length===0||n.some(o=>o===i.pointerType))&&t.onRemoved(i)}})}};var tx=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},sl=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Z=class r{static hook(e){return new r(e)}#e;#t;#r;#i;#n;constructor({parent:e,fieldKey:t,fieldName:n,pointerRules:i,deprecated:o}){this.#e=e,this.#t=t,this.#r=n,this.#i=i,this.#n=o,i.mandatory&&this.graph.edges().watchVertex(this)}accept(e){return _(e.visitField,this)}get box(){return this.#e.box}get graph(){return this.#e.graph}get parent(){return this.#e}get fieldKey(){return this.#t}get fieldName(){return this.#r}get pointerRules(){return this.#i}get deprecated(){return this.#n}get pointerHub(){return new en(this)}get address(){return this.#e.address.append(this.#t)}get debugPath(){return`${this.box.name}:${this.box.mapFields(e=>e.fieldName,...this.address.fieldKeys).join("/")}`}isBox(){return!1}isField(){return!0}isAttached(){return this.graph.findBox(this.address.uuid).nonEmpty()}fields(){return D.empty()}record(){return Ir.empty()}getField(e){return N()}optField(e){return g.None}read(e){}write(e){}toJSON(){}fromJSON(e){return N("fromJSON should never be called on a field")}disconnect(){if(this.pointerHub.isEmpty())return;let e=this.pointerHub.incoming();e.forEach(t=>{t.defer(),(t.mandatory||this.pointerRules.mandatory&&e.length===1)&&t.box.delete()})}toString(){return`{${this.box.constructor.name}:${this.constructor.name} (${this.fieldName}) ${this.address.toString()}`}};tx([Za,sl("design:type",en),sl("design:paramtypes",[])],Z.prototype,"pointerHub",null);tx([Za,sl("design:type",fe),sl("design:paramtypes",[])],Z.prototype,"address",null);tx([Za,sl("design:type",String),sl("design:paramtypes",[])],Z.prototype,"debugPath",null);var p=Object.freeze({mandatory:!1,accepts:[]});var Ip=class r extends Z{static create(e,t,n){return new r(e,t,n)}#e;constructor(e,t,n){super(e),this.#e=D.create(i=>t({parent:this,fieldKey:i,fieldName:String(i),pointerRules:p,deprecated:e.deprecated}),n)}accept(e){return _(e.visitArrayField,this)}fields(){return this.#e}record(){return D.toRecord(this.#e,e=>String(e.fieldKey))}getField(e){return q(this.#e[e])}optField(e){return g.wrap(this.#e[e])}read(e){this.#e.forEach(t=>t.read(e))}write(e){this.#e.filter(t=>!t.deprecated).forEach(t=>t.write(e))}size(){return this.#e.length}toJSON(){if(!this.deprecated)return Object.values(this.#e).map(e=>e.toJSON()??null)}fromJSON(e){if(!this.deprecated)if(Array.isArray(e))e.forEach((t,n)=>this.#e[n].fromJSON(t));else return N("Type mismatch")}};var xo;(function(r){r.writeFields=(t,n)=>{let i=Object.entries(n).filter(([o,s])=>!s.deprecated);t.writeInt(1179403347),t.writeShort(i.length),i.forEach(([o,s])=>{let a=Ze.create();s.write(a);let c=new Int8Array(a.toArrayBuffer());t.writeShort(Number(o)),t.writeInt(c.length),t.writeBytes(c)})},r.readFields=(t,n)=>{B(t.readInt()===1179403347,"Serializer header is corrupt");let i=t.readShort();for(let o=0;o<i;o++){let s=t.readShort();if(ja(n[s]))continue;let a=t.readInt(),c=new Int8Array(a);t.readBytes(c);let{status:l,error:d}=$s(()=>n[s]?.read(new Ge(c.buffer)));l==="failure"&&console.warn(n,d)}}})(xo||(xo={}));var nF=function(r,e,t,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var a=r.length-1;a>=0;a--)(s=r[a])&&(o=(i<3?s(o):i>3?s(e,t,o):s(e,t))||o);return i>3&&o&&Object.defineProperty(e,t,o),o},J_=function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},M=class r{static DEBUG_DELETION=!1;static Index=0;#e;#t;#r;#i;#n;#o=r.Index++;constructor({uuid:e,graph:t,name:n,pointerRules:i}){this.#e=fe.compose(e),this.#t=t,this.#r=n,this.#i=i,this.#n=this.initializeFields(),i.mandatory&&this.graph.edges().watchVertex(this)}fields(){return Object.values(this.#n)}record(){return this.#n}getField(e){return q(this.#n[e],()=>`Field ${String(e)} not found in ${this.toString()}`)}optField(e){return g.wrap(this.#n[e])}subscribe(e,t){return this.graph.subscribeVertexUpdates(e,this.address,t)}get box(){return this}get name(){return this.#r}get graph(){return this.#t}get parent(){return this}get address(){return this.#e}get pointerRules(){return this.#i}get creationIndex(){return this.#o}get pointerHub(){return new en(this)}estimateMemory(){let e=new Wa;return this.write(e),e.count}isBox(){return!0}asBox(e){return Be(this,e)}isField(){return!1}isAttached(){return this.#t.findBox(this.address.uuid).nonEmpty()}read(e){xo.readFields(e,this.#n)}write(e){xo.writeFields(e,this.#n)}serialize(){let e=Ze.create();return e.writeInt(this.#o),e.writeString(this.name),e.writeBytes(new Int8Array(this.address.uuid.buffer)),this.write(e),e.toArrayBuffer()}toArrayBuffer(){let e=Ze.create();return this.write(e),e.toArrayBuffer()}toJSON(){return Object.entries(this.#n).reduce((e,[t,n])=>{let i=n.toJSON();return R(i)&&(e[t]=i),e},{})}fromJSON(e){if(lo(e))Object.entries(e).forEach(([t,n])=>{let i=this.#n[parseInt(t)];R(n)&&i.fromJSON(n)});else return N("Type mismatch")}incomingEdges(){return this.graph.edges().incomingEdgesOf(this)}outgoingEdges(){return this.graph.edges().outgoingEdgesOf(this)}mapFields(e,...t){if(t.length===0)return D.empty();let n=this.getField(t[0]),i=[e(n)];for(let o=1;o<t.length;o++)n=n.getField(t[o]),i.push(e(n));return i}searchVertex(e){if(e.length===0)return g.wrap(this);let t=this.optField(e[0]);if(t.isEmpty())return g.None;for(let n=1;n<e.length;n++)if(t=t.unwrap().optField(e[n]),t.isEmpty())return g.None;return t}delete(){if(!this.isAttached())return;let{boxes:e,pointers:t}=this.graph.dependenciesOf(this);r.DEBUG_DELETION&&(console.debug(`Delete ${this.toString()}`),console.debug("	unplugs",[...t].map(n=>n.toString()).join(`
`)),console.debug("	unstages",[...e].map(n=>n.toString()).join(`
`),this));for(let n of t)n.defer();for(let n of e)n.unstage();this.unstage()}unstage(){this.graph.unstageBox(this)}isValid(){if(this.#i.mandatory&&this.pointerHub.incoming().length===0)return!1;let e=t=>t.every(n=>n.accept({visitPointerField:i=>!i.mandatory||i.nonEmpty(),visitArrayField:i=>e(i.fields()),visitObjectField:i=>e(i.fields()),visitPrimitiveField:i=>!0,visitField:i=>!0})??!0);return e(this.fields())}toString(){return`${this.constructor.name} ${this.address.toString()}`}};nF([Za,J_("design:type",en),J_("design:paramtypes",[])],M.prototype,"pointerHub",null);var Su;(function(r){r.clampInt32=(e,t)=>t,r.clampFloat32=(e,t)=>t})(Su||(Su={}));var Ie;(function(r){r[r.This=0]="This",r[r.Parent=1]="Parent",r[r.Children=2]="Children"})(Ie||(Ie={}));var Dp;(function(r){r.create=()=>new rx})(Dp||(Dp={}));var rx=class{#e=new Fu(Ms.equals);#t=new Fu(Ms.startsWith);#r=new Fu(Ms.endsWith);#i=[];#n=0;#o=!1;subscribe(e,t,n){let i=new ix(t,e,this.#n++,n);if(this.#o){let o=new nx(i,e);return this.#i.push(o),o}else return this.subscribeMonitor(i,e)}dispatch(e){this.#o=!0,[...this.#e.filter(e),...this.#t.filter(e),...this.#r.filter(e)].sort(({order:n},{order:i})=>n-i).forEach(n=>n.procedure(e)),this.#o=!1,this.#i.forEach(n=>n.subscribe(this)),this.#i.length=0}subscribeMonitor(e,t){switch(t){case Ie.This:return this.#e.subscribe(e);case Ie.Parent:return this.#t.subscribe(e);case Ie.Children:return this.#r.subscribe(e);default:return Fn(t)}}countStations(){return this.#e.count()+this.#t.count()+this.#r.count()}},ix=class{address;propagation;order;procedure;constructor(e,t,n,i){this.address=e,this.propagation=t,this.order=n,this.procedure=i}toString(){return`{ Monitor address: ${this.address}, propagation: ${Ie[this.propagation]}, order: ${this.order} }`}},Fu=class{filterStrategy;#e=[];#t=!0;constructor(e){this.filterStrategy=e}subscribe(e){return this.#e.push(e),this.#t=this.#e.length<2,{terminate:()=>{let t=this.#e.length;for(;--t>=0;)this.#e[t]===e&&this.#e.splice(t,1)}}}stations(){return this.#t||(this.#e.sort(Ms.Comparator),this.#t=!0),this.#e}filter(e){return this.filterStrategy(e.address,this.stations())}count(){return this.#e.length}},nx=class{monitor;propagation;#e=new j;#t=!1;constructor(e,t){this.monitor=e,this.propagation=t}subscribe(e){this.#t||(this.#e.terminate(),this.#e.own(e.subscribeMonitor(this.monitor,this.propagation)))}terminate(){this.#t=!0,this.#e.terminate()}};var ht;(function(r){r.Boolean="boolean",r.Float32="float32",r.Int32="int32",r.String="string",r.Bytes="bytes"})(ht||(ht={}));var Cs={[ht.Boolean]:{type:ht.Boolean,encode:(r,e)=>r.writeBoolean(e),decode:r=>r.readBoolean()},[ht.Float32]:{type:ht.Float32,encode:(r,e)=>r.writeFloat(e),decode:r=>r.readFloat()},[ht.Int32]:{type:ht.Int32,encode:(r,e)=>r.writeInt(e),decode:r=>r.readInt()},[ht.String]:{type:ht.String,encode:(r,e)=>r.writeString(e),decode:r=>r.readString()},[ht.Bytes]:{type:ht.Bytes,encode:(r,e)=>{r.writeInt(e.length),r.writeBytes(e)},decode:r=>{let e=new Int8Array(r.readInt());return r.readBytes(e),e}}},Ts=class extends Z{#e;#t;#r;constructor(e,t,n){super(e),this.#e=t,this.#t=n,this.#r=this.#t}accept(e){return _(e.visitPrimitiveField,this)}subscribe(e){return this.graph.subscribeVertexUpdates(Ie.This,this.address,()=>e(this))}catchupAndSubscribe(e){return e(this),this.subscribe(e)}get type(){return this.#e}get initValue(){return this.#t}setInitValue(e){B(this.graph.constructingBox(),"Cannot change initial value at runtime"),this.setValue(this.#t=this.clamp(e))}getValue(){return this.#r}setValue(e){let t=this.#r,n=this.clamp(e);this.equals(n)||(this.#r=n,this.graph.onPrimitiveValueUpdate(this,t,n))}writeValue(e,t){B(!this.deprecated,"PrimitiveField.write: deprecated field"),this.serialization().encode(e,t)}readValue(e){return this.serialization().decode(e)}toJSON(){if(this.deprecated)return;let e=this.getValue();return ArrayBuffer.isView(e)?N("not implemented"):e}fromJSON(e){return N("Type mismatch")}reset(){this.setValue(this.#t)}},I=class r extends Ts{static create(e,t=!1){return new r(e,t)}constructor(e,t){super(e,ht.Boolean,t)}toggle(){this.setValue(!this.getValue())}serialization(){return Cs[ht.Boolean]}equals(e){return this.getValue()===e}clamp(e){return e}read(e){this.setValue(e.readBoolean())}write(e){B(!this.deprecated,"BooleanField.write: deprecated field"),e.writeBoolean(this.getValue())}fromJSON(e){this.deprecated||(typeof e=="boolean"?this.setValue(e):console.warn("BooleanField Type mismatch",e,this.address.toString()))}},b=class r extends Ts{static create(e,t,n,i=0){return new r(e,t,n,i)}#e;#t;constructor(e,t,n,i){super(e,ht.Float32,i),this.#e=t,this.#t=n}serialization(){return Cs[ht.Float32]}equals(e){return this.getValue()===e}clamp(e){return Su.clampFloat32(this.#e,In.toFloat32(e))}read(e){this.setValue(e.readFloat())}write(e){B(!this.deprecated,"FLoat32Field.write: deprecated field"),e.writeFloat(this.getValue())}get unit(){return this.#t}get constraints(){return this.#e}fromJSON(e){this.deprecated||(typeof e=="number"?this.setValue(e):console.warn("Float32Field Type mismatch",e,this.address.toString()))}},F=class r extends Ts{static create(e,t,n,i=0){return new r(e,t,n,i)}#e;#t;constructor(e,t,n,i){super(e,ht.Int32,i),this.#e=t,this.#t=n}serialization(){return Cs[ht.Int32]}equals(e){return this.getValue()===e}clamp(e){return Su.clampInt32(this.#e,tr.toInt(e))}read(e){this.setValue(e.readInt())}write(e){B(!this.deprecated,"Int32Field.write: deprecated field"),e.writeInt(this.getValue())}get unit(){return this.#t}get constraints(){return this.#e}fromJSON(e){this.deprecated||(typeof e=="number"&&e===Math.floor(e)&&e>=tr.MIN_VALUE&&e<=tr.MAX_VALUE?this.setValue(e):console.warn("Int32Field Type mismatch",e,this.address.toString()))}},T=class r extends Ts{static create(e,t=""){return new r(e,t)}constructor(e,t){super(e,ht.String,t)}serialization(){return Cs[ht.String]}equals(e){return this.getValue()===e}clamp(e){return e}read(e){this.setValue(e.readString())}write(e){B(!this.deprecated,"StringField.write: deprecated field"),e.writeString(this.getValue())}fromJSON(e){this.deprecated||(typeof e=="string"?this.setValue(e):console.warn("StringField Type mismatch",e,this.address.toString()))}},Q_=class r extends Ts{static create(e,t=this.#e){return new r(e,t)}static#e=Object.freeze(new Int8Array(0));constructor(e,t){super(e,ht.Bytes,t)}serialization(){return Cs[ht.Bytes]}equals(e){return this.getValue().length===e.length&&this.getValue().every((t,n)=>e[n]===t)}clamp(e){return e}read(e){let t=new Int8Array(e.readInt());e.readBytes(t),this.setValue(t)}write(e){B(!this.deprecated,"ByteArrayField.write: deprecated field");let t=this.getValue();e.writeInt(t.length),e.writeBytes(t)}toJSON(){if(!this.deprecated)return Array.from(this.getValue().values())}fromJSON(e){this.deprecated||(Array.isArray(e)&&e.every(t=>typeof t=="number")?this.setValue(new Int8Array(e)):console.warn("ByteArrayField Type mismatch",e,this.address.toString()))}};var Y_;(function(r){r.decode=e=>{let t=e.readInt();return D.create(()=>{switch(e.readString()){case"new":{let i=E.fromDataInput(e),o=e.readString(),s=new Int8Array(e.readInt());return e.readBytes(s),new Nu(i,o,s.buffer)}case"pointer":{let i=fe.read(e),o=e.readBoolean()?g.wrap(fe.read(e)):g.None,s=e.readBoolean()?g.wrap(fe.read(e)):g.None;return new $u(i,o,s)}case"primitive":{let i=fe.read(e),o=e.readString(),s=Cs[o],a=s.decode(e),c=s.decode(e);return new Bu(i,s,a,c)}case"delete":{let i=E.fromDataInput(e),o=e.readString(),s=new Int8Array(e.readInt());return e.readBytes(s),new ku(i,o,s.buffer)}}},t)}})(Y_||(Y_={}));var Nu=class{type="new";#e;#t;#r;constructor(e,t,n){this.#e=e,this.#t=t,this.#r=n}get uuid(){return this.#e}get name(){return this.#t}get settings(){return this.#r}forward(e){e.createBox(this.#t,this.#e,t=>t.read(new Ge(this.#r)))}inverse(e){e.findBox(this.#e).unwrap(()=>`Could not find ${this.#t}`).unstage()}write(e){e.writeString(this.type),E.toDataOutput(e,this.#e),e.writeString(this.#t),e.writeInt(this.#r.byteLength),e.writeBytes(new Int8Array(this.#r))}toString(){return`{NewUpdate uuid: ${E.toString(this.#e)}, attachment: ${this.settings.byteLength}b`}toDebugString(e){return this.toString()}},Bu=class{type="primitive";#e;#t;#r;#i;constructor(e,t,n,i){this.#e=e,this.#t=t,this.#r=n,this.#i=i}get address(){return this.#e}get oldValue(){return this.#r}get newValue(){return this.#i}matches(e){return e.address.equals(this.address)}inverse(e){this.field(e).setValue(this.#r)}forward(e){this.field(e).setValue(this.#i)}field(e){return e.findVertex(this.#e).unwrap(()=>`Could not find PrimitiveField at ${this.#e}`)}write(e){e.writeString(this.type),this.#e.write(e),e.writeString(this.#t.type),this.#t.encode(e,this.#r),this.#t.encode(e,this.#i)}toString(){return`{PrimitiveUpdate oldValue: ${this.#r}, newValue: ${this.#i}`}},$u=class{type="pointer";#e;#t;#r;constructor(e,t,n){this.#e=e,this.#t=t,this.#r=n}get address(){return this.#e}get oldAddress(){return this.#t}get newAddress(){return this.#r}matches(e){return e.address.equals(this.address)}inverse(e){this.field(e).targetAddress=this.#t}forward(e){this.field(e).targetAddress=this.#r}field(e){return e.findVertex(this.#e).unwrap(()=>`Could not find PointerField at ${this.#e}`)}write(e){e.writeString(this.type),this.#e.write(e),this.#t.match({none:()=>e.writeBoolean(!1),some:t=>{e.writeBoolean(!0),t.write(e)}}),this.#r.match({none:()=>e.writeBoolean(!1),some:t=>{e.writeBoolean(!0),t.write(e)}})}toString(){return`{PointerUpdate oldValue: ${this.#t.unwrapOrNull()}, newValue: ${this.#r.unwrapOrNull()}`}},ku=class{type="delete";#e;#t;#r;constructor(e,t,n){this.#e=e,this.#t=t,this.#r=n}get uuid(){return this.#e}get name(){return this.#t}get settings(){return this.#r}forward(e){e.findBox(this.#e).unwrap(()=>`Could not find ${this.#t}`).unstage()}inverse(e){e.createBox(this.#t,this.#e,t=>t.read(new Ge(this.#r)))}write(e){e.writeString(this.type),E.toDataOutput(e,this.#e),e.writeString(this.#t),e.writeInt(this.#r.byteLength),e.writeBytes(new Int8Array(this.#r))}toString(){return`{DeleteUpdate uuid: ${E.toString(this.#e)}, attachment: ${this.settings.byteLength}b`}};var QR=Symbol("Unreferenceable"),$=class r extends Z{static create(e,t,n){return new r(e,t,n)}static encodeWith(e,t){B(this.#e.isEmpty(),"SerializationEncoder already in use"),this.#e=g.wrap(e);let n=$s(t);if(this.#e=g.None,n.status==="failure")throw n.error;return n.value}static decodeWith(e,t){B(this.#t.isEmpty(),"SerializationDecoder already in use"),this.#t=g.wrap(e);let n=$s(t);if(this.#t=g.None,n.status==="failure")throw n.error;return n.value}static#e=g.None;static#t=g.None;#r;#i;#n=g.None;#o=g.None;constructor(e,t,n){super(e),this.#r=t,this.#i=n,n&&this.graph.edges().watchVertex(this)}get pointerHub(){return N(`${this} cannot be pointed to`)}get pointerType(){return this.#r}get mandatory(){return this.#i}accept(e){return _(e.visitPointerField,this)}subscribe(e){return this.graph.subscribeVertexUpdates(Ie.This,this.address,()=>this.graph.subscribeEndTransaction(()=>e(this)))}catchupAndSubscribe(e){return e(this),this.subscribe(e)}refer(e){this.targetVertex=g.wrap(e)}defer(){this.targetVertex=g.None}get targetVertex(){return this.graph.inTransaction()?this.#o.flatMap(e=>this.graph.findVertex(e)):this.#n}set targetVertex(e){if(e.nonEmpty()){let t=en.validate(this,e.unwrap());t.nonEmpty()&&N(t.unwrap())}this.targetAddress=e.map(t=>t.address)}get targetAddress(){return this.#o}set targetAddress(e){let t=this.#o;t.isEmpty()&&e.isEmpty()||(e.nonEmpty()&&t.unwrapOrNull()?.equals(e.unwrap()))===!0||(this.#o=e,this.graph.onPointerAddressUpdated(this,t,e))}isEmpty(){return this.targetAddress.isEmpty()}nonEmpty(){return this.targetAddress.nonEmpty()}resolvedTo(e){this.#n=e}read(e){let t=e.readBoolean()?g.wrap(fe.read(e)):g.None;this.targetAddress=r.#t.match({none:()=>t,some:n=>n.map(this,t)})}write(e){B(!this.deprecated,"PointerField.write: deprecated field"),r.#e.match({none:()=>this.#o,some:t=>t.map(this)}).match({none:()=>e.writeBoolean(!1),some:t=>{e.writeBoolean(!0),t.write(e)}})}toJSON(){if(!this.deprecated)return r.#e.match({none:()=>this.#o,some:e=>e.map(this)}).match({none:()=>null,some:e=>e.toString()})}fromJSON(e){if(!this.deprecated)if(Fs(e)||typeof e=="string"){let t=g.wrap(Fs(e)?null:fe.decode(e));this.targetAddress=r.#t.match({none:()=>t,some:n=>n.map(this,t)})}else return N(`Pointer: Type mismatch. value (${typeof e}) must be a string.`)}};var Mp=class{#e;#t;#r;#i;constructor(){this.#e=fe.newSet(e=>e.address),this.#t=fe.newSet(e=>e.address),this.#r=fe.newSet(([e])=>e),this.#i=fe.newSet(([e])=>e.address)}watchVertex(e){if(Ke(e,$)){if(!e.mandatory)return N("watchVertex called but has no edge requirement");this.#e.add(e)}else{if(!e.pointerRules.mandatory)return N("watchVertex called but has no edge requirement");this.#t.add(e)}}unwatchVerticesOf(...e){let t=({box:{address:{uuid:n}}})=>n;for(let{address:{uuid:n}}of e)this.#o(this.#e,n,t),this.#o(this.#t,n,t);for(let n of e){let i=this.outgoingEdgesOf(n);if(i.length>0)return N(`${n} has outgoing edges: ${i.map(([s,a])=>`[${s.toString()}, ${a.toString()}]`)}`);let o=this.incomingEdgesOf(n);if(o.length>0)return N(`${n} has incoming edges from: ${o.map(s=>s.toString())}`)}}connect(e,t){this.#i.add([e,t]),this.#r.opt(t).match({none:()=>this.#r.add([t,[e]]),some:([,n])=>n.push(e)})}disconnect(e){let[,t]=this.#i.removeByKey(e.address),[,n]=this.#r.get(t);D.remove(n,e),n.length===0&&this.#r.removeByKey(t)}isConnected(e,t){return this.#i.opt(e.address).mapOr(([,n])=>n.equals(t),!1)}outgoingEdgesOf(e){return this.#n(this.#i,e.address.uuid,([{box:{address:{uuid:t}}}])=>t)}incomingEdgesOf(e){return e.isBox()?this.#n(this.#r,e.address.uuid,([{uuid:t}])=>t).flatMap(([t,n])=>n):this.#r.opt(e.address).mapOr(([t,n])=>n,D.empty())}validateRequirements(){this.#e.forEach(e=>{if(e.isEmpty())return e.mandatory?N(`Pointer ${e.toString()} requires an edge.`):N(`Illegal state: ${e} has no edge requirements.`)}),this.#t.forEach(e=>{if(e.pointerHub.isEmpty())return e.pointerRules.mandatory?N(`Target ${e.toString()} requires an edge.`):N(`Illegal state: ${e} has no edge requirements.`)})}#n(e,t,n){let i=fe.boxRange(e,t,n);return R(i)?e.values().slice(i[0],i[1]):D.empty()}#o(e,t,n){let i=fe.boxRange(e,t,n);R(i)&&e.removeRange(i[0],i[1])}};var Rs=class{#e;#t;#r;#i;#n;#o;#s;#l;#a;#c;#u=!1;#h=!1;constructor(e=g.None){this.#e=e,this.#t=E.newSet(t=>t.address.uuid),this.#r=[],this.#s=Dp.create(),this.#i=new xt,this.#n=new xt,this.#o=new xt,this.#l=new Mp,this.#a=fe.newSet(({pointer:t})=>t.address),this.#c=[]}beginTransaction(){B(!this.#u,"Transaction already in progress"),this.#u=!0,this.#o.proxy.onBeginTransaction()}endTransaction(){for(B(this.#u,"No transaction in progress"),this.#r.length>0&&(this.#r.forEach(({pointerField:e,update:t})=>this.#d(e,t)),this.#r.length=0),this.#a.values().toSorted((e,t)=>e.index-t.index).forEach(({pointer:e,initial:t,final:n})=>{t.equals(n)||(t.ifSome(i=>this.findVertex(i).unwrapOrUndefined()?.pointerHub.onRemoved(e)),n.ifSome(i=>this.findVertex(i).unwrapOrUndefined()?.pointerHub.onAdded(e)))}),this.#a.clear(),this.#u=!1;this.#c.length>0;)this.#c.splice(0).forEach(e=>e()),this.#c.length>0&&console.debug(`${this.#c.length} new observers while notifying`);this.#o.proxy.onEndTransaction()}inTransaction(){return this.#u}constructingBox(){return this.#h}createBox(e,t,n){return this.#e.unwrap("No box-factory installed")(e,this,t,n)}stageBox(e,t){this.#p(),B(!this.#h,"Cannot construct box while other box is constructing"),R(t)&&(this.#h=!0,t(e),this.#h=!1);let n=this.#t.add(e);B(n,`${e} already staged`);let i=new Nu(e.address.uuid,e.name,e.toArrayBuffer());return this.#i.proxy.onUpdate(i),this.#n.proxy.onUpdate(i),e}subscribeTransaction(e){return this.#o.subscribe(e)}subscribeToAllUpdates(e){return this.#i.subscribe(e)}subscribeToAllUpdatesImmediate(e){return this.#n.subscribe(e)}subscribeVertexUpdates(e,t,n){return this.#s.subscribe(e,t,n)}subscribeEndTransaction(e){this.#c.push(e)}unstageBox(e){this.#p();let t=this.#t.removeByKey(e.address.uuid);B(t===e,`${e} could not be found to unstage`),this.#l.unwatchVerticesOf(e);let n=new ku(e.address.uuid,e.name,e.toArrayBuffer());this.#i.proxy.onUpdate(n),this.#n.proxy.onUpdate(n)}findBox(e){return this.#t.opt(e)}findVertex(e){return this.#t.opt(e.uuid).flatMap(t=>t.searchVertex(e.fieldKeys))}boxes(){return this.#t.values()}edges(){return this.#l}checksum(){let e=new dp;return this.boxes().forEach(t=>t.write(e)),e.result()}onPrimitiveValueUpdate(e,t,n){if(this.#p(),e.isAttached()&&!this.#h){let i=new Bu(e.address,e.serialization(),t,n);this.#s.dispatch(i),this.#i.proxy.onUpdate(i),this.#n.proxy.onUpdate(i)}}onPointerAddressUpdated(e,t,n){this.#p(),t.nonEmpty()&&this.#l.disconnect(e),n.nonEmpty()&&this.#l.connect(e,n.unwrap());let i=new $u(e.address,t,n);this.#h?this.#r.push({pointerField:e,update:i}):(this.#d(e,i),this.#n.proxy.onUpdate(i))}#d(e,t){let{oldAddress:n,newAddress:i}=t;e.resolvedTo(i.flatMap(s=>this.findVertex(s))),this.#a.opt(e.address).match({none:()=>this.#a.add({pointer:e,initial:n,final:i,index:this.#a.size()}),some:s=>s.final=i}),this.#s.dispatch(t),this.#i.proxy.onUpdate(t)}dependenciesOf(e,t={}){let n=R(t.excludeBox)?t.excludeBox:po.alwaysFalse,i=R(t.alwaysFollowMandatory)?t.alwaysFollowMandatory:!1,o=new Set,s=new Set,a=c=>{o.has(c)||n(c)||(o.add(c),c.outgoingEdges().filter(([l])=>!s.has(l)).forEach(([l,d])=>{let h=this.findVertex(d).unwrap(`Could not find target of ${l.toString()}`);if(s.add(l),h.pointerRules.mandatory&&(i||h.pointerHub.incoming().every(f=>s.has(f))))return a(h.box)}),c.incomingEdges().forEach(l=>{s.add(l),l.mandatory&&a(l.box)}))};return a(e),o.delete(e),{boxes:o,pointers:Array.from(s).reverse()}}verifyPointers(){this.#l.validateRequirements();let e=0,t=n=>{for(let i of n.fields())i.accept({visitPointerField:o=>{if(o.targetAddress.nonEmpty()){let s=o.targetVertex.nonEmpty(),a=this.findVertex(o.targetAddress.unwrap()).nonEmpty();B(s,`pointer ${o.address} is broken`),B(a,`Cannot find target for pointer ${o.address}`),e++}},visitObjectField:o=>t(o)})};return this.#t.forEach(n=>t(n)),console.debug("verification complete."),{count:e}}debugBoxes(){console.table(this.#t.values().reduce((e,t)=>(e[E.toString(t.address.uuid)]={class:t.name,"incoming links":t.incomingEdges().length,"outgoing links":t.outgoingEdges().length,"est. memory (bytes)":t.estimateMemory()},e),{}))}debugDependencies(){console.debug("Dependencies:"),this.boxes().forEach(e=>{console.debug(`	${e}`);for(let t of this.dependenciesOf(e).boxes)console.debug(`		${t}`)})}addressToDebugPath(e){return e.flatMap(t=>t.isBox()?this.findBox(t.uuid).map(n=>n.name):this.findBox(t.uuid).flatMap(n=>n.searchVertex(t.fieldKeys).map(i=>i.isField()?i.debugPath:N("Unknown address"))))}toArrayBuffer(){let e=Ze.create(),t=this.#t.values();return e.writeInt(t.length),t.forEach(n=>{let i=n.serialize();e.writeInt(i.byteLength),e.writeBytes(new Int8Array(i))}),e.toArrayBuffer()}fromArrayBuffer(e){B(this.#t.isEmpty(),"Cannot call fromArrayBuffer if boxes is not empty");let t=new Ge(e),n=t.readInt();this.beginTransaction();let i=[];for(let o=0;o<n;o++){let s=t.readInt(),a=new Int8Array(s);t.readBytes(a);let c=new Ge(a.buffer),l=c.readInt(),d=c.readString(),h=E.fromDataInput(c);i.push({creationIndex:l,name:d,uuid:h,boxStream:c})}i.sort((o,s)=>o.creationIndex-s.creationIndex).forEach(({name:o,uuid:s,boxStream:a})=>this.createBox(o,s,c=>c.read(a))),this.endTransaction()}toJSON(){return this.#t.values().map(e=>({name:e.name,uuid:e.address.toString(),fields:q(e.toJSON())}))}#p(){B(this.#u,()=>"Modification only prohibited in transaction mode.")}};var al;(function(r){r.insertOrder=(e,t=Number.MAX_SAFE_INTEGER)=>{let n=r.collectIndexedBoxes(e),i=X(t,0,n.length);if(i<n.length)for(let o=i;o<n.length;o++)n[o].index.setValue(o+1);return i},r.removeOrder=(e,t)=>{let n=r.collectIndexedBoxes(e);if(t<n.length)for(let i=t+1;i<n.length;i++)n[i].index.setValue(i-1)},r.moveIndex=(e,t,n)=>{let i=r.collectIndexedBoxes(e),o=i[t];if(n<0){let s=X(t+n,0,i.length-1);for(let a=s;a<t;a++)i[a].index.setValue(a+1);o.index.setValue(s)}else if(n>1){let s=X(t+(n-1),0,i.length-1);for(let a=t;a<s;a++)i[a+1].index.setValue(a);o.index.setValue(s)}else console.warn(`moveIndex had no effect: startIndex: ${t}, delta: ${n}`)},r.isIndexedBox=e=>"index"in e&&e.index instanceof F,r.collectIndexedBoxes=(e,t)=>e.pointerHub.incoming().map(({box:n})=>r.isIndexedBox(n)&&(t===void 0||n instanceof t)?n:N(`${n} has no index field`)).sort((n,i)=>n.index.getValue()-i.index.getValue())})(al||(al={}));var Ue=class extends Z{#e;constructor(e){super(e),this.#e=this.initializeFields()}accept(e){return _(e.visitObjectField,this)}fields(){return Object.values(this.#e)}record(){return this.#e}getField(e){return q(this.#e[e])}optField(e){return g.wrap(this.#e[e])}subscribe(e){return this.graph.subscribeVertexUpdates(Ie.Children,this.address,()=>this.graph.subscribeEndTransaction(()=>e(this)))}read(e){xo.readFields(e,this.#e)}write(e){xo.writeFields(e,this.#e)}toJSON(){if(!this.deprecated)return Object.entries(this.#e).reduce((e,[t,n])=>(e[t]=n.toJSON(),e),{})}fromJSON(e){if(!this.deprecated)if(lo(e))Object.entries(e).forEach(([t,n])=>{let i=this.#e[parseInt(t)];R(n)&&i.fromJSON(n)});else return N("Type mismatch")}};var or;(function(r){r.sender=(i,o)=>o(new t(i)),r.executor=(i,o)=>new n(i,o);let e=i=>{let o=[];for(let s of i)s instanceof MessagePort&&o.push(s),typeof ImageBitmap<"u"&&s instanceof ImageBitmap&&o.push(s),typeof OffscreenCanvas<"u"&&s instanceof OffscreenCanvas&&o.push(s);return o};class t{#e;#t=new Map;#r;#i=0;constructor(o){this.#e=o,this.#r=o.subscribe(this.#n)}terminate(){this.#r.terminate()}dispatchAndForget=(o,...s)=>{let a=e(s);this.#e.send({type:"send",returnId:!1,func:o.name,args:Array.from(Qe.map(s,c=>({value:c})))},a)};dispatchAndReturn=(o,...s)=>new Promise((a,c)=>{let l=Qe.reduce(s,(h,f,v)=>(typeof f=="function"&&h.push([v,f]),h),[]);this.#t.set(this.#i,{executorTuple:{resolve:a,reject:c},callbacks:new Map(l)});let d=e(s);this.#e.send({type:"send",returnId:this.#i,func:o.name,args:Array.from(Qe.map(s,(h,f)=>typeof h=="function"?{callback:f}:{value:h}))},d),this.#i++});#n=o=>{let s=this.#t.get(o.returnId);R(s)?o.type==="resolve"?(s.executorTuple.resolve(o.resolve),this.#t.delete(o.returnId)):o.type==="reject"?(s.executorTuple.reject(o.reject),this.#t.delete(o.returnId)):o.type==="callback"&&s.callbacks?.get(o.funcAt).apply(this,o.args):N(`Promise has already been resolved. ${JSON.stringify(o)}`)}}class n{#e;#t;#r;constructor(o,s){this.#e=o,this.#t=s,this.#r=o.subscribe(this.#i)}terminate(){this.#r.terminate()}#i=o=>{B(o.type==="send",()=>"Message type must be 'send'");let s=Object.getPrototypeOf(this.#t)===Object.getPrototypeOf({})?this.#t:Object.getPrototypeOf(this.#t),a=q(s[o.func],`${o.func.toString()} does not exists on ${this.#t}`),c=o.returnId;if(c===!1)a.apply(this.#t,o.args.map(l=>"value"in l?l.value:N(`${o.func.toString()} has no promise.`)));else try{a.apply(this.#t,o.args.map(d=>"callback"in d?(...h)=>this.#s(c,d.callback,h):d.value)).then(d=>{try{this.#n(c,d)}catch(h){this.#o(c,h)}},d=>this.#o(c,d))}catch(l){this.#o(c,l)}};#n=(o,s)=>this.#e.send({type:"resolve",returnId:o,resolve:s});#o=(o,s)=>this.#e.send({type:"reject",returnId:o,reject:s});#s=(o,s,a)=>this.#e.send({type:"callback",returnId:o,funcAt:s,args:a})}r.Executor=n})(or||(or={}));var X_;(function(r){r.ProgressArrayBuffer=e=>async t=>{if(!t.headers.has("Content-Length"))return console.debug("No Content-Length"),t.arrayBuffer();let n=parseInt(t.headers.get("Content-Length"));if(console.debug(`Content-Length: ${n}b`),isNaN(n)||n<4096)return t.arrayBuffer();e(0);let i=Ze.create(n),o=q(t.body,"response.body is empty").getReader();for(;;){let{done:s,value:a}=await o.read();if(s)break;a.forEach(c=>i.writeByte(c)),e(i.position/n)}return e(1),i.toArrayBuffer()}})(X_||(X_={}));var e1;(function(r){r.debounce=(()=>{let e;return(t,n=1e3)=>{clearTimeout(e),e=setTimeout(t,n)}})(),r.scheduleInterval=(e,t,...n)=>{let i=setInterval(e,t,...n);return{terminate:()=>clearInterval(i)}},r.scheduleTimeout=(e,t,...n)=>{let i=setTimeout(e,t,...n);return{terminate:()=>clearTimeout(i)}}})(e1||(e1={}));var t1={for:r=>new ox(r)},oF=[],ox=class{#e;#t=new ne;constructor(e){if(this.#e=e,R(e.onmessage)||R(e.onmessageerror))throw console.error(e),new Error(`${e} is already wrapped.`);e.onmessage=t=>this.#t.notify(t.data),e.onmessageerror=t=>{throw new Error(t.type)}}send(e,t){this.#e.postMessage(e,t??oF)}channel(e){return new sx(this,e)}subscribe(e){return this.#t.subscribe(e)}terminate(){this.#t.terminate(),this.#e.onmessage=null,this.#e.onmessageerror=null}},sx=class r{#e;#t;#r=new ne;#i;constructor(e,t){this.#e=e,this.#t=t,this.#i=e.subscribe(n=>{"__id__"in n&&n.__id__==="42"&&"message"in n&&"channel"in n&&n.channel===t&&this.#r.notify(n.message)})}send(e,t){this.#e.send({__id__:"42",channel:this.#t,message:e},t)}channel(e){return new r(this,e)}subscribe(e){return this.#r.subscribe(e)}terminate(){this.#i.terminate(),this.#r.terminate()}};var Tp;(function(r){r.frame=()=>new Promise(e=>requestAnimationFrame(()=>e())),r.frames=e=>new Promise(t=>{let n=e,i=()=>{--n<=0?t():requestAnimationFrame(i)};requestAnimationFrame(i)}),r.timeSpan=(e,...t)=>new Promise(n=>setTimeout(n,e.millis(),...t)),r.event=(e,t)=>new Promise(n=>e.addEventListener(t,n,{once:!0})),r.observable=e=>new Promise(t=>{let n=e.subscribe(()=>{n.terminate(),t()})}),r.complete=e=>new Promise((t,n)=>{let i=setInterval(()=>{let{status:o,value:s,error:a}=$s(()=>e.next());if(o==="success"){let{done:c,value:l}=s;c&&(clearInterval(i),t(l))}else clearInterval(i),n(a)},0)})})(Tp||(Tp={}));var ax=class{maxRetry;timeSpan;#e=0;constructor(e,t){this.maxRetry=e,this.timeSpan=t}retry(e,t){return++this.#e===this.maxRetry?!1:(console.debug(`${e} > will retry in ${this.timeSpan.toString()}`),setTimeout(t,this.timeSpan.millis()),!0)}},wo;(function(r){class e{value;status="resolved";constructor(a){this.value=a}error=Bs("Cannot access error when promise is resolved")}r.ResolveResult=e;class t{error;status="rejected";constructor(a){this.error=a}value=Bs("Cannot access value when promise is rejected")}r.RejectedResult=t,r.makeAbortable=async(s,a)=>{let c=!0;return s.own(W.create(()=>c=!1)),new Promise((l,d)=>a.then(h=>{c&&l(h)},h=>{c&&d(h)}))},r.tryCatch=s=>s.then(a=>new e(a),a=>new t(a));let n=new ax(3,fo.seconds(3));r.retry=(s,a=n)=>s().catch(c=>new Promise((l,d)=>{let h=f=>{a.retry(f,()=>s().then(v=>l(v),h))||d(f)};h(c)})),r.guardedRetry=(s,a)=>{let c=async(l=0)=>{try{return await s()}catch(d){if(a(d,++l))return console.debug("retrying after failure:",d),await Tp.timeSpan(fo.seconds(1)),c(l);throw new Error(`Failed after ${l} retries: ${d}`)}};return c()},r.approvedRetry=(s,a)=>{let c=async()=>{try{return await s()}catch(l){if(await Ya.approve(a(l)))return c();throw l}};return c()},r.fail=(s,a)=>{let c=()=>new Promise((l,d)=>setTimeout(()=>d("fails first"),s.millis()));return()=>{let l=c();return c=a,l}},r.timeout=(s,a,c)=>new Promise((l,d)=>{let h=!0,f=setTimeout(()=>{h=!1,d(new Error(c??"timeout"))},a.millis());s.then(v=>{h&&l(v)},v=>{h&&d(v)}).finally(()=>clearTimeout(f))}),r.sequentialAll=s=>s.reduce((a,c)=>a.then(async l=>[...l,await c()]),Promise.resolve([])),r.sequentialize=s=>{let a=Promise.resolve();return c=>{let l=()=>s(c),d=a.then(l,l);return a=d.catch(()=>{}),d}},r.memoizeAsync=(s,a)=>{let c=null,l=Date.now();return()=>{let d=Date.now();return(Fs(c)||R(a)&&d-l>a.millis())&&(l=d,c=s(),c.catch(h=>(c=null,h))),c}},r.allWithLimit=async(s,a=1)=>{let c=new Array(s.length),l=0,d=!1,h=async()=>{for(;l<s.length&&!d;){let f=l++;try{let v=await s[f]();d||(c[f]=v)}catch(v){throw d=!0,v}}};return await Promise.all(Array.from({length:Math.min(a,s.length)},h)),c},r.allSettledWithLimit=async(s,a=1)=>{let c=new Array(s.length),l=0,d=async()=>{for(;l<s.length;){let h=l++;try{let f=await s[h]();c[h]={status:"fulfilled",value:f}}catch(f){c[h]={status:"rejected",reason:f}}}};return await Promise.all(Array.from({length:Math.min(a,s.length)},d)),c};class i{max;#e;#t=0;constructor(a=1){this.max=a,this.#e=[]}async add(a){if(this.#t<this.max)return this.#t++,a().finally(()=>this.#r());{let c=Promise.withResolvers();return this.#e.push([a,c]),c.promise.finally(()=>this.#r())}}#r(){if(B(this.#t>0,"Internal Error in Promises.Limit"),--this.#t<this.max&&this.#e.length>0){let[a,{resolve:c,reject:l}]=this.#e.shift();this.#t++,a().then(c,l)}}}r.Limit=i;class o{#e;#t;#r;#i=g.None;constructor(a,c,l){this.#e=a,this.#t=c,this.#r=l}update(a){this.#i=g.wrap(a),a.then(c=>{this.#i.contains(a)&&this.#e(c)}).catch(c=>{this.#i.contains(a)&&this.#t(c)}).finally(()=>{this.#i.contains(a)&&(this.terminate(),_(this.#r))})}terminate(){this.#i=g.None}}r.Latest=o})(wo||(wo={}));var r1;(function(r){let e=new wo.Limit(4);r.limitFetch=(t,n)=>e.add(()=>fetch(t,n)),r.DefaultRetry=(t,n)=>!Ke(t,hp.FileNotFound)||n<=100,r.progress=t=>n=>{let i=n.body;if(Ka(i))return n;let o=parseInt(n.headers.get("Content-Length")??"0",10);if(o===0)return n;let s=0,a=i.getReader(),c=new ReadableStream({async start(l){for(;;){let{done:d,value:h}=await a.read();if(d){l.close();break}s+=h.byteLength,t(s/o),l.enqueue(h)}}});return new Response(c,{headers:n.headers,status:n.status,statusText:n.statusText})}})(r1||(r1={}));var i1=(r="debug")=>{let e=performance.now();return{lab:t=>console[r].call(console,`${t} in ${(performance.now()-e).toFixed(1)}ms`)}};var n1;(function(r){r.startEstimator=()=>{let e=performance.now();return t=>{if(t===0)return fo.POSITIVE_INFINITY;let n=performance.now()-e;return fo.millis(n/t-n)}}})(n1||(n1={}));var Cp=Symbol.for("@openDAW/lib-runtime");globalThis[Cp]?console.debug(`%c${Cp.description}%c is already available in ${globalThis.constructor.name}.`,"color: hsl(10, 83%, 60%)","color: inherit"):(globalThis[Cp]=!0,console.debug(`%c${Cp.description}%c is now available in ${globalThis.constructor.name}.`,"color: hsl(200, 83%, 60%)","color: inherit"));var o1=(r,e)=>or.executor(e,new class{sendUpdates(t){r.beginTransaction(),t.forEach(n=>{let i=n.type;i==="new"?r.createBox(n.name,n.uuid,o=>o.read(new Ge(n.buffer))):i==="update-primitive"?r.findVertex(fe.reconstruct(n.address)).unwrap(()=>`Could not find primitive field ${n.address}`).setValue(n.value):i==="update-pointer"?r.findVertex(fe.reconstruct(n.address)).unwrap(()=>`Could not find pointer field ${n.address}`).targetAddress=R(n.target)?g.wrap(fe.reconstruct(n.target)):g.None:n.type==="delete"&&r.unstageBox(r.findBox(n.uuid).unwrap(()=>`Could not find box ${E.toString(n.uuid)}`))}),r.endTransaction()}checksum(t){return D.equals(r.checksum(),t)?Promise.resolve():Promise.reject("Checksum mismatch")}});var Rp=Symbol.for("@openDAW/lib-box");globalThis[Rp]?console.debug(`%c${Rp.description}%c is already available in ${globalThis.constructor.name}.`,"color: hsl(10, 83%, 60%)","color: inherit"):(globalThis[Rp]=!0,console.debug(`%c${Rp.description}%c is now available in ${globalThis.constructor.name}.`,"color: hsl(200, 83%, 60%)","color: inherit"));var Op=class{#e=0;#t=!1;#r=!1;isRecording=!1;isCountingIn=!1;metronomeEnabled=!1;metronomeVolume=.5;getLeapStateAndReset(){let e=this.#r;return this.#r=!1,e}get position(){return this.#e}set position(e){this.#e=e,this.#r=!0}get transporting(){return this.#t}set transporting(e){this.#t!==e&&(this.#t=e)}pause(){this.#t=!1,this.isRecording=!1,this.isCountingIn=!1}advanceTo(e){this.#e=e}};var u;(function(r){r[r.Timeline=0]="Timeline",r[r.Selection=1]="Selection",r[r.PianoMode=2]="PianoMode",r[r.User=3]="User",r[r.AudioConnection=4]="AudioConnection",r[r.InstrumentHost=5]="InstrumentHost",r[r.AudioOutput=6]="AudioOutput",r[r.Capture=7]="Capture",r[r.NotesConnection=8]="NotesConnection",r[r.VoltageConnection=9]="VoltageConnection",r[r.AudioUnits=10]="AudioUnits",r[r.MidiEffectHost=11]="MidiEffectHost",r[r.AudioEffectHost=12]="AudioEffectHost",r[r.AudioBusses=13]="AudioBusses",r[r.AuxSend=14]="AuxSend",r[r.FileUploadState=15]="FileUploadState",r[r.Modulation=16]="Modulation",r[r.Automation=17]="Automation",r[r.Parameter=18]="Parameter",r[r.ParameterController=19]="ParameterController",r[r.MidiControl=20]="MidiControl",r[r.StepAutomation=21]="StepAutomation",r[r.Editing=22]="Editing",r[r.AudioFile=23]="AudioFile",r[r.SoundfontFile=24]="SoundfontFile",r[r.AudioUnit=25]="AudioUnit",r[r.MarkerTrack=26]="MarkerTrack",r[r.MarkerEvents=27]="MarkerEvents",r[r.ClipCollection=28]="ClipCollection",r[r.RegionCollection=29]="RegionCollection",r[r.TrackCollection=30]="TrackCollection",r[r.Device=31]="Device",r[r.MIDIDevice=32]="MIDIDevice",r[r.Groove=33]="Groove",r[r.ModularSetup=34]="ModularSetup",r[r.ModuleCollection=35]="ModuleCollection",r[r.ConnectionCollection=36]="ConnectionCollection",r[r.DeviceUserInterface=37]="DeviceUserInterface",r[r.NoteEvents=38]="NoteEvents",r[r.NoteEventFeature=39]="NoteEventFeature",r[r.NoteEventCollection=40]="NoteEventCollection",r[r.ValueEvents=41]="ValueEvents",r[r.ValueEventCollection=42]="ValueEventCollection",r[r.ValueInterpolation=43]="ValueInterpolation",r[r.Sample=44]="Sample"})(u||(u={}));var Iu;(function(r){r.NoSync="nosync",r.Pitch="pitch",r.Timestretch="timestretch",r.AudioFit="audiofit"})(Iu||(Iu={}));var s1;(function(r){r[r.Pre=0]="Pre",r[r.Post=1]="Post"})(s1||(s1={}));var bt;(function(r){r.Instrument="instrument",r.Bus="bus",r.Aux="aux",r.Output="output"})(bt||(bt={}));var ll={white:new dt(0,0,100),blue:new dt(189,100,65),green:new dt(150,77,69),yellow:new dt(60,100,84),cream:new dt(65,20,83),orange:new dt(31,100,73),red:new dt(354,100,65),purple:new dt(314,100,78),bright:new dt(197,0,100),gray:new dt(197,31,85),dark:new dt(197,15,62),shadow:new dt(197,10,42),black:new dt(197,10,14),background:new dt(197,6,3),panelBackground:new dt(197,14,7),panelBackgroundBright:new dt(197,14,10),panelBackgroundDark:new dt(197,14,4)};var De;(function(r){r[r.Add=0]="Add",r[r.Adsr=1]="Adsr",r[r.ArrayDown=2]="ArrayDown",r[r.AudioBus=3]="AudioBus",r[r.AudioDevice=4]="AudioDevice",r[r.AudioFile=5]="AudioFile",r[r.AutoGain=6]="AutoGain",r[r.Automation=7]="Automation",r[r.BassGuitar=8]="BassGuitar",r[r.Book=9]="Book",r[r.Box=10]="Box",r[r.Bug=11]="Bug",r[r.Fold=12]="Fold",r[r.Checkbox=13]="Checkbox",r[r.Clips=14]="Clips",r[r.Close=15]="Close",r[r.CloudFolder=16]="CloudFolder",r[r.CollapseDown=17]="CollapseDown",r[r.Compressor=18]="Compressor",r[r.Connected=19]="Connected",r[r.Cube=20]="Cube",r[r.Cursor=21]="Cursor",r[r.Curve=22]="Curve",r[r.Dattorro=23]="Dattorro",r[r.Delete=24]="Delete",r[r.Dial=25]="Dial",r[r.DinSlot=26]="DinSlot",r[r.Disconnected=27]="Disconnected",r[r.Divide=28]="Divide",r[r.DragConnections=29]="DragConnections",r[r.Dropdown=30]="Dropdown",r[r.Dropbox=31]="Dropbox",r[r.DrumSet=32]="DrumSet",r[r.Tidal=33]="Tidal",r[r.Duration=34]="Duration",r[r.EditBox=35]="EditBox",r[r.Effects=36]="Effects",r[r.Embed=37]="Embed",r[r.EQ=38]="EQ",r[r.Eraser=39]="Eraser",r[r.Exclude=40]="Exclude",r[r.Exit=41]="Exit",r[r.ExpandWidth=42]="ExpandWidth",r[r.FileList=43]="FileList",r[r.Flask=44]="Flask",r[r.Focus=45]="Focus",r[r.Generator=46]="Generator",r[r.GoogleDrive=47]="GoogleDrive",r[r.Groove=48]="Groove",r[r.Guitar=49]="Guitar",r[r.GuitarTab=50]="GuitarTab",r[r.Headphone=51]="Headphone",r[r.Heart=52]="Heart",r[r.Help=53]="Help",r[r.HighPass=54]="HighPass",r[r.HighShelf=55]="HighShelf",r[r.Insert=56]="Insert",r[r.Invert=57]="Invert",r[r.Loop=58]="Loop",r[r.LowPass=59]="LowPass",r[r.LowShelf=60]="LowShelf",r[r.Magnet=61]="Magnet",r[r.MainMenu=62]="MainMenu",r[r.Maximized=63]="Maximized",r[r.Menu=64]="Menu",r[r.Merge=65]="Merge",r[r.Metronome=66]="Metronome",r[r.Microphone=67]="Microphone",r[r.Midi=68]="Midi",r[r.Minimized=69]="Minimized",r[r.Mix=70]="Mix",r[r.Mixing=71]="Mixing",r[r.Mute=72]="Mute",r[r.NanoWave=73]="NanoWave",r[r.New=74]="New",r[r.NoAudio=75]="NoAudio",r[r.Note=76]="Note",r[r.NotePad=77]="NotePad",r[r.OpenDAW=78]="OpenDAW",r[r.Panel=79]="Panel",r[r.Peak=80]="Peak",r[r.Pencil=81]="Pencil",r[r.Piano=82]="Piano",r[r.Playfield=83]="Playfield",r[r.Play=84]="Play",r[r.Pointer=85]="Pointer",r[r.Popout=86]="Popout",r[r.Primary=87]="Primary",r[r.Random=88]="Random",r[r.Record=89]="Record",r[r.Rectangle=90]="Rectangle",r[r.Region=91]="Region",r[r.Robot=92]="Robot",r[r.RoundDown=93]="RoundDown",r[r.RoundUp=94]="RoundUp",r[r.Run=95]="Run",r[r.Sawtooth=96]="Sawtooth",r[r.Saxophone=97]="Saxophone",r[r.Scissors=98]="Scissors",r[r.Search=99]="Search",r[r.Sine=100]="Sine",r[r.Solo=101]="Solo",r[r.SoundFont=102]="SoundFont",r[r.SpeakerHeadphone=103]="SpeakerHeadphone",r[r.Square=104]="Square",r[r.Stack=105]="Stack",r[r.Start=106]="Start",r[r.Stereo=107]="Stereo",r[r.Stop=108]="Stop",r[r.Subtract=109]="Subtract",r[r.Sun=110]="Sun",r[r.Swap=111]="Swap",r[r.System=112]="System",r[r.Table=113]="Table",r[r.Tape=114]="Tape",r[r.Time=115]="Time",r[r.Timeline=116]="Timeline",r[r.Tool=117]="Tool",r[r.Triangle=118]="Triangle",r[r.Unknown=119]="Unknown",r[r.UserFolder=120]="UserFolder",r[r.Velocity=121]="Velocity",r[r.Vinyl=122]="Vinyl",r[r.VUMeter=123]="VUMeter",r[r.Waveform=124]="Waveform",r[r.Zeitgeist=125]="Zeitgeist"})(De||(De={}));(function(r){r.toName=e=>r[e],r.fromName=e=>r[e]??r.Rectangle})(De||(De={}));var tn;(function(r){r[r.Monophonic=0]="Monophonic",r[r.Polyphonic=1]="Polyphonic"})(tn||(tn={}));var a1=(r,e)=>{if(r===e)return 0;let t=r-e;return t===0?N(`Indices cannot be equal (${r}, ${e})`):t};var Tn=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},zt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Vp,Ni,bo,zp,Cn,Ut=class r{static create(e,t,n){return new r(e,t,n)}constructor(e,t,n){Vp.set(this,void 0),Ni.set(this,void 0),bo.set(this,void 0),zp.set(this,void 0),Cn.set(this,null),Tn(this,Vp,e,"f"),Tn(this,Ni,E.newSet(i=>i.adapter.uuid),"f"),Tn(this,bo,new xt,"f"),Tn(this,zp,e.pointerHub.catchupAndSubscribe({onAdded:i=>{Tn(this,Cn,null,"f");let o=t(i.box),s=o.indexField.subscribe(()=>{Tn(this,Cn,null,"f"),zt(this,bo,"f").proxy.onReorder(o)}),a=zt(this,Ni,"f").add({adapter:o,subscription:s});B(a,`Could not add ${o}`),zt(this,bo,"f").proxy.onAdd(o)},onRemoved:i=>{Tn(this,Cn,null,"f");let o=i.box.address.uuid,{adapter:s,subscription:a}=zt(this,Ni,"f").removeByKey(o);a.terminate(),zt(this,bo,"f").proxy.onRemove(s)}},n),"f")}field(){return zt(this,Vp,"f")}subscribe(e){return zt(this,bo,"f").subscribe(e)}catchupAndSubscribe(e){return zt(this,Ni,"f").forEach(({adapter:t})=>e.onAdd(t)),this.subscribe(e)}getAdapterByIndex(e){let t=Le.exactMapped(this.adapters(),e,a1,n=>n.indexField.getValue());return t===-1?g.None:g.wrap(this.adapters()[t])}getAdapterById(e){return zt(this,Ni,"f").opt(e).map(({adapter:t})=>t)}getMinFreeIndex(){let e=this.adapters();for(let t=0;t<e.length;t++)if(e[t].indexField.getValue()>t)return t;return e.length}adapters(){return zt(this,Cn,"f")===null&&Tn(this,Cn,zt(this,Ni,"f").values().map(({adapter:e})=>e).sort((e,t)=>e.indexField.getValue()-t.indexField.getValue()),"f"),zt(this,Cn,"f")}move(e,t){this.moveIndex(e.indexField.getValue(),t)}moveIndex(e,t){let n=this.adapters(),i=n[e];if(t<0){let o=X(e+t,0,n.length-1);for(let s=o;s<e;s++)n[s].indexField.setValue(s+1);i.indexField.setValue(o)}else if(t>1){let o=X(e+(t-1),0,n.length-1);for(let s=e;s<o;s++)n[s+1].indexField.setValue(s);i.indexField.setValue(o)}else console.warn(`moveIndex had no effect: startIndex: ${e}, delta: ${t}`)}size(){return zt(this,Ni,"f").size()}isEmpty(){return this.size()===0}terminate(){Tn(this,Cn,null,"f"),zt(this,Ni,"f").forEach(({subscription:e})=>e.terminate()),zt(this,Ni,"f").clear(),zt(this,bo,"f").terminate(),zt(this,zp,"f").terminate()}};Vp=new WeakMap,Ni=new WeakMap,bo=new WeakMap,zp=new WeakMap,Cn=new WeakMap;var Os;(function(r){r.create=(e,t,n,i)=>{switch(e){case"RootBox":return cl.create(t,n,i);case"SelectionBox":return rn.create(t,n,i);case"UserInterfaceBox":return Vs.create(t,n,i);case"UploadFileBox":return Up.create(t,n,i);case"TimelineBox":return zs.create(t,n,i);case"TrackBox":return sr.create(t,n,i);case"NoteEventBox":return Ao.create(t,n,i);case"NoteEventRepeatBox":return jp.create(t,n,i);case"NoteEventCollectionBox":return Rn.create(t,n,i);case"NoteRegionBox":return Us.create(t,n,i);case"NoteClipBox":return ul.create(t,n,i);case"ValueEventBox":return _o.create(t,n,i);case"ValueEventCollectionBox":return On.create(t,n,i);case"ValueEventCurveBox":return Po.create(t,n,i);case"ValueRegionBox":return js.create(t,n,i);case"ValueClipBox":return dl.create(t,n,i);case"AudioRegionBox":return Eo.create(t,n,i);case"AudioClipBox":return hl.create(t,n,i);case"MarkerBox":return pl.create(t,n,i);case"AudioFileBox":return Dr.create(t,n,i);case"SoundfontFileBox":return Gr.create(t,n,i);case"AudioUnitBox":return tt.create(t,n,i);case"CaptureAudioBox":return So.create(t,n,i);case"CaptureMidiBox":return Fo.create(t,n,i);case"AudioBusBox":return Bi.create(t,n,i);case"AuxSendBox":return Ls.create(t,n,i);case"GrooveShuffleBox":return fl.create(t,n,i);case"UnknownAudioEffectDeviceBox":return Lp.create(t,n,i);case"UnknownMidiEffectDeviceBox":return Kp.create(t,n,i);case"DeviceInterfaceKnobBox":return Wp.create(t,n,i);case"ModularDeviceBox":return Zp.create(t,n,i);case"StereoToolDeviceBox":return Gp.create(t,n,i);case"CompressorDeviceBox":return ml.create(t,n,i);case"DelayDeviceBox":return qp.create(t,n,i);case"CrusherDeviceBox":return Hp.create(t,n,i);case"DattorroReverbDeviceBox":return Jp.create(t,n,i);case"VelocityDeviceBox":return Qp.create(t,n,i);case"FoldDeviceBox":return Yp.create(t,n,i);case"TidalDeviceBox":return Xp.create(t,n,i);case"RevampDeviceBox":return ef.create(t,n,i);case"ReverbDeviceBox":return tf.create(t,n,i);case"VaporisateurDeviceBox":return gl.create(t,n,i);case"MIDIOutputDeviceBox":return vl.create(t,n,i);case"MIDIOutputBox":return $i.create(t,n,i);case"MIDIOutputParameterBox":return ki.create(t,n,i);case"SoundfontDeviceBox":return yl.create(t,n,i);case"NanoDeviceBox":return xl.create(t,n,i);case"PlayfieldDeviceBox":return wl.create(t,n,i);case"PlayfieldSampleBox":return No.create(t,n,i);case"TapeDeviceBox":return bl.create(t,n,i);case"ArpeggioDeviceBox":return rf.create(t,n,i);case"PitchDeviceBox":return nf.create(t,n,i);case"ZeitgeistDeviceBox":return of.create(t,n,i);case"ModularBox":return sf.create(t,n,i);case"ModuleConnectionBox":return af.create(t,n,i);case"ModularAudioInputBox":return lf.create(t,n,i);case"ModularAudioOutputBox":return cf.create(t,n,i);case"ModuleDelayBox":return uf.create(t,n,i);case"ModuleMultiplierBox":return df.create(t,n,i);case"ModuleGainBox":return hf.create(t,n,i);default:return N(`Unknown box class '${e}'`)}},r.deserialize=(e,t)=>{let n=new Ge(t),i=n.readString(),o=E.fromDataInput(n),s=r.create(i,e,o);return s.read(n),s}})(Os||(Os={}));var pf=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get keyboard(){return this.getField(1)}get timeRangeInQuarters(){return this.getField(2)}get noteScale(){return this.getField(3)}get noteLabels(){return this.getField(4)}get transpose(){return this.getField(5)}initializeFields(){return{1:F.create({parent:this,fieldKey:1,fieldName:"keyboard",deprecated:!1,pointerRules:p},{length:4},"",0),2:b.create({parent:this,fieldKey:2,fieldName:"timeRangeInQuarters",deprecated:!1,pointerRules:p},{min:1,max:64,scaling:"linear"},"",8),3:b.create({parent:this,fieldKey:3,fieldName:"noteScale",deprecated:!1,pointerRules:p},{min:.5,max:2,scaling:"linear"},"",1),4:I.create({parent:this,fieldKey:4,fieldName:"noteLabels",deprecated:!1,pointerRules:p},!1),5:F.create({parent:this,fieldKey:5,fieldName:"transpose",deprecated:!1,pointerRules:p},{min:-48,max:48},"st",0)}}};var cl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"RootBox",pointerRules:p}),n)}static ClassName="RootBox";constructor(e){super(e)}accept(e){return _(e.visitRootBox,this)}get timeline(){return this.getField(1)}get users(){return this.getField(2)}get created(){return this.getField(3)}get groove(){return this.getField(4)}get modularSetups(){return this.getField(10)}get audioUnits(){return this.getField(20)}get audioBusses(){return this.getField(21)}get outputDevice(){return this.getField(30)}get outputMidiDevices(){return this.getField(35)}get pianoMode(){return this.getField(40)}get editingChannel(){return this.getField(111)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"timeline",deprecated:!1,pointerRules:p},u.Timeline,!0),2:Z.hook({parent:this,fieldKey:2,fieldName:"users",deprecated:!1,pointerRules:{accepts:[u.User],mandatory:!0}}),3:T.create({parent:this,fieldKey:3,fieldName:"created",deprecated:!1,pointerRules:p}),4:$.create({parent:this,fieldKey:4,fieldName:"groove",deprecated:!1,pointerRules:p},u.Groove,!0),10:Z.hook({parent:this,fieldKey:10,fieldName:"modularSetups",deprecated:!1,pointerRules:{accepts:[u.ModularSetup],mandatory:!1}}),20:Z.hook({parent:this,fieldKey:20,fieldName:"audioUnits",deprecated:!1,pointerRules:{accepts:[u.AudioUnits],mandatory:!1}}),21:Z.hook({parent:this,fieldKey:21,fieldName:"audioBusses",deprecated:!1,pointerRules:{accepts:[u.AudioBusses],mandatory:!1}}),30:Z.hook({parent:this,fieldKey:30,fieldName:"outputDevice",deprecated:!1,pointerRules:{accepts:[u.AudioOutput],mandatory:!0}}),35:Z.hook({parent:this,fieldKey:35,fieldName:"outputMidiDevices",deprecated:!1,pointerRules:{accepts:[u.MIDIDevice],mandatory:!1}}),40:pf.create({parent:this,fieldKey:40,fieldName:"pianoMode",deprecated:!1,pointerRules:p}),111:$.create({parent:this,fieldKey:111,fieldName:"editingChannel",deprecated:!1,pointerRules:p},u.Editing,!1)}}};var rn=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"SelectionBox",pointerRules:p}),n)}static ClassName="SelectionBox";constructor(e){super(e)}accept(e){return _(e.visitSelectionBox,this)}get selection(){return this.getField(1)}get selectable(){return this.getField(2)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"selection",deprecated:!1,pointerRules:p},u.Selection,!0),2:$.create({parent:this,fieldKey:2,fieldName:"selectable",deprecated:!1,pointerRules:p},u.Selection,!0)}}};var Vs=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"UserInterfaceBox",pointerRules:p}),n)}static ClassName="UserInterfaceBox";constructor(e){super(e)}accept(e){return _(e.visitUserInterfaceBox,this)}get root(){return this.getField(1)}get selection(){return this.getField(10)}get uploadStates(){return this.getField(11)}get editingDeviceChain(){return this.getField(21)}get editingTimelineRegion(){return this.getField(22)}get editingModularSystem(){return this.getField(23)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"root",deprecated:!1,pointerRules:p},u.User,!0),10:Z.hook({parent:this,fieldKey:10,fieldName:"selection",deprecated:!1,pointerRules:{accepts:[u.Selection],mandatory:!1}}),11:Z.hook({parent:this,fieldKey:11,fieldName:"uploadStates",deprecated:!1,pointerRules:{accepts:[u.FileUploadState],mandatory:!1}}),21:$.create({parent:this,fieldKey:21,fieldName:"editingDeviceChain",deprecated:!1,pointerRules:p},u.Editing,!1),22:$.create({parent:this,fieldKey:22,fieldName:"editingTimelineRegion",deprecated:!1,pointerRules:p},u.Editing,!1),23:$.create({parent:this,fieldKey:23,fieldName:"editingModularSystem",deprecated:!1,pointerRules:p},u.Editing,!1)}}};var Up=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"UploadFileBox",pointerRules:p}),n)}static ClassName="UploadFileBox";constructor(e){super(e)}accept(e){return _(e.visitUploadFileBox,this)}get user(){return this.getField(1)}get file(){return this.getField(2)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"user",deprecated:!1,pointerRules:p},u.FileUploadState,!0),2:$.create({parent:this,fieldKey:2,fieldName:"file",deprecated:!1,pointerRules:p},u.FileUploadState,!0)}}};var ff=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get nominator(){return this.getField(1)}get denominator(){return this.getField(2)}initializeFields(){return{1:F.create({parent:this,fieldKey:1,fieldName:"nominator",deprecated:!1,pointerRules:p},{min:1,max:32},"",4),2:F.create({parent:this,fieldKey:2,fieldName:"denominator",deprecated:!1,pointerRules:p},{min:1,max:32},"",4)}}};var mf=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get enabled(){return this.getField(1)}get from(){return this.getField(2)}get to(){return this.getField(3)}initializeFields(){return{1:I.create({parent:this,fieldKey:1,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),2:F.create({parent:this,fieldKey:2,fieldName:"from",deprecated:!1,pointerRules:p},"any","ppqn",0),3:F.create({parent:this,fieldKey:3,fieldName:"to",deprecated:!1,pointerRules:p},"any","ppqn",15360)}}};var gf=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get markers(){return this.getField(1)}get index(){return this.getField(10)}get enabled(){return this.getField(20)}initializeFields(){return{1:Z.hook({parent:this,fieldKey:1,fieldName:"markers",deprecated:!1,pointerRules:{accepts:[u.MarkerTrack],mandatory:!1}}),10:F.create({parent:this,fieldKey:10,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),20:I.create({parent:this,fieldKey:20,fieldName:"enabled",deprecated:!1,pointerRules:p},!0)}}};var zs=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"TimelineBox",pointerRules:p}),n)}static ClassName="TimelineBox";constructor(e){super(e)}accept(e){return _(e.visitTimelineBox,this)}get root(){return this.getField(1)}get signature(){return this.getField(10)}get loopArea(){return this.getField(11)}get deprecatedMarkerTrack(){return this.getField(20)}get markerTrack(){return this.getField(21)}get durationInPulses(){return this.getField(30)}get bpm(){return this.getField(31)}initializeFields(){return{1:Z.hook({parent:this,fieldKey:1,fieldName:"root",deprecated:!1,pointerRules:{accepts:[u.Timeline],mandatory:!0}}),10:ff.create({parent:this,fieldKey:10,fieldName:"signature",deprecated:!1,pointerRules:p}),11:mf.create({parent:this,fieldKey:11,fieldName:"loopArea",deprecated:!1,pointerRules:p}),20:Z.hook({parent:this,fieldKey:20,fieldName:"deprecatedMarkerTrack",deprecated:!1,pointerRules:{accepts:[u.MarkerTrack],mandatory:!1}}),21:gf.create({parent:this,fieldKey:21,fieldName:"markerTrack",deprecated:!1,pointerRules:p}),30:F.create({parent:this,fieldKey:30,fieldName:"durationInPulses",deprecated:!1,pointerRules:p},"positive","ppqn",491520),31:b.create({parent:this,fieldKey:31,fieldName:"bpm",deprecated:!1,pointerRules:p},{min:30,max:999,scaling:"exponential"},"bpm",120)}}};var sr=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"TrackBox",pointerRules:{accepts:[u.Selection,u.PianoMode],mandatory:!1}}),n)}static ClassName="TrackBox";constructor(e){super(e)}accept(e){return _(e.visitTrackBox,this)}get tracks(){return this.getField(1)}get target(){return this.getField(2)}get regions(){return this.getField(3)}get clips(){return this.getField(4)}get index(){return this.getField(10)}get type(){return this.getField(11)}get enabled(){return this.getField(20)}get excludePianoMode(){return this.getField(30)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"tracks",deprecated:!1,pointerRules:p},u.TrackCollection,!0),2:$.create({parent:this,fieldKey:2,fieldName:"target",deprecated:!1,pointerRules:p},u.Automation,!0),3:Z.hook({parent:this,fieldKey:3,fieldName:"regions",deprecated:!1,pointerRules:{accepts:[u.RegionCollection],mandatory:!1}}),4:Z.hook({parent:this,fieldKey:4,fieldName:"clips",deprecated:!1,pointerRules:{accepts:[u.ClipCollection],mandatory:!1}}),10:F.create({parent:this,fieldKey:10,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),11:F.create({parent:this,fieldKey:11,fieldName:"type",deprecated:!1,pointerRules:p},{values:[0,1,2,3]},""),20:I.create({parent:this,fieldKey:20,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),30:I.create({parent:this,fieldKey:30,fieldName:"excludePianoMode",deprecated:!1,pointerRules:p},!1)}}};var Ao=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"NoteEventBox",pointerRules:{accepts:[u.Selection,u.NoteEventFeature],mandatory:!1}}),n)}static ClassName="NoteEventBox";constructor(e){super(e)}accept(e){return _(e.visitNoteEventBox,this)}get events(){return this.getField(1)}get position(){return this.getField(10)}get duration(){return this.getField(11)}get pitch(){return this.getField(20)}get velocity(){return this.getField(21)}get playCount(){return this.getField(22)}get playCurve(){return this.getField(23)}get cent(){return this.getField(24)}get chance(){return this.getField(25)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"events",deprecated:!1,pointerRules:p},u.NoteEvents,!0),10:F.create({parent:this,fieldKey:10,fieldName:"position",deprecated:!1,pointerRules:p},"any","ppqn"),11:F.create({parent:this,fieldKey:11,fieldName:"duration",deprecated:!1,pointerRules:p},"positive","ppqn",240),20:F.create({parent:this,fieldKey:20,fieldName:"pitch",deprecated:!1,pointerRules:p},{min:0,max:127},"",60),21:b.create({parent:this,fieldKey:21,fieldName:"velocity",deprecated:!1,pointerRules:p},"unipolar","%",.7874015748031497),22:F.create({parent:this,fieldKey:22,fieldName:"playCount",deprecated:!1,pointerRules:p},{min:1,max:128},"",1),23:b.create({parent:this,fieldKey:23,fieldName:"playCurve",deprecated:!1,pointerRules:p},"bipolar","%",0),24:b.create({parent:this,fieldKey:24,fieldName:"cent",deprecated:!1,pointerRules:p},{min:-50,max:50,scaling:"linear"},"ct",0),25:F.create({parent:this,fieldKey:25,fieldName:"chance",deprecated:!1,pointerRules:p},{min:0,max:100},"",100)}}};var jp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"NoteEventRepeatBox",pointerRules:p}),n)}static ClassName="NoteEventRepeatBox";constructor(e){super(e)}accept(e){return _(e.visitNoteEventRepeatBox,this)}get event(){return this.getField(1)}get count(){return this.getField(2)}get curve(){return this.getField(3)}get length(){return this.getField(4)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"event",deprecated:!1,pointerRules:p},u.NoteEventFeature,!0),2:F.create({parent:this,fieldKey:2,fieldName:"count",deprecated:!1,pointerRules:p},{min:1,max:128},"",1),3:b.create({parent:this,fieldKey:3,fieldName:"curve",deprecated:!1,pointerRules:p},"bipolar","%",0),4:b.create({parent:this,fieldKey:4,fieldName:"length",deprecated:!1,pointerRules:p},"unipolar","%",1)}}};var Rn=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"NoteEventCollectionBox",pointerRules:{accepts:[u.Selection],mandatory:!1}}),n)}static ClassName="NoteEventCollectionBox";constructor(e){super(e)}accept(e){return _(e.visitNoteEventCollectionBox,this)}get events(){return this.getField(1)}get owners(){return this.getField(2)}initializeFields(){return{1:Z.hook({parent:this,fieldKey:1,fieldName:"events",deprecated:!1,pointerRules:{accepts:[u.NoteEvents],mandatory:!1}}),2:Z.hook({parent:this,fieldKey:2,fieldName:"owners",deprecated:!1,pointerRules:{accepts:[u.NoteEventCollection],mandatory:!0}})}}};var Us=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"NoteRegionBox",pointerRules:{accepts:[u.Selection,u.Editing],mandatory:!1}}),n)}static ClassName="NoteRegionBox";constructor(e){super(e)}accept(e){return _(e.visitNoteRegionBox,this)}get regions(){return this.getField(1)}get events(){return this.getField(2)}get position(){return this.getField(10)}get duration(){return this.getField(11)}get loopOffset(){return this.getField(12)}get loopDuration(){return this.getField(13)}get eventOffset(){return this.getField(14)}get mute(){return this.getField(15)}get label(){return this.getField(16)}get hue(){return this.getField(17)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"regions",deprecated:!1,pointerRules:p},u.RegionCollection,!0),2:$.create({parent:this,fieldKey:2,fieldName:"events",deprecated:!1,pointerRules:p},u.NoteEventCollection,!0),10:F.create({parent:this,fieldKey:10,fieldName:"position",deprecated:!1,pointerRules:p},"any","ppqn"),11:F.create({parent:this,fieldKey:11,fieldName:"duration",deprecated:!1,pointerRules:p},"positive","ppqn"),12:F.create({parent:this,fieldKey:12,fieldName:"loopOffset",deprecated:!1,pointerRules:p},"any","ppqn"),13:F.create({parent:this,fieldKey:13,fieldName:"loopDuration",deprecated:!1,pointerRules:p},"positive","ppqn"),14:F.create({parent:this,fieldKey:14,fieldName:"eventOffset",deprecated:!1,pointerRules:p},"any","ppqn"),15:I.create({parent:this,fieldKey:15,fieldName:"mute",deprecated:!1,pointerRules:p}),16:T.create({parent:this,fieldKey:16,fieldName:"label",deprecated:!1,pointerRules:p}),17:F.create({parent:this,fieldKey:17,fieldName:"hue",deprecated:!1,pointerRules:p},{min:0,max:360},"\xB0")}}};var Bo=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get loop(){return this.getField(1)}get reverse(){return this.getField(2)}get mute(){return this.getField(3)}get speed(){return this.getField(4)}get quantise(){return this.getField(5)}get trigger(){return this.getField(6)}initializeFields(){return{1:I.create({parent:this,fieldKey:1,fieldName:"loop",deprecated:!1,pointerRules:p},!0),2:I.create({parent:this,fieldKey:2,fieldName:"reverse",deprecated:!1,pointerRules:p}),3:I.create({parent:this,fieldKey:3,fieldName:"mute",deprecated:!1,pointerRules:p}),4:F.create({parent:this,fieldKey:4,fieldName:"speed",deprecated:!1,pointerRules:p},"non-negative",""),5:F.create({parent:this,fieldKey:5,fieldName:"quantise",deprecated:!1,pointerRules:p},"non-negative",""),6:F.create({parent:this,fieldKey:6,fieldName:"trigger",deprecated:!1,pointerRules:p},"non-negative","")}}};var ul=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"NoteClipBox",pointerRules:{accepts:[u.Selection,u.Editing],mandatory:!1}}),n)}static ClassName="NoteClipBox";constructor(e){super(e)}accept(e){return _(e.visitNoteClipBox,this)}get clips(){return this.getField(1)}get events(){return this.getField(2)}get index(){return this.getField(3)}get playback(){return this.getField(4)}get duration(){return this.getField(10)}get mute(){return this.getField(11)}get label(){return this.getField(12)}get hue(){return this.getField(13)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"clips",deprecated:!1,pointerRules:p},u.ClipCollection,!0),2:$.create({parent:this,fieldKey:2,fieldName:"events",deprecated:!1,pointerRules:p},u.NoteEventCollection,!0),3:F.create({parent:this,fieldKey:3,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),4:Bo.create({parent:this,fieldKey:4,fieldName:"playback",deprecated:!1,pointerRules:p}),10:F.create({parent:this,fieldKey:10,fieldName:"duration",deprecated:!1,pointerRules:p},"positive","ppqn"),11:I.create({parent:this,fieldKey:11,fieldName:"mute",deprecated:!1,pointerRules:p}),12:T.create({parent:this,fieldKey:12,fieldName:"label",deprecated:!1,pointerRules:p}),13:F.create({parent:this,fieldKey:13,fieldName:"hue",deprecated:!1,pointerRules:p},{min:0,max:360},"\xB0")}}};var _o=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ValueEventBox",pointerRules:{accepts:[u.Selection],mandatory:!1}}),n)}static ClassName="ValueEventBox";constructor(e){super(e)}accept(e){return _(e.visitValueEventBox,this)}get events(){return this.getField(1)}get position(){return this.getField(10)}get index(){return this.getField(11)}get interpolation(){return this.getField(12)}get value(){return this.getField(13)}get slope(){return this.getField(14)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"events",deprecated:!1,pointerRules:p},u.ValueEvents,!0),10:F.create({parent:this,fieldKey:10,fieldName:"position",deprecated:!1,pointerRules:p},"any","ppqn"),11:F.create({parent:this,fieldKey:11,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),12:F.create({parent:this,fieldKey:12,fieldName:"interpolation",deprecated:!1,pointerRules:{accepts:[u.ValueInterpolation],mandatory:!1}},{values:[0,1]},"",1),13:b.create({parent:this,fieldKey:13,fieldName:"value",deprecated:!1,pointerRules:p},"unipolar","%"),14:b.create({parent:this,fieldKey:14,fieldName:"slope",deprecated:!0,pointerRules:p},"any","",NaN)}}};var On=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ValueEventCollectionBox",pointerRules:{accepts:[u.Selection],mandatory:!1}}),n)}static ClassName="ValueEventCollectionBox";constructor(e){super(e)}accept(e){return _(e.visitValueEventCollectionBox,this)}get events(){return this.getField(1)}get owners(){return this.getField(2)}initializeFields(){return{1:Z.hook({parent:this,fieldKey:1,fieldName:"events",deprecated:!1,pointerRules:{accepts:[u.ValueEvents],mandatory:!1}}),2:Z.hook({parent:this,fieldKey:2,fieldName:"owners",deprecated:!1,pointerRules:{accepts:[u.ValueEventCollection],mandatory:!0}})}}};var Po=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ValueEventCurveBox",pointerRules:p}),n)}static ClassName="ValueEventCurveBox";constructor(e){super(e)}accept(e){return _(e.visitValueEventCurveBox,this)}get event(){return this.getField(1)}get slope(){return this.getField(2)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"event",deprecated:!1,pointerRules:p},u.ValueInterpolation,!0),2:b.create({parent:this,fieldKey:2,fieldName:"slope",deprecated:!1,pointerRules:p},"unipolar","%",.5)}}};var js=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ValueRegionBox",pointerRules:{accepts:[u.Selection,u.Editing],mandatory:!1}}),n)}static ClassName="ValueRegionBox";constructor(e){super(e)}accept(e){return _(e.visitValueRegionBox,this)}get regions(){return this.getField(1)}get events(){return this.getField(2)}get position(){return this.getField(10)}get duration(){return this.getField(11)}get loopOffset(){return this.getField(12)}get loopDuration(){return this.getField(13)}get mute(){return this.getField(14)}get label(){return this.getField(15)}get hue(){return this.getField(16)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"regions",deprecated:!1,pointerRules:p},u.RegionCollection,!0),2:$.create({parent:this,fieldKey:2,fieldName:"events",deprecated:!1,pointerRules:p},u.ValueEventCollection,!0),10:F.create({parent:this,fieldKey:10,fieldName:"position",deprecated:!1,pointerRules:p},"any","ppqn"),11:F.create({parent:this,fieldKey:11,fieldName:"duration",deprecated:!1,pointerRules:p},"positive","ppqn"),12:F.create({parent:this,fieldKey:12,fieldName:"loopOffset",deprecated:!1,pointerRules:p},"any","ppqn"),13:F.create({parent:this,fieldKey:13,fieldName:"loopDuration",deprecated:!1,pointerRules:p},"positive","ppqn"),14:I.create({parent:this,fieldKey:14,fieldName:"mute",deprecated:!1,pointerRules:p}),15:T.create({parent:this,fieldKey:15,fieldName:"label",deprecated:!1,pointerRules:p}),16:F.create({parent:this,fieldKey:16,fieldName:"hue",deprecated:!1,pointerRules:p},{min:0,max:360},"\xB0")}}};var dl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ValueClipBox",pointerRules:{accepts:[u.Selection,u.Editing],mandatory:!1}}),n)}static ClassName="ValueClipBox";constructor(e){super(e)}accept(e){return _(e.visitValueClipBox,this)}get clips(){return this.getField(1)}get events(){return this.getField(2)}get index(){return this.getField(3)}get playback(){return this.getField(4)}get duration(){return this.getField(10)}get mute(){return this.getField(11)}get label(){return this.getField(12)}get hue(){return this.getField(13)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"clips",deprecated:!1,pointerRules:p},u.ClipCollection,!0),2:$.create({parent:this,fieldKey:2,fieldName:"events",deprecated:!1,pointerRules:p},u.ValueEventCollection,!0),3:F.create({parent:this,fieldKey:3,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),4:Bo.create({parent:this,fieldKey:4,fieldName:"playback",deprecated:!1,pointerRules:p}),10:F.create({parent:this,fieldKey:10,fieldName:"duration",deprecated:!1,pointerRules:p},"positive","ppqn"),11:I.create({parent:this,fieldKey:11,fieldName:"mute",deprecated:!1,pointerRules:p}),12:T.create({parent:this,fieldKey:12,fieldName:"label",deprecated:!1,pointerRules:p}),13:F.create({parent:this,fieldKey:13,fieldName:"hue",deprecated:!1,pointerRules:p},{min:0,max:360},"\xB0")}}};var Eo=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"AudioRegionBox",pointerRules:{accepts:[u.Selection,u.Editing],mandatory:!1}}),n)}static ClassName="AudioRegionBox";constructor(e){super(e)}accept(e){return _(e.visitAudioRegionBox,this)}get regions(){return this.getField(1)}get file(){return this.getField(2)}get playback(){return this.getField(3)}get timeBase(){return this.getField(4)}get events(){return this.getField(5)}get position(){return this.getField(10)}get duration(){return this.getField(11)}get loopOffset(){return this.getField(12)}get loopDuration(){return this.getField(13)}get mute(){return this.getField(14)}get label(){return this.getField(15)}get hue(){return this.getField(16)}get gain(){return this.getField(17)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"regions",deprecated:!1,pointerRules:p},u.RegionCollection,!0),2:$.create({parent:this,fieldKey:2,fieldName:"file",deprecated:!1,pointerRules:p},u.AudioFile,!0),3:T.create({parent:this,fieldKey:3,fieldName:"playback",deprecated:!1,pointerRules:p},"pitch"),4:T.create({parent:this,fieldKey:4,fieldName:"timeBase",deprecated:!1,pointerRules:p},"musical"),5:$.create({parent:this,fieldKey:5,fieldName:"events",deprecated:!1,pointerRules:p},u.ValueEventCollection,!0),10:F.create({parent:this,fieldKey:10,fieldName:"position",deprecated:!1,pointerRules:p},"any","ppqn"),11:b.create({parent:this,fieldKey:11,fieldName:"duration",deprecated:!1,pointerRules:p},"any","mixed"),12:b.create({parent:this,fieldKey:12,fieldName:"loopOffset",deprecated:!1,pointerRules:p},"any","mixed"),13:b.create({parent:this,fieldKey:13,fieldName:"loopDuration",deprecated:!1,pointerRules:p},"any","mixed"),14:I.create({parent:this,fieldKey:14,fieldName:"mute",deprecated:!1,pointerRules:p}),15:T.create({parent:this,fieldKey:15,fieldName:"label",deprecated:!1,pointerRules:p}),16:F.create({parent:this,fieldKey:16,fieldName:"hue",deprecated:!1,pointerRules:p},{min:0,max:360},"\xB0"),17:b.create({parent:this,fieldKey:17,fieldName:"gain",deprecated:!1,pointerRules:p},"decibel","db")}}};var hl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"AudioClipBox",pointerRules:{accepts:[u.Selection,u.Editing],mandatory:!1}}),n)}static ClassName="AudioClipBox";constructor(e){super(e)}accept(e){return _(e.visitAudioClipBox,this)}get clips(){return this.getField(1)}get file(){return this.getField(2)}get index(){return this.getField(3)}get playback(){return this.getField(4)}get events(){return this.getField(5)}get duration(){return this.getField(10)}get mute(){return this.getField(11)}get label(){return this.getField(12)}get hue(){return this.getField(13)}get gain(){return this.getField(14)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"clips",deprecated:!1,pointerRules:p},u.ClipCollection,!0),2:$.create({parent:this,fieldKey:2,fieldName:"file",deprecated:!1,pointerRules:p},u.AudioFile,!0),3:F.create({parent:this,fieldKey:3,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),4:Bo.create({parent:this,fieldKey:4,fieldName:"playback",deprecated:!1,pointerRules:p}),5:$.create({parent:this,fieldKey:5,fieldName:"events",deprecated:!1,pointerRules:p},u.ValueEventCollection,!0),10:F.create({parent:this,fieldKey:10,fieldName:"duration",deprecated:!1,pointerRules:p},"any","ppqn"),11:I.create({parent:this,fieldKey:11,fieldName:"mute",deprecated:!1,pointerRules:p}),12:T.create({parent:this,fieldKey:12,fieldName:"label",deprecated:!1,pointerRules:p}),13:F.create({parent:this,fieldKey:13,fieldName:"hue",deprecated:!1,pointerRules:p},{min:0,max:360},"\xB0"),14:b.create({parent:this,fieldKey:14,fieldName:"gain",deprecated:!1,pointerRules:p},"decibel","db")}}};var pl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"MarkerBox",pointerRules:{accepts:[u.Selection],mandatory:!1}}),n)}static ClassName="MarkerBox";constructor(e){super(e)}accept(e){return _(e.visitMarkerBox,this)}get track(){return this.getField(1)}get position(){return this.getField(2)}get plays(){return this.getField(3)}get label(){return this.getField(4)}get hue(){return this.getField(5)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"track",deprecated:!1,pointerRules:p},u.MarkerTrack,!0),2:F.create({parent:this,fieldKey:2,fieldName:"position",deprecated:!1,pointerRules:p},"any","ppqn"),3:F.create({parent:this,fieldKey:3,fieldName:"plays",deprecated:!1,pointerRules:p},"non-negative","",1),4:T.create({parent:this,fieldKey:4,fieldName:"label",deprecated:!1,pointerRules:p}),5:F.create({parent:this,fieldKey:5,fieldName:"hue",deprecated:!1,pointerRules:p},{min:0,max:360},"\xB0")}}};var Dr=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"AudioFileBox",pointerRules:{accepts:[u.AudioFile,u.FileUploadState],mandatory:!0}}),n)}static ClassName="AudioFileBox";constructor(e){super(e)}accept(e){return _(e.visitAudioFileBox,this)}get startInSeconds(){return this.getField(1)}get endInSeconds(){return this.getField(2)}get fileName(){return this.getField(3)}initializeFields(){return{1:b.create({parent:this,fieldKey:1,fieldName:"startInSeconds",deprecated:!1,pointerRules:p},"non-negative","s"),2:b.create({parent:this,fieldKey:2,fieldName:"endInSeconds",deprecated:!1,pointerRules:p},"non-negative","s"),3:T.create({parent:this,fieldKey:3,fieldName:"fileName",deprecated:!1,pointerRules:p})}}};var Gr=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"SoundfontFileBox",pointerRules:{accepts:[u.SoundfontFile],mandatory:!0}}),n)}static ClassName="SoundfontFileBox";constructor(e){super(e)}accept(e){return _(e.visitSoundfontFileBox,this)}get fileName(){return this.getField(1)}initializeFields(){return{1:T.create({parent:this,fieldKey:1,fieldName:"fileName",deprecated:!1,pointerRules:p})}}};var tt=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"AudioUnitBox",pointerRules:{accepts:[u.Selection,u.Automation],mandatory:!1}}),n)}static ClassName="AudioUnitBox";constructor(e){super(e)}accept(e){return _(e.visitAudioUnitBox,this)}get type(){return this.getField(1)}get collection(){return this.getField(2)}get editing(){return this.getField(3)}get index(){return this.getField(11)}get volume(){return this.getField(12)}get panning(){return this.getField(13)}get mute(){return this.getField(14)}get solo(){return this.getField(15)}get tracks(){return this.getField(20)}get midiEffects(){return this.getField(21)}get input(){return this.getField(22)}get audioEffects(){return this.getField(23)}get auxSends(){return this.getField(24)}get output(){return this.getField(25)}get capture(){return this.getField(26)}initializeFields(){return{1:T.create({parent:this,fieldKey:1,fieldName:"type",deprecated:!1,pointerRules:p},"instrument"),2:$.create({parent:this,fieldKey:2,fieldName:"collection",deprecated:!1,pointerRules:p},u.AudioUnits,!0),3:Z.hook({parent:this,fieldKey:3,fieldName:"editing",deprecated:!1,pointerRules:{accepts:[u.Editing],mandatory:!1}}),11:F.create({parent:this,fieldKey:11,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),12:b.create({parent:this,fieldKey:12,fieldName:"volume",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-96,mid:-9,max:6,scaling:"decibel"},"dB"),13:b.create({parent:this,fieldKey:13,fieldName:"panning",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%"),14:I.create({parent:this,fieldKey:14,fieldName:"mute",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}}),15:I.create({parent:this,fieldKey:15,fieldName:"solo",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}}),20:Z.hook({parent:this,fieldKey:20,fieldName:"tracks",deprecated:!1,pointerRules:{accepts:[u.TrackCollection],mandatory:!1}}),21:Z.hook({parent:this,fieldKey:21,fieldName:"midiEffects",deprecated:!1,pointerRules:{accepts:[u.MidiEffectHost],mandatory:!1}}),22:Z.hook({parent:this,fieldKey:22,fieldName:"input",deprecated:!1,pointerRules:{accepts:[u.InstrumentHost,u.AudioOutput],mandatory:!1}}),23:Z.hook({parent:this,fieldKey:23,fieldName:"audioEffects",deprecated:!1,pointerRules:{accepts:[u.AudioEffectHost],mandatory:!1}}),24:Z.hook({parent:this,fieldKey:24,fieldName:"auxSends",deprecated:!1,pointerRules:{accepts:[u.AuxSend],mandatory:!1}}),25:$.create({parent:this,fieldKey:25,fieldName:"output",deprecated:!1,pointerRules:p},u.AudioOutput,!1),26:$.create({parent:this,fieldKey:26,fieldName:"capture",deprecated:!1,pointerRules:p},u.Capture,!1)}}};var So=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"CaptureAudioBox",pointerRules:{accepts:[u.Capture],mandatory:!0}}),n)}static ClassName="CaptureAudioBox";constructor(e){super(e)}accept(e){return _(e.visitCaptureAudioBox,this)}get deviceId(){return this.getField(1)}get recordMode(){return this.getField(2)}get requestChannels(){return this.getField(10)}get gainDb(){return this.getField(11)}initializeFields(){return{1:T.create({parent:this,fieldKey:1,fieldName:"deviceId",deprecated:!1,pointerRules:p}),2:T.create({parent:this,fieldKey:2,fieldName:"recordMode",deprecated:!1,pointerRules:p},"normal"),10:F.create({parent:this,fieldKey:10,fieldName:"requestChannels",deprecated:!1,pointerRules:p},"any","",1),11:b.create({parent:this,fieldKey:11,fieldName:"gainDb",deprecated:!1,pointerRules:p},"decibel","dB",0)}}};var Fo=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"CaptureMidiBox",pointerRules:{accepts:[u.Capture],mandatory:!0}}),n)}static ClassName="CaptureMidiBox";constructor(e){super(e)}accept(e){return _(e.visitCaptureMidiBox,this)}get deviceId(){return this.getField(1)}get recordMode(){return this.getField(2)}get channel(){return this.getField(10)}initializeFields(){return{1:T.create({parent:this,fieldKey:1,fieldName:"deviceId",deprecated:!1,pointerRules:p}),2:T.create({parent:this,fieldKey:2,fieldName:"recordMode",deprecated:!1,pointerRules:p},"normal"),10:F.create({parent:this,fieldKey:10,fieldName:"channel",deprecated:!1,pointerRules:p},"any","",-1)}}};var Bi=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"AudioBusBox",pointerRules:p}),n)}static ClassName="AudioBusBox";constructor(e){super(e)}accept(e){return _(e.visitAudioBusBox,this)}get collection(){return this.getField(1)}get output(){return this.getField(2)}get input(){return this.getField(3)}get enabled(){return this.getField(4)}get icon(){return this.getField(5)}get label(){return this.getField(6)}get color(){return this.getField(7)}get minimized(){return this.getField(8)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"collection",deprecated:!1,pointerRules:p},u.AudioBusses,!0),2:$.create({parent:this,fieldKey:2,fieldName:"output",deprecated:!1,pointerRules:p},u.AudioOutput,!0),3:Z.hook({parent:this,fieldKey:3,fieldName:"input",deprecated:!1,pointerRules:{accepts:[u.AudioOutput],mandatory:!1}}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:T.create({parent:this,fieldKey:5,fieldName:"icon",deprecated:!1,pointerRules:p}),6:T.create({parent:this,fieldKey:6,fieldName:"label",deprecated:!1,pointerRules:p}),7:T.create({parent:this,fieldKey:7,fieldName:"color",deprecated:!1,pointerRules:p},"red"),8:I.create({parent:this,fieldKey:8,fieldName:"minimized",deprecated:!1,pointerRules:p})}}};var Ls=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"AuxSendBox",pointerRules:p}),n)}static ClassName="AuxSendBox";constructor(e){super(e)}accept(e){return _(e.visitAuxSendBox,this)}get audioUnit(){return this.getField(1)}get targetBus(){return this.getField(2)}get index(){return this.getField(3)}get routing(){return this.getField(4)}get sendGain(){return this.getField(5)}get sendPan(){return this.getField(6)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"audioUnit",deprecated:!1,pointerRules:p},u.AuxSend,!0),2:$.create({parent:this,fieldKey:2,fieldName:"targetBus",deprecated:!1,pointerRules:p},u.AudioOutput,!0),3:F.create({parent:this,fieldKey:3,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),4:F.create({parent:this,fieldKey:4,fieldName:"routing",deprecated:!1,pointerRules:p},{values:[0,1]},"",1),5:b.create({parent:this,fieldKey:5,fieldName:"sendGain",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","dB"),6:b.create({parent:this,fieldKey:6,fieldName:"sendPan",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","")}}};var fl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"GrooveShuffleBox",pointerRules:{accepts:[u.Groove],mandatory:!0}}),n)}static ClassName="GrooveShuffleBox";constructor(e){super(e)}accept(e){return _(e.visitGrooveShuffleBox,this)}get label(){return this.getField(1)}get amount(){return this.getField(10)}get duration(){return this.getField(11)}initializeFields(){return{1:T.create({parent:this,fieldKey:1,fieldName:"label",deprecated:!1,pointerRules:p}),10:b.create({parent:this,fieldKey:10,fieldName:"amount",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.6),11:F.create({parent:this,fieldKey:11,fieldName:"duration",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"non-negative","ppqn",480)}}};var Lp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"UnknownAudioEffectDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="UnknownAudioEffectDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitUnknownAudioEffectDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get comment(){return this.getField(10)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:T.create({parent:this,fieldKey:10,fieldName:"comment",deprecated:!1,pointerRules:p})}}};var Kp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"UnknownMidiEffectDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="UnknownMidiEffectDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitUnknownMidiEffectDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get comment(){return this.getField(10)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.MidiEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:T.create({parent:this,fieldKey:10,fieldName:"comment",deprecated:!1,pointerRules:p})}}};var Wp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"DeviceInterfaceKnobBox",pointerRules:p}),n)}static ClassName="DeviceInterfaceKnobBox";constructor(e){super(e)}accept(e){return _(e.visitDeviceInterfaceKnobBox,this)}get userInterface(){return this.getField(1)}get parameter(){return this.getField(2)}get index(){return this.getField(3)}get anchor(){return this.getField(10)}get color(){return this.getField(11)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"userInterface",deprecated:!1,pointerRules:p},u.DeviceUserInterface,!0),2:$.create({parent:this,fieldKey:2,fieldName:"parameter",deprecated:!1,pointerRules:p},u.ParameterController,!0),3:F.create({parent:this,fieldKey:3,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),10:b.create({parent:this,fieldKey:10,fieldName:"anchor",deprecated:!1,pointerRules:p},"unipolar","%"),11:T.create({parent:this,fieldKey:11,fieldName:"color",deprecated:!1,pointerRules:p})}}};var vf=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get elements(){return this.getField(1)}initializeFields(){return{1:Z.hook({parent:this,fieldKey:1,fieldName:"elements",deprecated:!1,pointerRules:{accepts:[u.DeviceUserInterface],mandatory:!1}})}}};var Zp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ModularDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="ModularDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitModularDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get modularSetup(){return this.getField(10)}get userInterface(){return this.getField(11)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:$.create({parent:this,fieldKey:10,fieldName:"modularSetup",deprecated:!1,pointerRules:p},u.ModularSetup,!0),11:vf.create({parent:this,fieldKey:11,fieldName:"userInterface",deprecated:!1,pointerRules:p})}}};var Gp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"StereoToolDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="StereoToolDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitStereoToolDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get volume(){return this.getField(10)}get panning(){return this.getField(11)}get stereo(){return this.getField(12)}get invertL(){return this.getField(13)}get invertR(){return this.getField(14)}get swap(){return this.getField(15)}get panningMixing(){return this.getField(20)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"volume",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-72,mid:0,max:12,scaling:"decibel"},"dB",0),11:b.create({parent:this,fieldKey:11,fieldName:"panning",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%",0),12:b.create({parent:this,fieldKey:12,fieldName:"stereo",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%",0),13:I.create({parent:this,fieldKey:13,fieldName:"invertL",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}}),14:I.create({parent:this,fieldKey:14,fieldName:"invertR",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}}),15:I.create({parent:this,fieldKey:15,fieldName:"swap",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}}),20:F.create({parent:this,fieldKey:20,fieldName:"panningMixing",deprecated:!1,pointerRules:p},{values:[0,1]},"",1)}}};var ml=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"CompressorDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="CompressorDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitCompressorDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get lookahead(){return this.getField(10)}get automakeup(){return this.getField(11)}get autoattack(){return this.getField(12)}get autorelease(){return this.getField(13)}get inputgain(){return this.getField(14)}get threshold(){return this.getField(15)}get ratio(){return this.getField(16)}get knee(){return this.getField(17)}get attack(){return this.getField(18)}get release(){return this.getField(19)}get makeup(){return this.getField(20)}get mix(){return this.getField(21)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:I.create({parent:this,fieldKey:10,fieldName:"lookahead",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},!1),11:I.create({parent:this,fieldKey:11,fieldName:"automakeup",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},!0),12:I.create({parent:this,fieldKey:12,fieldName:"autoattack",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},!1),13:I.create({parent:this,fieldKey:13,fieldName:"autorelease",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},!1),14:b.create({parent:this,fieldKey:14,fieldName:"inputgain",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-30,max:30,scaling:"linear"},"dB",0),15:b.create({parent:this,fieldKey:15,fieldName:"threshold",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-60,max:0,scaling:"linear"},"dB",-10),16:b.create({parent:this,fieldKey:16,fieldName:"ratio",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:1,max:24,scaling:"exponential"},"",2),17:b.create({parent:this,fieldKey:17,fieldName:"knee",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:0,max:24,scaling:"linear"},"dB",0),18:b.create({parent:this,fieldKey:18,fieldName:"attack",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:0,max:100,scaling:"linear"},"ms",0),19:b.create({parent:this,fieldKey:19,fieldName:"release",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:5,max:1500,scaling:"linear"},"ms",5),20:b.create({parent:this,fieldKey:20,fieldName:"makeup",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-40,max:40,scaling:"linear"},"dB",0),21:b.create({parent:this,fieldKey:21,fieldName:"mix",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",1)}}};var qp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"DelayDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="DelayDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitDelayDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get delay(){return this.getField(10)}get feedback(){return this.getField(11)}get cross(){return this.getField(12)}get filter(){return this.getField(13)}get wet(){return this.getField(14)}get dry(){return this.getField(15)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"delay",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"any","",4),11:b.create({parent:this,fieldKey:11,fieldName:"feedback",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.5),12:b.create({parent:this,fieldKey:12,fieldName:"cross",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%",0),13:b.create({parent:this,fieldKey:13,fieldName:"filter",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%",0),14:b.create({parent:this,fieldKey:14,fieldName:"wet",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","dB",-6),15:b.create({parent:this,fieldKey:15,fieldName:"dry",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","dB",0)}}};var Hp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"CrusherDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="CrusherDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitCrusherDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get crush(){return this.getField(10)}get bits(){return this.getField(11)}get boost(){return this.getField(12)}get mix(){return this.getField(13)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"crush",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",0),11:F.create({parent:this,fieldKey:11,fieldName:"bits",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:1,max:16},"bits",16),12:b.create({parent:this,fieldKey:12,fieldName:"boost",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:0,max:24,scaling:"linear"},"dB",0),13:b.create({parent:this,fieldKey:13,fieldName:"mix",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",1)}}};var Jp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"DattorroReverbDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="DattorroReverbDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitDattorroReverbDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get preDelay(){return this.getField(10)}get bandwidth(){return this.getField(11)}get inputDiffusion1(){return this.getField(12)}get inputDiffusion2(){return this.getField(13)}get decay(){return this.getField(14)}get decayDiffusion1(){return this.getField(15)}get decayDiffusion2(){return this.getField(16)}get damping(){return this.getField(17)}get excursionRate(){return this.getField(18)}get excursionDepth(){return this.getField(19)}get wet(){return this.getField(20)}get dry(){return this.getField(21)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"preDelay",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:0,max:1e3,scaling:"linear"},"ms",0),11:b.create({parent:this,fieldKey:11,fieldName:"bandwidth",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.9999),12:b.create({parent:this,fieldKey:12,fieldName:"inputDiffusion1",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.75),13:b.create({parent:this,fieldKey:13,fieldName:"inputDiffusion2",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.625),14:b.create({parent:this,fieldKey:14,fieldName:"decay",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.5),15:b.create({parent:this,fieldKey:15,fieldName:"decayDiffusion1",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.7),16:b.create({parent:this,fieldKey:16,fieldName:"decayDiffusion2",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.5),17:b.create({parent:this,fieldKey:17,fieldName:"damping",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.005),18:b.create({parent:this,fieldKey:18,fieldName:"excursionRate",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.5),19:b.create({parent:this,fieldKey:19,fieldName:"excursionDepth",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.7),20:b.create({parent:this,fieldKey:20,fieldName:"wet",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","dB",-6),21:b.create({parent:this,fieldKey:21,fieldName:"dry",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","dB",0)}}};var Qp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"VelocityDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="VelocityDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitVelocityDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get magnetPosition(){return this.getField(10)}get magnetStrength(){return this.getField(11)}get randomSeed(){return this.getField(12)}get randomAmount(){return this.getField(13)}get offset(){return this.getField(14)}get mix(){return this.getField(15)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.MidiEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"magnetPosition",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.5),11:b.create({parent:this,fieldKey:11,fieldName:"magnetStrength",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%"),12:F.create({parent:this,fieldKey:12,fieldName:"randomSeed",deprecated:!1,pointerRules:p},"any","",2048),13:b.create({parent:this,fieldKey:13,fieldName:"randomAmount",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%"),14:b.create({parent:this,fieldKey:14,fieldName:"offset",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%",0),15:b.create({parent:this,fieldKey:15,fieldName:"mix",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",1)}}};var Yp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"FoldDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="FoldDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitFoldDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get drive(){return this.getField(10)}get overSampling(){return this.getField(11)}get volume(){return this.getField(12)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"drive",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:0,max:30,scaling:"linear"},"dB",0),11:F.create({parent:this,fieldKey:11,fieldName:"overSampling",deprecated:!1,pointerRules:p},{length:3},"",0),12:b.create({parent:this,fieldKey:12,fieldName:"volume",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-18,max:0,scaling:"linear"},"dB",0)}}};var Xp=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"TidalDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="TidalDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitTidalDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get slope(){return this.getField(10)}get symmetry(){return this.getField(11)}get rate(){return this.getField(20)}get depth(){return this.getField(21)}get offset(){return this.getField(22)}get channelOffset(){return this.getField(23)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"slope",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%",-.25),11:b.create({parent:this,fieldKey:11,fieldName:"symmetry",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.5),20:b.create({parent:this,fieldKey:20,fieldName:"rate",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",3),21:b.create({parent:this,fieldKey:21,fieldName:"depth",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","",1),22:b.create({parent:this,fieldKey:22,fieldName:"offset",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-180,max:180,scaling:"linear"},"\xB0",0),23:b.create({parent:this,fieldKey:23,fieldName:"channelOffset",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-180,max:180,scaling:"linear"},"\xB0",0)}}};var Du=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get enabled(){return this.getField(1)}get frequency(){return this.getField(10)}get order(){return this.getField(11)}get q(){return this.getField(12)}initializeFields(){return{1:I.create({parent:this,fieldKey:1,fieldName:"enabled",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}}),10:b.create({parent:this,fieldKey:10,fieldName:"frequency",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:20,max:2e4,scaling:"exponential"},"Hz"),11:F.create({parent:this,fieldKey:11,fieldName:"order",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{length:4},""),12:b.create({parent:this,fieldKey:12,fieldName:"q",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.01,max:10,scaling:"exponential"},"")}}};var Mu=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get enabled(){return this.getField(1)}get frequency(){return this.getField(10)}get gain(){return this.getField(11)}initializeFields(){return{1:I.create({parent:this,fieldKey:1,fieldName:"enabled",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}}),10:b.create({parent:this,fieldKey:10,fieldName:"frequency",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:20,max:2e4,scaling:"exponential"},"Hz"),11:b.create({parent:this,fieldKey:11,fieldName:"gain",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-24,max:24,scaling:"linear"},"dB")}}};var Al=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get enabled(){return this.getField(1)}get frequency(){return this.getField(10)}get gain(){return this.getField(11)}get q(){return this.getField(12)}initializeFields(){return{1:I.create({parent:this,fieldKey:1,fieldName:"enabled",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}}),10:b.create({parent:this,fieldKey:10,fieldName:"frequency",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:20,max:2e4,scaling:"exponential"},"Hz"),11:b.create({parent:this,fieldKey:11,fieldName:"gain",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-24,max:24,scaling:"linear"},"dB"),12:b.create({parent:this,fieldKey:12,fieldName:"q",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.01,max:10,scaling:"exponential"},"")}}};var ef=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"RevampDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="RevampDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitRevampDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get highPass(){return this.getField(10)}get lowShelf(){return this.getField(11)}get lowBell(){return this.getField(12)}get midBell(){return this.getField(13)}get highBell(){return this.getField(14)}get highShelf(){return this.getField(15)}get lowPass(){return this.getField(16)}get gain(){return this.getField(17)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:Du.create({parent:this,fieldKey:10,fieldName:"highPass",deprecated:!1,pointerRules:p}),11:Mu.create({parent:this,fieldKey:11,fieldName:"lowShelf",deprecated:!1,pointerRules:p}),12:Al.create({parent:this,fieldKey:12,fieldName:"lowBell",deprecated:!1,pointerRules:p}),13:Al.create({parent:this,fieldKey:13,fieldName:"midBell",deprecated:!1,pointerRules:p}),14:Al.create({parent:this,fieldKey:14,fieldName:"highBell",deprecated:!1,pointerRules:p}),15:Mu.create({parent:this,fieldKey:15,fieldName:"highShelf",deprecated:!1,pointerRules:p}),16:Du.create({parent:this,fieldKey:16,fieldName:"lowPass",deprecated:!1,pointerRules:p}),17:b.create({parent:this,fieldKey:17,fieldName:"gain",deprecated:!0,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-18,max:18,scaling:"linear"},"db")}}};var tf=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ReverbDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="ReverbDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitReverbDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get decay(){return this.getField(10)}get preDelay(){return this.getField(11)}get damp(){return this.getField(12)}get filter(){return this.getField(13)}get wet(){return this.getField(14)}get dry(){return this.getField(15)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.AudioEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"decay",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.5),11:b.create({parent:this,fieldKey:11,fieldName:"preDelay",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.001,max:.5,scaling:"exponential"},"s",0),12:b.create({parent:this,fieldKey:12,fieldName:"damp",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",.5),13:b.create({parent:this,fieldKey:13,fieldName:"filter",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%",0),14:b.create({parent:this,fieldKey:14,fieldName:"wet",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","dB",-3),15:b.create({parent:this,fieldKey:15,fieldName:"dry",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","dB",0)}}};var yf=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get waveform(){return this.getField(1)}get volume(){return this.getField(2)}get octave(){return this.getField(3)}get tune(){return this.getField(4)}initializeFields(){return{1:F.create({parent:this,fieldKey:1,fieldName:"waveform",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{values:[0,1,2,3]},""),2:b.create({parent:this,fieldKey:2,fieldName:"volume",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","db",-1/0),3:F.create({parent:this,fieldKey:3,fieldName:"octave",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-3,max:3},"oct",0),4:b.create({parent:this,fieldKey:4,fieldName:"tune",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-1200,max:1200,scaling:"linear"},"ct")}}};var xf=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get waveform(){return this.getField(1)}get rate(){return this.getField(2)}get sync(){return this.getField(3)}get targetTune(){return this.getField(10)}get targetCutoff(){return this.getField(11)}get targetVolume(){return this.getField(12)}initializeFields(){return{1:F.create({parent:this,fieldKey:1,fieldName:"waveform",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{values:[0,1,2,3]},""),2:b.create({parent:this,fieldKey:2,fieldName:"rate",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:1e-4,max:30,scaling:"exponential"},"Hz",1e-4),3:I.create({parent:this,fieldKey:3,fieldName:"sync",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},!1),10:b.create({parent:this,fieldKey:10,fieldName:"targetTune",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%"),11:b.create({parent:this,fieldKey:11,fieldName:"targetCutoff",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%"),12:b.create({parent:this,fieldKey:12,fieldName:"targetVolume",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%")}}};var wf=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get attack(){return this.getField(1)}get hold(){return this.getField(2)}get release(){return this.getField(3)}get volume(){return this.getField(4)}initializeFields(){return{1:b.create({parent:this,fieldKey:1,fieldName:"attack",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.001,max:5,scaling:"exponential"},"s",.001),2:b.create({parent:this,fieldKey:2,fieldName:"hold",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.001,max:5,scaling:"exponential"},"s",.001),3:b.create({parent:this,fieldKey:3,fieldName:"release",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.001,max:5,scaling:"exponential"},"s",.001),4:b.create({parent:this,fieldKey:4,fieldName:"volume",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","db",.001)}}};var gl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"VaporisateurDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="VaporisateurDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitVaporisateurDeviceBox,this)}get host(){return this.getField(1)}get label(){return this.getField(2)}get icon(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get volume(){return this.getField(10)}get octave(){return this.getField(11)}get tune(){return this.getField(12)}get waveform(){return this.getField(13)}get cutoff(){return this.getField(14)}get resonance(){return this.getField(15)}get attack(){return this.getField(16)}get release(){return this.getField(17)}get filterEnvelope(){return this.getField(18)}get decay(){return this.getField(19)}get sustain(){return this.getField(20)}get glideTime(){return this.getField(21)}get voicingMode(){return this.getField(22)}get unisonCount(){return this.getField(23)}get unisonDetune(){return this.getField(24)}get unisonStereo(){return this.getField(25)}get filterOrder(){return this.getField(26)}get filterKeyboard(){return this.getField(27)}get lfo(){return this.getField(30)}get oscillators(){return this.getField(40)}get noise(){return this.getField(50)}get version(){return this.getField(99)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.InstrumentHost,!0),2:T.create({parent:this,fieldKey:2,fieldName:"label",deprecated:!1,pointerRules:p}),3:T.create({parent:this,fieldKey:3,fieldName:"icon",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"volume",deprecated:!0,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","dB",-6),11:F.create({parent:this,fieldKey:11,fieldName:"octave",deprecated:!0,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"any","oct"),12:b.create({parent:this,fieldKey:12,fieldName:"tune",deprecated:!0,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"any","ct"),13:F.create({parent:this,fieldKey:13,fieldName:"waveform",deprecated:!0,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"any",""),14:b.create({parent:this,fieldKey:14,fieldName:"cutoff",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:20,max:2e4,scaling:"exponential"},"Hz"),15:b.create({parent:this,fieldKey:15,fieldName:"resonance",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.01,max:10,scaling:"exponential"},"q"),16:b.create({parent:this,fieldKey:16,fieldName:"attack",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.001,max:5,scaling:"exponential"},"s"),17:b.create({parent:this,fieldKey:17,fieldName:"release",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.001,max:5,scaling:"exponential"},"s"),18:b.create({parent:this,fieldKey:18,fieldName:"filterEnvelope",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%"),19:b.create({parent:this,fieldKey:19,fieldName:"decay",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.001,max:5,scaling:"exponential"},"s",.001),20:b.create({parent:this,fieldKey:20,fieldName:"sustain",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",1),21:b.create({parent:this,fieldKey:21,fieldName:"glideTime",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",0),22:F.create({parent:this,fieldKey:22,fieldName:"voicingMode",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{values:[0,1]},"",1),23:F.create({parent:this,fieldKey:23,fieldName:"unisonCount",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{values:[1,3,5]},"",1),24:b.create({parent:this,fieldKey:24,fieldName:"unisonDetune",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:1,max:1200,scaling:"exponential"},"ct",30),25:b.create({parent:this,fieldKey:25,fieldName:"unisonStereo",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",1),26:F.create({parent:this,fieldKey:26,fieldName:"filterOrder",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{values:[1,2,3,4]},"",1),27:b.create({parent:this,fieldKey:27,fieldName:"filterKeyboard",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","%"),30:xf.create({parent:this,fieldKey:30,fieldName:"lfo",deprecated:!1,pointerRules:p}),40:Ip.create({parent:this,fieldKey:40,fieldName:"oscillators",deprecated:!1,pointerRules:p},e=>yf.create(e),2),50:wf.create({parent:this,fieldKey:50,fieldName:"noise",deprecated:!1,pointerRules:p}),99:F.create({parent:this,fieldKey:99,fieldName:"version",deprecated:!1,pointerRules:p},"any","")}}};var bf=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get id(){return this.getField(1)}get label(){return this.getField(2)}initializeFields(){return{1:T.create({parent:this,fieldKey:1,fieldName:"id",deprecated:!1,pointerRules:p}),2:T.create({parent:this,fieldKey:2,fieldName:"label",deprecated:!1,pointerRules:p})}}};var vl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"MIDIOutputDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="MIDIOutputDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitMIDIOutputDeviceBox,this)}get host(){return this.getField(1)}get label(){return this.getField(2)}get icon(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get deprecatedDevice(){return this.getField(10)}get channel(){return this.getField(11)}get deprecatedDelay(){return this.getField(12)}get parameters(){return this.getField(13)}get device(){return this.getField(14)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.InstrumentHost,!0),2:T.create({parent:this,fieldKey:2,fieldName:"label",deprecated:!1,pointerRules:p}),3:T.create({parent:this,fieldKey:3,fieldName:"icon",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:bf.create({parent:this,fieldKey:10,fieldName:"deprecatedDevice",deprecated:!0,pointerRules:p}),11:F.create({parent:this,fieldKey:11,fieldName:"channel",deprecated:!1,pointerRules:p},{min:0,max:15},"ch"),12:F.create({parent:this,fieldKey:12,fieldName:"deprecatedDelay",deprecated:!0,pointerRules:p},"any","ms",10),13:Z.hook({parent:this,fieldKey:13,fieldName:"parameters",deprecated:!1,pointerRules:{accepts:[u.Parameter],mandatory:!1}}),14:$.create({parent:this,fieldKey:14,fieldName:"device",deprecated:!1,pointerRules:p},u.MIDIDevice,!1)}}};var $i=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"MIDIOutputBox",pointerRules:p}),n)}static ClassName="MIDIOutputBox";constructor(e){super(e)}accept(e){return _(e.visitMIDIOutputBox,this)}get root(){return this.getField(1)}get device(){return this.getField(2)}get id(){return this.getField(3)}get label(){return this.getField(4)}get delayInMs(){return this.getField(5)}get sendTransportMessages(){return this.getField(6)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"root",deprecated:!1,pointerRules:p},u.MIDIDevice,!0),2:Z.hook({parent:this,fieldKey:2,fieldName:"device",deprecated:!1,pointerRules:{accepts:[u.MIDIDevice],mandatory:!0}}),3:T.create({parent:this,fieldKey:3,fieldName:"id",deprecated:!1,pointerRules:p}),4:T.create({parent:this,fieldKey:4,fieldName:"label",deprecated:!1,pointerRules:p}),5:F.create({parent:this,fieldKey:5,fieldName:"delayInMs",deprecated:!1,pointerRules:p},{min:0,max:500},"ms",10),6:I.create({parent:this,fieldKey:6,fieldName:"sendTransportMessages",deprecated:!1,pointerRules:p},!0)}}};var ki=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"MIDIOutputParameterBox",pointerRules:p}),n)}static ClassName="MIDIOutputParameterBox";constructor(e){super(e)}accept(e){return _(e.visitMIDIOutputParameterBox,this)}get owner(){return this.getField(1)}get label(){return this.getField(2)}get controller(){return this.getField(3)}get value(){return this.getField(4)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"owner",deprecated:!1,pointerRules:p},u.Parameter,!0),2:T.create({parent:this,fieldKey:2,fieldName:"label",deprecated:!1,pointerRules:p},""),3:F.create({parent:this,fieldKey:3,fieldName:"controller",deprecated:!1,pointerRules:p},{min:0,max:127},"#",64),4:b.create({parent:this,fieldKey:4,fieldName:"value",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!0}},"unipolar","%")}}};var yl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"SoundfontDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="SoundfontDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitSoundfontDeviceBox,this)}get host(){return this.getField(1)}get label(){return this.getField(2)}get icon(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get file(){return this.getField(10)}get presetIndex(){return this.getField(11)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.InstrumentHost,!0),2:T.create({parent:this,fieldKey:2,fieldName:"label",deprecated:!1,pointerRules:p}),3:T.create({parent:this,fieldKey:3,fieldName:"icon",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:$.create({parent:this,fieldKey:10,fieldName:"file",deprecated:!1,pointerRules:p},u.SoundfontFile,!1),11:F.create({parent:this,fieldKey:11,fieldName:"presetIndex",deprecated:!1,pointerRules:p},{min:0,max:65535},"")}}};var xl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"NanoDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="NanoDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitNanoDeviceBox,this)}get host(){return this.getField(1)}get label(){return this.getField(2)}get icon(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get volume(){return this.getField(10)}get file(){return this.getField(15)}get release(){return this.getField(20)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.InstrumentHost,!0),2:T.create({parent:this,fieldKey:2,fieldName:"label",deprecated:!1,pointerRules:p}),3:T.create({parent:this,fieldKey:3,fieldName:"icon",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"volume",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"decibel","dB",-3),15:$.create({parent:this,fieldKey:15,fieldName:"file",deprecated:!1,pointerRules:p},u.AudioFile,!1),20:b.create({parent:this,fieldKey:20,fieldName:"release",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.001,max:8,scaling:"exponential"},"s",.1)}}};var wl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"PlayfieldDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="PlayfieldDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitPlayfieldDeviceBox,this)}get host(){return this.getField(1)}get label(){return this.getField(2)}get icon(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get samples(){return this.getField(10)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.InstrumentHost,!0),2:T.create({parent:this,fieldKey:2,fieldName:"label",deprecated:!1,pointerRules:p}),3:T.create({parent:this,fieldKey:3,fieldName:"icon",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:Z.hook({parent:this,fieldKey:10,fieldName:"samples",deprecated:!1,pointerRules:{accepts:[u.Sample],mandatory:!1}})}}};var No=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"PlayfieldSampleBox",pointerRules:{accepts:[u.Editing],mandatory:!1}}),n)}static ClassName="PlayfieldSampleBox";constructor(e){super(e)}accept(e){return _(e.visitPlayfieldSampleBox,this)}get device(){return this.getField(10)}get file(){return this.getField(11)}get midiEffects(){return this.getField(12)}get audioEffects(){return this.getField(13)}get index(){return this.getField(15)}get label(){return this.getField(20)}get icon(){return this.getField(21)}get enabled(){return this.getField(22)}get minimized(){return this.getField(23)}get mute(){return this.getField(40)}get solo(){return this.getField(41)}get exclude(){return this.getField(42)}get polyphone(){return this.getField(43)}get gate(){return this.getField(44)}get pitch(){return this.getField(45)}get sampleStart(){return this.getField(46)}get sampleEnd(){return this.getField(47)}get attack(){return this.getField(48)}get release(){return this.getField(49)}initializeFields(){return{10:$.create({parent:this,fieldKey:10,fieldName:"device",deprecated:!1,pointerRules:p},u.Sample,!0),11:$.create({parent:this,fieldKey:11,fieldName:"file",deprecated:!1,pointerRules:p},u.AudioFile,!0),12:Z.hook({parent:this,fieldKey:12,fieldName:"midiEffects",deprecated:!1,pointerRules:{accepts:[u.MidiEffectHost],mandatory:!1}}),13:Z.hook({parent:this,fieldKey:13,fieldName:"audioEffects",deprecated:!1,pointerRules:{accepts:[u.AudioEffectHost],mandatory:!1}}),15:F.create({parent:this,fieldKey:15,fieldName:"index",deprecated:!1,pointerRules:p},{min:0,max:127},"",60),20:T.create({parent:this,fieldKey:20,fieldName:"label",deprecated:!1,pointerRules:p}),21:T.create({parent:this,fieldKey:21,fieldName:"icon",deprecated:!1,pointerRules:p}),22:I.create({parent:this,fieldKey:22,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),23:I.create({parent:this,fieldKey:23,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),40:I.create({parent:this,fieldKey:40,fieldName:"mute",deprecated:!1,pointerRules:p}),41:I.create({parent:this,fieldKey:41,fieldName:"solo",deprecated:!1,pointerRules:p}),42:I.create({parent:this,fieldKey:42,fieldName:"exclude",deprecated:!1,pointerRules:p}),43:I.create({parent:this,fieldKey:43,fieldName:"polyphone",deprecated:!1,pointerRules:p}),44:F.create({parent:this,fieldKey:44,fieldName:"gate",deprecated:!1,pointerRules:p},{length:3},"",0),45:b.create({parent:this,fieldKey:45,fieldName:"pitch",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-1200,max:1200,scaling:"linear"},"ct"),46:b.create({parent:this,fieldKey:46,fieldName:"sampleStart",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",0),47:b.create({parent:this,fieldKey:47,fieldName:"sampleEnd",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%",1),48:b.create({parent:this,fieldKey:48,fieldName:"attack",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.001,max:5,scaling:"exponential"},"s",.001),49:b.create({parent:this,fieldKey:49,fieldName:"release",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:.001,max:5,scaling:"exponential"},"s",.02)}}};var bl=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"TapeDeviceBox",pointerRules:{accepts:[u.Device,u.Selection,u.Automation],mandatory:!1}}),n)}static ClassName="TapeDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitTapeDeviceBox,this)}get host(){return this.getField(1)}get label(){return this.getField(2)}get icon(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get flutter(){return this.getField(10)}get wow(){return this.getField(11)}get noise(){return this.getField(12)}get saturation(){return this.getField(13)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.InstrumentHost,!0),2:T.create({parent:this,fieldKey:2,fieldName:"label",deprecated:!1,pointerRules:p}),3:T.create({parent:this,fieldKey:3,fieldName:"icon",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:b.create({parent:this,fieldKey:10,fieldName:"flutter",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%"),11:b.create({parent:this,fieldKey:11,fieldName:"wow",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%"),12:b.create({parent:this,fieldKey:12,fieldName:"noise",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%"),13:b.create({parent:this,fieldKey:13,fieldName:"saturation",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"unipolar","%")}}};var rf=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ArpeggioDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="ArpeggioDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitArpeggioDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get modeIndex(){return this.getField(10)}get numOctaves(){return this.getField(11)}get rateIndex(){return this.getField(12)}get gate(){return this.getField(13)}get repeat(){return this.getField(14)}get velocity(){return this.getField(15)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.MidiEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:F.create({parent:this,fieldKey:10,fieldName:"modeIndex",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{length:3},"",0),11:F.create({parent:this,fieldKey:11,fieldName:"numOctaves",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:1,max:5},"oct",1),12:F.create({parent:this,fieldKey:12,fieldName:"rateIndex",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{length:17},"",9),13:b.create({parent:this,fieldKey:13,fieldName:"gate",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:0,max:2,scaling:"linear"},"",1),14:F.create({parent:this,fieldKey:14,fieldName:"repeat",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:1,max:16},"",1),15:b.create({parent:this,fieldKey:15,fieldName:"velocity",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},"bipolar","",0)}}};var nf=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"PitchDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="PitchDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitPitchDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get semiTones(){return this.getField(10)}get cents(){return this.getField(11)}get octaves(){return this.getField(12)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.MidiEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:F.create({parent:this,fieldKey:10,fieldName:"semiTones",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-36,max:36},"st",0),11:b.create({parent:this,fieldKey:11,fieldName:"cents",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-50,max:50,scaling:"linear"},"ct",0),12:F.create({parent:this,fieldKey:12,fieldName:"octaves",deprecated:!1,pointerRules:{accepts:[u.Modulation,u.Automation,u.MidiControl],mandatory:!1}},{min:-7,max:7},"oct",0)}}};var of=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ZeitgeistDeviceBox",pointerRules:{accepts:[u.Device,u.Selection],mandatory:!1}}),n)}static ClassName="ZeitgeistDeviceBox";constructor(e){super(e)}accept(e){return _(e.visitZeitgeistDeviceBox,this)}get host(){return this.getField(1)}get index(){return this.getField(2)}get label(){return this.getField(3)}get enabled(){return this.getField(4)}get minimized(){return this.getField(5)}get groove(){return this.getField(10)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"host",deprecated:!1,pointerRules:p},u.MidiEffectHost,!0),2:F.create({parent:this,fieldKey:2,fieldName:"index",deprecated:!1,pointerRules:p},"index",""),3:T.create({parent:this,fieldKey:3,fieldName:"label",deprecated:!1,pointerRules:p}),4:I.create({parent:this,fieldKey:4,fieldName:"enabled",deprecated:!1,pointerRules:p},!0),5:I.create({parent:this,fieldKey:5,fieldName:"minimized",deprecated:!1,pointerRules:p},!1),10:$.create({parent:this,fieldKey:10,fieldName:"groove",deprecated:!1,pointerRules:p},u.Groove,!0)}}};var sf=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ModularBox",pointerRules:p}),n)}static ClassName="ModularBox";constructor(e){super(e)}accept(e){return _(e.visitModularBox,this)}get collection(){return this.getField(1)}get device(){return this.getField(2)}get editing(){return this.getField(3)}get modules(){return this.getField(11)}get connections(){return this.getField(12)}get label(){return this.getField(13)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"collection",deprecated:!1,pointerRules:p},u.ModularSetup,!0),2:Z.hook({parent:this,fieldKey:2,fieldName:"device",deprecated:!1,pointerRules:{accepts:[u.ModularSetup],mandatory:!0}}),3:Z.hook({parent:this,fieldKey:3,fieldName:"editing",deprecated:!1,pointerRules:{accepts:[u.Editing],mandatory:!1}}),11:Z.hook({parent:this,fieldKey:11,fieldName:"modules",deprecated:!1,pointerRules:{accepts:[u.ModuleCollection],mandatory:!1}}),12:Z.hook({parent:this,fieldKey:12,fieldName:"connections",deprecated:!1,pointerRules:{accepts:[u.ConnectionCollection],mandatory:!1}}),13:T.create({parent:this,fieldKey:13,fieldName:"label",deprecated:!1,pointerRules:p})}}};var af=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ModuleConnectionBox",pointerRules:p}),n)}static ClassName="ModuleConnectionBox";constructor(e){super(e)}accept(e){return _(e.visitModuleConnectionBox,this)}get collection(){return this.getField(1)}get source(){return this.getField(2)}get target(){return this.getField(3)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"collection",deprecated:!1,pointerRules:p},u.ConnectionCollection,!0),2:$.create({parent:this,fieldKey:2,fieldName:"source",deprecated:!1,pointerRules:p},u.VoltageConnection,!0),3:$.create({parent:this,fieldKey:3,fieldName:"target",deprecated:!1,pointerRules:p},u.VoltageConnection,!0)}}};var qr=class r extends Ue{static create(e){return new r(e)}constructor(e){super(e)}get collection(){return this.getField(1)}get label(){return this.getField(2)}get x(){return this.getField(3)}get y(){return this.getField(4)}get collapsed(){return this.getField(5)}get removable(){return this.getField(6)}initializeFields(){return{1:$.create({parent:this,fieldKey:1,fieldName:"collection",deprecated:!1,pointerRules:p},u.ModuleCollection,!0),2:T.create({parent:this,fieldKey:2,fieldName:"label",deprecated:!1,pointerRules:p}),3:F.create({parent:this,fieldKey:3,fieldName:"x",deprecated:!1,pointerRules:p},"any","x"),4:F.create({parent:this,fieldKey:4,fieldName:"y",deprecated:!1,pointerRules:p},"any","y"),5:I.create({parent:this,fieldKey:5,fieldName:"collapsed",deprecated:!1,pointerRules:p},!1),6:I.create({parent:this,fieldKey:6,fieldName:"removable",deprecated:!1,pointerRules:p},!0)}}};var lf=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ModularAudioInputBox",pointerRules:{accepts:[u.Selection],mandatory:!1}}),n)}static ClassName="ModularAudioInputBox";constructor(e){super(e)}accept(e){return _(e.visitModularAudioInputBox,this)}get attributes(){return this.getField(1)}get output(){return this.getField(10)}initializeFields(){return{1:qr.create({parent:this,fieldKey:1,fieldName:"attributes",deprecated:!1,pointerRules:p}),10:Z.hook({parent:this,fieldKey:10,fieldName:"output",deprecated:!1,pointerRules:{accepts:[u.VoltageConnection],mandatory:!1}})}}};var cf=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ModularAudioOutputBox",pointerRules:{accepts:[u.Selection],mandatory:!1}}),n)}static ClassName="ModularAudioOutputBox";constructor(e){super(e)}accept(e){return _(e.visitModularAudioOutputBox,this)}get attributes(){return this.getField(1)}get input(){return this.getField(10)}initializeFields(){return{1:qr.create({parent:this,fieldKey:1,fieldName:"attributes",deprecated:!1,pointerRules:p}),10:Z.hook({parent:this,fieldKey:10,fieldName:"input",deprecated:!1,pointerRules:{accepts:[u.VoltageConnection],mandatory:!1}})}}};var uf=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ModuleDelayBox",pointerRules:{accepts:[u.Selection],mandatory:!1}}),n)}static ClassName="ModuleDelayBox";constructor(e){super(e)}accept(e){return _(e.visitModuleDelayBox,this)}get attributes(){return this.getField(1)}get voltageInput(){return this.getField(10)}get voltageOutput(){return this.getField(11)}get time(){return this.getField(20)}initializeFields(){return{1:qr.create({parent:this,fieldKey:1,fieldName:"attributes",deprecated:!1,pointerRules:p}),10:Z.hook({parent:this,fieldKey:10,fieldName:"voltageInput",deprecated:!1,pointerRules:{accepts:[u.VoltageConnection],mandatory:!1}}),11:Z.hook({parent:this,fieldKey:11,fieldName:"voltageOutput",deprecated:!1,pointerRules:{accepts:[u.VoltageConnection],mandatory:!1}}),20:b.create({parent:this,fieldKey:20,fieldName:"time",deprecated:!1,pointerRules:{accepts:[u.ParameterController],mandatory:!1}},{min:1,max:1e3,scaling:"exponential"},"ms",500)}}};var df=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ModuleMultiplierBox",pointerRules:{accepts:[u.Selection],mandatory:!1}}),n)}static ClassName="ModuleMultiplierBox";constructor(e){super(e)}accept(e){return _(e.visitModuleMultiplierBox,this)}get attributes(){return this.getField(1)}get voltageInputX(){return this.getField(10)}get voltageInputY(){return this.getField(11)}get voltageOutput(){return this.getField(12)}get multiplier(){return this.getField(20)}initializeFields(){return{1:qr.create({parent:this,fieldKey:1,fieldName:"attributes",deprecated:!1,pointerRules:p}),10:Z.hook({parent:this,fieldKey:10,fieldName:"voltageInputX",deprecated:!1,pointerRules:{accepts:[u.VoltageConnection],mandatory:!1}}),11:Z.hook({parent:this,fieldKey:11,fieldName:"voltageInputY",deprecated:!1,pointerRules:{accepts:[u.VoltageConnection],mandatory:!1}}),12:Z.hook({parent:this,fieldKey:12,fieldName:"voltageOutput",deprecated:!1,pointerRules:{accepts:[u.VoltageConnection],mandatory:!1}}),20:b.create({parent:this,fieldKey:20,fieldName:"multiplier",deprecated:!1,pointerRules:p},"unipolar","%")}}};var hf=class r extends M{static create(e,t,n){return e.stageBox(new r({uuid:t,graph:e,name:"ModuleGainBox",pointerRules:{accepts:[u.Selection],mandatory:!1}}),n)}static ClassName="ModuleGainBox";constructor(e){super(e)}accept(e){return _(e.visitModuleGainBox,this)}get attributes(){return this.getField(1)}get voltageInput(){return this.getField(10)}get voltageOutput(){return this.getField(12)}get gain(){return this.getField(20)}initializeFields(){return{1:qr.create({parent:this,fieldKey:1,fieldName:"attributes",deprecated:!1,pointerRules:p}),10:Z.hook({parent:this,fieldKey:10,fieldName:"voltageInput",deprecated:!1,pointerRules:{accepts:[u.VoltageConnection],mandatory:!1}}),12:Z.hook({parent:this,fieldKey:12,fieldName:"voltageOutput",deprecated:!1,pointerRules:{accepts:[u.VoltageConnection],mandatory:!1}}),20:b.create({parent:this,fieldKey:20,fieldName:"gain",deprecated:!1,pointerRules:{accepts:[u.ParameterController],mandatory:!1}},"decibel","dB")}}};var nn;(function(r){r.write=(e,t)=>{if(t.type==="none")e.disconnect(),e.setValue(0);else if(t.type==="linear")e.disconnect(),e.setValue(1);else if(t.type==="curve"){e.setValue(0);let n=e.pointerHub.filter(u.ValueInterpolation).at(0)?.box;R(n)?(Ry(n,Po),n.slope.setValue(t.slope)):Po.create(e.box.graph,E.generate(),i=>{i.slope.setValue(t.slope),i.event.refer(e)})}},r.read=e=>{let t=e.pointerHub.incoming().at(0)?.box;return R(t)?(Ry(t,Po),{type:"curve",slope:t.slope.getValue()}):e.getValue()===0?yo.None:e.getValue()===1?yo.Linear:N("Unknown Interpolation value")}})(nn||(nn={}));var $o=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ce=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Tu,_l,lt,Cu,ko,Ru,Vn=class r{constructor(e,t){this.type="value-event",Tu.set(this,new j),_l.set(this,void 0),lt.set(this,void 0),Cu.set(this,void 0),ko.set(this,void 0),Ru.set(this,!1),$o(this,_l,e,"f"),$o(this,lt,t,"f"),$o(this,Cu,Ce(this,Tu,"f").own(new lp(()=>nn.read(Ce(this,lt,"f").interpolation))),"f");let n=()=>{Ce(this,Cu,"f").invalidate(),this.collection.ifSome(i=>i.onEventPropertyChanged())};Ce(this,Tu,"f").ownAll(Ce(this,lt,"f").subscribe(Ie.Children,i=>{if(!this.collection.isEmpty()&&(i.type==="primitive"||i.type==="pointer")){let o=this.collection.unwrap(),s=i.address.fieldKeys,a=D.equals(Ce(this,lt,"f").index.address.fieldKeys,s),c=D.equals(Ce(this,lt,"f").position.address.fieldKeys,s);a||c?o.requestSorting():o.onEventPropertyChanged()}}),Ce(this,lt,"f").interpolation.subscribe(n),Ce(this,lt,"f").interpolation.pointerHub.subscribe({onAdded:({box:i})=>{Ce(this,ko,"f").terminate(),$o(this,ko,i.subscribe(Ie.Children,n),"f"),n()},onRemoved:()=>{Ce(this,ko,"f").terminate(),$o(this,ko,W.Empty,"f"),n()}})),$o(this,ko,Ce(this,lt,"f").interpolation.pointerHub.filter(u.ValueInterpolation).at(0)?.box.subscribe(Ie.Children,n)??W.Empty,"f")}onSelected(){$o(this,Ru,!0,"f"),this.collection.ifSome(e=>e.onEventPropertyChanged())}onDeselected(){$o(this,Ru,!1,"f"),this.collection.ifSome(e=>e.onEventPropertyChanged())}terminate(){Ce(this,ko,"f").terminate(),Ce(this,Tu,"f").terminate()}get box(){return Ce(this,lt,"f")}get uuid(){return Ce(this,lt,"f").address.uuid}get address(){return Ce(this,lt,"f").address}get position(){return Ce(this,lt,"f").position.getValue()}get index(){return Ce(this,lt,"f").index.getValue()}set interpolation(e){nn.write(Ce(this,lt,"f").interpolation,e)}get interpolation(){return Ce(this,Cu,"f").get()}get value(){return Ce(this,lt,"f").value.getValue()}get isSelected(){return Ce(this,Ru,"f")}get collection(){return Ce(this,lt,"f").events.targetVertex.map(e=>Ce(this,_l,"f").boxAdapters.adapterFor(e.box,ar))}copyTo(e){let t=_o.create(Ce(this,_l,"f").boxGraph,E.generate(),n=>{n.position.setValue(e?.position??this.position),n.index.setValue(e?.index??this.index),n.events.refer(e?.events??this.collection.unwrap().box.events),n.value.setValue(e?.value??this.value)});return nn.write(t.interpolation,e?.interpolation??this.interpolation),Ce(this,_l,"f").boxAdapters.adapterFor(t,r)}copyFrom(e){return Ce(this,lt,"f").position.setValue(e?.position??this.position),Ce(this,lt,"f").index.setValue(e?.index??this.index),Ce(this,lt,"f").events.refer(e?.events??this.collection.unwrap().box.events),Ce(this,lt,"f").value.setValue(e?.value??this.value),nn.write(Ce(this,lt,"f").interpolation,e?.interpolation??this.interpolation),this}toString(){return`{ValueEventBoxAdapter position: ${this.position} index: ${this.index}}`}};Tu=new WeakMap,_l=new WeakMap,lt=new WeakMap,Cu=new WeakMap,ko=new WeakMap,Ru=new WeakMap;Vn.Comparator=(r,e)=>{let t=r.position-e.position;if(t!==0)return t;let n=r.index-e.index;if(n!==0)return n;throw new Error(`${r} and ${e} are identical in terms of comparison`)};var Ou=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Re=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Vu,zu,Io,Hr,Ks,Uu,zn,Af,ar=class r{constructor(e,t){Vu.add(this),zu.set(this,new j),Io.set(this,void 0),Hr.set(this,void 0),Ks.set(this,void 0),Uu.set(this,void 0),zn.set(this,void 0),Ou(this,Io,e,"f"),Ou(this,Hr,t,"f"),Ou(this,Ks,new ne,"f"),Ou(this,Uu,E.newSet(i=>i.uuid),"f"),Ou(this,zn,go.create(Vn.Comparator),"f");let n=i=>{let o=q(i.accept({visitValueEventBox:s=>Re(this,Io,"f").boxAdapters.adapterFor(s,Vn)}),`Could not find adapter for ${i}`);Re(this,Uu,"f").add(o)&&(Re(this,zn,"f").add(o),Re(this,Vu,"m",Af).call(this))};Re(this,Hr,"f").events.pointerHub.incoming().forEach(({box:i})=>n(i)),Re(this,zu,"f").own(Re(this,Hr,"f").events.pointerHub.subscribe({onAdded:({box:i})=>n(i),onRemoved:({box:{address:{uuid:i}}})=>{Re(this,zn,"f").remove(Re(this,Uu,"f").removeByKey(i)),Re(this,Vu,"m",Af).call(this)}})),Re(this,zu,"f").own(Re(this,Hr,"f").owners.pointerHub.subscribe({onAdded:()=>Re(this,Ks,"f").notify(this),onRemoved:()=>Re(this,Ks,"f").notify(this)}))}valueAt(e,t){return Bp.valueAt(Re(this,zn,"f"),e,t)}copy(){let e=Re(this,Io,"f").boxGraph,t=On.create(e,E.generate());return Re(this,zn,"f").asArray().forEach(n=>n.copyTo({events:t.events})),Re(this,Io,"f").boxAdapters.adapterFor(t,r)}cut(e){let t=this.events.lowerEqual(e),n=this.events.greaterEqual(e);if(n===null)return t===null?g.None:g.wrap(this.createEvent({position:e,value:t.value,index:t.index,interpolation:t.interpolation}));if(t===null)return g.wrap(this.createEvent({position:e,value:n.value,index:n.index,interpolation:n.interpolation}));if(t.position===e)return g.wrap(t);if(t.interpolation.type==="none")return g.wrap(this.createEvent({position:e,value:t.value,index:t.index,interpolation:t.interpolation}));if(t.interpolation.type==="linear"){let{position:i,value:o}=t,{position:s,value:a}=n;return g.wrap(this.createEvent({position:e,value:cp(o,a,(e-i)/(s-i)),index:0,interpolation:t.interpolation}))}if(t.interpolation.type==="curve"){let{position:i,value:o}=t,{position:s,value:a}=n,c=s-i,l=e-i,d=Zr.byHalf(c,o,Zr.valueAt({slope:t.interpolation.slope,steps:c,y0:o,y1:a},c*.5),a),h=Zr.valueAt(d,l),f=Zr.slopeByHalf(o,Zr.valueAt(d,l*.5),h);return nn.write(t.box.interpolation,yo.Curve(f)),g.wrap(this.createEvent({position:e,value:h,index:0,interpolation:yo.Curve(Zr.slopeByHalf(h,Zr.valueAt(d,(l+c)*.5),a))}))}return N("Unknown interpolation type")}subscribeChange(e){return Re(this,Ks,"f").subscribe(e)}createEvent({position:e,index:t,value:n,interpolation:i}){let o=_o.create(Re(this,Io,"f").boxGraph,E.generate(),s=>{s.position.setValue(e),s.index.setValue(t),s.value.setValue(n),s.events.refer(Re(this,Hr,"f").events)});return nn.write(o.interpolation,i),Re(this,Io,"f").boxAdapters.adapterFor(o,Vn)}requestSorting(){Re(this,zn,"f").onIndexingChanged(),this.onEventPropertyChanged()}onEventPropertyChanged(){Re(this,Vu,"m",Af).call(this)}terminate(){Re(this,zu,"f").terminate()}get box(){return Re(this,Hr,"f")}get uuid(){return Re(this,Hr,"f").address.uuid}get address(){return Re(this,Hr,"f").address}get numOwners(){return Re(this,Hr,"f").owners.pointerHub.filter(u.ValueEventCollection).length}get events(){return Re(this,zn,"f")}toString(){return`{ValueEventCollectionBox ${E.toString(Re(this,Hr,"f").address.uuid)}}`}};zu=new WeakMap,Io=new WeakMap,Hr=new WeakMap,Ks=new WeakMap,Uu=new WeakMap,zn=new WeakMap,Vu=new WeakSet,Af=function(){Re(this,Ks,"f").notify(this)};var Ws=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},we=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Zs,Do,Gs,At,qs,Ku,ju,Lu,Pl,Mo=class{constructor(e,t){Zs.add(this),this.type="value-clip",Do.set(this,new j),Gs.set(this,void 0),At.set(this,void 0),qs.set(this,void 0),Ku.set(this,void 0),ju.set(this,void 0),Lu.set(this,W.Empty),Ws(this,Gs,e,"f"),Ws(this,At,t,"f"),Ws(this,ju,!0,"f"),Ws(this,qs,we(this,Do,"f").own(new rr(!1)),"f"),Ws(this,Ku,we(this,Do,"f").own(new ne),"f"),we(this,Do,"f").own(we(this,At,"f").pointerHub.subscribe({onAdded:()=>we(this,Zs,"m",Pl).call(this),onRemoved:()=>we(this,Zs,"m",Pl).call(this)})),we(this,Do,"f").own(we(this,At,"f").subscribe(Ie.Children,n=>we(this,Zs,"m",Pl).call(this))),we(this,Do,"f").own(we(this,At,"f").events.catchupAndSubscribe(({targetVertex:n})=>{we(this,Lu,"f").terminate(),Ws(this,Lu,n.match({none:()=>W.Empty,some:({box:i})=>we(this,Gs,"f").boxAdapters.adapterFor(i,ar).subscribeChange(()=>we(this,Zs,"m",Pl).call(this))}),"f"),we(this,Zs,"m",Pl).call(this)})),Ws(this,ju,!1,"f")}valueAt(e,t){let n=this.optCollection;return n.isEmpty()?t:n.unwrap().valueAt(e%this.duration,t)}catchupAndSubscribeSelected(e){return we(this,qs,"f").catchupAndSubscribe(e)}subscribeChange(e){return we(this,Ku,"f").subscribe(e)}accept(e){return _(e.visitValueClipBoxAdapter,this)}consolidate(){this.isMirrowed&&we(this,At,"f").events.refer(this.optCollection.unwrap().copy().box.owners)}clone(e){let t=e?this.optCollection.unwrap().copy().box.owners:we(this,At,"f").events.targetVertex.unwrap();dl.create(we(this,Gs,"f").boxGraph,E.generate(),n=>{n.index.setValue(this.indexField.getValue()),n.label.setValue(this.label),n.hue.setValue(this.hue),n.duration.setValue(this.duration),n.mute.setValue(this.mute),n.clips.refer(we(this,At,"f").clips.targetVertex.unwrap()),n.events.refer(t)})}onSelected(){we(this,qs,"f").setValue(!0)}onDeselected(){we(this,qs,"f").setValue(!1)}get isSelected(){return we(this,qs,"f").getValue()}terminate(){we(this,Lu,"f").terminate(),we(this,Do,"f").terminate()}get box(){return we(this,At,"f")}get uuid(){return we(this,At,"f").address.uuid}get address(){return we(this,At,"f").address}get indexField(){return we(this,At,"f").index}get duration(){return we(this,At,"f").duration.getValue()}get mute(){return we(this,At,"f").mute.getValue()}get hue(){return we(this,At,"f").hue.getValue()}get hasCollection(){return!this.optCollection.isEmpty()}get events(){return this.optCollection.map(e=>e.events)}get optCollection(){return we(this,At,"f").events.targetVertex.map(e=>we(this,Gs,"f").boxAdapters.adapterFor(e.box,ar))}get label(){return we(this,At,"f").label.getValue()}get trackBoxAdapter(){return we(this,ju,"f")?g.None:we(this,At,"f").clips.targetVertex.map(e=>we(this,Gs,"f").boxAdapters.adapterFor(e.box,pt))}get isMirrowed(){return this.optCollection.mapOr(e=>e.numOwners>1,!1)}get canMirror(){return!0}toString(){return`{ValueClipBoxAdapter ${E.toString(we(this,At,"f").address.uuid)} d: ${Y.toString(this.duration)}}`}};Do=new WeakMap,Gs=new WeakMap,At=new WeakMap,qs=new WeakMap,Ku=new WeakMap,ju=new WeakMap,Lu=new WeakMap,Zs=new WeakSet,Pl=function(){we(this,Ku,"f").notify(),this.trackBoxAdapter.unwrapOrNull()?.clips?.dispatchChange()};var l1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Hs=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},_f,Un,on=class{constructor(e,t){_f.set(this,void 0),Un.set(this,void 0),l1(this,_f,e,"f"),l1(this,Un,t,"f")}get box(){return Hs(this,Un,"f")}get uuid(){return Hs(this,Un,"f").address.uuid}get address(){return Hs(this,Un,"f").address}get startInSeconds(){return Hs(this,Un,"f").startInSeconds.getValue()}get endInSeconds(){return Hs(this,Un,"f").endInSeconds.getValue()}get data(){return this.getOrCreateLoader().data}get peaks(){return this.getOrCreateLoader().peaks}getOrCreateLoader(){return Hs(this,_f,"f").sampleManager.getOrCreate(Hs(this,Un,"f").address.uuid)}terminate(){}};_f=new WeakMap,Un=new WeakMap;var jn=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ee=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},El,Sl,Fl,_t,Js,qu,Wu,Zu,Nl,Gu,To=class{constructor(e,t){El.add(this),this.type="audio-clip",Sl.set(this,new j),Fl.set(this,void 0),_t.set(this,void 0),Js.set(this,void 0),qu.set(this,void 0),Wu.set(this,void 0),Zu.set(this,g.None),Nl.set(this,g.None),jn(this,Fl,e,"f"),jn(this,_t,t,"f"),jn(this,Wu,!0,"f"),jn(this,Js,Ee(this,Sl,"f").own(new rr(!1)),"f"),jn(this,qu,Ee(this,Sl,"f").own(new ne),"f"),Ee(this,Sl,"f").ownAll(Ee(this,_t,"f").pointerHub.subscribe({onAdded:()=>Ee(this,El,"m",Gu).call(this),onRemoved:()=>Ee(this,El,"m",Gu).call(this)}),Ee(this,_t,"f").file.catchupAndSubscribe(n=>{jn(this,Zu,n.targetVertex.map(i=>Ee(this,Fl,"f").boxAdapters.adapterFor(i.box,on)),"f"),Ee(this,Nl,"f").ifSome(i=>i.terminate()),jn(this,Nl,Ee(this,Zu,"f").map(i=>i.getOrCreateLoader().subscribe(()=>Ee(this,El,"m",Gu).call(this))),"f")}),Ee(this,_t,"f").subscribe(Ie.Children,n=>Ee(this,El,"m",Gu).call(this)),{terminate:()=>{Ee(this,Nl,"f").ifSome(n=>n.terminate()),jn(this,Nl,g.None,"f")}}),jn(this,Wu,!1,"f")}catchupAndSubscribeSelected(e){return Ee(this,Js,"f").catchupAndSubscribe(e)}subscribeChange(e){return Ee(this,qu,"f").subscribe(e)}accept(e){return _(e.visitAudioClipBoxAdapter,this)}consolidate(){}clone(e){hl.create(Ee(this,Fl,"f").boxGraph,E.generate(),t=>{t.index.setValue(this.indexField.getValue()),t.gain.setValue(this.gain),t.label.setValue(this.label),t.hue.setValue(this.hue),t.duration.setValue(this.duration),t.mute.setValue(this.mute),t.clips.refer(Ee(this,_t,"f").clips.targetVertex.unwrap()),t.file.refer(Ee(this,_t,"f").file.targetVertex.unwrap()),t.events.refer(Ee(this,_t,"f").events.targetVertex.unwrap())})}onSelected(){Ee(this,Js,"f").setValue(!0)}onDeselected(){Ee(this,Js,"f").setValue(!1)}get isSelected(){return Ee(this,Js,"f").getValue()}terminate(){Ee(this,Sl,"f").terminate()}get box(){return Ee(this,_t,"f")}get uuid(){return Ee(this,_t,"f").address.uuid}get address(){return Ee(this,_t,"f").address}get indexField(){return Ee(this,_t,"f").index}get duration(){return Ee(this,_t,"f").duration.getValue()}get mute(){return Ee(this,_t,"f").mute.getValue()}get hue(){return Ee(this,_t,"f").hue.getValue()}get gain(){return Ee(this,_t,"f").gain.getValue()}get file(){return Ee(this,Zu,"f").unwrap("Cannot access file.")}get hasCollection(){return!this.optCollection.isEmpty()}get optCollection(){return g.None}get label(){return Ee(this,_t,"f").label.getValue()}get trackBoxAdapter(){return Ee(this,Wu,"f")?g.None:Ee(this,_t,"f").clips.targetVertex.map(e=>Ee(this,Fl,"f").boxAdapters.adapterFor(e.box,pt))}get isMirrowed(){return!1}get canMirror(){return!1}toString(){return`{AudioClipBoxAdapter ${E.toString(Ee(this,_t,"f").address.uuid)} d: ${Y.toString(this.duration)}}`}};Sl=new WeakMap,Fl=new WeakMap,_t=new WeakMap,Js=new WeakMap,qu=new WeakMap,Wu=new WeakMap,Zu=new WeakMap,Nl=new WeakMap,El=new WeakSet,Gu=function(){Ee(this,qu,"f").notify(),this.trackBoxAdapter.unwrapOrNull()?.clips?.dispatchChange()};var Hu=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},mt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Bl,$t,Pf,Ju,Qs=class r{constructor(e,t){this.type="note-event",Bl.set(this,void 0),$t.set(this,void 0),Pf.set(this,void 0),Ju.set(this,!1),Hu(this,Bl,e,"f"),Hu(this,$t,t,"f"),Hu(this,Pf,mt(this,$t,"f").subscribe(Ie.Children,n=>{if(!this.collection.isEmpty()&&(n.type==="primitive"||n.type==="pointer")){let i=this.collection.unwrap(),o=n.address.fieldKeys,s=D.equals(mt(this,$t,"f").pitch.address.fieldKeys,o),a=D.equals(mt(this,$t,"f").position.address.fieldKeys,o);s||a?i.requestSorting():i.onEventPropertyChanged()}}),"f")}onSelected(){Hu(this,Ju,!0,"f"),this.collection.ifSome(e=>e.onEventPropertyChanged())}onDeselected(){Hu(this,Ju,!1,"f"),this.collection.ifSome(e=>e.onEventPropertyChanged())}terminate(){mt(this,Pf,"f").terminate()}get box(){return mt(this,$t,"f")}get uuid(){return mt(this,$t,"f").address.uuid}get address(){return mt(this,$t,"f").address}get position(){return mt(this,$t,"f").position.getValue()}get duration(){return mt(this,$t,"f").duration.getValue()}get complete(){return this.position+this.duration}get velocity(){return mt(this,$t,"f").velocity.getValue()}get pitch(){return mt(this,$t,"f").pitch.getValue()}get cent(){return mt(this,$t,"f").cent.getValue()}get chance(){return mt(this,$t,"f").chance.getValue()}get playCount(){return mt(this,$t,"f").playCount.getValue()}get playCurve(){return mt(this,$t,"f").playCurve.getValue()}get isSelected(){return mt(this,Ju,"f")}get collection(){return mt(this,$t,"f").events.targetVertex.map(e=>mt(this,Bl,"f").boxAdapters.adapterFor(e.box,Jr))}normalizedPitch(){if(this.collection.isEmpty())return .5;let{minPitch:e,maxPitch:t}=this.collection.unwrap();return e===t?.5:1-(this.pitch-e)/(t-e)}copyAsNoteEvent(){return{type:"note-event",position:this.position,duration:this.duration,pitch:this.pitch,cent:this.cent,velocity:this.velocity}}copyTo(e){return mt(this,Bl,"f").boxAdapters.adapterFor(Ao.create(mt(this,Bl,"f").boxGraph,E.generate(),t=>{t.position.setValue(e?.position??this.position),t.duration.setValue(e?.duration??this.duration),t.pitch.setValue(e?.pitch??this.pitch),t.playCount.setValue(e?.playCount??this.playCount),t.events.refer(e?.events??this.collection.unwrap().box.events),t.velocity.setValue(this.velocity),t.cent.setValue(this.cent),t.chance.setValue(this.chance)}),r)}computeCurveValue(e){return nr.curveFunc(e,this.playCurve)}canConsolidate(){return this.playCount>1}consolidate(){let e=this.playCount,t=this.collection.unwrap().box.events,n=D.create(i=>{let o=Math.floor(this.computeCurveValue(i/e)*this.duration),s=Math.floor(this.computeCurveValue((i+1)/e)*this.duration);return this.copyTo({position:Math.floor(this.position+o),duration:Math.max(1,s-o),playCount:1,events:t})},e);return mt(this,$t,"f").delete(),n}};Bl=new WeakMap,$t=new WeakMap,Pf=new WeakMap,Ju=new WeakMap;var sn=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ce=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ln,Qu,Co,Qr,Ys,Yu,Yr,Sf,Ff,Nf,Ro,Ef,Xu,Jr=class r{constructor(e,t){Ln.add(this),Qu.set(this,new j),Co.set(this,void 0),Qr.set(this,void 0),Ys.set(this,void 0),Yu.set(this,void 0),Yr.set(this,void 0),Sf.set(this,60),Ff.set(this,60),Nf.set(this,0),Ro.set(this,!1),sn(this,Co,e,"f"),sn(this,Qr,t,"f"),sn(this,Ys,new ne,"f"),sn(this,Yu,E.newSet(i=>i.uuid),"f"),sn(this,Yr,go.create(nr.Comparator),"f");let n=i=>{let o=q(i.accept({visitNoteEventBox:s=>ce(this,Co,"f").boxAdapters.adapterFor(s,Qs)}),`Could not find adapter for ${i}`);ce(this,Yu,"f").add(o)&&(ce(this,Yr,"f").add(o),ce(this,Ln,"m",Ef).call(this))};ce(this,Qr,"f").events.pointerHub.incoming().forEach(({box:i})=>n(i)),ce(this,Qu,"f").own(ce(this,Qr,"f").events.pointerHub.subscribe({onAdded:({box:i})=>n(i),onRemoved:({box:{address:{uuid:i}}})=>{ce(this,Yr,"f").remove(ce(this,Yu,"f").removeByKey(i)),ce(this,Ln,"m",Ef).call(this)}})),ce(this,Qu,"f").own(ce(this,Qr,"f").owners.pointerHub.subscribe({onAdded:()=>ce(this,Ys,"f").notify(this),onRemoved:()=>ce(this,Ys,"f").notify(this)}))}copy(){let e=ce(this,Co,"f").boxGraph,t=Rn.create(e,E.generate());return ce(this,Yr,"f").asArray().forEach(n=>n.copyTo({events:t.events})),ce(this,Co,"f").boxAdapters.adapterFor(t,r)}createEvent({position:e,duration:t,velocity:n,pitch:i,chance:o,playCount:s,cent:a}){return ce(this,Co,"f").boxAdapters.adapterFor(Ao.create(ce(this,Co,"f").boxGraph,E.generate(),c=>{c.position.setValue(e),c.duration.setValue(t),c.velocity.setValue(n),c.pitch.setValue(i),c.chance.setValue(o),c.playCount.setValue(s),c.cent.setValue(a),c.events.refer(ce(this,Qr,"f").events)}),Qs)}subscribeChange(e){return ce(this,Ys,"f").subscribe(e)}selectable(){return ce(this,Yr,"f").asArray()}selectableAt(e){for(let t of ce(this,Yr,"f").asArray())if(t.position<=e.u&&e.u<t.complete&&t.pitch===e.v)return Qe.one(t);return Qe.empty()}selectablesBetween(e,t){let n=[];for(let i of ce(this,Yr,"f").asArray())vu.intersect1D(i.position,i.complete,e.u,t.u)&&vu.intersect1D(i.pitch,i.pitch,e.v,t.v)&&n.push(i);return n}requestSorting(){ce(this,Yr,"f").onIndexingChanged(),this.onEventPropertyChanged()}onEventPropertyChanged(){ce(this,Ln,"m",Ef).call(this)}terminate(){ce(this,Qu,"f").terminate()}get box(){return ce(this,Qr,"f")}get uuid(){return ce(this,Qr,"f").address.uuid}get address(){return ce(this,Qr,"f").address}get numOwners(){return ce(this,Qr,"f").owners.pointerHub.filter(u.NoteEventCollection).length}get events(){return ce(this,Ro,"f")||ce(this,Ln,"m",Xu).call(this),ce(this,Yr,"f")}get minPitch(){return ce(this,Ro,"f")||ce(this,Ln,"m",Xu).call(this),ce(this,Sf,"f")}get maxPitch(){return ce(this,Ro,"f")||ce(this,Ln,"m",Xu).call(this),ce(this,Ff,"f")}get maxDuration(){return ce(this,Ro,"f")||ce(this,Ln,"m",Xu).call(this),ce(this,Nf,"f")}toString(){return`{NoteEventCollectionBox ${E.toString(ce(this,Qr,"f").address.uuid)}}`}};Qu=new WeakMap,Co=new WeakMap,Qr=new WeakMap,Ys=new WeakMap,Yu=new WeakMap,Yr=new WeakMap,Sf=new WeakMap,Ff=new WeakMap,Nf=new WeakMap,Ro=new WeakMap,Ln=new WeakSet,Ef=function(){sn(this,Ro,!1,"f"),ce(this,Ys,"f").notify(this)},Xu=function(){let e=127,t=0,n=0;ce(this,Yr,"f").asArray().forEach(({pitch:i,duration:o})=>{e=Math.min(e,i),t=Math.max(t,i),n=Math.max(n,o)}),sn(this,Sf,e,"f"),sn(this,Ff,t,"f"),sn(this,Nf,n,"f"),sn(this,Ro,!0,"f")};var Xs=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Se=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ea,$l,ta,Pt,ra,rd,ed,td,kl,Il=class{constructor(e,t){ea.add(this),this.type="note-clip",$l.set(this,new j),ta.set(this,void 0),Pt.set(this,void 0),ra.set(this,void 0),rd.set(this,void 0),ed.set(this,void 0),td.set(this,W.Empty),Xs(this,ta,e,"f"),Xs(this,Pt,t,"f"),Xs(this,ed,!0,"f"),Xs(this,ra,Se(this,$l,"f").own(new rr(!1)),"f"),Xs(this,rd,Se(this,$l,"f").own(new ne),"f"),Se(this,$l,"f").ownAll(Se(this,Pt,"f").pointerHub.subscribe({onAdded:()=>Se(this,ea,"m",kl).call(this),onRemoved:()=>Se(this,ea,"m",kl).call(this)}),Se(this,Pt,"f").subscribe(Ie.Children,n=>Se(this,ea,"m",kl).call(this)),Se(this,Pt,"f").events.catchupAndSubscribe(({targetVertex:n})=>{Se(this,td,"f").terminate(),Xs(this,td,n.match({none:()=>W.Empty,some:({box:i})=>Se(this,ta,"f").boxAdapters.adapterFor(i,Jr).subscribeChange(()=>Se(this,ea,"m",kl).call(this))}),"f"),Se(this,ea,"m",kl).call(this)})),Xs(this,ed,!1,"f")}catchupAndSubscribeSelected(e){return Se(this,ra,"f").catchupAndSubscribe(e)}subscribeChange(e){return Se(this,rd,"f").subscribe(e)}accept(e){return _(e.visitNoteClipBoxAdapter,this)}consolidate(){this.isMirrowed&&Se(this,Pt,"f").events.refer(this.optCollection.unwrap().copy().box.owners)}clone(e){let t=e?this.optCollection.unwrap().copy().box.owners:Se(this,Pt,"f").events.targetVertex.unwrap();ul.create(Se(this,ta,"f").boxGraph,E.generate(),n=>{n.index.setValue(this.indexField.getValue()),n.label.setValue(this.label),n.hue.setValue(this.hue),n.duration.setValue(this.duration),n.mute.setValue(this.mute),n.clips.refer(Se(this,Pt,"f").clips.targetVertex.unwrap()),n.events.refer(t)})}onSelected(){Se(this,ra,"f").setValue(!0)}onDeselected(){Se(this,ra,"f").setValue(!1)}get isSelected(){return Se(this,ra,"f").getValue()}terminate(){Se(this,td,"f").terminate(),Se(this,$l,"f").terminate()}get box(){return Se(this,Pt,"f")}get uuid(){return Se(this,Pt,"f").address.uuid}get address(){return Se(this,Pt,"f").address}get indexField(){return Se(this,Pt,"f").index}get duration(){return Se(this,Pt,"f").duration.getValue()}get mute(){return Se(this,Pt,"f").mute.getValue()}get hue(){return Se(this,Pt,"f").hue.getValue()}get events(){return this.optCollection.map(e=>e.events)}get hasCollection(){return!this.optCollection.isEmpty()}get optCollection(){return Se(this,Pt,"f").events.targetVertex.map(e=>Se(this,ta,"f").boxAdapters.adapterFor(e.box,Jr))}get label(){return Se(this,Pt,"f").label.getValue()}get trackBoxAdapter(){return Se(this,ed,"f")?g.None:Se(this,Pt,"f").clips.targetVertex.map(e=>Se(this,ta,"f").boxAdapters.adapterFor(e.box,pt))}get isMirrowed(){return this.optCollection.mapOr(e=>e.numOwners>1,!1)}get canMirror(){return!0}toString(){return`{NoteClipBoxAdapter ${E.toString(Se(this,Pt,"f").address.uuid)} d: ${Y.toString(this.duration)}}`}};$l=new WeakMap,ta=new WeakMap,Pt=new WeakMap,ra=new WeakMap,rd=new WeakMap,ed=new WeakMap,td=new WeakMap,ea=new WeakSet,kl=function(){Se(this,rd,"f").notify(),this.trackBoxAdapter.unwrapOrNull()?.clips?.dispatchChange()};var Bf={for:(r,e)=>q(e.accept({visitNoteClipBox:t=>r.adapterFor(t,Il),visitValueClipBox:t=>r.adapterFor(t,Mo),visitAudioClipBox:t=>r.adapterFor(t,To)}),"")};var $f=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Oo=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},kf,Dl,id,nd,If=class{constructor(e,t){kf.set(this,void 0),Dl.set(this,void 0),id.set(this,void 0),nd.set(this,void 0),$f(this,kf,e,"f"),$f(this,Dl,new j,"f"),$f(this,id,Oo(this,Dl,"f").own(new ne),"f"),$f(this,nd,Oo(this,Dl,"f").own(Ut.create(e.box.clips,n=>Bf.for(t,n),u.ClipCollection)),"f"),Oo(this,nd,"f").subscribe({onAdd:()=>this.dispatchChange(),onRemove:()=>this.dispatchChange(),onReorder:()=>this.dispatchChange()})}get trackBoxAdapter(){return Oo(this,kf,"f")}get collection(){return Oo(this,nd,"f")}dispatchChange(){Oo(this,id,"f").notify()}subscribeChanges(e){return Oo(this,id,"f").subscribe(e)}terminate(){Oo(this,Dl,"f").terminate()}};kf=new WeakMap,Dl=new WeakMap,id=new WeakMap,nd=new WeakMap;var Rt=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},L=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Xr,od,Kn,ge,Vo,zo,Uo,ad,ia,Ml,Tl,sd,Cl,ld,Ii,jo=class r{constructor(e,t){Xr.add(this),this.type="audio-region",od.set(this,void 0),Kn.set(this,void 0),ge.set(this,void 0),Vo.set(this,void 0),zo.set(this,void 0),Uo.set(this,void 0),ad.set(this,void 0),ia.set(this,g.None),Ml.set(this,W.Empty),Tl.set(this,W.Empty),sd.set(this,W.Empty),Cl.set(this,void 0),ld.set(this,void 0),Rt(this,Kn,e,"f"),Rt(this,ge,t,"f"),Rt(this,od,new j,"f");let{timeBase:n,position:i,duration:o,loopOffset:s,loopDuration:a}=t;Rt(this,Vo,ol.aware(e.tempoMap,n,i,o),"f"),Rt(this,zo,ol.aware(e.tempoMap,n,i,s),"f"),Rt(this,Uo,ol.aware(e.tempoMap,n,i,a),"f"),Rt(this,ad,new ne,"f"),Rt(this,Cl,!1,"f"),Rt(this,ld,!0,"f"),L(this,od,"f").ownAll(L(this,ge,"f").pointerHub.subscribe({onAdded:()=>L(this,Xr,"m",Ii).call(this),onRemoved:()=>L(this,Xr,"m",Ii).call(this)}),L(this,ge,"f").file.catchupAndSubscribe(c=>{Rt(this,ia,c.targetVertex.map(l=>L(this,Kn,"f").boxAdapters.adapterFor(l.box,on)),"f"),L(this,Ml,"f").terminate(),Rt(this,Ml,L(this,ia,"f").mapOr(l=>l.getOrCreateLoader().subscribe(()=>L(this,Xr,"m",Ii).call(this)),W.Empty),"f")}),L(this,ge,"f").timeBase.catchupAndSubscribe(c=>{L(this,Tl,"f").terminate(),Nn(c.getValue(),Vt)===Vt.Seconds&&Rt(this,Tl,e.tempoMap.subscribe(()=>L(this,Xr,"m",Ii).call(this)),"f")}),L(this,ge,"f").subscribe(Ie.Children,c=>{if(!this.trackBoxAdapter.isEmpty()&&(c.type==="primitive"||c.type==="pointer")){let l=this.trackBoxAdapter.unwrap();L(this,ge,"f").position.address.equals(c.address)?(l.regions.onIndexingChanged(),L(this,Xr,"m",Ii).call(this)):L(this,Xr,"m",Ii).call(this)}}),L(this,ge,"f").events.catchupAndSubscribe(({targetVertex:c})=>{L(this,sd,"f").terminate(),Rt(this,sd,c.match({none:()=>W.Empty,some:({box:l})=>L(this,Kn,"f").boxAdapters.adapterFor(l,ar).subscribeChange(()=>L(this,Xr,"m",Ii).call(this))}),"f"),L(this,Xr,"m",Ii).call(this)}),{terminate:()=>{L(this,Ml,"f").terminate(),Rt(this,Ml,W.Empty,"f"),L(this,Tl,"f").terminate(),Rt(this,Tl,W.Empty,"f")}}),Rt(this,ld,!1,"f")}subscribeChange(e){return L(this,ad,"f").subscribe(e)}accept(e){return _(e.visitAudioRegionBoxAdapter,this)}onSelected(){Rt(this,Cl,!0,"f"),L(this,Xr,"m",Ii).call(this)}onDeselected(){Rt(this,Cl,!1,"f"),L(this,Xr,"m",Ii).call(this)}get isSelected(){return L(this,Cl,"f")}get box(){return L(this,ge,"f")}get uuid(){return L(this,ge,"f").address.uuid}get address(){return L(this,ge,"f").address}get position(){return L(this,ge,"f").position.getValue()}get duration(){return L(this,Vo,"f").toPPQN()}get complete(){return this.position+this.duration}get loopOffset(){return L(this,zo,"f").toPPQN()}get loopDuration(){return L(this,Uo,"f").toPPQN()}get offset(){return this.position-this.loopOffset}get mute(){return L(this,ge,"f").mute.getValue()}get hue(){return L(this,ge,"f").hue.getValue()}get gain(){return L(this,ge,"f").gain.getValue()}get file(){return L(this,ia,"f").unwrap("Cannot access file.")}get timeBase(){return Nn(L(this,ge,"f").timeBase.getValue(),Vt)}get label(){if(L(this,ia,"f").isEmpty())return"No Audio File";let e=L(this,ia,"f").unwrap().getOrCreateLoader().state;return e.type==="progress"?`${Math.round(e.progress*100)}%`:e.type==="error"?String(e.reason):L(this,ge,"f").label.getValue()}get isMirrowed(){return this.optCollection.mapOr(e=>e.numOwners>1,!1)}get canMirror(){return!0}get trackBoxAdapter(){return L(this,ge,"f").regions.targetVertex.map(e=>L(this,Kn,"f").boxAdapters.adapterFor(e.box,pt))}get hasCollection(){return this.optCollection.nonEmpty()}get optCollection(){return L(this,ge,"f").events.targetVertex.map(e=>L(this,Kn,"f").boxAdapters.adapterFor(e.box,ar))}set position(e){L(this,ge,"f").position.setValue(e)}set duration(e){L(this,Vo,"f").fromPPQN(e)}set loopOffset(e){L(this,zo,"f").fromPPQN(e)}set loopDuration(e){L(this,Uo,"f").fromPPQN(e)}get playback(){return Nn(L(this,ge,"f").playback.getValue(),Iu)}setPlayback(e,t=!1){let n=this.timeBase===Vt.Musical;if(L(this,ge,"f").playback.setValue(e),e===Iu.NoSync){if(n)if(t){let i=L(this,Vo,"f").toSeconds(),o=L(this,Uo,"f").toSeconds(),s=L(this,zo,"f").toSeconds();L(this,ge,"f").timeBase.setValue(Vt.Seconds),L(this,ge,"f").duration.setValue(i),L(this,ge,"f").loopDuration.setValue(o),L(this,ge,"f").loopOffset.setValue(s)}else{let i=this.file.endInSeconds-this.file.startInSeconds,o=L(this,Uo,"f").toSeconds(),s=i/o,a=L(this,Vo,"f").toSeconds(),c=L(this,zo,"f").toSeconds();L(this,ge,"f").timeBase.setValue(Vt.Seconds),L(this,ge,"f").duration.setValue(a*s),L(this,ge,"f").loopDuration.setValue(i),L(this,ge,"f").loopOffset.setValue(c*s)}}else if(!n){let i=L(this,Vo,"f").toPPQN(),o=L(this,Uo,"f").toPPQN(),s=L(this,zo,"f").toPPQN();L(this,ge,"f").timeBase.setValue(Vt.Musical),L(this,ge,"f").duration.setValue(i),L(this,ge,"f").loopOffset.setValue(s),L(this,ge,"f").loopDuration.setValue(o)}}copyTo(e){let t=this.optCollection.unwrap("Cannot make copy without event-collection"),n=e?.consolidate===!0?t.copy().box.owners:t.box.owners;return L(this,Kn,"f").boxAdapters.adapterFor(Eo.create(L(this,Kn,"f").boxGraph,E.generate(),i=>{i.timeBase.setValue(L(this,ge,"f").timeBase.getValue()),i.position.setValue(e?.position??L(this,ge,"f").position.getValue()),i.duration.setValue(e?.duration??L(this,ge,"f").duration.getValue()),i.loopOffset.setValue(e?.loopOffset??L(this,ge,"f").loopOffset.getValue()),i.loopDuration.setValue(e?.loopDuration??L(this,ge,"f").loopDuration.getValue()),i.regions.refer(e?.track??L(this,ge,"f").regions.targetVertex.unwrap()),i.file.refer(L(this,ge,"f").file.targetVertex.unwrap()),i.events.refer(n),i.mute.setValue(this.mute),i.hue.setValue(this.hue),i.label.setValue(this.label),i.gain.setValue(this.gain)}),r)}consolidate(){}canFlatten(e){return!1}flatten(e){return g.None}terminate(){L(this,sd,"f").terminate(),L(this,od,"f").terminate()}toString(){return`{AudioRegionBoxAdapter ${E.toString(L(this,ge,"f").address.uuid)}}`}};od=new WeakMap,Kn=new WeakMap,ge=new WeakMap,Vo=new WeakMap,zo=new WeakMap,Uo=new WeakMap,ad=new WeakMap,ia=new WeakMap,Ml=new WeakMap,Tl=new WeakMap,sd=new WeakMap,Cl=new WeakMap,ld=new WeakMap,Xr=new WeakSet,Ii=function(){L(this,ld,"f")||(L(this,ad,"f").notify(),this.trackBoxAdapter.unwrapOrNull()?.regions?.dispatchChange())};var Wn=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ue=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},an,Df,ln,Ye,dd,cd,Rl,ud,Zn,Lo=class r{constructor(e,t){an.add(this),this.type="note-region",Df.set(this,new j),ln.set(this,void 0),Ye.set(this,void 0),dd.set(this,void 0),cd.set(this,void 0),Rl.set(this,void 0),ud.set(this,W.Empty),Wn(this,ln,e,"f"),Wn(this,Ye,t,"f"),Wn(this,dd,new ne,"f"),Wn(this,Rl,!1,"f"),Wn(this,cd,!0,"f"),ue(this,Df,"f").ownAll(ue(this,Ye,"f").pointerHub.subscribe({onAdded:()=>ue(this,an,"m",Zn).call(this),onRemoved:()=>ue(this,an,"m",Zn).call(this)}),ue(this,Ye,"f").subscribe(Ie.Children,n=>{if(!this.trackBoxAdapter.isEmpty()&&(n.type==="primitive"||n.type==="pointer")){let i=this.trackBoxAdapter.unwrap();ue(this,Ye,"f").position.address.equals(n.address)?(i.regions.onIndexingChanged(),ue(this,an,"m",Zn).call(this)):ue(this,an,"m",Zn).call(this)}}),ue(this,Ye,"f").events.catchupAndSubscribe(({targetVertex:n})=>{ue(this,ud,"f").terminate(),Wn(this,ud,n.match({none:()=>W.Empty,some:({box:i})=>ue(this,ln,"f").boxAdapters.adapterFor(i,Jr).subscribeChange(()=>ue(this,an,"m",Zn).call(this))}),"f"),ue(this,an,"m",Zn).call(this)})),Wn(this,cd,!1,"f")}set position(e){ue(this,Ye,"f").position.setValue(e)}set duration(e){ue(this,Ye,"f").duration.setValue(e)}set loopOffset(e){ue(this,Ye,"f").loopOffset.setValue(e)}set loopDuration(e){ue(this,Ye,"f").loopDuration.setValue(e)}subscribeChange(e){return ue(this,dd,"f").subscribe(e)}accept(e){return _(e.visitNoteRegionBoxAdapter,this)}onSelected(){Wn(this,Rl,!0,"f"),ue(this,an,"m",Zn).call(this)}onDeselected(){Wn(this,Rl,!1,"f"),ue(this,an,"m",Zn).call(this)}get isSelected(){return ue(this,Rl,"f")}*iterateActiveNotesAt(e){let t=this.optCollection;if(t.isEmpty())return;let n=t.unwrap(),i=vr.globalToLocal(this,e);for(let o of n.events.iterateFrom(i-n.maxDuration)){if(i<o.position)return;i<o.complete&&(yield o.copyAsNoteEvent())}}terminate(){ue(this,ud,"f").terminate(),ue(this,Df,"f").terminate()}get box(){return ue(this,Ye,"f")}get uuid(){return ue(this,Ye,"f").address.uuid}get address(){return ue(this,Ye,"f").address}get position(){return ue(this,Ye,"f").position.getValue()}get duration(){return ue(this,Ye,"f").duration.getValue()}get loopOffset(){return ue(this,Ye,"f").loopOffset.getValue()}get loopDuration(){return ue(this,Ye,"f").loopDuration.getValue()}get offset(){return this.position-this.loopOffset}get complete(){return this.position+this.duration}get mute(){return ue(this,Ye,"f").mute.getValue()}get hue(){return ue(this,Ye,"f").hue.getValue()}get hasCollection(){return this.optCollection.nonEmpty()}get optCollection(){return ue(this,Ye,"f").events.targetVertex.map(e=>ue(this,ln,"f").boxAdapters.adapterFor(e.box,Jr))}get label(){return ue(this,Ye,"f").label.getValue()}get trackBoxAdapter(){return ue(this,cd,"f")?g.None:ue(this,Ye,"f").regions.targetVertex.map(e=>ue(this,ln,"f").boxAdapters.adapterFor(e.box,pt))}get isMirrowed(){return this.optCollection.mapOr(e=>e.numOwners>1,!1)}get canMirror(){return!0}copyTo(e){let t=this.optCollection.unwrap("Cannot make copy without event-collection"),n=e?.consolidate===!0?t.copy().box.owners:t.box.owners;return ue(this,ln,"f").boxAdapters.adapterFor(Us.create(ue(this,ln,"f").boxGraph,E.generate(),i=>{i.position.setValue(e?.position??this.position),i.duration.setValue(e?.duration??this.duration),i.loopOffset.setValue(e?.loopOffset??this.loopOffset),i.loopDuration.setValue(e?.loopDuration??this.loopDuration),i.hue.setValue(this.hue),i.label.setValue(this.label),i.mute.setValue(this.mute),i.events.refer(n),i.regions.refer(e?.track??ue(this,Ye,"f").regions.targetVertex.unwrap())}),r)}consolidate(){this.isMirrowed&&this.optCollection.ifSome(e=>{let t=ue(this,ln,"f").boxGraph,n=Rn.create(t,E.generate());e.events.asArray().forEach(i=>i.copyTo({events:n.events})),ue(this,Ye,"f").events.refer(n.owners)})}canFlatten(e){return e.length>0&&D.satisfy(e,(t,n)=>t.trackBoxAdapter.contains(n.trackBoxAdapter.unwrap()))&&e.every(t=>t.isSelected&&t instanceof r)}flatten(e){if(!this.canFlatten(e))return g.None;let t=ue(this,ln,"f").boxGraph,n=e.toSorted(vo.Comparator),i=D.getFirst(n,"Internal error (no first)"),o=D.getLast(n,"Internal error (no last)"),s=i.position,a=o.position+o.duration,c=i.trackBoxAdapter.unwrap(),l=Rn.create(t,E.generate()),d=Array.from(c.regions.collection.iterateRange(s,a));return d.filter(h=>h.isSelected).forEach(h=>{let f=h;for(let{resultStart:v,resultEnd:m,rawStart:y}of vr.locateLoops(f,f.position,f.complete)){let x=Math.floor(v-y),S=Math.floor(m-y);for(let C of f.optCollection.unwrap().events.iterateRange(x,S))C.copyTo({position:C.position+y-i.position,events:l.events})}}),d.forEach(({box:h})=>h.delete()),g.wrap(Us.create(t,E.generate(),h=>{h.position.setValue(s),h.duration.setValue(a-s),h.loopDuration.setValue(a-s),h.loopOffset.setValue(0),h.hue.setValue(this.hue),h.mute.setValue(this.mute),h.label.setValue(this.label),h.events.refer(l.owners),h.regions.refer(c.box.regions)}))}toString(){return`{NoteRegionBoxAdapter ${E.toString(ue(this,Ye,"f").address.uuid)} p: ${Y.toString(this.position)}, c: ${Y.toString(this.complete)}}`}};Df=new WeakMap,ln=new WeakMap,Ye=new WeakMap,dd=new WeakMap,cd=new WeakMap,Rl=new WeakMap,ud=new WeakMap,an=new WeakSet,Zn=function(){ue(this,dd,"f").notify(),this.trackBoxAdapter.unwrapOrNull()?.regions?.dispatchChange()};var Gn=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},se=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Di,Ol,cn,Xe,fd,Vl,hd,pd,un,qn=class r{constructor(e,t){Di.add(this),this.type="value-region",Ol.set(this,new j),cn.set(this,void 0),Xe.set(this,void 0),fd.set(this,void 0),Vl.set(this,void 0),hd.set(this,void 0),pd.set(this,W.Empty),Gn(this,cn,e,"f"),Gn(this,Xe,t,"f"),Gn(this,hd,!0,"f"),Gn(this,fd,new ne,"f"),Gn(this,Vl,!1,"f"),se(this,Ol,"f").own(se(this,Xe,"f").pointerHub.subscribe({onAdded:()=>se(this,Di,"m",un).call(this),onRemoved:()=>se(this,Di,"m",un).call(this)})),se(this,Ol,"f").own(se(this,Xe,"f").subscribe(Ie.Children,n=>{if(!this.trackBoxAdapter.isEmpty()&&(n.type==="primitive"||n.type==="pointer")){let i=this.trackBoxAdapter.unwrap();se(this,Xe,"f").position.address.equals(n.address)?(i.regions.onIndexingChanged(),se(this,Di,"m",un).call(this)):se(this,Di,"m",un).call(this)}})),se(this,Ol,"f").own(se(this,Xe,"f").events.catchupAndSubscribe(({targetVertex:n})=>{se(this,pd,"f").terminate(),Gn(this,pd,n.match({none:()=>W.Empty,some:({box:i})=>se(this,cn,"f").boxAdapters.adapterFor(i,ar).subscribeChange(()=>se(this,Di,"m",un).call(this))}),"f"),se(this,Di,"m",un).call(this)})),Gn(this,hd,!1,"f")}valueAt(e,t){let n=this.optCollection;return n.isEmpty()?t:n.unwrap().valueAt(vr.globalToLocal(this,e),t)}incomingValue(e){return this.valueAt(this.position,e)}outgoingValue(e){let t=this.optCollection;if(t.isEmpty())return e;let n=t.unwrap();return(this.complete-this.offset)%this.loopDuration===0?n.valueAt(this.loopDuration,e):n.valueAt(vr.globalToLocal(this,this.complete),e)}subscribeChange(e){return se(this,fd,"f").subscribe(e)}accept(e){return _(e.visitValueRegionBoxAdapter,this)}onSelected(){Gn(this,Vl,!0,"f"),se(this,Di,"m",un).call(this)}onDeselected(){Gn(this,Vl,!1,"f"),se(this,Di,"m",un).call(this)}get isSelected(){return se(this,Vl,"f")}onValuesPropertyChanged(){se(this,Di,"m",un).call(this)}onValuesSortingChanged(){this.onValuesPropertyChanged()}terminate(){se(this,pd,"f").terminate(),se(this,Ol,"f").terminate()}get box(){return se(this,Xe,"f")}get uuid(){return se(this,Xe,"f").address.uuid}get address(){return se(this,Xe,"f").address}get position(){return se(this,Xe,"f").position.getValue()}get duration(){return se(this,Xe,"f").duration.getValue()}get loopOffset(){return se(this,Xe,"f").loopOffset.getValue()}get loopDuration(){return se(this,Xe,"f").loopDuration.getValue()}get offset(){return this.position-this.loopOffset}get complete(){return this.position+this.duration}get mute(){return se(this,Xe,"f").mute.getValue()}get hue(){return se(this,Xe,"f").hue.getValue()}get hasCollection(){return!this.optCollection.isEmpty()}get events(){return this.optCollection.map(e=>e.events)}get optCollection(){return se(this,Xe,"f").events.targetVertex.map(e=>se(this,cn,"f").boxAdapters.adapterFor(e.box,ar))}get label(){return se(this,Xe,"f").label.getValue()}get trackBoxAdapter(){return se(this,hd,"f")?g.None:se(this,Xe,"f").regions.targetVertex.map(e=>se(this,cn,"f").boxAdapters.adapterFor(e.box,pt))}get isMirrowed(){return this.optCollection.mapOr(e=>e.numOwners>1,!1)}get canMirror(){return!0}set position(e){se(this,Xe,"f").position.setValue(e)}set duration(e){se(this,Xe,"f").duration.setValue(e)}set loopOffset(e){se(this,Xe,"f").loopOffset.setValue(e)}set loopDuration(e){se(this,Xe,"f").loopDuration.setValue(e)}copyTo(e){let t=this.optCollection.unwrap("Cannot make copy without event-collection"),n=e?.consolidate===!0?t.copy().box.owners:t.box.owners;return se(this,cn,"f").boxAdapters.adapterFor(js.create(se(this,cn,"f").boxGraph,E.generate(),i=>{i.position.setValue(e?.position??this.position),i.duration.setValue(e?.duration??this.duration),i.loopOffset.setValue(e?.loopOffset??this.loopOffset),i.loopDuration.setValue(e?.loopDuration??this.loopDuration),i.hue.setValue(this.hue),i.label.setValue(this.label),i.mute.setValue(this.mute),i.events.refer(n),i.regions.refer(e?.track??se(this,Xe,"f").regions.targetVertex.unwrap())}),r)}consolidate(){this.isMirrowed&&this.events.ifSome(e=>{let t=se(this,cn,"f").boxGraph,n=On.create(t,E.generate());e.asArray().forEach(i=>i.copyTo({events:n.events})),se(this,Xe,"f").events.refer(n.owners)})}canFlatten(e){return!1}flatten(e){if(!this.canFlatten(e))return g.None;let t=se(this,cn,"f").boxGraph,n=e.toSorted(vo.Comparator),i=D.getFirst(n,"Internal error (no first)"),o=D.getLast(n,"Internal error (no last)"),s=i.position,a=o.position+o.duration,c=i.trackBoxAdapter.unwrap(),l=On.create(t,E.generate()),d=Array.from(c.regions.collection.iterateRange(s,a));return d.filter(h=>h.isSelected).forEach(h=>{let f=h;for(let{resultStart:v,resultEnd:m,rawStart:y}of vr.locateLoops(f,f.position,f.complete)){let x=Math.floor(v-y),S=Math.floor(m-y);for(let C of f.events.unwrap().iterateRange(x,S));}}),d.forEach(({box:h})=>h.delete()),g.wrap(js.create(t,E.generate(),h=>{h.position.setValue(s),h.duration.setValue(a-s),h.loopDuration.setValue(a-s),h.loopOffset.setValue(0),h.hue.setValue(this.hue),h.mute.setValue(this.mute),h.label.setValue(this.label),h.events.refer(l.owners),h.regions.refer(c.box.regions)}))}toString(){return`{ValueRegionBoxAdapter ${E.toString(se(this,Xe,"f").address.uuid)} p: ${Y.toString(this.position)}, c: ${Y.toString(this.complete)}}`}};Ol=new WeakMap,cn=new WeakMap,Xe=new WeakMap,fd=new WeakMap,Vl=new WeakMap,hd=new WeakMap,pd=new WeakMap,Di=new WeakSet,un=function(){se(this,fd,"f").notify(),this.trackBoxAdapter.unwrapOrNull()?.regions?.dispatchChange()};var c1=(r,e)=>r.position-e.position,u1={for:(r,e)=>q(e.accept({visitNoteRegionBox:t=>r.adapterFor(t,Lo),visitAudioRegionBox:t=>r.adapterFor(t,jo),visitValueRegionBox:t=>r.adapterFor(t,qn)}),"")};var zl=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ot=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},md,na,gd,Ul,oa,jl,Mf=class{constructor(e,t){md.set(this,void 0),na.set(this,void 0),gd.set(this,void 0),Ul.set(this,void 0),oa.set(this,void 0),jl.set(this,void 0),zl(this,md,e,"f"),zl(this,na,new j,"f"),zl(this,gd,Ot(this,na,"f").own(new ne),"f"),zl(this,Ul,Ot(this,na,"f").own(new xt),"f"),zl(this,oa,vo.create(c1),"f"),zl(this,jl,E.newSet(n=>n.uuid),"f"),Ot(this,na,"f").ownAll(Ot(this,md,"f").box.regions.pointerHub.catchupAndSubscribe({onAdded:({box:n})=>{let i=u1.for(t,n),o=Ot(this,jl,"f").add(i);B(o,`Cannot add ${n}`),Ot(this,oa,"f").add(i),Ot(this,Ul,"f").forEach(s=>s.onAdded(i)),this.dispatchChange()},onRemoved:({box:{address:{uuid:n}}})=>{let i=Ot(this,jl,"f").removeByKey(n);Ot(this,oa,"f").remove(i),Ot(this,Ul,"f").forEach(o=>o.onRemoved(i)),this.dispatchChange()}},u.RegionCollection))}get trackBoxAdapter(){return Ot(this,md,"f")}get collection(){return Ot(this,oa,"f")}get adapters(){return Ot(this,jl,"f")}onIndexingChanged(){Ot(this,oa,"f").onIndexingChanged(),this.dispatchChange()}catchupAndSubscribe(e){return this.collection.asArray().forEach(e.onAdded),Ot(this,Ul,"f").subscribe(e)}subscribeChanges(e){return Ot(this,gd,"f").subscribe(e)}dispatchChange(){Ot(this,gd,"f").notify()}terminate(){Ot(this,na,"f").terminate()}};md=new WeakMap,na=new WeakMap,gd=new WeakMap,Ul=new WeakMap,oa=new WeakMap,jl=new WeakMap;var ee;(function(r){r[r.Undefined=0]="Undefined",r[r.Notes=1]="Notes",r[r.Audio=2]="Audio",r[r.Value=3]="Value"})(ee||(ee={}));(function(r){r.toLabelString=e=>{switch(e){case r.Audio:return"Audio";case r.Notes:return"Notes";case r.Value:return"Automation";case r.Undefined:default:return"N/A"}},r.toIconSymbol=e=>{switch(e){case r.Audio:return De.Waveform;case r.Notes:return De.Piano;case r.Value:return De.Automation;case r.Undefined:return De.AudioBus;default:return De.Unknown}}})(ee||(ee={}));var Tf;(function(r){r.isDeviceBox=e=>"host"in e&&Ke(e.host,$)&&"label"in e&&Ke(e.label,T)&&"enabled"in e&&Ke(e.enabled,I)&&"minimized"in e&&Ke(e.minimized,I),r.isInstrumentDeviceBox=e=>r.isDeviceBox(e)&&e.host.pointerType===u.InstrumentHost,r.isEffectDeviceBox=e=>r.isDeviceBox(e)&&"index"in e&&Ke(e.index,F)&&(e.host.pointerType===u.MidiEffectHost||e.host.pointerType===u.AudioEffectHost),r.lookupHostField=e=>R(e)&&"host"in e&&Ke(e.host,$)?e.host:N(`Could not find 'host' field in '${e?.name}'`),r.lookupLabelField=e=>R(e)&&"label"in e&&Ke(e.label,T)?e.label:N(`Could not find 'label' field in '${e?.name}'`),r.lookupEnabledField=e=>R(e)&&"enabled"in e&&Ke(e.enabled,I)?e.enabled:N(`Could not find 'enabled' field in '${e?.name}'`),r.lookupMinimizedField=e=>R(e)&&"minimized"in e&&Ke(e.minimized,I)?e.minimized:N(`Could not find 'minimized' field in '${e?.name}'`),r.lookupIndexField=e=>R(e)&&"index"in e&&Ke(e.index,F)?e.index:N(`Could not find 'index' field in '${e?.name}'`)})(Tf||(Tf={}));var d1;(function(r){r.toTrackType=e=>{switch(e){case"midi":return ee.Notes;case"audio":return ee.Audio;default:return N()}}})(d1||(d1={}));var te;(function(r){r.isAny=e=>e!==null&&typeof e=="object"&&"type"in e&&(e.type==="midi-effect"||e.type==="bus"||e.type==="instrument"||e.type==="audio-effect"),r.isEffect=e=>e!==null&&typeof e=="object"&&"type"in e&&(e.type==="midi-effect"||e.type==="audio-effect"),r.isInstrument=e=>e!==null&&typeof e=="object"&&"type"in e&&e.type==="instrument",r.isMidiEffect=e=>e!==null&&typeof e=="object"&&"type"in e&&e.type==="midi-effect",r.isAudioEffect=e=>e!==null&&typeof e=="object"&&"type"in e&&e.type==="audio-effect",r.isHost=e=>e!==null&&typeof e=="object"&&"class"in e&&e.class==="device-host",r.deleteEffectDevices=e=>{if(e.length===0)return;B(D.satisfy(e,(i,o)=>i.deviceHost().address.equals(o.deviceHost().address)),"Devices are not connected to the same host");let t=e[0];(t.accepts==="audio"?t.deviceHost().audioEffects.field().pointerHub.filter(u.AudioEffectHost):t.accepts==="midi"?t.deviceHost().midiEffects.field().pointerHub.filter(u.MidiEffectHost):N("unknown type")).map(({box:i})=>Tf.lookupIndexField(i)).filter(i=>e.some(o=>E.Comparator(o.uuid,i.address.uuid)!==0)).sort((i,o)=>i.getValue()-o.getValue()).forEach((i,o)=>i.setValue(o)),e.forEach(i=>i.box.delete())}})(te||(te={}));var Cf=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},jt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},vd,Rf,Mi,sa,Of,Vf=class{constructor(e,t){vd.set(this,void 0),Rf.set(this,new ne),Mi.set(this,void 0),sa.set(this,void 0),Of.set(this,void 0),Cf(this,vd,e,"f"),Cf(this,Mi,Ut.create(e.box.tracks,n=>t.adapterFor(n,pt),u.TrackCollection),"f"),Cf(this,sa,E.newSet(({uuid:n})=>n),"f"),Cf(this,Of,jt(this,Mi,"f").catchupAndSubscribe({onAdd:n=>jt(this,sa,"f").add({uuid:n.uuid,subscription:n.regions.subscribeChanges(()=>jt(this,Rf,"f").notify())}),onRemove:({uuid:n})=>jt(this,sa,"f").removeByKey(n).subscription.terminate(),onReorder:n=>{}}),"f")}create(e,t,n){let i=jt(this,vd,"f").box.graph,o=jt(this,vd,"f").box.tracks;sr.create(i,E.generate(),s=>{s.index.setValue(n??jt(this,Mi,"f").getMinFreeIndex()),s.type.setValue(e),s.tracks.refer(o),s.target.refer(t)})}controls(e){return g.wrap(jt(this,Mi,"f").adapters().find(t=>t.target.targetVertex.contains(e),!1))}delete(e){let t=jt(this,Mi,"f").adapters(),n=t.indexOf(e);if(n===-1)return N(`Cannot delete ${e}. Does not exist.`);for(let i=n+1;i<t.length;i++)t[i].indexField.setValue(i-1);e.box.delete()}get collection(){return jt(this,Mi,"f")}values(){return jt(this,Mi,"f").adapters()}catchupAndSubscribe(e){return jt(this,Mi,"f").catchupAndSubscribe(e)}subscribeAnyChange(e){return jt(this,Rf,"f").subscribe(e)}terminate(){jt(this,Mi,"f").terminate(),jt(this,Of,"f").terminate(),jt(this,sa,"f").forEach(({subscription:e})=>e.terminate()),jt(this,sa,"f").clear()}};vd=new WeakMap,Rf=new WeakMap,Mi=new WeakMap,sa=new WeakMap,Of=new WeakMap;var h1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ti=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},zf,Mr,lr=class{constructor(e,t){this.type="bus",this.accepts="audio",zf.set(this,void 0),Mr.set(this,void 0),h1(this,zf,e,"f"),h1(this,Mr,t,"f")}catchupAndSubscribe(e){return e(this),Ti(this,Mr,"f").subscribe(Ie.Children,()=>e(this))}get uuid(){return Ti(this,Mr,"f").address.uuid}get address(){return Ti(this,Mr,"f").address}get box(){return Ti(this,Mr,"f")}get enabledField(){return Ti(this,Mr,"f").enabled}get minimizedField(){return Ti(this,Mr,"f").minimized}get iconField(){return Ti(this,Mr,"f").icon}get labelField(){return Ti(this,Mr,"f").label}get colorField(){return Ti(this,Mr,"f").color}get iconSymbol(){return De.fromName(this.iconField.getValue()??"audio-bus")}deviceHost(){return Ti(this,zf,"f").boxAdapters.adapterFor(Ti(this,Mr,"f").output.targetVertex.unwrap("No AudioUnitBox found").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){}toString(){return`{${this.constructor.name}}`}};zf=new WeakMap,Mr=new WeakMap;var yd=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ct=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Hn,Ll,Kl,ei,xd,Uf=class{constructor(e,t){Hn.set(this,void 0),Ll.set(this,void 0),Kl.set(this,void 0),ei.set(this,void 0),xd.set(this,W.Empty),yd(this,Hn,new j,"f"),yd(this,Ll,ct(this,Hn,"f").own(new ne),"f"),yd(this,Kl,ct(this,Hn,"f").own(new rr(De.Unknown)),"f"),yd(this,ei,ct(this,Hn,"f").own(new rr(g.None)),"f"),ct(this,Hn,"f").own(ct(this,ei,"f").subscribe(n=>{ct(this,xd,"f").terminate(),yd(this,xd,n.getValue().match({none:()=>(ct(this,Ll,"f").notify(g.None),W.Empty),some:({labelField:i,iconField:o})=>W.many(o.catchupAndSubscribe(s=>ct(this,Kl,"f").setValue(De.fromName(s.getValue()))),i.catchupAndSubscribe(s=>ct(this,Ll,"f").notify(g.wrap(s.getValue()))))}),"f")})),ct(this,Hn,"f").own(e.catchupAndSubscribe({onAdded:({box:n})=>{B(ct(this,ei,"f").getValue().isEmpty(),"Already set");let i=n instanceof Bi?t.adapterFor(n,lr):t.adapterFor(n,te.isInstrument);ct(this,ei,"f").getValue().unwrapOrNull()!==i&&ct(this,ei,"f").setValue(g.wrap(i))},onRemoved:({box:n})=>{B(ct(this,ei,"f").getValue().unwrap("Cannot remove").box.address.equals(n.address),"Unexpected value to remove"),ct(this,ei,"f").setValue(g.None)}},u.InstrumentHost,u.AudioOutput))}getValue(){return ct(this,ei,"f").getValue()}subscribe(e){return ct(this,ei,"f").subscribe(e)}catchupAndSubscribe(e){return e(ct(this,ei,"f")),this.subscribe(e)}catchupAndSubscribeLabelChange(e){return e(this.label),ct(this,Ll,"f").subscribe(e)}catchupAndSubscribeIconChange(e){return ct(this,Kl,"f").catchupAndSubscribe(e)}set label(e){this.getValue().ifSome(t=>t.labelField.setValue(e))}get label(){return this.getValue().map(e=>e.labelField.getValue())}set icon(e){this.getValue().ifSome(t=>t.iconField.setValue(De.toName(e)))}get icon(){return this.getValue().match({none:()=>De.Unknown,some:e=>De.fromName(e.iconField.getValue())})}get iconValue(){return ct(this,Kl,"f")}terminate(){ct(this,Hn,"f").terminate(),ct(this,xd,"f").terminate()}};Hn=new WeakMap,Ll=new WeakMap,Kl=new WeakMap,ei=new WeakMap,xd=new WeakMap;var p1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},aa=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},jf,Jn,de=class{constructor(e){jf.set(this,void 0),Jn.set(this,void 0),p1(this,jf,e,"f"),p1(this,Jn,fe.newSet(t=>t.address),"f")}terminate(){aa(this,Jn,"f").forEach(e=>e.terminate()),aa(this,Jn,"f").clear()}parameters(){return aa(this,Jn,"f").values()}parameterAt(e){return aa(this,Jn,"f").getOrThrow(e,()=>new Error(`No ParameterAdapter found at [${e.toString()}]`))}createParameter(e,t,n,i,o){let s=new la(aa(this,jf,"f"),e,t,n,i,o),a=aa(this,Jn,"f").add(s);return B(a,`Could not add adapter for ${e}`),s}removeParameter(e){return aa(this,Jn,"f").removeByKey(e)}};jf=new WeakMap,Jn=new WeakMap;var ca=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},rt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ua,ti,Ko,Wl,Lf,Kf,wd,Zl=class{constructor(e,t){ua.set(this,void 0),ti.set(this,void 0),Ko.set(this,void 0),Wl.set(this,void 0),Lf.set(this,void 0),Kf.set(this,void 0),wd.set(this,W.Empty),ca(this,ua,e,"f"),ca(this,ti,t,"f"),ca(this,Ko,new j,"f"),ca(this,Wl,rt(this,Ko,"f").own(new ne),"f"),rt(this,Ko,"f").own(t.targetBus.catchupAndSubscribe(()=>{rt(this,wd,"f").terminate(),ca(this,wd,this.optTargetBus.match({none:()=>(rt(this,Wl,"f").notify(g.None),W.Empty),some:n=>n.catchupAndSubscribe(i=>rt(this,Wl,"f").notify(g.wrap(i)))}),"f")})),ca(this,Lf,rt(this,Ko,"f").own(new la(rt(this,ua,"f"),rt(this,ti,"f").sendPan,P.bipolar(),A.percent({unit:"%",fractionDigits:0}),"panning")),"f"),ca(this,Kf,rt(this,Ko,"f").own(new la(rt(this,ua,"f"),rt(this,ti,"f").sendGain,P.DefaultDecibel,A.numeric({unit:"dB",fractionDigits:1}),"gain")),"f")}catchupAndSubscribeBusChanges(e){return e(this.optTargetBus),rt(this,Wl,"f").subscribe(e)}get uuid(){return rt(this,ti,"f").address.uuid}get address(){return rt(this,ti,"f").address}get box(){return rt(this,ti,"f")}get indexField(){return rt(this,ti,"f").index}get sendPan(){return rt(this,Lf,"f")}get sendGain(){return rt(this,Kf,"f")}get targetBus(){return rt(this,ua,"f").boxAdapters.adapterFor(rt(this,ti,"f").targetBus.targetVertex.unwrap("no audioUnit").box,lr)}get optTargetBus(){return rt(this,ti,"f").targetBus.targetVertex.flatMap(e=>g.wrap(e.box.accept({visitAudioBusBox:t=>rt(this,ua,"f").boxAdapters.adapterFor(t,lr)})))}delete(){rt(this,ti,"f").delete()}terminate(){rt(this,Ko,"f").terminate(),rt(this,wd,"f").terminate()}};ua=new WeakMap,ti=new WeakMap,Ko=new WeakMap,Wl=new WeakMap,Lf=new WeakMap,Kf=new WeakMap,wd=new WeakMap;var bd=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},dn=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Wf,Zf,Gl,ql,Ad,Gf=class{constructor(e,t){Wf.set(this,void 0),Zf.set(this,void 0),Gl.set(this,void 0),ql.set(this,void 0),Ad.set(this,W.Empty),bd(this,Wf,e,"f"),bd(this,Zf,t,"f"),bd(this,Gl,new j,"f"),bd(this,ql,dn(this,Gl,"f").own(new ne),"f"),dn(this,Gl,"f").own(e.catchupAndSubscribe(()=>{dn(this,Ad,"f").terminate(),bd(this,Ad,this.adapter.match({none:()=>(dn(this,ql,"f").notify(g.None),W.Empty),some:n=>n.catchupAndSubscribe(i=>dn(this,ql,"f").notify(g.wrap(i)))}),"f")}))}subscribe(e){return dn(this,ql,"f").subscribe(e)}catchupAndSubscribe(e){return e(this.adapter),this.subscribe(e)}get adapter(){return dn(this,Wf,"f").targetVertex.flatMap(e=>g.wrap(e.box.accept({visitAudioBusBox:t=>dn(this,Zf,"f").adapterFor(t,lr)})))}terminate(){dn(this,Gl,"f").terminate(),dn(this,Ad,"f").terminate()}};Wf=new WeakMap,Zf=new WeakMap,Gl=new WeakMap,ql=new WeakMap,Ad=new WeakMap;var Qn=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},oe=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},qf,f1,hn,Tr,ft,ha,Hl,da,Hf,Jf,Qf,Yf,m1,g1,ri=class{constructor(e,t){qf.add(this),this.class="device-host",hn.set(this,new j),Tr.set(this,void 0),ft.set(this,void 0),ha.set(this,void 0),Hl.set(this,void 0),da.set(this,void 0),Hf.set(this,void 0),Jf.set(this,void 0),Qf.set(this,void 0),Yf.set(this,void 0),Qn(this,Tr,e,"f"),Qn(this,ft,t,"f"),Qn(this,ha,oe(this,hn,"f").own(new de(oe(this,Tr,"f"))),"f"),Qn(this,Hl,oe(this,hn,"f").own(new Vf(this,oe(this,Tr,"f").boxAdapters)),"f"),Qn(this,da,oe(this,hn,"f").own(new Uf(oe(this,ft,"f").input.pointerHub,oe(this,Tr,"f").boxAdapters)),"f"),Qn(this,Hf,oe(this,hn,"f").own(Ut.create(oe(this,ft,"f").midiEffects,n=>oe(this,Tr,"f").boxAdapters.adapterFor(n,te.isMidiEffect),u.MidiEffectHost)),"f"),Qn(this,Jf,oe(this,hn,"f").own(Ut.create(oe(this,ft,"f").audioEffects,n=>oe(this,Tr,"f").boxAdapters.adapterFor(n,te.isAudioEffect),u.AudioEffectHost)),"f"),Qn(this,Qf,oe(this,hn,"f").own(Ut.create(oe(this,ft,"f").auxSends,n=>oe(this,Tr,"f").boxAdapters.adapterFor(n,Zl),u.AuxSend)),"f"),Qn(this,Yf,oe(this,hn,"f").own(new Gf(oe(this,ft,"f").output,oe(this,Tr,"f").boxAdapters)),"f"),this.namedParameter=oe(this,qf,"m",m1).call(this,t),oe(this,qf,"m",g1).call(this)}get box(){return oe(this,ft,"f")}get uuid(){return oe(this,ft,"f").address.uuid}get address(){return oe(this,ft,"f").address}get indexField(){return oe(this,ft,"f").index}get type(){return oe(this,ft,"f").type.getValue()}get captureBox(){return oe(this,ft,"f").capture.targetVertex}get tracks(){return oe(this,Hl,"f")}get input(){return oe(this,da,"f")}get midiEffects(){return oe(this,Hf,"f")}get audioEffects(){return oe(this,Jf,"f")}get inputAdapter(){return oe(this,da,"f").getValue()}get auxSends(){return oe(this,Qf,"f")}get output(){return oe(this,Yf,"f")}get isBus(){return this.input.getValue().mapOr(e=>e.type==="bus",!1)}get isInstrument(){return this.input.getValue().mapOr(e=>e.type==="instrument",!1)}get isOutput(){return oe(this,ft,"f").output.targetVertex.mapOr(e=>e.box.address.equals(oe(this,Tr,"f").rootBoxAdapter.address),!1)}get midiEffectsField(){return oe(this,ft,"f").midiEffects}get inputField(){return oe(this,ft,"f").input}get audioEffectsField(){return oe(this,ft,"f").audioEffects}get tracksField(){return oe(this,ft,"f").tracks}get minimizedField(){return oe(this,da,"f").getValue().unwrap().minimizedField}get isAudioUnit(){return!0}get label(){return oe(this,da,"f").getValue().mapOr(e=>e.labelField.getValue(),"")}audioUnitBoxAdapter(){return this}indicesLimit(){let e=oe(this,Tr,"f").rootBoxAdapter.audioUnits.adapters(),t=this.indexField.getValue(),n=this.type,i=t,o=t;for(;i>0&&e[i-1].type===n;)i--;for(;o<e.length-1&&e[o+1].type===n;)o++;return[i,o+1]}move(e){oe(this,Tr,"f").rootBoxAdapter.audioUnits.move(this,e)}moveTrack(e,t){oe(this,Hl,"f").collection.move(e,t)}deleteTrack(e){oe(this,Hl,"f").delete(e)}toString(){return`{${this.constructor.name}}`}terminate(){oe(this,hn,"f").terminate()}};f1=ri,hn=new WeakMap,Tr=new WeakMap,ft=new WeakMap,ha=new WeakMap,Hl=new WeakMap,da=new WeakMap,Hf=new WeakMap,Jf=new WeakMap,Qf=new WeakMap,Yf=new WeakMap,qf=new WeakSet,m1=function(e){return{volume:oe(this,ha,"f").createParameter(e.volume,f1.VolumeMapper,A.decible,"volume"),panning:oe(this,ha,"f").createParameter(e.panning,P.bipolar(),A.panning,"panning",.5),mute:oe(this,ha,"f").createParameter(e.mute,P.bool,A.bool,"mute"),solo:oe(this,ha,"f").createParameter(e.solo,P.bool,A.bool,"solo")}},g1=function(){let e=this.address.toString(),t=oe(this,ft,"f").capture.targetAddress.unwrapOrUndefined(),n=()=>`AudioUnit '${e}' must have a capture. AudioUnit is typed ${this.type} and has input ${oe(this,ft,"f").input.pointerHub.incoming().at(0)?.box.name}, but capture is ${t}`;B(this.type!==bt.Instrument||oe(this,ft,"f").capture.targetAddress.nonEmpty(),n)};ri.VolumeMapper=P.decibel(-96,-9,6);var Jl=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},qe=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Xf,Wo,cr,pa,em,tm,_d,v1,y1,pt=class{constructor(e,t){Xf.add(this),Wo.set(this,void 0),cr.set(this,void 0),pa.set(this,void 0),em.set(this,void 0),tm.set(this,void 0),_d.set(this,void 0),Jl(this,Wo,e,"f"),Jl(this,cr,t,"f"),Jl(this,pa,new j,"f"),Jl(this,em,qe(this,pa,"f").own(new If(this,e.boxAdapters)),"f"),Jl(this,tm,qe(this,pa,"f").own(new Mf(this,e.boxAdapters)),"f"),Jl(this,_d,qe(this,pa,"f").own(new rr(-1)),"f")}catchupAndSubscribePath(e){let t=[g.None,g.None],n=()=>{t.every(i=>i.nonEmpty())?e(g.wrap(t.map(i=>i.unwrap()))):e(g.None)};return W.many(qe(this,Xf,"m",v1).call(this,i=>{t[0].equals(i)||(t[0]=i,n())}),qe(this,Xf,"m",y1).call(this,i=>{t[1].equals(i)||(t[1]=i,n())}))}set targetDeviceName(e){qe(this,cr,"f").target.targetVertex.ifSome(t=>{let n=t.box;if(n instanceof tt)return qe(this,Wo,"f").boxAdapters.adapterFor(n,ri).input.getValue().ifSome(({labelField:o})=>o.setValue(e));if("label"in n&&n.label instanceof T)return n.label.setValue(e)})}get targetDeviceName(){return qe(this,cr,"f").target.targetVertex.flatMap(e=>{let t=e.box;return t instanceof tt?qe(this,Wo,"f").boxAdapters.adapterFor(t,ri).input.label:"label"in t&&t.label instanceof T?g.wrap(t.label.getValue()):g.wrap(t.name)})}terminate(){qe(this,pa,"f").terminate()}get audioUnit(){return Be(qe(this,cr,"f").tracks.targetVertex.unwrap().box,tt)}get target(){return qe(this,cr,"f").target}get clips(){return qe(this,em,"f")}get regions(){return qe(this,tm,"f")}get enabled(){return qe(this,cr,"f").enabled}get indexField(){return qe(this,cr,"f").index}get type(){return qe(this,cr,"f").type.getValue()}get box(){return qe(this,cr,"f")}get uuid(){return qe(this,cr,"f").address.uuid}get address(){return qe(this,cr,"f").address}get listIndex(){return qe(this,_d,"f").getValue()}set listIndex(e){qe(this,_d,"f").setValue(e)}accepts(e){switch(e.type){case"audio-clip":return this.type===ee.Audio;case"note-clip":return this.type===ee.Notes;case"value-clip":return this.type===ee.Value;case"audio-region":return this.type===ee.Audio;case"note-region":return this.type===ee.Notes;case"value-region":return this.type===ee.Value}}valueAt(e,t){if(!this.enabled.getValue())return t;let n=t,i=qe(this,Wo,"f").clipSequencing.iterate(this.uuid,e,e+Np);for(let{optClip:o,sectionFrom:s}of i)n=o.match({none:()=>{let a=this.regions.collection.lowerEqual(e,c=>!c.mute);if(a===null){let c=this.regions.collection.optAt(0);return Ke(c,qn)?c.incomingValue(t):t}else if(Ke(a,qn))return e<a.complete?a.valueAt(e,t):a.outgoingValue(t);return t},some:a=>s===e&&Ke(a,Mo)?a.valueAt(e,t):t});return n}};Wo=new WeakMap,cr=new WeakMap,pa=new WeakMap,em=new WeakMap,tm=new WeakMap,_d=new WeakMap,Xf=new WeakSet,v1=function(e){let t=qe(this,cr,"f").target.targetVertex;if(t.nonEmpty()){let n=t.unwrap().box;return n instanceof tt?qe(this,Wo,"f").boxAdapters.adapterFor(n,ri).input.catchupAndSubscribeLabelChange(o=>e(o)):"label"in n&&n.label instanceof T?n.label.catchupAndSubscribe(i=>e(g.wrap(i.getValue()))):(e(g.wrap(n.name)),W.Empty)}return e(g.None),W.Empty},y1=function(e){let t=this.type;switch(t){case ee.Audio:case ee.Notes:return e(g.wrap(ee[t])),W.Empty;case ee.Value:{let n=qe(this,cr,"f").target.targetVertex.unwrap();if(n.isField())e(qe(this,Wo,"f").parameterFieldAdapters.opt(n.address).map(i=>i.name));else if(n.isBox())e(g.wrap(n.name));else return N("Illegal State. Vertex is not a field nor box.");return W.Empty}case ee.Undefined:return e(g.wrap("")),W.Empty;default:return e(g.None),W.Empty}};var Lt=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ae=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Zo,Cr,Go,fa,rm,im,ma,ga,qo,Ho,va,Ql,Pd,x1=[u.Automation,u.Modulation,u.MidiControl,u.ParameterController],la=class{constructor(e,t,n,i,o,s){Zo.set(this,void 0),Cr.set(this,void 0),Go.set(this,void 0),fa.set(this,void 0),rm.set(this,void 0),im.set(this,void 0),ma.set(this,new j),ga.set(this,void 0),qo.set(this,void 0),Ho.set(this,g.None),va.set(this,g.None),Ql.set(this,null),Pd.set(this,!1),Lt(this,Zo,e,"f"),Lt(this,Cr,t,"f"),Lt(this,Go,n,"f"),Lt(this,fa,i,"f"),Lt(this,rm,o,"f"),Lt(this,im,s??0,"f"),ae(this,ma,"f").own(ae(this,Zo,"f").parameterFieldAdapters.register(this)),Lt(this,ga,ae(this,ma,"f").own(new ne),"f"),Lt(this,qo,new xt,"f"),ae(this,ma,"f").own(ae(this,Cr,"f").subscribe(()=>ae(this,ga,"f").notify(this))),ae(this,ma,"f").own(ae(this,Cr,"f").pointerHub.catchupAndSubscribe({onAdded:a=>{ae(this,qo,"f").proxy.onControlSourceAdd(lx(a.pointerType)),a.box.accept({visitTrackBox:c=>{B(ae(this,Ho,"f").isEmpty(),"Already assigned");let l=ae(this,Zo,"f").boxAdapters.adapterFor(c,pt);Lt(this,Ho,g.wrap(l),"f"),ae(this,Zo,"f").isMainThread&&Lt(this,va,g.wrap(ae(this,Zo,"f").liveStreamReceiver.subscribeFloat(ae(this,Cr,"f").address,d=>{ae(this,Ql,"f")!==d&&(Lt(this,Ql,d,"f"),ae(this,ga,"f").notify(this))})),"f")}})},onRemoved:a=>{ae(this,qo,"f").proxy.onControlSourceRemove(lx(a.pointerType)),a.box.accept({visitTrackBox:c=>{B(ae(this,Ho,"f").unwrapOrNull()?.address?.equals(c.address)===!0,`Unknown ${c}`),Lt(this,Ho,g.None,"f"),ae(this,Zo,"f").isMainThread&&(ae(this,va,"f").ifSome(l=>l.terminate()),Lt(this,va,g.None,"f"),Lt(this,Ql,null,"f"),ae(this,ga,"f").notify(this))}})}},...x1)),t.getValue()!==n.clamp(t.getValue())&&console.warn(`${o} (${t.getValue()}) is out of bounds`,"constraints"in t?t.constraints:"no constraints",n,t.address.fieldKeys.join(", "),t.box.name)}registerMidiControl(){return ae(this,qo,"f").proxy.onControlSourceAdd("midi"),Lt(this,Pd,!0,"f"),{terminate:()=>{Lt(this,Pd,!1,"f"),ae(this,qo,"f").proxy.onControlSourceRemove("midi")}}}get field(){return ae(this,Cr,"f")}get valueMapping(){return ae(this,Go,"f")}get stringMapping(){return ae(this,fa,"f")}get name(){return ae(this,rm,"f")}get anchor(){return ae(this,im,"f")}get type(){return ae(this,Cr,"f").type}get address(){return ae(this,Cr,"f").address}get track(){return ae(this,Ho,"f")}valueAt(e){let t=ae(this,Ho,"f");if(t.nonEmpty()){let n=t.unwrap();if(n.enabled)return this.valueMapping.y(n.valueAt(e,this.getUnitValue()))}return this.getValue()}subscribe(e){return ae(this,ga,"f").subscribe(e)}catchupAndSubscribe(e){return e(this),this.subscribe(e)}catchupAndSubscribeControlSources(e){return ae(this,Pd,"f")&&e.onControlSourceAdd("midi"),ae(this,Cr,"f").pointerHub.filter(...x1).forEach(t=>e.onControlSourceAdd(lx(t.pointerType))),ae(this,qo,"f").subscribe(e)}getValue(){return ae(this,Cr,"f").getValue()}setValue(e){ae(this,Cr,"f").setValue(e)}setUnitValue(e){this.setValue(ae(this,Go,"f").y(e))}getUnitValue(){return ae(this,Go,"f").x(this.getValue())}getControlledValue(){return ae(this,Go,"f").y(this.getControlledUnitValue())}getControlledUnitValue(){return ae(this,Ql,"f")??this.getUnitValue()}getControlledPrintValue(){return ae(this,fa,"f").x(this.getControlledValue())}getPrintValue(){return ae(this,fa,"f").x(this.getValue())}setPrintValue(e){let t=ae(this,fa,"f").y(e);t.type==="unitValue"?this.setUnitValue(X(t.value,0,1)):t.type==="explicit"?this.setValue(this.valueMapping.clamp(t.value)):console.debug(`Unknown text input: '${t.value}'`)}reset(){this.setValue(ae(this,Go,"f").clamp(ae(this,Cr,"f").initValue))}terminate(){ae(this,va,"f").ifSome(e=>e.terminate()),Lt(this,va,g.None,"f"),ae(this,ma,"f").terminate()}};Zo=new WeakMap,Cr=new WeakMap,Go=new WeakMap,fa=new WeakMap,rm=new WeakMap,im=new WeakMap,ma=new WeakMap,ga=new WeakMap,qo=new WeakMap,Ho=new WeakMap,va=new WeakMap,Ql=new WeakMap,Pd=new WeakMap;var lx=r=>{switch(r){case u.Automation:return"automated";case u.Modulation:return"modulated";case u.MidiControl:return"midi";case u.ParameterController:return"external";default:return N(`${r.toString()} is an unknown pointer type`)}};var cx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ci=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Yn,ya,nm,om=class{constructor(e,t,n){Yn.set(this,void 0),ya.set(this,void 0),nm.set(this,void 0),cx(this,Yn,E.newSet(i=>i.uuid),"f"),cx(this,ya,new xt,"f"),cx(this,nm,e.catchupAndSubscribe({onAdded:i=>{let o=t(i.box),s=Ci(this,Yn,"f").add(o);B(s,`Could not add ${o}`),Ci(this,ya,"f").proxy.onAdd(o)},onRemoved:i=>{let o=i.box.address.uuid;Ci(this,ya,"f").proxy.onRemove(Ci(this,Yn,"f").removeByKey(o))}},n),"f")}subscribe(e){return Ci(this,ya,"f").subscribe(e)}catchupAndSubscribe(e){return Ci(this,Yn,"f").forEach(t=>e.onAdd(t)),this.subscribe(e)}adapters(){return Ci(this,Yn,"f").values()}size(){return Ci(this,Yn,"f").size()}isEmpty(){return this.size()===0}terminate(){Ci(this,Yn,"f").clear(),Ci(this,ya,"f").terminate(),Ci(this,nm,"f").terminate()}};Yn=new WeakMap,ya=new WeakMap,nm=new WeakMap;var ux=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},kt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},dx,sm,Ed,ii,pn,w1,ni=class{constructor(e,t){dx.add(this),this.type="audio-effect",this.accepts="audio",Ed.set(this,void 0),ii.set(this,void 0),pn.set(this,void 0),ux(this,Ed,e,"f"),ux(this,ii,t,"f"),ux(this,pn,new de(kt(this,Ed,"f")),"f"),this.namedParameter=kt(this,dx,"m",w1).call(this,t)}get box(){return kt(this,ii,"f")}get uuid(){return kt(this,ii,"f").address.uuid}get address(){return kt(this,ii,"f").address}get indexField(){return kt(this,ii,"f").index}get labelField(){return kt(this,ii,"f").label}get enabledField(){return kt(this,ii,"f").enabled}get minimizedField(){return kt(this,ii,"f").minimized}get host(){return kt(this,ii,"f").host}deviceHost(){return kt(this,Ed,"f").boxAdapters.adapterFor(kt(this,ii,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){kt(this,pn,"f").terminate()}};sm=ni,Ed=new WeakMap,ii=new WeakMap,pn=new WeakMap,dx=new WeakSet,w1=function(e){return{delay:kt(this,pn,"f").createParameter(e.delay,P.linearInteger(0,sm.OffsetFractions.length-1),sm.OffsetStringMapping,"delay"),feedback:kt(this,pn,"f").createParameter(e.feedback,P.unipolar(),A.numeric({unit:"%",fractionDigits:0}),"feedback"),cross:kt(this,pn,"f").createParameter(e.cross,P.unipolar(),A.numeric({unit:"%",fractionDigits:0}),"cross"),filter:kt(this,pn,"f").createParameter(e.filter,P.bipolar(),A.numeric({unit:"%",fractionDigits:0}),"filter",.5),dry:kt(this,pn,"f").createParameter(e.dry,P.DefaultDecibel,A.numeric({unit:"db",fractionDigits:1}),"dry"),wet:kt(this,pn,"f").createParameter(e.wet,P.DefaultDecibel,A.numeric({unit:"db",fractionDigits:1}),"wet")}};ni.OffsetFractions=ir.builder().add([1,1]).add([1,2]).add([1,3]).add([1,4]).add([3,16]).add([1,6]).add([1,8]).add([3,32]).add([1,12]).add([1,16]).add([3,64]).add([1,24]).add([1,32]).add([1,48]).add([1,64]).add([1,96]).add([1,128]).asDescendingArray();ni.OffsetStringMapping=A.indices("",sm.OffsetFractions.map(([r,e])=>`${r}/${e}`));var hx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},It=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},px,Sd,oi,fn,b1,Yl=class{constructor(e,t){px.add(this),this.type="audio-effect",this.accepts="audio",Sd.set(this,void 0),oi.set(this,void 0),fn.set(this,void 0),hx(this,Sd,e,"f"),hx(this,oi,t,"f"),hx(this,fn,new de(It(this,Sd,"f")),"f"),this.namedParameter=It(this,px,"m",b1).call(this,t)}get box(){return It(this,oi,"f")}get uuid(){return It(this,oi,"f").address.uuid}get address(){return It(this,oi,"f").address}get indexField(){return It(this,oi,"f").index}get labelField(){return It(this,oi,"f").label}get enabledField(){return It(this,oi,"f").enabled}get minimizedField(){return It(this,oi,"f").minimized}get host(){return It(this,oi,"f").host}deviceHost(){return It(this,Sd,"f").boxAdapters.adapterFor(It(this,oi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){It(this,fn,"f").terminate()}};Sd=new WeakMap,oi=new WeakMap,fn=new WeakMap,px=new WeakSet,b1=function(e){return{decay:It(this,fn,"f").createParameter(e.decay,P.unipolar(),A.numeric({unit:"%",fractionDigits:0}),"Room-Size"),preDelay:It(this,fn,"f").createParameter(e.preDelay,P.exponential(.001,.5),A.numeric({unit:"s",fractionDigits:1,unitPrefix:!0}),"Pre-Delay"),damp:It(this,fn,"f").createParameter(e.damp,P.unipolar(),A.numeric({unit:"%",fractionDigits:0}),"damping"),filter:It(this,fn,"f").createParameter(e.filter,P.bipolar(),A.numeric({unit:"%",fractionDigits:0}),"filter"),dry:It(this,fn,"f").createParameter(e.dry,P.DefaultDecibel,A.numeric({unit:"db",fractionDigits:1}),"dry"),wet:It(this,fn,"f").createParameter(e.wet,P.DefaultDecibel,A.numeric({unit:"db",fractionDigits:1}),"wet")}};var fx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},gt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},gx,Fd,Rr,Ri,P1,Xl=class{constructor(e,t){gx.add(this),this.type="audio-effect",this.accepts="audio",Fd.set(this,void 0),Rr.set(this,void 0),Ri.set(this,void 0),fx(this,Fd,e,"f"),fx(this,Rr,t,"f"),fx(this,Ri,new de(gt(this,Fd,"f")),"f"),this.namedParameter=gt(this,gx,"m",P1).call(this,t)}get box(){return gt(this,Rr,"f")}get uuid(){return gt(this,Rr,"f").address.uuid}get address(){return gt(this,Rr,"f").address}get indexField(){return gt(this,Rr,"f").index}get labelField(){return gt(this,Rr,"f").label}get enabledField(){return gt(this,Rr,"f").enabled}get minimizedField(){return gt(this,Rr,"f").minimized}get host(){return gt(this,Rr,"f").host}get spectrum(){return gt(this,Rr,"f").address.append(4095)}deviceHost(){return gt(this,Fd,"f").boxAdapters.adapterFor(gt(this,Rr,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){gt(this,Ri,"f").terminate()}};Fd=new WeakMap,Rr=new WeakMap,Ri=new WeakMap,gx=new WeakSet,P1=function(e){return{highPass:A1(gt(this,Ri,"f"),e.highPass,"High-Pass"),lowShelf:_1(gt(this,Ri,"f"),e.lowShelf,"Low-Shelf"),lowBell:mx(gt(this,Ri,"f"),e.lowBell,"Low-Bell"),midBell:mx(gt(this,Ri,"f"),e.midBell,"Mid-Bell"),highBell:mx(gt(this,Ri,"f"),e.highBell,"High-Bell"),highShelf:_1(gt(this,Ri,"f"),e.highShelf,"High-Shelf"),lowPass:A1(gt(this,Ri,"f"),e.lowPass,"Low-Pass")}};var vx=P.exponential(20,2e4),E1=P.linear(-24,24),S1=P.exponential(.01,10),A1=(r,e,t)=>({enabled:r.createParameter(e.enabled,P.bool,A.bool,"enabled"),frequency:r.createParameter(e.frequency,vx,A.numeric({unit:"Hz",fractionDigits:0}),`${t} Freq`),order:r.createParameter(e.order,P.linearInteger(0,3),A.indices("db",["12","24","36","48"]),`${t} Order`),q:r.createParameter(e.q,S1,A.numeric({fractionDigits:3}),`${t} Q`)}),_1=(r,e,t)=>({enabled:r.createParameter(e.enabled,P.bool,A.bool,"enabled"),frequency:r.createParameter(e.frequency,vx,A.numeric({unit:"Hz",fractionDigits:0}),`${t} Freq`),gain:r.createParameter(e.gain,E1,A.numeric({unit:"db",fractionDigits:1,bipolar:!0}),`${t} Gain`,.5)}),mx=(r,e,t)=>({enabled:r.createParameter(e.enabled,P.bool,A.bool,"enabled"),frequency:r.createParameter(e.frequency,vx,A.numeric({unit:"Hz",fractionDigits:0}),`${t} Freq`),gain:r.createParameter(e.gain,E1,A.numeric({unit:"db",fractionDigits:1,bipolar:!0}),`${t} Gain`,.5),q:r.createParameter(e.q,S1,A.numeric({fractionDigits:3}),`${t} Q`)});var F1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},yr=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},am,lm,xr,Jo=class{constructor(e,t){this.type="marker-event",am.set(this,new j),lm.set(this,void 0),xr.set(this,void 0),F1(this,lm,e,"f"),F1(this,xr,t,"f"),yr(this,am,"f").own(yr(this,xr,"f").subscribe(Ie.Children,n=>{if(!this.trackAdapter.isEmpty()&&(n.type==="primitive"||n.type==="pointer")){let i=this.trackAdapter.unwrap();yr(this,xr,"f").position.address.equals(n.address)?i.onSortingChanged():i.dispatchChange()}}))}get box(){return yr(this,xr,"f")}get uuid(){return yr(this,xr,"f").address.uuid}get address(){return yr(this,xr,"f").address}get position(){return yr(this,xr,"f").position.getValue()}get plays(){return yr(this,xr,"f").plays.getValue()}get hue(){return yr(this,xr,"f").hue.getValue()}get label(){return yr(this,xr,"f").label.getValue()}get trackAdapter(){return yr(this,xr,"f").track.targetVertex.map(e=>yr(this,lm,"f").boxAdapters.adapterFor(e.box,mn).markerTrack)}terminate(){yr(this,am,"f").terminate()}toString(){return`{MarkerBoxAdapter ${E.toString(yr(this,xr,"f").address.uuid).substring(0,4)}, plays: ${this.plays}`}};am=new WeakMap,lm=new WeakMap,xr=new WeakMap;Jo.Comparator=(r,e)=>r.position-e.position;var Nd=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},si=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Bd,ec,$d,xa,cm,um=class{constructor(e,t){Bd.set(this,void 0),ec.set(this,void 0),$d.set(this,void 0),xa.set(this,void 0),cm.set(this,void 0),Nd(this,Bd,e,"f"),Nd(this,ec,t,"f"),this.changeNotifier=new ne,Nd(this,$d,E.newSet(n=>n.uuid),"f"),Nd(this,xa,go.create(Jo.Comparator),"f"),Nd(this,cm,si(this,ec,"f").markers.pointerHub.catchupAndSubscribe({onAdded:({box:n})=>{if(n instanceof pl){let i=si(this,Bd,"f").boxAdapters.adapterFor(n,Jo),o=si(this,$d,"f").add(i);B(o,"Could not add adapter"),si(this,xa,"f").add(i),this.dispatchChange()}},onRemoved:({box:{address:{uuid:n}}})=>{si(this,xa,"f").remove(si(this,$d,"f").removeByKey(n)),this.dispatchChange()}}),"f")}subscribe(e){return this.changeNotifier.subscribe(e)}get context(){return si(this,Bd,"f")}get enabled(){return si(this,ec,"f").enabled.getValue()}get events(){return si(this,xa,"f")}get object(){return si(this,ec,"f")}dispatchChange(){this.changeNotifier.notify()}onSortingChanged(){si(this,xa,"f").onIndexingChanged(),this.dispatchChange()}terminate(){si(this,cm,"f").terminate()}};Bd=new WeakMap,ec=new WeakMap,$d=new WeakMap,xa=new WeakMap,cm=new WeakMap;var N1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Xn=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Oi,dm,mn=class{constructor(e,t){Oi.set(this,void 0),dm.set(this,void 0),N1(this,Oi,t,"f"),N1(this,dm,new um(e,Xn(this,Oi,"f").markerTrack),"f")}terminate(){}get box(){return Xn(this,Oi,"f")}get uuid(){return Xn(this,Oi,"f").address.uuid}get address(){return Xn(this,Oi,"f").address}get markerTrack(){return Xn(this,dm,"f")}get signature(){return[Xn(this,Oi,"f").signature.nominator.getValue(),Xn(this,Oi,"f").signature.denominator.getValue()]}get signatureDuration(){let{nominator:e,denominator:t}=Xn(this,Oi,"f").signature;return Y.fromSignature(e.getValue(),t.getValue())}catchupAndSubscribeSignature(e){return e(this.signature),Xn(this,Oi,"f").signature.subscribe(()=>e(this.signature))}};Oi=new WeakMap,dm=new WeakMap;var sF=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},kd=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Qo,Yo=class{constructor(e,t){Qo.set(this,void 0),sF(this,Qo,t,"f")}get box(){return kd(this,Qo,"f")}get uuid(){return kd(this,Qo,"f").address.uuid}get address(){return kd(this,Qo,"f").address}get source(){return kd(this,Qo,"f").source.targetVertex.unwrap("Insufficient Vertex")}get target(){return kd(this,Qo,"f").target.targetVertex.unwrap("Insufficient Vertex")}terminate(){}};Qo=new WeakMap;var wa=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ai=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},hm,ba,Aa,pm,fm,Id,li=class{constructor(e,t){hm.set(this,void 0),ba.set(this,void 0),Aa.set(this,void 0),pm.set(this,void 0),fm.set(this,void 0),Id.set(this,!1),wa(this,hm,e,"f"),wa(this,ba,t,"f"),wa(this,Aa,new j,"f"),wa(this,pm,t.attributes,"f"),wa(this,fm,ai(this,Aa,"f").own(new de(e)),"f")}get inputs(){throw new Error("Method not implemented.")}get outputs(){throw new Error("Method not implemented.")}own(e){return ai(this,Aa,"f").own(e)}ownAll(...e){ai(this,Aa,"f").ownAll(...e)}onSelected(){wa(this,Id,!0,"f")}onDeselected(){wa(this,Id,!1,"f")}isSelected(){return ai(this,Id,"f")}get box(){return ai(this,ba,"f")}get attributes(){return ai(this,pm,"f")}get uuid(){return ai(this,ba,"f").address.uuid}get address(){return ai(this,ba,"f").address}get parameters(){return ai(this,fm,"f")}get modular(){return ai(this,hm,"f").boxAdapters.adapterFor(ai(this,ba,"f").attributes.collection.targetVertex.unwrap().box,Xo)}terminate(){ai(this,Aa,"f").terminate()}};hm=new WeakMap,ba=new WeakMap,Aa=new WeakMap,pm=new WeakMap,fm=new WeakMap,Id=new WeakMap;var mm=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},eo=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},gm,es,Dd,vm,Gt;(function(r){r.Input="input",r.Output="output"})(Gt||(Gt={}));var qt=class r{static create(e,t,n,i){return new r(e,t,n,i??t.fieldName)}constructor(e,t,n,i){gm.set(this,void 0),es.set(this,void 0),Dd.set(this,void 0),vm.set(this,void 0),mm(this,gm,e,"f"),mm(this,es,t,"f"),mm(this,Dd,n,"f"),mm(this,vm,i,"f")}matches(e){return this.direction!==e.direction&&this.field.pointerRules.accepts.some(t=>e.field.pointerRules.accepts.some(n=>n===t))}get connections(){return eo(this,es,"f").pointerHub.isEmpty()?D.empty():eo(this,es,"f").pointerHub.filter(u.VoltageConnection).map(({box:e})=>eo(this,gm,"f").adapterFor(e,Yo))}get field(){return eo(this,es,"f")}get address(){return eo(this,es,"f").address}get direction(){return eo(this,Dd,"f")}get name(){return eo(this,vm,"f")}toString(){return`{ModuleConnectorAdapter address: ${eo(this,es,"f").address.toString()}, direction: ${eo(this,Dd,"f")}}`}};gm=new WeakMap,es=new WeakMap,Dd=new WeakMap,vm=new WeakMap;var yx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Md=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},ym,Td,Cd,tc=class extends li{constructor(e,t){super(e,t),ym.set(this,void 0),Td.set(this,void 0),Cd.set(this,void 0),yx(this,ym,this.parameters.createParameter(t.time,P.exponential(1,1e4),A.numeric({unit:"ms"}),"Time"),"f"),yx(this,Td,qt.create(e.boxAdapters,t.voltageInput,Gt.Input,"Input"),"f"),yx(this,Cd,qt.create(e.boxAdapters,t.voltageOutput,Gt.Output,"Output"),"f")}get parameterTime(){return Md(this,ym,"f")}get voltageInput(){return Md(this,Td,"f")}get voltageOutput(){return Md(this,Cd,"f")}get inputs(){return[Md(this,Td,"f")]}get outputs(){return[Md(this,Cd,"f")]}};ym=new WeakMap,Td=new WeakMap,Cd=new WeakMap;var aF=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},B1=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Rd,rc=class extends li{constructor(e,t){super(e,t),Rd.set(this,void 0),aF(this,Rd,qt.create(e.boxAdapters,t.input,Gt.Input,"Input"),"f")}get voltageInput(){return B1(this,Rd,"f")}get inputs(){return[B1(this,Rd,"f")]}get outputs(){return D.empty()}};Rd=new WeakMap;var xx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Od=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},xm,Vd,zd,ic=class extends li{constructor(e,t){super(e,t),xm.set(this,void 0),Vd.set(this,void 0),zd.set(this,void 0),xx(this,xm,this.parameters.createParameter(t.gain,P.DefaultDecibel,A.numeric({unit:"db"}),"Gain"),"f"),xx(this,Vd,qt.create(e.boxAdapters,t.voltageInput,Gt.Input,"Input"),"f"),xx(this,zd,qt.create(e.boxAdapters,t.voltageOutput,Gt.Output,"Output"),"f")}get parameterGain(){return Od(this,xm,"f")}get voltageInput(){return Od(this,Vd,"f")}get voltageOutput(){return Od(this,zd,"f")}get inputs(){return[Od(this,Vd,"f")]}get outputs(){return[Od(this,zd,"f")]}};xm=new WeakMap,Vd=new WeakMap,zd=new WeakMap;var wx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},bx=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},wm,bm,Am,nc=class extends li{constructor(e,t){super(e,t),wm.set(this,void 0),bm.set(this,void 0),Am.set(this,void 0),wx(this,wm,qt.create(e.boxAdapters,t.voltageInputX,Gt.Input,"X"),"f"),wx(this,bm,qt.create(e.boxAdapters,t.voltageInputY,Gt.Input,"Y"),"f"),wx(this,Am,qt.create(e.boxAdapters,t.voltageOutput,Gt.Output,"Result"),"f")}get inputs(){return[bx(this,wm,"f"),bx(this,bm,"f")]}get outputs(){return[bx(this,Am,"f")]}};wm=new WeakMap,bm=new WeakMap,Am=new WeakMap;var lF=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},$1=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ud,oc=class extends li{constructor(e,t){super(e,t),Ud.set(this,void 0),lF(this,Ud,qt.create(e.boxAdapters,t.output,Gt.Output,"Output"),"f")}get voltageOutput(){return $1(this,Ud,"f")}get inputs(){return D.empty()}get outputs(){return[$1(this,Ud,"f")]}};Ud=new WeakMap;var sc;(function(r){r.isVertexOfModule=e=>e.box.accept({visitModuleGainBox:()=>!0,visitModuleDelayBox:()=>!0,visitModuleMultiplierBox:()=>!0,visitModularAudioInputBox:()=>!0,visitModularAudioOutputBox:()=>!0})??!1,r.adapterFor=(e,t)=>q(t.accept({visitModuleGainBox:n=>e.adapterFor(n,ic),visitModuleDelayBox:n=>e.adapterFor(n,tc),visitModuleMultiplierBox:n=>e.adapterFor(n,nc),visitModularAudioInputBox:n=>e.adapterFor(n,oc),visitModularAudioOutputBox:n=>e.adapterFor(n,rc)}),`Could not find ModuleAdapter for ${t.name}`)})(sc||(sc={}));var k1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},_a=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},_m,Pm,Pa,Ax,ac=class{constructor(e,t){_m.add(this),Pm.set(this,void 0),Pa.set(this,void 0),k1(this,Pm,e,"f"),k1(this,Pa,t,"f")}get box(){return _a(this,Pa,"f")}get uuid(){return _a(this,Pa,"f").address.uuid}get address(){return _a(this,Pa,"f").address}get moduleAdapter(){return sc.adapterFor(_a(this,Pm,"f").boxAdapters,_a(this,_m,"a",Ax).box)}get parameterAdapter(){return this.moduleAdapter.parameters.parameterAt(_a(this,_m,"a",Ax).address)}terminate(){}};Pm=new WeakMap,Pa=new WeakMap,_m=new WeakSet,Ax=function(){return _a(this,Pa,"f").parameter.targetVertex.unwrap("Parameter not assigned")};var I1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},wr=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},lc,br,ts=class{constructor(e,t){this.type="audio-effect",this.accepts="audio",lc.set(this,void 0),br.set(this,void 0),I1(this,lc,e,"f"),I1(this,br,t,"f")}get box(){return wr(this,br,"f")}get uuid(){return wr(this,br,"f").address.uuid}get address(){return wr(this,br,"f").address}get indexField(){return wr(this,br,"f").index}get labelField(){return wr(this,br,"f").label}get enabledField(){return wr(this,br,"f").enabled}get minimizedField(){return wr(this,br,"f").minimized}get host(){return wr(this,br,"f").host}parameterAt(e){return N("Not yet implemented")}deviceHost(){return wr(this,lc,"f").boxAdapters.adapterFor(wr(this,br,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}modular(){return wr(this,lc,"f").boxAdapters.adapterFor(wr(this,br,"f").modularSetup.targetVertex.unwrap("No Modular found").box,Xo)}elements(){return wr(this,br,"f").userInterface.elements.pointerHub.filter(u.DeviceUserInterface).map(e=>wr(this,lc,"f").boxAdapters.adapterFor(e.box,ac))}terminate(){}};lc=new WeakMap,br=new WeakMap;var jd=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},je=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},cc,rs,uc,Or,Ea,Sa,Xo=class{constructor(e,t){cc.set(this,new j),rs.set(this,void 0),uc.set(this,void 0),Or.set(this,void 0),Ea.set(this,void 0),Sa.set(this,void 0),jd(this,uc,e,"f"),jd(this,Or,t,"f"),jd(this,rs,je(this,cc,"f").own(new xt),"f"),jd(this,Ea,E.newSet(a=>a.uuid),"f"),jd(this,Sa,E.newSet(a=>a.uuid),"f");let n=a=>{let c=sc.adapterFor(je(this,uc,"f").boxAdapters,a.box);je(this,Ea,"f").add(c)&&je(this,rs,"f").proxy.onModuleAdded(c)},i=a=>je(this,rs,"f").proxy.onModuleRemoved(je(this,Ea,"f").removeByKey(a.address.uuid)),o=a=>{let c=je(this,uc,"f").boxAdapters.adapterFor(a.box,Yo);je(this,Sa,"f").add(c)&&je(this,rs,"f").proxy.onConnectionAdded(c)},s=a=>je(this,rs,"f").proxy.onConnectionRemoved(je(this,Sa,"f").removeByKey(a.address.uuid));je(this,Or,"f").modules.pointerHub.filter(u.ModuleCollection).forEach(n),je(this,Or,"f").connections.pointerHub.filter(u.ConnectionCollection).forEach(o),je(this,cc,"f").own(je(this,Or,"f").modules.pointerHub.subscribe({onAdded:n,onRemoved:i},u.ModuleCollection)),je(this,cc,"f").own(je(this,Or,"f").connections.pointerHub.subscribe({onAdded:o,onRemoved:s},u.ConnectionCollection))}catchupAndSubscribe(e){return Cy(e.onModuleAdded,t=>je(this,Ea,"f").forEach(n=>t(n))),Cy(e.onConnectionAdded,t=>je(this,Sa,"f").forEach(n=>t(n))),je(this,rs,"f").subscribe(e)}get box(){return je(this,Or,"f")}get address(){return je(this,Or,"f").address}get uuid(){return je(this,Or,"f").address.uuid}get editingField(){return je(this,Or,"f").editing}get labelField(){return je(this,Or,"f").label}get modules(){return je(this,Ea,"f").values()}get connections(){return je(this,Sa,"f").values()}get device(){return je(this,uc,"f").boxAdapters.adapterFor(q(je(this,Or,"f").device.pointerHub.incoming().at(0),"No device found").box,ts)}terminate(){console.debug(`terminate ${this}`),je(this,cc,"f").terminate()}};cc=new WeakMap,rs=new WeakMap,uc=new WeakMap,Or=new WeakMap,Ea=new WeakMap,Sa=new WeakMap;var Ld=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ur=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},_x,hc,Kd,Em,dc,Zd,Sm,Wd,Fm,D1,gn=class{constructor(e,t){_x.add(this),this.type="groove-adapter",Kd.set(this,new j),Em.set(this,void 0),dc.set(this,void 0),Zd.set(this,void 0),Sm.set(this,new bp({duration:()=>ur(this,Fm,"f"),fx:n=>Uy(n,ur(this,Wd,"f")),fy:n=>Uy(n,1-ur(this,Wd,"f"))})),Wd.set(this,0),Fm.set(this,Y.SemiQuaver*2),Ld(this,Em,e,"f"),Ld(this,dc,t,"f"),Ld(this,Zd,ur(this,Kd,"f").own(new de(ur(this,Em,"f"))),"f"),this.namedParameter=ur(this,_x,"m",D1).call(this,t),ur(this,Kd,"f").ownAll(this.namedParameter.duration.catchupAndSubscribe(n=>Ld(this,Fm,n.getValue(),"f")),this.namedParameter.amount.catchupAndSubscribe(n=>Ld(this,Wd,E_(n.getValue(),.01),"f")))}unwarp(e){return ur(this,Sm,"f").unwarp(e)}warp(e){return ur(this,Sm,"f").warp(e)}get box(){return ur(this,dc,"f")}get uuid(){return ur(this,dc,"f").address.uuid}get address(){return ur(this,dc,"f").address}terminate(){ur(this,Kd,"f").terminate()}};hc=gn,Kd=new WeakMap,Em=new WeakMap,dc=new WeakMap,Zd=new WeakMap,Sm=new WeakMap,Wd=new WeakMap,Fm=new WeakMap,_x=new WeakSet,D1=function(e){return{duration:ur(this,Zd,"f").createParameter(e.duration,P.values(hc.DurationPPQNs),A.values("",hc.DurationPPQNs,hc.DurationStrings),"duration"),amount:ur(this,Zd,"f").createParameter(e.amount,P.unipolar(),A.percent({fractionDigits:0}),"amount")}};gn.Durations=[[1,8],[1,4],[1,4],[1,2],[1,1],[2,1],[4,1],[8,1],[16,1]];gn.DurationPPQNs=hc.Durations.map(([r,e])=>Y.fromSignature(r,e));gn.DurationStrings=hc.Durations.map(([r,e])=>`${r}/${e}`);var pc=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ut=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},vn,is,fc,Nm,Bm,Gd,qd,Px,ns=class{constructor(e,t,n,i,o){vn.set(this,void 0),is.set(this,void 0),fc.set(this,void 0),Nm.set(this,void 0),Bm.set(this,void 0),Gd.set(this,new j),qd.set(this,void 0),Px.set(this,g.None),pc(this,vn,e,"f"),pc(this,is,t,"f"),pc(this,fc,n,"f"),pc(this,Nm,i,"f"),pc(this,Bm,o??0,"f"),pc(this,qd,ut(this,Gd,"f").own(new ne),"f"),ut(this,Gd,"f").own(ut(this,vn,"f").subscribe(()=>ut(this,qd,"f").notify(this))),e.getValue()!==t.clamp(e.getValue())&&console.warn(`${i} (${e.getValue()}) is out of bounds`,t)}get field(){return ut(this,vn,"f")}get valueMapping(){return ut(this,is,"f")}get stringMapping(){return ut(this,fc,"f")}get name(){return ut(this,Nm,"f")}get anchor(){return ut(this,Bm,"f")}get type(){return ut(this,vn,"f").type}get address(){return ut(this,vn,"f").address}get track(){return ut(this,Px,"f")}subscribe(e){return ut(this,qd,"f").subscribe(e)}catchupAndSubscribe(e){return e(this),this.subscribe(e)}getValue(){return ut(this,vn,"f").getValue()}setValue(e){ut(this,vn,"f").setValue(ut(this,is,"f").clamp(e))}setUnitValue(e){this.setValue(ut(this,is,"f").y(e))}getUnitValue(){return ut(this,is,"f").x(this.getValue())}getPrintValue(){return ut(this,fc,"f").x(this.getValue())}setPrintValue(e){let t=ut(this,fc,"f").y(e);t.type==="unitValue"?this.setUnitValue(X(t.value,0,1)):t.type==="explicit"?this.setValue(this.valueMapping.clamp(t.value)):console.debug(`Unknown text input: '${t.value}'`)}reset(){this.setValue(ut(this,is,"f").clamp(ut(this,vn,"f").initValue))}terminate(){ut(this,Gd,"f").terminate()}};vn=new WeakMap,is=new WeakMap,fc=new WeakMap,Nm=new WeakMap,Bm=new WeakMap,Gd=new WeakMap,qd=new WeakMap,Px=new WeakMap;var mc=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},ci=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},yn,$m,km,Im,Dm,Mm,Tm=class{constructor(e){yn.set(this,void 0),$m.set(this,void 0),km.set(this,void 0),Im.set(this,void 0),Dm.set(this,void 0),Mm.set(this,void 0),mc(this,yn,e,"f"),mc(this,$m,new ns(ci(this,yn,"f").keyboard,P.values([88,76,61,49]),A.numeric({fractionDigits:1}),"Keyboard Type"),"f"),mc(this,km,new ns(ci(this,yn,"f").timeRangeInQuarters,P.exponential(1,64),A.numeric({fractionDigits:1}),"Time-Range"),"f"),mc(this,Im,new ns(ci(this,yn,"f").noteScale,P.exponential(.5,2),A.numeric({fractionDigits:1}),"Note Scale"),"f"),mc(this,Dm,new ns(ci(this,yn,"f").noteLabels,P.bool,A.bool,"Note Labels"),"f"),mc(this,Mm,new ns(ci(this,yn,"f").transpose,P.linearInteger(-48,48),A.numeric({fractionDigits:0}),"Transpose"),"f")}subscribe(e){return ci(this,yn,"f").box.subscribe(Ie.Children,()=>e(this))}get object(){return ci(this,yn,"f")}get keyboard(){return ci(this,$m,"f")}get timeRangeInQuarters(){return ci(this,km,"f")}get noteScale(){return ci(this,Im,"f")}get noteLabels(){return ci(this,Dm,"f")}get transpose(){return ci(this,Mm,"f")}};yn=new WeakMap,$m=new WeakMap,km=new WeakMap,Im=new WeakMap,Dm=new WeakMap,Mm=new WeakMap;var Hd=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Dt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Fa,Vr,gc,Cm,Rm,vc=class{constructor(e,t){Fa.set(this,void 0),Vr.set(this,void 0),gc.set(this,void 0),Cm.set(this,void 0),Rm.set(this,void 0),Hd(this,Fa,e,"f"),Hd(this,Vr,t,"f"),Hd(this,gc,Ut.create(Dt(this,Vr,"f").audioUnits,n=>Dt(this,Fa,"f").boxAdapters.adapterFor(n,ri),u.AudioUnits),"f"),Hd(this,Cm,new om(Dt(this,Vr,"f").audioBusses.pointerHub,n=>Dt(this,Fa,"f").boxAdapters.adapterFor(n,lr),u.AudioBusses),"f"),Hd(this,Rm,new Tm(Dt(this,Vr,"f").pianoMode),"f")}get uuid(){return Dt(this,Vr,"f").address.uuid}get address(){return Dt(this,Vr,"f").address}get box(){return Dt(this,Vr,"f")}get audioBusses(){return Dt(this,Cm,"f")}get audioUnits(){return Dt(this,gc,"f")}get clips(){return Dt(this,gc,"f").adapters().flatMap(e=>e.tracks.collection.adapters()).flatMap(e=>e.clips.collection.adapters())}get groove(){return Dt(this,Fa,"f").boxAdapters.adapterFor(Dt(this,Vr,"f").groove.targetVertex.unwrap("no groove").box,gn)}get timeline(){return Dt(this,Fa,"f").boxAdapters.adapterFor(Dt(this,Vr,"f").timeline.targetVertex.unwrap("no timeline").box,mn)}get pianoMode(){return Dt(this,Rm,"f")}get created(){return new Date(Dt(this,Vr,"f").created.getValue())}get midiOutputDevices(){return Dt(this,Vr,"f").outputMidiDevices.pointerHub.incoming().map(({box:e})=>Be(e,$i))}terminate(){Dt(this,gc,"f").terminate()}};Fa=new WeakMap,Vr=new WeakMap,gc=new WeakMap,Cm=new WeakMap,Rm=new WeakMap;var Ex=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ht=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Sx,Jd,Vi,os,M1,yc=class{constructor(e,t){Sx.add(this),this.type="instrument",this.accepts="audio",Jd.set(this,void 0),Vi.set(this,void 0),os.set(this,void 0),Ex(this,Jd,e,"f"),Ex(this,Vi,t,"f"),Ex(this,os,new de(Ht(this,Jd,"f")),"f"),this.namedParameter=Ht(this,Sx,"m",M1).call(this,t)}get box(){return Ht(this,Vi,"f")}get uuid(){return Ht(this,Vi,"f").address.uuid}get address(){return Ht(this,Vi,"f").address}get labelField(){return Ht(this,Vi,"f").label}get iconField(){return Ht(this,Vi,"f").icon}get defaultTrackType(){return ee.Audio}get enabledField(){return Ht(this,Vi,"f").enabled}get minimizedField(){return Ht(this,Vi,"f").minimized}get acceptsMidiEvents(){return!1}deviceHost(){return Ht(this,Jd,"f").boxAdapters.adapterFor(Ht(this,Vi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){Ht(this,os,"f").terminate()}};Jd=new WeakMap,Vi=new WeakMap,os=new WeakMap,Sx=new WeakSet,M1=function(e){return{flutter:Ht(this,os,"f").createParameter(e.flutter,P.unipolar(),A.percent(),"flutter"),wow:Ht(this,os,"f").createParameter(e.wow,P.unipolar(),A.percent(),"wow"),noise:Ht(this,os,"f").createParameter(e.noise,P.unipolar(),A.percent(),"noise"),saturation:Ht(this,os,"f").createParameter(e.saturation,P.unipolar(),A.percent(),"saturation")}};var xn=(()=>{let t=[1,2,3,4],n=["12","24","36","48"],i=[ze.sine,ze.triangle,ze.saw,ze.square],o=["Sine","Triangle","Saw","Square"];return{MIN_CUTOFF:20,MAX_CUTOFF:2e4,CUTOFF_VALUE_MAPPING:P.exponential(20,2e4),CUTOFF_STRING_MAPPING:A.numeric({unit:"Hz"}),FILTER_ORDER_VALUES:t,FILTER_ORDER_STRINGS:n,FILTER_ORDER_VALUE_MAPPING:P.values(t),FILTER_ORDER_STRING_MAPPING:A.values("db",t,n),LFO_WAVEFORM_VALUES:i,LFO_WAVEFORM_STRINGS:o,LFO_WAVEFORM_VALUE_MAPPING:P.values(i),LFO_WAVEFORM_STRING_MAPPING:A.values("",i,o)}})();var Fx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Fe=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Nx,Qd,zi,Ve,T1,xc=class{constructor(e,t){Nx.add(this),this.type="instrument",this.accepts="midi",Qd.set(this,void 0),zi.set(this,void 0),Ve.set(this,void 0),Fx(this,Qd,e,"f"),Fx(this,zi,t,"f"),Fx(this,Ve,new de(Fe(this,Qd,"f")),"f"),this.namedParameter=Fe(this,Nx,"m",T1).call(this,t)}get box(){return Fe(this,zi,"f")}get uuid(){return Fe(this,zi,"f").address.uuid}get address(){return Fe(this,zi,"f").address}get labelField(){return Fe(this,zi,"f").label}get iconField(){return Fe(this,zi,"f").icon}get defaultTrackType(){return ee.Notes}get enabledField(){return Fe(this,zi,"f").enabled}get minimizedField(){return Fe(this,zi,"f").minimized}get acceptsMidiEvents(){return!0}deviceHost(){return Fe(this,Qd,"f").boxAdapters.adapterFor(Fe(this,zi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){Fe(this,Ve,"f").terminate()}};Qd=new WeakMap,zi=new WeakMap,Ve=new WeakMap,Nx=new WeakSet,T1=function(e){let t=[tn.Monophonic,tn.Polyphonic];return{oscillators:e.oscillators.fields().map(n=>({waveform:Fe(this,Ve,"f").createParameter(n.waveform,P.linearInteger(0,3),A.indices("",["Sine","Triangle","Sawtooth","Square"]),"Waveform"),volume:Fe(this,Ve,"f").createParameter(n.volume,P.DefaultDecibel,A.numeric({unit:"db",fractionDigits:1}),"Volume"),octave:Fe(this,Ve,"f").createParameter(n.octave,P.linearInteger(-3,3),A.numeric({unit:"oct"}),"Octave",.5),tune:Fe(this,Ve,"f").createParameter(n.tune,P.linear(-1200,1200),A.numeric({unit:"ct",fractionDigits:0}),"Tune",.5)})),noise:{volume:Fe(this,Ve,"f").createParameter(e.noise.volume,P.DefaultDecibel,A.numeric({unit:"db",fractionDigits:1}),"Volume"),attack:Fe(this,Ve,"f").createParameter(e.noise.attack,P.exponential(.001,5),A.numeric({unit:"s",fractionDigits:3}),"Attack"),hold:Fe(this,Ve,"f").createParameter(e.noise.hold,P.exponential(.001,5),A.numeric({unit:"s",fractionDigits:3}),"Hold"),release:Fe(this,Ve,"f").createParameter(e.noise.release,P.exponential(.001,5),A.numeric({unit:"s",fractionDigits:3}),"Release")},filterOrder:Fe(this,Ve,"f").createParameter(e.filterOrder,xn.FILTER_ORDER_VALUE_MAPPING,xn.FILTER_ORDER_STRING_MAPPING,"Flt. Order"),cutoff:Fe(this,Ve,"f").createParameter(e.cutoff,xn.CUTOFF_VALUE_MAPPING,xn.CUTOFF_STRING_MAPPING,"Flt. Cutoff"),resonance:Fe(this,Ve,"f").createParameter(e.resonance,P.exponential(.01,10),A.numeric({unit:"q",fractionDigits:3}),"Flt. Q"),attack:Fe(this,Ve,"f").createParameter(e.attack,P.exponential(.001,5),A.numeric({unit:"s",fractionDigits:3}),"Attack"),decay:Fe(this,Ve,"f").createParameter(e.decay,P.exponential(.001,5),A.numeric({unit:"s",fractionDigits:3}),"Decay"),sustain:Fe(this,Ve,"f").createParameter(e.sustain,P.unipolar(),A.percent({fractionDigits:1}),"Sustain"),release:Fe(this,Ve,"f").createParameter(e.release,P.exponential(.001,5),A.numeric({unit:"s",fractionDigits:3}),"Release"),filterEnvelope:Fe(this,Ve,"f").createParameter(e.filterEnvelope,P.bipolar(),A.percent({fractionDigits:1}),"Flt. Env.",.5),filterKeyboard:Fe(this,Ve,"f").createParameter(e.filterKeyboard,P.bipolar(),A.percent({fractionDigits:1}),"Flt. Kbd.",.5),voicingMode:Fe(this,Ve,"f").createParameter(e.voicingMode,P.values(t),A.values("",t,["mono","poly"]),"Play Mode",.5),glideTime:Fe(this,Ve,"f").createParameter(e.glideTime,P.unipolar(),A.percent({fractionDigits:1}),"Glide time",0),unisonCount:Fe(this,Ve,"f").createParameter(e.unisonCount,P.values([1,3,5]),A.values("#",[1,3,5],[1,3,5].map(n=>String(n))),"Unisono",0),unisonDetune:Fe(this,Ve,"f").createParameter(e.unisonDetune,P.exponential(1,1200),A.numeric({unit:"ct",fractionDigits:0}),"Detune",0),unisonStereo:Fe(this,Ve,"f").createParameter(e.unisonStereo,P.unipolar(),A.percent({fractionDigits:0}),"Stereo",0),lfoWaveform:Fe(this,Ve,"f").createParameter(e.lfo.waveform,xn.LFO_WAVEFORM_VALUE_MAPPING,xn.LFO_WAVEFORM_STRING_MAPPING,"LFO Shape",0),lfoRate:Fe(this,Ve,"f").createParameter(e.lfo.rate,P.exponential(1e-4,30),A.numeric({unit:"Hz",fractionDigits:1,unitPrefix:!0}),"Rate",0),lfoTargetTune:Fe(this,Ve,"f").createParameter(e.lfo.targetTune,P.bipolar(),A.percent({fractionDigits:1}),"Vibrato \u29BF",.5),lfoTargetVolume:Fe(this,Ve,"f").createParameter(e.lfo.targetVolume,P.bipolar(),A.percent({fractionDigits:1}),"Tremolo \u29BF",.5),lfoTargetCutoff:Fe(this,Ve,"f").createParameter(e.lfo.targetCutoff,P.bipolar(),A.percent({fractionDigits:1}),"Cutoff \u29BF",.5)}};var Bx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Mt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},$x,Om,Yd,ui,wn,C1,Ui=class{constructor(e,t){$x.add(this),this.type="midi-effect",this.accepts="midi",Yd.set(this,void 0),ui.set(this,void 0),wn.set(this,void 0),Bx(this,Yd,e,"f"),Bx(this,ui,t,"f"),Bx(this,wn,new de(Mt(this,Yd,"f")),"f"),this.namedParameter=Mt(this,$x,"m",C1).call(this,t)}get box(){return Mt(this,ui,"f")}get uuid(){return Mt(this,ui,"f").address.uuid}get address(){return Mt(this,ui,"f").address}get indexField(){return Mt(this,ui,"f").index}get labelField(){return Mt(this,ui,"f").label}get enabledField(){return Mt(this,ui,"f").enabled}get minimizedField(){return Mt(this,ui,"f").minimized}get host(){return Mt(this,ui,"f").host}deviceHost(){return Mt(this,Yd,"f").boxAdapters.adapterFor(Mt(this,ui,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){Mt(this,wn,"f").terminate()}};Om=Ui,Yd=new WeakMap,ui=new WeakMap,wn=new WeakMap,$x=new WeakSet,C1=function(e){return{modeIndex:Mt(this,wn,"f").createParameter(e.modeIndex,P.linearInteger(0,2),A.indices("",["Up","Down","UpDown"]),"mode"),numOctaves:Mt(this,wn,"f").createParameter(e.numOctaves,P.linearInteger(1,5),A.numeric({unit:"",fractionDigits:0}),"Octaves"),rate:Mt(this,wn,"f").createParameter(e.rateIndex,P.linearInteger(0,Om.RateFractions.length-1),Om.RateStringMapping,"Rate"),gate:Mt(this,wn,"f").createParameter(e.gate,P.linear(0,2),A.percent({fractionDigits:0}),"Gate"),repeat:Mt(this,wn,"f").createParameter(e.repeat,P.linearInteger(1,16),A.numeric({fractionDigits:0}),"Repeat"),velocity:Mt(this,wn,"f").createParameter(e.velocity,P.bipolar(),A.percent({fractionDigits:0,bipolar:!1}),"Velocity")}};Ui.RateFractions=ir.builder().add([1,1]).add([1,2]).add([1,3]).add([1,4]).add([3,16]).add([1,6]).add([1,8]).add([3,32]).add([1,12]).add([1,16]).add([3,64]).add([1,24]).add([1,32]).add([1,48]).add([1,64]).add([1,96]).add([1,128]).asDescendingArray();Ui.RateStringMapping=A.indices("",Om.RateFractions.map(([r,e])=>`${r}/${e}`));var kx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Jt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ix,Xd,di,Na,R1,wc=class{constructor(e,t){Ix.add(this),this.type="midi-effect",this.accepts="midi",Xd.set(this,void 0),di.set(this,void 0),Na.set(this,void 0),kx(this,Xd,e,"f"),kx(this,di,t,"f"),kx(this,Na,new de(Jt(this,Xd,"f")),"f"),this.namedParameter=Jt(this,Ix,"m",R1).call(this,t)}get box(){return Jt(this,di,"f")}get uuid(){return Jt(this,di,"f").address.uuid}get address(){return Jt(this,di,"f").address}get indexField(){return Jt(this,di,"f").index}get labelField(){return Jt(this,di,"f").label}get enabledField(){return Jt(this,di,"f").enabled}get minimizedField(){return Jt(this,di,"f").minimized}get host(){return Jt(this,di,"f").host}deviceHost(){return Jt(this,Xd,"f").boxAdapters.adapterFor(Jt(this,di,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){Jt(this,Na,"f").terminate()}};Xd=new WeakMap,di=new WeakMap,Na=new WeakMap,Ix=new WeakSet,R1=function(e){return{octaves:Jt(this,Na,"f").createParameter(e.octaves,P.linearInteger(-7,7),A.numeric({unit:"oct",fractionDigits:0}),"octaves"),semiTones:Jt(this,Na,"f").createParameter(e.semiTones,P.linearInteger(-36,36),A.numeric({unit:"st",fractionDigits:0}),"semi-tones"),cent:Jt(this,Na,"f").createParameter(e.cents,P.linear(-50,50),A.numeric({unit:"cents",fractionDigits:1}),"cents")}};var Dx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ar=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Mx,eh,ji,bc,O1,Ac=class{constructor(e,t){Mx.add(this),this.type="instrument",this.accepts="midi",eh.set(this,void 0),ji.set(this,void 0),bc.set(this,void 0),Dx(this,eh,e,"f"),Dx(this,ji,t,"f"),Dx(this,bc,new de(Ar(this,eh,"f")),"f"),this.namedParameter=Ar(this,Mx,"m",O1).call(this,t)}get box(){return Ar(this,ji,"f")}get uuid(){return Ar(this,ji,"f").address.uuid}get address(){return Ar(this,ji,"f").address}get labelField(){return Ar(this,ji,"f").label}get iconField(){return Ar(this,ji,"f").icon}get defaultTrackType(){return ee.Notes}get enabledField(){return Ar(this,ji,"f").enabled}get minimizedField(){return Ar(this,ji,"f").minimized}get acceptsMidiEvents(){return!0}deviceHost(){return Ar(this,eh,"f").boxAdapters.adapterFor(Ar(this,ji,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){Ar(this,bc,"f").terminate()}};eh=new WeakMap,ji=new WeakMap,bc=new WeakMap,Mx=new WeakSet,O1=function(e){return{volume:Ar(this,bc,"f").createParameter(e.volume,P.DefaultDecibel,A.numeric({unit:"db",fractionDigits:1}),"volume"),release:Ar(this,bc,"f").createParameter(e.release,P.exponential(.001,8),A.numeric({unit:"s",fractionDigits:3}),"release")}};var _c=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},J=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Tx,Ba,ss,ve,Vm,zm,zr,Pc,V1,Ec=class{constructor(e,t){Tx.add(this),this.class="device-host",this.accepts=!1,this.type="instrument",Ba.set(this,new j),ss.set(this,void 0),ve.set(this,void 0),Vm.set(this,void 0),zm.set(this,void 0),zr.set(this,void 0),Pc.set(this,g.None),_c(this,ss,e,"f"),_c(this,ve,t,"f"),_c(this,Vm,J(this,Ba,"f").own(Ut.create(J(this,ve,"f").midiEffects,n=>J(this,ss,"f").boxAdapters.adapterFor(n,te.isMidiEffect),u.MidiEffectHost)),"f"),_c(this,zm,J(this,Ba,"f").own(Ut.create(J(this,ve,"f").audioEffects,n=>J(this,ss,"f").boxAdapters.adapterFor(n,te.isAudioEffect),u.AudioEffectHost)),"f"),_c(this,zr,J(this,Ba,"f").own(new de(J(this,ss,"f"))),"f"),this.namedParameter=J(this,Tx,"m",V1).call(this,t),J(this,Ba,"f").own(J(this,ve,"f").file.catchupAndSubscribe(n=>{_c(this,Pc,n.targetVertex.map(({box:i})=>J(this,ss,"f").boxAdapters.adapterFor(i,on)),"f"),J(this,Pc,"f").unwrapOrNull()?.getOrCreateLoader()}))}get box(){return J(this,ve,"f")}get uuid(){return J(this,ve,"f").address.uuid}get address(){return J(this,ve,"f").address}get peakAddress(){return J(this,ve,"f").address.append(1001)}get indexField(){return J(this,ve,"f").index}get gate(){return J(this,ve,"f").gate.getValue()}get exclude(){return J(this,ve,"f").exclude.getValue()}get label(){return`${this.device().labelField.getValue()} > ${J(this,Pc,"f").mapOr(e=>e.box.fileName.getValue(),"No file")}`}get iconField(){return J(this,ve,"f").icon}get defaultTrackType(){return ee.Notes}get acceptsMidiEvents(){return!0}get midiEffectsField(){return J(this,ve,"f").midiEffects}get inputField(){return this.audioUnitBoxAdapter().box.input}get audioEffectsField(){return J(this,ve,"f").audioEffects}get tracksField(){return this.audioUnitBoxAdapter().box.tracks}get isAudioUnit(){return!1}file(){return J(this,Pc,"f")}fileUUID(){return J(this,ve,"f").file.targetAddress.unwrap().uuid}resetParameters(){J(this,ve,"f").mute.reset(),J(this,ve,"f").solo.reset(),J(this,ve,"f").exclude.reset(),J(this,ve,"f").polyphone.reset(),J(this,ve,"f").pitch.reset(),J(this,ve,"f").attack.reset(),J(this,ve,"f").release.reset(),J(this,ve,"f").sampleStart.reset(),J(this,ve,"f").sampleEnd.reset(),J(this,ve,"f").gate.reset()}copyToIndex(e){No.create(J(this,ve,"f").graph,E.generate(),t=>{t.file.refer(J(this,ve,"f").file.targetVertex.unwrap()),t.device.refer(J(this,ve,"f").device.targetVertex.unwrap()),t.index.setValue(e),t.mute.setValue(J(this,ve,"f").mute.getValue()),t.solo.setValue(J(this,ve,"f").solo.getValue()),t.sampleStart.setValue(J(this,ve,"f").sampleStart.getValue()),t.sampleEnd.setValue(J(this,ve,"f").sampleEnd.getValue()),t.attack.setValue(J(this,ve,"f").attack.getValue()),t.release.setValue(J(this,ve,"f").release.getValue()),t.pitch.setValue(J(this,ve,"f").pitch.getValue()),t.exclude.setValue(J(this,ve,"f").exclude.getValue()),t.gate.setValue(J(this,ve,"f").gate.getValue())})}get midiEffects(){return J(this,Vm,"f")}get inputAdapter(){return g.wrap(this)}get audioEffects(){return J(this,zm,"f")}get labelField(){return J(this,ve,"f").label}get enabledField(){return J(this,ve,"f").enabled}get minimizedField(){return J(this,ve,"f").minimized}device(){return J(this,ss,"f").boxAdapters.adapterFor(J(this,ve,"f").device.targetVertex.unwrap().box,as)}deviceHost(){return this.device().deviceHost()}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){J(this,Ba,"f").terminate()}};Ba=new WeakMap,ss=new WeakMap,ve=new WeakMap,Vm=new WeakMap,zm=new WeakMap,zr=new WeakMap,Pc=new WeakMap,Tx=new WeakSet,V1=function(e){return{gate:J(this,zr,"f").createParameter(e.gate,P.linearInteger(0,2),A.indices("",["Off","On","Loop"]),"Gate"),mute:J(this,zr,"f").createParameter(e.mute,P.bool,A.bool,"Mute"),solo:J(this,zr,"f").createParameter(e.solo,P.bool,A.bool,"Solo"),polyphone:J(this,zr,"f").createParameter(e.polyphone,P.bool,A.bool,"Polyphone"),exclude:J(this,zr,"f").createParameter(e.exclude,P.bool,A.bool,"Exclude"),pitch:J(this,zr,"f").createParameter(e.pitch,P.linear(-1200,1200),A.numeric({unit:"cents",bipolar:!0,fractionDigits:0}),"Pitch",0),sampleStart:J(this,zr,"f").createParameter(e.sampleStart,P.unipolar(),A.percent(),"Start",0),sampleEnd:J(this,zr,"f").createParameter(e.sampleEnd,P.unipolar(),A.percent(),"End",1),attack:J(this,zr,"f").createParameter(e.attack,P.exponential(.001,5),A.numeric({unit:"s",unitPrefix:!0,fractionDigits:1}),"Attack"),release:J(this,zr,"f").createParameter(e.release,P.exponential(.001,5),A.numeric({unit:"s",unitPrefix:!0,fractionDigits:1}),"Release")}};var Um=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},_r=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Sc,Li,th,jm,as=class{constructor(e,t){this.type="instrument",this.accepts="midi",Sc.set(this,void 0),Li.set(this,void 0),th.set(this,void 0),jm.set(this,void 0),Um(this,Sc,e,"f"),Um(this,Li,t,"f"),Um(this,th,Ut.create(t.samples,n=>e.boxAdapters.adapterFor(n,Ec),u.Sample),"f"),Um(this,jm,new de(_r(this,Sc,"f")),"f")}reset(){_r(this,th,"f").adapters().forEach(e=>e.box.delete())}get box(){return _r(this,Li,"f")}get uuid(){return _r(this,Li,"f").address.uuid}get address(){return _r(this,Li,"f").address}get labelField(){return _r(this,Li,"f").label}get iconField(){return _r(this,Li,"f").icon}get defaultTrackType(){return ee.Notes}get enabledField(){return _r(this,Li,"f").enabled}get minimizedField(){return _r(this,Li,"f").minimized}get acceptsMidiEvents(){return!0}get samples(){return _r(this,th,"f")}get context(){return _r(this,Sc,"f")}deviceHost(){return _r(this,Sc,"f").boxAdapters.adapterFor(_r(this,Li,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){_r(this,jm,"f").terminate()}};Sc=new WeakMap,Li=new WeakMap,th=new WeakMap,jm=new WeakMap;var Cx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Tt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Rx,rh,hi,bn,z1,Fc=class{constructor(e,t){Rx.add(this),this.type="audio-effect",this.accepts="audio",rh.set(this,void 0),hi.set(this,void 0),bn.set(this,void 0),Cx(this,rh,e,"f"),Cx(this,hi,t,"f"),Cx(this,bn,new de(Tt(this,rh,"f")),"f"),this.namedParameter=Tt(this,Rx,"m",z1).call(this,t)}get box(){return Tt(this,hi,"f")}get uuid(){return Tt(this,hi,"f").address.uuid}get address(){return Tt(this,hi,"f").address}get indexField(){return Tt(this,hi,"f").index}get labelField(){return Tt(this,hi,"f").label}get enabledField(){return Tt(this,hi,"f").enabled}get minimizedField(){return Tt(this,hi,"f").minimized}get host(){return Tt(this,hi,"f").host}deviceHost(){return Tt(this,rh,"f").boxAdapters.adapterFor(Tt(this,hi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){Tt(this,bn,"f").terminate()}};rh=new WeakMap,hi=new WeakMap,bn=new WeakMap,Rx=new WeakSet,z1=function(e){return{volume:Tt(this,bn,"f").createParameter(e.volume,P.decibel(-72,0,12),A.numeric({unit:"db",fractionDigits:1}),"Volume"),panning:Tt(this,bn,"f").createParameter(e.panning,P.bipolar(),A.panning,"Panning",.5),stereo:Tt(this,bn,"f").createParameter(e.stereo,P.bipolar(),A.numeric({unit:"%",fractionDigits:0}),"stereo",.5),invertL:Tt(this,bn,"f").createParameter(e.invertL,P.bool,A.bool,"Invert Left"),invertR:Tt(this,bn,"f").createParameter(e.invertR,P.bool,A.bool,"Invert Right"),swap:Tt(this,bn,"f").createParameter(e.swap,P.bool,A.bool,"Swap")}};var $a;(function(r){r.checkType=e=>e!==null&&typeof e=="object"&&"type"in e&&e.type==="groove-adapter"})($a||($a={}));var U1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Pr=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Nc,Er,Bc=class{constructor(e,t){this.type="midi-effect",this.accepts="midi",Nc.set(this,void 0),Er.set(this,void 0),U1(this,Nc,e,"f"),U1(this,Er,t,"f"),this.groove()}get box(){return Pr(this,Er,"f")}get uuid(){return Pr(this,Er,"f").address.uuid}get address(){return Pr(this,Er,"f").address}get indexField(){return Pr(this,Er,"f").index}get labelField(){return Pr(this,Er,"f").label}get enabledField(){return Pr(this,Er,"f").enabled}get minimizedField(){return Pr(this,Er,"f").minimized}get host(){return Pr(this,Er,"f").host}deviceHost(){return Pr(this,Nc,"f").boxAdapters.adapterFor(Pr(this,Er,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}groove(){return Pr(this,Nc,"f").boxAdapters.adapterFor(Pr(this,Er,"f").groove.targetVertex.unwrap("no groove").box,$a.checkType)}catchupAndSubscribeGroove(e){return Pr(this,Er,"f").groove.catchupAndSubscribe(t=>e(Pr(this,Nc,"f").boxAdapters.adapterFor(t.targetVertex.unwrap("No groove found").box,$a.checkType)))}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){}};Nc=new WeakMap,Er=new WeakMap;var j1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ki=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Lm,Ur,$c=class{constructor(e,t){this.type="audio-effect",this.accepts="audio",Lm.set(this,void 0),Ur.set(this,void 0),j1(this,Lm,e,"f"),j1(this,Ur,t,"f")}get box(){return Ki(this,Ur,"f")}get uuid(){return Ki(this,Ur,"f").address.uuid}get address(){return Ki(this,Ur,"f").address}get indexField(){return Ki(this,Ur,"f").index}get labelField(){return Ki(this,Ur,"f").label}get enabledField(){return Ki(this,Ur,"f").enabled}get minimizedField(){return Ki(this,Ur,"f").minimized}get host(){return Ki(this,Ur,"f").host}get commentField(){return Ki(this,Ur,"f").comment}deviceHost(){return Ki(this,Lm,"f").boxAdapters.adapterFor(Ki(this,Ur,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){}};Lm=new WeakMap,Ur=new WeakMap;var L1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Wi=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Km,jr,kc=class{constructor(e,t){this.type="midi-effect",this.accepts="midi",Km.set(this,void 0),jr.set(this,void 0),L1(this,Km,e,"f"),L1(this,jr,t,"f")}get box(){return Wi(this,jr,"f")}get uuid(){return Wi(this,jr,"f").address.uuid}get address(){return Wi(this,jr,"f").address}get indexField(){return Wi(this,jr,"f").index}get labelField(){return Wi(this,jr,"f").label}get enabledField(){return Wi(this,jr,"f").enabled}get minimizedField(){return Wi(this,jr,"f").minimized}get host(){return Wi(this,jr,"f").host}get commentField(){return Wi(this,jr,"f").comment}deviceHost(){return Wi(this,Km,"f").boxAdapters.adapterFor(Wi(this,jr,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){}};Km=new WeakMap,jr=new WeakMap;var ls=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ne=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Ox,Vx,ih,Sr,Wm,Ic,Zi,pi,Dc,K1,zx,Mc=class{constructor(e,t){Ox.add(this),this.type="instrument",this.accepts="midi",Vx.set(this,new j),ih.set(this,void 0),Sr.set(this,void 0),Wm.set(this,void 0),Ic.set(this,void 0),Zi.set(this,void 0),pi.set(this,void 0),Dc.set(this,W.Empty),zx.set(this,n=>n.match({none:()=>{Ne(this,pi,"f").clear(),Ne(this,Zi,"f").clear()},some:i=>i.soundfont.match({none:()=>{Ne(this,pi,"f").clear(),Ne(this,Zi,"f").clear(),Ne(this,Dc,"f").terminate(),ls(this,Dc,i.subscribe(o=>{if(o.type==="loaded"){let s=i.soundfont.unwrap();Ne(this,pi,"f").wrap(s.presets[this.presetIndex]??s.presets[0]),Ne(this,Zi,"f").wrap(s)}else o.type==="error"?(Ne(this,pi,"f").clear(),Ne(this,Zi,"f").clear()):o.type==="idle"&&(Ne(this,pi,"f").clear(),Ne(this,Zi,"f").clear())}),"f")},some:o=>{Ne(this,Zi,"f").wrap(o),Ne(this,pi,"f").wrap(o.presets[this.presetIndex]??o.presets[0])}})})),ls(this,ih,e,"f"),ls(this,Sr,t,"f"),ls(this,Wm,new de(Ne(this,ih,"f")),"f"),this.namedParameter=Ne(this,Ox,"m",K1).call(this,t),ls(this,Ic,new ho,"f"),ls(this,Zi,new ho,"f"),ls(this,pi,new ho,"f"),Ne(this,Vx,"f").ownAll(Ne(this,Ic,"f").subscribe(Ne(this,zx,"f")),Ne(this,Sr,"f").file.catchupAndSubscribe(({targetVertex:n})=>Ne(this,Ic,"f").wrapOption(n.map(({box:i})=>e.soundfontManager.getOrCreate(i.address.uuid)))),Ne(this,Sr,"f").presetIndex.catchupAndSubscribe(n=>Ne(this,Zi,"f").match({none:()=>Ne(this,pi,"f").clear(),some:i=>Ne(this,pi,"f").wrap(i.presets[n.getValue()]??i.presets[0])})))}get loader(){return Ne(this,Ic,"f")}get soundfont(){return Ne(this,Zi,"f")}get preset(){return Ne(this,pi,"f")}get presetIndex(){return Ne(this,Sr,"f").presetIndex.getValue()}get box(){return Ne(this,Sr,"f")}get uuid(){return Ne(this,Sr,"f").address.uuid}get address(){return Ne(this,Sr,"f").address}get labelField(){return Ne(this,Sr,"f").label}get iconField(){return Ne(this,Sr,"f").icon}get defaultTrackType(){return ee.Notes}get enabledField(){return Ne(this,Sr,"f").enabled}get minimizedField(){return Ne(this,Sr,"f").minimized}get acceptsMidiEvents(){return!0}deviceHost(){return Ne(this,ih,"f").boxAdapters.adapterFor(Ne(this,Sr,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){Ne(this,Dc,"f").terminate(),ls(this,Dc,W.Empty,"f"),Ne(this,Wm,"f").terminate()}};Vx=new WeakMap,ih=new WeakMap,Sr=new WeakMap,Wm=new WeakMap,Ic=new WeakMap,Zi=new WeakMap,pi=new WeakMap,Dc=new WeakMap,zx=new WeakMap,Ox=new WeakSet,K1=function(e){return{}};var W1=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},nh=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Zm,ka,Gm=class{constructor(e,t){Zm.set(this,void 0),ka.set(this,void 0),W1(this,Zm,e,"f"),W1(this,ka,t,"f")}get box(){return nh(this,ka,"f")}get uuid(){return nh(this,ka,"f").address.uuid}get address(){return nh(this,ka,"f").address}get soundfont(){return this.getOrCreateLoader().soundfont}getOrCreateLoader(){return nh(this,Zm,"f").soundfontManager.getOrCreate(nh(this,ka,"f").address.uuid)}terminate(){}};Zm=new WeakMap,ka=new WeakMap;var Ux=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},it=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},jx,oh,fi,Qt,Z1,Tc=class{constructor(e,t){jx.add(this),this.type="audio-effect",this.accepts="audio",oh.set(this,void 0),fi.set(this,void 0),Qt.set(this,void 0),Ux(this,oh,e,"f"),Ux(this,fi,t,"f"),Ux(this,Qt,new de(it(this,oh,"f")),"f"),this.namedParameter=it(this,jx,"m",Z1).call(this,t)}get box(){return it(this,fi,"f")}get uuid(){return it(this,fi,"f").address.uuid}get address(){return it(this,fi,"f").address}get indexField(){return it(this,fi,"f").index}get labelField(){return it(this,fi,"f").label}get enabledField(){return it(this,fi,"f").enabled}get minimizedField(){return it(this,fi,"f").minimized}get host(){return it(this,fi,"f").host}deviceHost(){return it(this,oh,"f").boxAdapters.adapterFor(it(this,fi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){it(this,Qt,"f").terminate()}};oh=new WeakMap,fi=new WeakMap,Qt=new WeakMap,jx=new WeakSet,Z1=function(e){return{lookahead:it(this,Qt,"f").createParameter(e.lookahead,P.bool,A.bool,"Lookahead"),automakeup:it(this,Qt,"f").createParameter(e.automakeup,P.bool,A.bool,"Auto Makeup"),autoattack:it(this,Qt,"f").createParameter(e.autoattack,P.bool,A.bool,"Auto Attack"),autorelease:it(this,Qt,"f").createParameter(e.autorelease,P.bool,A.bool,"Auto Release"),inputgain:it(this,Qt,"f").createParameter(e.inputgain,P.linear(-30,30),A.decible,"Input Gain"),threshold:it(this,Qt,"f").createParameter(e.threshold,P.linear(-60,0),A.decible,"Threshold"),ratio:it(this,Qt,"f").createParameter(e.ratio,P.exponential(1,24),A.numeric({fractionDigits:1}),"Ratio"),knee:it(this,Qt,"f").createParameter(e.knee,P.linear(0,24),A.decible,"Knee"),attack:it(this,Qt,"f").createParameter(e.attack,P.linear(0,100),A.numeric({unit:"ms",fractionDigits:1}),"Attack Time"),release:it(this,Qt,"f").createParameter(e.release,P.linear(5,1500),A.numeric({unit:"ms",fractionDigits:1}),"Release Time"),makeup:it(this,Qt,"f").createParameter(e.makeup,P.linear(-40,40),A.decible,"Makeup Gain"),mix:it(this,Qt,"f").createParameter(e.mix,P.unipolar(),A.percent(),"Dry/Wet")}};var Lx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Kt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Kx,sh,mi,cs,G1,Cc=class{constructor(e,t){Kx.add(this),this.type="audio-effect",this.accepts="audio",sh.set(this,void 0),mi.set(this,void 0),cs.set(this,void 0),Lx(this,sh,e,"f"),Lx(this,mi,t,"f"),Lx(this,cs,new de(Kt(this,sh,"f")),"f"),this.namedParameter=Kt(this,Kx,"m",G1).call(this,t)}get box(){return Kt(this,mi,"f")}get uuid(){return Kt(this,mi,"f").address.uuid}get address(){return Kt(this,mi,"f").address}get indexField(){return Kt(this,mi,"f").index}get labelField(){return Kt(this,mi,"f").label}get enabledField(){return Kt(this,mi,"f").enabled}get minimizedField(){return Kt(this,mi,"f").minimized}get host(){return Kt(this,mi,"f").host}deviceHost(){return Kt(this,sh,"f").boxAdapters.adapterFor(Kt(this,mi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){Kt(this,cs,"f").terminate()}};sh=new WeakMap,mi=new WeakMap,cs=new WeakMap,Kx=new WeakSet,G1=function(e){return{crush:Kt(this,cs,"f").createParameter(e.crush,P.unipolar(),A.percent(),"Crush"),bits:Kt(this,cs,"f").createParameter(e.bits,P.linearInteger(1,16),A.numeric(),"Bits"),boost:Kt(this,cs,"f").createParameter(e.boost,P.linear(0,24),A.decible,"Boost"),mix:Kt(this,cs,"f").createParameter(e.mix,P.exponential(.001,1),A.percent(),"Mix")}};var Wx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},dr=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Zx,ah,gi,Rc,q1,Oc=class{constructor(e,t){Zx.add(this),this.type="audio-effect",this.accepts="audio",ah.set(this,void 0),gi.set(this,void 0),Rc.set(this,void 0),Wx(this,ah,e,"f"),Wx(this,gi,t,"f"),Wx(this,Rc,new de(dr(this,ah,"f")),"f"),this.namedParameter=dr(this,Zx,"m",q1).call(this,t)}get box(){return dr(this,gi,"f")}get uuid(){return dr(this,gi,"f").address.uuid}get address(){return dr(this,gi,"f").address}get indexField(){return dr(this,gi,"f").index}get labelField(){return dr(this,gi,"f").label}get enabledField(){return dr(this,gi,"f").enabled}get minimizedField(){return dr(this,gi,"f").minimized}get host(){return dr(this,gi,"f").host}deviceHost(){return dr(this,ah,"f").boxAdapters.adapterFor(dr(this,gi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){dr(this,Rc,"f").terminate()}};ah=new WeakMap,gi=new WeakMap,Rc=new WeakMap,Zx=new WeakSet,q1=function(e){return{drive:dr(this,Rc,"f").createParameter(e.drive,P.linear(0,30),A.decible,"Drive"),volume:dr(this,Rc,"f").createParameter(e.volume,P.linear(-18,0),A.decible,"Volume")}};var qm=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Et=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},lh,ch,vi,Vc,zc,Uc=class{constructor(e,t){lh.set(this,new j),this.type="instrument",this.accepts="midi",ch.set(this,void 0),vi.set(this,void 0),Vc.set(this,void 0),zc.set(this,void 0),qm(this,ch,e,"f"),qm(this,vi,t,"f"),qm(this,Vc,new ho,"f"),qm(this,zc,Et(this,lh,"f").own(new de(Et(this,ch,"f"))),"f"),Et(this,lh,"f").ownAll(t.parameters.pointerHub.catchupAndSubscribe({onAdded:(({box:n})=>Et(this,zc,"f").createParameter(Be(n,ki).value,P.unipolar(),A.percent({fractionDigits:1}),"",0)),onRemoved:(({box:n})=>Et(this,zc,"f").removeParameter(Be(n,ki).value.address))}),Et(this,vi,"f").device.catchupAndSubscribe(({targetVertex:n})=>n.match({none:()=>Et(this,Vc,"f").clear(),some:({box:i})=>Et(this,Vc,"f").wrap(Be(i,$i))})))}get box(){return Et(this,vi,"f")}get uuid(){return Et(this,vi,"f").address.uuid}get address(){return Et(this,vi,"f").address}get labelField(){return Et(this,vi,"f").label}get iconField(){return Et(this,vi,"f").icon}get defaultTrackType(){return ee.Notes}get enabledField(){return Et(this,vi,"f").enabled}get minimizedField(){return Et(this,vi,"f").minimized}get acceptsMidiEvents(){return!0}get parameters(){return Et(this,zc,"f")}get midiDevice(){return Et(this,Vc,"f")}deviceHost(){return Et(this,ch,"f").boxAdapters.adapterFor(Et(this,vi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){Et(this,lh,"f").terminate()}};lh=new WeakMap,ch=new WeakMap,vi=new WeakMap,Vc=new WeakMap,zc=new WeakMap;var Hm=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},vt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Gx,uh,yi,An,dh,H1,jc=class{constructor(e,t){Gx.add(this),this.type="midi-effect",this.accepts="midi",uh.set(this,void 0),yi.set(this,void 0),An.set(this,void 0),dh.set(this,void 0),Hm(this,uh,e,"f"),Hm(this,yi,t,"f"),Hm(this,An,new de(vt(this,uh,"f")),"f"),Hm(this,dh,Ja.create(),"f"),this.namedParameter=vt(this,Gx,"m",H1).call(this,t)}computeVelocity(e,t){let{magnetPosition:n,magnetStrength:i,randomSeed:o,randomAmount:s,offset:a,mix:c}=this.namedParameter;vt(this,dh,"f").setSeed(o.valueAt(e)+e);let l=t+(n.valueAt(e)-t)*i.valueAt(e),d=(vt(this,dh,"f").uniform()*2-1)*s.valueAt(e),h=a.valueAt(e),f=c.valueAt(e);return t*(1-f)+Wr(l+d+h)*f}get box(){return vt(this,yi,"f")}get uuid(){return vt(this,yi,"f").address.uuid}get address(){return vt(this,yi,"f").address}get indexField(){return vt(this,yi,"f").index}get labelField(){return vt(this,yi,"f").label}get enabledField(){return vt(this,yi,"f").enabled}get minimizedField(){return vt(this,yi,"f").minimized}get host(){return vt(this,yi,"f").host}deviceHost(){return vt(this,uh,"f").boxAdapters.adapterFor(vt(this,yi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){vt(this,An,"f").terminate()}};uh=new WeakMap,yi=new WeakMap,An=new WeakMap,dh=new WeakMap,Gx=new WeakSet,H1=function(e){return{magnetPosition:vt(this,An,"f").createParameter(e.magnetPosition,P.unipolar(),A.percent(),"Position"),magnetStrength:vt(this,An,"f").createParameter(e.magnetStrength,P.unipolar(),A.percent(),"Strength"),randomSeed:vt(this,An,"f").createParameter(e.randomSeed,P.linearInteger(0,65535),A.numeric({unit:"",fractionDigits:0}),"Seed"),randomAmount:vt(this,An,"f").createParameter(e.randomAmount,P.unipolar(),A.percent(),"Amount"),offset:vt(this,An,"f").createParameter(e.offset,P.bipolar(),A.percent(),"Offset"),mix:vt(this,An,"f").createParameter(e.mix,P.unipolar(),A.percent(),"Mix")}};var qx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Ct=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Hx,Jx,hh,xi,_n,J1,Gi=class{constructor(e,t){Hx.add(this),this.type="audio-effect",this.accepts="audio",hh.set(this,void 0),xi.set(this,void 0),_n.set(this,void 0),qx(this,hh,e,"f"),qx(this,xi,t,"f"),qx(this,_n,new de(Ct(this,hh,"f")),"f"),this.namedParameter=Ct(this,Hx,"m",J1).call(this,t)}get box(){return Ct(this,xi,"f")}get uuid(){return Ct(this,xi,"f").address.uuid}get address(){return Ct(this,xi,"f").address}get indexField(){return Ct(this,xi,"f").index}get labelField(){return Ct(this,xi,"f").label}get enabledField(){return Ct(this,xi,"f").enabled}get minimizedField(){return Ct(this,xi,"f").minimized}get host(){return Ct(this,xi,"f").host}deviceHost(){return Ct(this,hh,"f").boxAdapters.adapterFor(Ct(this,xi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){Ct(this,_n,"f").terminate()}};Jx=Gi,hh=new WeakMap,xi=new WeakMap,_n=new WeakMap,Hx=new WeakSet,J1=function(e){let{RateFractions:t,RateStringMapping:n}=Jx;return{slope:Ct(this,_n,"f").createParameter(e.slope,P.bipolar(),A.percent({fractionDigits:1}),"Slope",.5),symmetry:Ct(this,_n,"f").createParameter(e.symmetry,P.unipolar(),A.percent({fractionDigits:1,bipolar:!0}),"Symmetry",.5),rate:Ct(this,_n,"f").createParameter(e.rate,P.values(t.map((i,o)=>o)),n,"Rate",0),depth:Ct(this,_n,"f").createParameter(e.depth,P.unipolar(),A.percent({fractionDigits:1}),"Depth",0),offset:Ct(this,_n,"f").createParameter(e.offset,P.linear(-180,180),A.numeric({unit:"\xB0",fractionDigits:0}),"Offset",.5),channelOffset:Ct(this,_n,"f").createParameter(e.channelOffset,P.linear(-180,180),A.numeric({unit:"\xB0",fractionDigits:0}),"Ch. Offset",.5)}};Gi.RateFractions=ir.builder().add([1,1]).add([1,2]).add([1,3]).add([1,4]).add([3,16]).add([1,6]).add([1,8]).add([3,32]).add([1,12]).add([1,16]).add([3,64]).add([1,24]).add([1,32]).add([1,48]).add([1,64]).add([1,96]).add([1,128]).asDescendingArray();Gi.RateStringMapping=A.indices("",Jx.RateFractions.map(([r,e])=>`${r}/${e}`));var Qx=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},nt=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Yx,ph,wi,Yt,Q1,Lc=class{constructor(e,t){Yx.add(this),this.type="audio-effect",this.accepts="audio",ph.set(this,void 0),wi.set(this,void 0),Yt.set(this,void 0),Qx(this,ph,e,"f"),Qx(this,wi,t,"f"),Qx(this,Yt,new de(nt(this,ph,"f")),"f"),this.namedParameter=nt(this,Yx,"m",Q1).call(this,t)}get box(){return nt(this,wi,"f")}get uuid(){return nt(this,wi,"f").address.uuid}get address(){return nt(this,wi,"f").address}get indexField(){return nt(this,wi,"f").index}get labelField(){return nt(this,wi,"f").label}get enabledField(){return nt(this,wi,"f").enabled}get minimizedField(){return nt(this,wi,"f").minimized}get host(){return nt(this,wi,"f").host}deviceHost(){return nt(this,ph,"f").boxAdapters.adapterFor(nt(this,wi,"f").host.targetVertex.unwrap("no device-host").box,te.isHost)}audioUnitBoxAdapter(){return this.deviceHost().audioUnitBoxAdapter()}terminate(){nt(this,Yt,"f").terminate()}};ph=new WeakMap,wi=new WeakMap,Yt=new WeakMap,Yx=new WeakSet,Q1=function(e){return{preDelay:nt(this,Yt,"f").createParameter(e.preDelay,P.linear(0,1e3),A.numeric({unit:e.preDelay.unit}),"Pre-Delay"),bandwidth:nt(this,Yt,"f").createParameter(e.bandwidth,P.unipolar(),A.percent(),"Bandwidth"),inputDiffusion1:nt(this,Yt,"f").createParameter(e.inputDiffusion1,P.unipolar(),A.percent(),"Tank 1"),inputDiffusion2:nt(this,Yt,"f").createParameter(e.inputDiffusion2,P.unipolar(),A.percent(),"Tank 2"),decay:nt(this,Yt,"f").createParameter(e.decay,P.unipolar(),A.percent(),"Decay"),decayDiffusion1:nt(this,Yt,"f").createParameter(e.decayDiffusion1,P.unipolar(),A.percent(),"Tank 1"),decayDiffusion2:nt(this,Yt,"f").createParameter(e.decayDiffusion2,P.unipolar(),A.percent(),"Tank 2"),damping:nt(this,Yt,"f").createParameter(e.damping,P.unipolar(),A.percent(),"Damping"),excursionRate:nt(this,Yt,"f").createParameter(e.excursionRate,P.unipolar(),A.numeric({unit:e.excursionRate.unit}),"Rate"),excursionDepth:nt(this,Yt,"f").createParameter(e.excursionDepth,P.unipolar(),A.numeric({unit:e.excursionDepth.unit}),"Depth"),wet:nt(this,Yt,"f").createParameter(e.wet,P.DefaultDecibel,A.decible,"Wet"),dry:nt(this,Yt,"f").createParameter(e.dry,P.DefaultDecibel,A.decible,"Dry")}};var Jm=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},Q=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Xx,ie,to,fh,Qm,Y1,Ym=class{constructor(e){Xx.add(this),ie.set(this,void 0),to.set(this,void 0),fh.set(this,void 0),Qm.set(this,void 0),Jm(this,ie,e,"f"),Jm(this,to,E.newSet(t=>t.uuid),"f"),Jm(this,fh,new Set,"f"),Jm(this,Qm,Q(this,ie,"f").boxGraph.subscribeToAllUpdates({onUpdate:t=>{if(t.type==="delete"){let n=Q(this,to,"f").getOrNull(t.uuid);R(n)&&(Q(this,fh,"f").add(n.box),Q(this,to,"f").removeByValue(n).terminate())}}}),"f")}terminate(){Q(this,to,"f").values().forEach(e=>e.terminate()),Q(this,to,"f").clear(),Q(this,Qm,"f").terminate()}adapterFor(e,t){if(Q(this,fh,"f").has(e))return N(`Cannot resolve adapter for already deleted box: ${e}`);let n=Q(this,to,"f").getOrNull(e.address.uuid);if(n===null){n=Q(this,Xx,"m",Y1).call(this,e);let i=Q(this,to,"f").add(n);B(i,`Could not add adapter for ${e}`)}return typeof t=="function"?Object.hasOwn(t,"prototype")?n instanceof t?n:N(`${n} is not instance of ${t}`):t(n)?n:N(`${n} did not pass custom type guard`):N("Unknown checkType method")}};ie=new WeakMap,to=new WeakMap,fh=new WeakMap,Qm=new WeakMap,Xx=new WeakSet,Y1=function(e){return q(e.accept({visitArpeggioDeviceBox:t=>new Ui(Q(this,ie,"f"),t),visitAudioBusBox:t=>new lr(Q(this,ie,"f"),t),visitAudioClipBox:t=>new To(Q(this,ie,"f"),t),visitAudioFileBox:t=>new on(Q(this,ie,"f"),t),visitAudioRegionBox:t=>new jo(Q(this,ie,"f"),t),visitAudioUnitBox:t=>new ri(Q(this,ie,"f"),t),visitAuxSendBox:t=>new Zl(Q(this,ie,"f"),t),visitCompressorDeviceBox:t=>new Tc(Q(this,ie,"f"),t),visitCrusherDeviceBox:t=>new Cc(Q(this,ie,"f"),t),visitDattorroReverbDeviceBox:t=>new Lc(Q(this,ie,"f"),t),visitDelayDeviceBox:t=>new ni(Q(this,ie,"f"),t),visitDeviceInterfaceKnobBox:t=>new ac(Q(this,ie,"f"),t),visitTidalDeviceBox:t=>new Gi(Q(this,ie,"f"),t),visitFoldDeviceBox:t=>new Oc(Q(this,ie,"f"),t),visitGrooveShuffleBox:t=>new gn(Q(this,ie,"f"),t),visitMarkerBox:t=>new Jo(Q(this,ie,"f"),t),visitMIDIOutputDeviceBox:t=>new Uc(Q(this,ie,"f"),t),visitModularAudioInputBox:t=>new oc(Q(this,ie,"f"),t),visitModularAudioOutputBox:t=>new rc(Q(this,ie,"f"),t),visitModularBox:t=>new Xo(Q(this,ie,"f"),t),visitModularDeviceBox:t=>new ts(Q(this,ie,"f"),t),visitModuleConnectionBox:t=>new Yo(Q(this,ie,"f"),t),visitModuleDelayBox:t=>new tc(Q(this,ie,"f"),t),visitModuleGainBox:t=>new ic(Q(this,ie,"f"),t),visitModuleMultiplierBox:t=>new nc(Q(this,ie,"f"),t),visitNanoDeviceBox:t=>new Ac(Q(this,ie,"f"),t),visitNoteClipBox:t=>new Il(Q(this,ie,"f"),t),visitNoteEventBox:t=>new Qs(Q(this,ie,"f"),t),visitNoteEventCollectionBox:t=>new Jr(Q(this,ie,"f"),t),visitNoteRegionBox:t=>new Lo(Q(this,ie,"f"),t),visitPitchDeviceBox:t=>new wc(Q(this,ie,"f"),t),visitPlayfieldDeviceBox:t=>new as(Q(this,ie,"f"),t),visitPlayfieldSampleBox:t=>new Ec(Q(this,ie,"f"),t),visitRevampDeviceBox:t=>new Xl(Q(this,ie,"f"),t),visitReverbDeviceBox:t=>new Yl(Q(this,ie,"f"),t),visitRootBox:t=>new vc(Q(this,ie,"f"),t),visitSoundfontDeviceBox:t=>new Mc(Q(this,ie,"f"),t),visitSoundfontFileBox:t=>new Gm(Q(this,ie,"f"),t),visitStereoToolDeviceBox:t=>new Fc(Q(this,ie,"f"),t),visitTapeDeviceBox:t=>new yc(Q(this,ie,"f"),t),visitTimelineBox:t=>new mn(Q(this,ie,"f"),t),visitTrackBox:t=>new pt(Q(this,ie,"f"),t),visitUnknownAudioEffectDeviceBox:t=>new $c(Q(this,ie,"f"),t),visitUnknownMidiEffectDeviceBox:t=>new kc(Q(this,ie,"f"),t),visitValueClipBox:t=>new Mo(Q(this,ie,"f"),t),visitValueEventBox:t=>new Vn(Q(this,ie,"f"),t),visitValueEventCollectionBox:t=>new ar(Q(this,ie,"f"),t),visitValueRegionBox:t=>new qn(Q(this,ie,"f"),t),visitVaporisateurDeviceBox:t=>new xc(Q(this,ie,"f"),t),visitVelocityDeviceBox:t=>new jc(Q(this,ie,"f"),t),visitZeitgeistDeviceBox:t=>new Bc(Q(this,ie,"f"),t)}),`Could not find factory for ${e}`)};var X1;(function(r){r.countStems=e=>e.match({none:()=>1,some:t=>Object.keys(t).length}),r.sanitizeFileName=e=>e.replace(/[<>:"/\\|?*\x00-\x1F]/g,"_").trim(),r.sanitizeExportNamesInPlace=e=>{let t=new Map,n=i=>{let o=t.get(i)??0,s=i;for(;t.has(s);)o++,s=`${i} ${o}`;return t.set(i,o),t.set(s,1),s};Object.keys(e).forEach(i=>{let o=e[i];o.fileName=n(r.sanitizeFileName(o.fileName))})}})(X1||(X1={}));var eP=gr.createBuilder({position:gr.float,playbackTimestamp:gr.float,countInBeatsRemaining:gr.float,isPlaying:gr.bool,isCountingIn:gr.bool,isRecording:gr.bool});var ew=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},us=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Xm,eg,tg,Ia,bi=class{constructor(e,t){Xm.set(this,new j),eg.set(this,void 0),tg.set(this,void 0),Ia.set(this,void 0),ew(this,eg,e,"f"),ew(this,tg,t,"f"),ew(this,Ia,new st(128),"f"),us(this,Xm,"f").own(us(this,eg,"f").broadcastIntegers(us(this,tg,"f"),new Int32Array(us(this,Ia,"f").buffer),mr))}noteOn(e){e>=0&&e<128&&us(this,Ia,"f").setBit(e,!0)}noteOff(e){e>=0&&e<128&&us(this,Ia,"f").setBit(e,!1)}reset(){}clear(){us(this,Ia,"f").clear()}terminate(){us(this,Xm,"f").terminate()}toString(){return`{${this.constructor.name}}`}};Xm=new WeakMap,eg=new WeakMap,tg=new WeakMap,Ia=new WeakMap;var ro;(function(r){r[r.MTHD=1297377380]="MTHD",r[r.MTRK=1297379947]="MTRK"})(ro||(ro={}));var Wt;(function(r){r[r.NOTE_ON=144]="NOTE_ON",r[r.NOTE_OFF=128]="NOTE_OFF",r[r.NOTE_AFTER_TOUCH=160]="NOTE_AFTER_TOUCH",r[r.CONTROLLER=176]="CONTROLLER",r[r.PROGRAM_CHANGE=192]="PROGRAM_CHANGE",r[r.CHANNEL_AFTER_TOUCH=208]="CHANNEL_AFTER_TOUCH",r[r.PITCH_BEND=224]="PITCH_BEND"})(Wt||(Wt={}));var rg=class r{ticks;type;param0;param1;static Comparator=(e,t)=>e.ticks-t.ticks;constructor(e,t,n,i){this.ticks=e,this.type=t,this.param0=n,this.param1=i}static decode(e,t,n){switch(t){case Wt.NOTE_ON:case Wt.NOTE_OFF:case Wt.CONTROLLER:case Wt.PITCH_BEND:case Wt.NOTE_AFTER_TOUCH:return new r(n,t,e.readByte(),e.readByte());case Wt.PROGRAM_CHANGE:case Wt.CHANNEL_AFTER_TOUCH:return new r(n,t,e.readByte(),0)}{let i;do i=e.readByte()&255;while(i<128);e.skip(-1)}return null}accept(e){switch(this.type){case Wt.NOTE_ON:{this.param1===0?_(e.noteOff,this.param0):_(e.noteOn,this.param0,this.param1/127);break}case Wt.NOTE_OFF:{_(e.noteOff,this.param0);break}case Wt.PITCH_BEND:{let t=this.param0&127,n=this.param1&127,i=t|n<<7;_(e.pitchBend,8192>=i?i/8192-1:(i-8191)/8192);break}case Wt.CONTROLLER:{_(e.controller,this.param0,this.param1/127);break}default:break}}toString(){return`ControlEvent{ticks: ${this.ticks}, type: ${this.type}, param0: ${this.param0}, param1: ${this.param1}}`}};var St;(function(r){r[r.SEQUENCE_NUMBER=0]="SEQUENCE_NUMBER",r[r.TEXT_EVENT=1]="TEXT_EVENT",r[r.COPYRIGHT_NOTICE=2]="COPYRIGHT_NOTICE",r[r.SEQUENCE_TRACK_NAME=3]="SEQUENCE_TRACK_NAME",r[r.INSTRUMENT_NAME=4]="INSTRUMENT_NAME",r[r.LYRICS=5]="LYRICS",r[r.MARKER=6]="MARKER",r[r.CUE_POINT=7]="CUE_POINT",r[r.CHANNEL_PREFIX=32]="CHANNEL_PREFIX",r[r.SET_TEMPO=81]="SET_TEMPO",r[r.SMPTE_OFFSET=84]="SMPTE_OFFSET",r[r.TIME_SIGNATURE=88]="TIME_SIGNATURE",r[r.KEY_SIGNATURE=89]="KEY_SIGNATURE",r[r.SEQUENCER_SPECIFIC=127]="SEQUENCER_SPECIFIC",r[r.PREFIX_PORT=33]="PREFIX_PORT",r[r.END_OF_TRACK=47]="END_OF_TRACK"})(St||(St={}));var ig=class r{ticks;type;value;constructor(e,t,n){this.ticks=e,this.type=t,this.value=n}static decode(e,t){let n=e.readByte()&255,i=e.readVarLen();switch(n){case St.SET_TEMPO:return new r(t,n,e.readTempo());case St.TIME_SIGNATURE:return new r(t,n,e.readSignature());case St.END_OF_TRACK:return new r(t,n,null);case St.TEXT_EVENT:case St.COPYRIGHT_NOTICE:case St.SEQUENCE_TRACK_NAME:case St.INSTRUMENT_NAME:case St.LYRICS:case St.MARKER:case St.CUE_POINT:case St.SEQUENCE_NUMBER:case St.CHANNEL_PREFIX:case St.KEY_SIGNATURE:case St.SEQUENCER_SPECIFIC:case St.PREFIX_PORT:case St.SMPTE_OFFSET:default:e.skip(i)}return null}toString(){return`MetaEvent{ticks: ${this.ticks}, type: ${this.type}, value: ${this.value}}`}};var ot;(function(r){let e;(function(t){t[t.NoteOn=144]="NoteOn",t[t.NoteOff=128]="NoteOff",t[t.PitchBend=224]="PitchBend",t[t.Controller=176]="Controller",t[t.Start=250]="Start",t[t.Continue=251]="Continue",t[t.Stop=252]="Stop",t[t.Clock=248]="Clock",t[t.Position=242]="Position"})(e=r.Command||(r.Command={})),r.readCommand=t=>t[0]&240,r.readChannel=t=>t[0]&15,r.readParam1=t=>t.length>1?t[1]&255:0,r.readParam2=t=>t.length>2?t[2]&255:0,r.readPitch=t=>t[1],r.readVelocity=t=>t[2]/127,r.isNoteOn=t=>r.readCommand(t)===e.NoteOn&&r.readVelocity(t)>0,r.isNoteOff=t=>r.readCommand(t)===e.NoteOff||r.readCommand(t)===e.NoteOn&&r.readVelocity(t)===0,r.isPitchWheel=t=>r.readCommand(t)===e.PitchBend,r.isController=t=>r.readCommand(t)===e.Controller,r.isClock=t=>t[0]===e.Clock,r.isStart=t=>t[0]===e.Start,r.isContinue=t=>t[0]===e.Continue,r.isStop=t=>t[0]===e.Stop,r.isPosition=t=>t[0]===e.Position,r.asPitchBend=t=>{let n=r.readParam1(t)&127,i=r.readParam2(t)&127,o=n|i<<7;return 8192>=o?o/8192-1:(o-8191)/8192},r.asValue=t=>{let n=r.readParam2(t);return n>64?.5+(n-63)/128:n<64?n/128:.5},r.Clock=new Uint8Array([e.Clock]),r.Start=new Uint8Array([e.Start]),r.Continue=new Uint8Array([e.Continue]),r.Stop=new Uint8Array([e.Stop]),r.noteOn=(t,n,i)=>new Uint8Array([e.NoteOn|t,n,i]),r.noteOff=(t,n)=>new Uint8Array([e.NoteOff|t,n,0]),r.control=(t,n,i)=>new Uint8Array([e.Controller|t,n&127,i&127]),r.position=(t,n)=>new Uint8Array([e.Position,t&127,n&127]),r.positionInPPQN=t=>{let n=Math.floor(t/96),i=n&127,o=n>>7&127;return new Uint8Array([e.Position,i,o])},r.accept=(t,n)=>{Fs(t)||(r.isNoteOn(t)?_(n.noteOn,r.readPitch(t),r.readVelocity(t)):r.isNoteOff(t)?_(n.noteOff,r.readPitch(t)):r.isPitchWheel(t)?_(n.pitchBend,r.asPitchBend(t)):r.isController(t)?_(n.controller,r.readParam1(t),r.readParam2(t)/127):r.isClock(t)?_(n.clock):r.isStart(t)?_(n.start):r.isContinue(t)?_(n.continue):r.isStop(t)?_(n.stop):r.isPosition(t)&&_(n.songPos,r.readParam1(t)|r.readParam2(t)<<7))},r.debug=t=>t===null?"null":r.isNoteOn(t)?`NoteOn #${r.readChannel(t)} ${r.readPitch(t)} : ${r.readVelocity(t).toFixed(2)}`:r.isNoteOff(t)?`NoteOff #${r.readChannel(t)} ${r.readPitch(t)}`:r.isPitchWheel(t)?`PitchWheel #${r.readChannel(t)} ${r.asPitchBend(t)}`:r.isController(t)?`Control #${r.readChannel(t)} ${r.asValue(t)}`:r.isClock(t)?"Clock":r.isStart(t)?"Start":r.isContinue(t)?"Continue":r.isStop(t)?"Stop":r.isPosition(t)?`SongPosition ${r.readParam1(t)|r.readParam2(t)<<7}`:"Unknown"})(ot||(ot={}));var ng=class{tracks;formatType;timeDivision;constructor(e,t,n){this.tracks=e,this.formatType=t,this.timeDivision=n}};var og=class r{controlEvents;metaEvents;static decode(e){let t=new Is,n=[],i=0,o=0,s=0;for(;;){let a=e.readVarLen(),c=e.readByte()&255;if(c<240){i+=a,c<128?e.skip(-1):(o=c&240,s=c&15);let l=rg.decode(e,o,i);R(l)&&t.add(s,l)}else if(c<248)e.skipSysEx(c);else{i+=a;let l=ig.decode(e,i);if(l!==null&&(n.push(l),l.type===St.END_OF_TRACK))break}}return new r(t,n)}static createEmpty(){return new r(new Is,[])}constructor(e,t){this.controlEvents=e,this.metaEvents=t}encode(){let e=Ze.create(),t=n=>{if(n<=127)e.writeByte(n);else{let i=n,o=[];for(o.push(i&127),i>>=7;i;){let s=i&127|128;o.push(s),i>>=7}o.reverse().forEach(s=>e.writeByte(s))}};return this.controlEvents.forEach((n,i)=>{let o=0,s=-1;i.forEach(a=>{let c=a.ticks-o;if(t(c),a.type===Wt.NOTE_ON){let l=144|n;l!==s&&e.writeByte(l),e.writeByte(a.param0),e.writeByte(a.param1)}else if(a.type===Wt.NOTE_OFF){let l=144|n;l!==s&&e.writeByte(l),e.writeByte(a.param0),e.writeByte(a.param1)}else console.warn("Unknown ControlType");o=a.ticks})}),e.toArrayBuffer()}};var sg=class{input;#e=!1;#t=!1;constructor(e){this.input=e}decode(){this.input.littleEndian=!1;let e=this.input.readInt();if(e===ro.MTHD){if(this.input.readInt()!==6)throw new Error("2nd int in header must be 6")}else throw console.warn(`Unsupported midi format ${e} !== ${ro.MTHD}`),new Error("Unsupported midi format");let t=this.input.readShort(),n=this.input.readShort(),i=this.input.readShort(),o=[];for(let s=0;s<n;s++){let a=this.input.readInt(),c=this.input.readInt(),l=this.input.position;a===ro.MTRK&&(o[s]=og.decode(this)),this.input.position=l+c}return 0<this.input.remaining()&&console.warn(`${this.input.remaining()} bytes remaining.`),new ng(o,t,i)}readVarLen(){let e=this.input.readByte()&255,t;if(0<(e&128)){e&=127;do t=this.input.readByte()&255,e=(e<<7)+(t&127);while(0<(t&128))}return e}readSignature(){let e=this.input.readByte()&255,t=this.input.readByte()&255,n=this.input.readByte()&255,i=this.input.readByte()&255;return this.#e,[e,1<<t]}readTempo(){let e=this.input.readByte()&255,t=this.input.readByte()&255,n=this.input.readByte()&255;return 6e7/(e<<16|t<<8|n)}skipSysEx(e){if(e===240){if(this.#t)throw new Error("System message already in progress");this.input.skip(this.readVarLen()-1),this.#t=!0}else e===247&&(this.#t?this.#t=!1:(this.input.skip(this.readVarLen()-1),this.#t=!0))}skip(e){this.input.skip(e)}readByte(){return this.input.readByte()}};var tP;(function(r){r.decoder=t=>new sg(new Ge(t)),r.encoder=()=>new e;class e{static writeVarLen(n,i){let o=[];for(;i>127;)o.push(i&127|128),i>>=7;o.push(i&127);for(let s=o.length-1;s>=0;s--)n.writeByte(o[s])}#e=[];addTrack(n){return this.#e.push(n),this}encode(){let n=Ze.create();return n.littleEndian=!1,n.writeInt(ro.MTHD),n.writeInt(6),n.writeShort(0),n.writeShort(this.#e.length),n.writeShort(96),this.#e.forEach(i=>{n.writeInt(ro.MTRK);let o=i.encode();n.writeInt(o.byteLength),n.writeBytes(new Int8Array(o))}),n}}})(tP||(tP={}));var ag=Symbol.for("@openDAW/lib-midi");globalThis[ag]?console.debug(`%c${ag.description}%c is already available in ${globalThis.constructor.name}.`,"color: hsl(10, 83%, 60%)","color: inherit"):(globalThis[ag]=!0,console.debug(`%c${ag.description}%c is now available in ${globalThis.constructor.name}.`,"color: hsl(200, 83%, 60%)","color: inherit"));var ds;(function(r){r.on=(e,t,n)=>({type:"note-on",uuid:e,pitch:t,velocity:n}),r.off=(e,t)=>({type:"note-off",uuid:e,pitch:t}),r.isOn=e=>e.type==="note-on",r.isOff=e=>e.type==="note-off",r.fromEvent=(e,t)=>{let n=e.data;if(ot.isNoteOn(n)){let i=ot.readPitch(n),o=ot.readVelocity(n);return{type:"note-on",uuid:t,pitch:i,velocity:o}}else if(ot.isNoteOff(n)){let i=ot.readPitch(n);return{type:"note-off",uuid:t,pitch:i}}return N("Unknown MIDI event")}})(ds||(ds={}));var rP;(function(r){r.start=(e,t,n,i=1)=>{let o=!0;return e(ds.on(t,n,i)),{terminate:()=>{o&&(e(ds.off(t,n)),o=!1)}}}})(rP||(rP={}));var cF,uF,dF,hF,pF;cF=new WeakMap,uF=new WeakMap,dF=new WeakMap,hF=new WeakMap,pF=new WeakMap;var fF=function(r,e,t,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?r!==e||!i:!e.has(r))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(r,t):i?i.value=t:e.set(r,t),t},lg=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Da,cg=class{constructor(){Da.set(this,void 0),fF(this,Da,fe.newSet(e=>e.field.address),"f")}register(e){return lg(this,Da,"f").add(e),{terminate:()=>lg(this,Da,"f").removeByValue(e)}}get(e){return lg(this,Da,"f").get(e)}opt(e){return lg(this,Da,"f").opt(e)}};Da=new WeakMap;var hs={isClipBox:r=>r.accept({visitNoteClipBox:e=>!0,visitAudioClipBox:e=>!0,visitValueClipBox:e=>!0})??!1,isRegionBox:r=>r.accept({visitNoteRegionBox:e=>!0,visitAudioRegionBox:e=>!0,visitValueRegionBox:e=>!0})??!1,asRegionBox:r=>r.accept({visitNoteRegionBox:e=>e,visitAudioRegionBox:e=>e,visitValueRegionBox:e=>e})??N("Could not cast to AnyRegionBox"),isLoopableRegionBox:r=>r.accept({visitNoteRegionBox:e=>!0,visitAudioRegionBox:e=>!0,visitValueRegionBox:e=>!0})??!1};var ug;(function(r){r.isTimeSignatureValid=(e,t)=>!Number.isInteger(e)||e<1||e>31?Bn.err("Numerator needs to be a interger between 1 and 31"):!Number.isInteger(t)||t<1||t>32||(t&t-1)!==0?Bn.err("Denominator must be a power of two between 1 and 32"):Bn.ok([e,t]),r.MIN_BPM=30,r.MAX_BPM=1e3,r.clampBpm=e=>Number.isFinite(e)?X(e,r.MIN_BPM,r.MAX_BPM):120,r.hasOverlappingRegions=e=>e.boxes().some(t=>t.accept({visitTrackBox:n=>{for(let[i,o]of D.iterateAdjacent(n.regions.pointerHub.incoming().map(({box:s})=>hs.asRegionBox(s)).sort(({position:s},{position:a})=>s.getValue()-a.getValue()))){if(i instanceof Eo&&i.timeBase.getValue()===Vt.Seconds)return!1;if(i.position.getValue()+i.duration.getValue()>o.position.getValue())return!0}return!1}})??!1)})(ug||(ug={}));var iP;(function(r){r.parseTimeSignature=e=>{let[t,n]=e.split("/"),i=parseInt(t,10),o=parseInt(n,10);return ug.isTimeSignatureValid(i,o)}})(iP||(iP={}));var dg;(function(r){r.reader=({sab:e,numChunks:t,numberOfChannels:n,bufferSize:i},o)=>{let s=!0,a=new Int32Array(e,0,2),c=new Float32Array(e,8),l=new Float32Array(n*i),d=typeof document>"u",h=()=>{if(!s)return;let f=Atomics.load(a,1),v=Atomics.load(a,0);if(f===v){if(d)Atomics.wait(a,0,v);else{setTimeout(h,1);return}v=Atomics.load(a,0)}for(;f!==v;){let m=f*n*i;l.set(c.subarray(m,m+n*i));let y=[];for(let x=0;x<n;x++){let S=x*i,C=S+i;y.push(l.slice(S,C))}if(f=(f+1)%t,Atomics.store(a,1,f),!s)return;o(y)}h()};return h(),{stop:()=>s=!1}},r.writer=({sab:e,numChunks:t,numberOfChannels:n,bufferSize:i})=>{let o=new Int32Array(e,0,2),s=new Float32Array(e,8);return Object.freeze({write:a=>{if(a.length!==n)return;for(let d of a)if(d.length!==i)return N("Each channel buffer must contain 'bufferSize' samples");let c=Atomics.load(o,0),l=c*n*i;a.forEach((d,h)=>s.set(d,l+h*i)),Atomics.store(o,0,(c+1)%t),Atomics.notify(o,0)}})}})(dg||(dg={}));var tw={isRegion:r=>hs.isRegionBox(r.box),isLoopableRegion:r=>hs.isLoopableRegionBox(r.box)};var Pn;(function(r){r[r.Off=0]="Off",r[r.On=1]="On",r[r.Loop=2]="Loop"})(Pn||(Pn={}));var mF,gF,vF,yF;mF=new WeakMap,gF=new WeakMap,vF=new WeakMap,yF=new WeakMap;var xF,wF,bF,AF;xF=new WeakMap,wF=new WeakMap,bF=new WeakMap,AF=new WeakMap;var Kc={[bt.Instrument]:0,[bt.Aux]:1,[bt.Bus]:2,[bt.Output]:3};var hg;(function(r){r.create=({boxGraph:e,mandatoryBoxes:{rootBox:t,primaryAudioBus:n}},i,o,s)=>{let a=s??r.orderAndGetIndex(t,i);return console.debug(`createAudioUnit type: ${i}, insertIndex: ${a}`),tt.create(e,E.generate(),c=>{c.collection.refer(t.audioUnits),c.output.refer(n.input),c.index.setValue(a),c.type.setValue(i),o.ifSome(l=>c.capture.refer(l))})},r.orderAndGetIndex=(e,t)=>{let n=al.collectIndexedBoxes(e.audioUnits,tt),i=Kc[t],o=0;for(;o<n.length&&!(Kc[n[o].type.getValue()]>i);o++);let s=o;for(;o<n.length;)n[o].index.setValue(++o);return s},r.trackTypeToCapture=(e,t)=>{switch(t){case ee.Audio:return g.wrap(So.create(e,E.generate()));case ee.Notes:return g.wrap(Fo.create(e,E.generate()));default:return g.None}}})(hg||(hg={}));var nP;(function(r){r.create=(e,t,n,i,o)=>{console.debug(`createAudioBus '${t}', type: ${i}, color: ${o}`);let{boxGraph:s,mandatoryBoxes:{rootBox:a}}=e;B(a.isAttached(),"rootBox not attached");let c=E.generate(),l=Bi.create(s,c,h=>{h.collection.refer(a.audioBusses),h.label.setValue(t),h.icon.setValue(De.toName(n)),h.color.setValue(o.toString())}),d=hg.create(e,i,g.None);return sr.create(s,E.generate(),h=>{h.tracks.refer(d.tracks),h.target.refer(d),h.index.setValue(0),h.type.setValue(ee.Undefined)}),l.output.refer(d.input),l}})(nP||(nP={}));var oP;(function(r){r.forAudioType=e=>{switch(e){case bt.Output:return ll.blue;case bt.Aux:return ll.purple;case bt.Bus:return ll.orange;case bt.Instrument:return ll.green;default:return ll.dark}},r.forTrackType=e=>{switch(e){case ee.Audio:return 200;case ee.Notes:return 45;case ee.Value:return 156;default:return 0}}})(oP||(oP={}));var sP;(function(r){r.Tape={defaultName:"Tape",defaultIcon:De.Tape,description:"Plays audio regions & clips",trackType:ee.Audio,create:(n,i,o,s,a)=>bl.create(n,E.generate(),c=>{c.label.setValue(o),c.icon.setValue(De.toName(s)),c.flutter.setValue(.2),c.wow.setValue(.05),c.noise.setValue(.02),c.saturation.setValue(.5),c.host.refer(i)})},r.Nano={defaultName:"Nano",defaultIcon:De.NanoWave,description:"Simple sampler",trackType:ee.Notes,create:(n,i,o,s,a)=>{let c;if(R(a))c=a;else{let l=E.parse("c1678daa-4a47-4cba-b88f-4f4e384663c3"),d=5.34;c=n.findBox(l).unwrapOrElse(()=>Dr.create(n,l,h=>{h.fileName.setValue("Rhode"),h.endInSeconds.setValue(d)}))}return xl.create(n,E.generate(),l=>{l.label.setValue(o),l.icon.setValue(De.toName(s)),l.file.refer(c),l.host.refer(i)})}},r.Playfield={defaultName:"Playfield",defaultIcon:De.Playfield,description:"Drum computer",trackType:ee.Notes,create:(n,i,o,s,a)=>{let c=wl.create(n,E.generate(),l=>{l.label.setValue(o),l.icon.setValue(De.toName(s)),l.host.refer(i)});return R(a)&&a.filter(({note:l,uuid:d,name:h,durationInSeconds:f,exclude:v})=>{let m=e(n,d,h,f);No.create(n,E.generate(),y=>{y.device.refer(c.samples),y.file.refer(m),y.index.setValue(l),y.exclude.setValue(v)})}),c}},r.Vaporisateur={defaultName:"Vaporisateur",defaultIcon:De.Piano,description:"Classic subtractive synthesizer",trackType:ee.Notes,create:(n,i,o,s,a)=>gl.create(n,E.generate(),c=>{c.label.setValue(o),c.icon.setValue(De.toName(s)),c.tune.setInitValue(0),c.cutoff.setInitValue(8e3),c.resonance.setInitValue(.1),c.attack.setInitValue(.005),c.decay.setInitValue(.1),c.sustain.setInitValue(.5),c.release.setInitValue(.5),c.voicingMode.setInitValue(tn.Polyphonic),c.lfo.rate.setInitValue(1),c.oscillators.fields()[0].waveform.setInitValue(ze.saw),c.oscillators.fields()[0].volume.setInitValue(-6),c.oscillators.fields()[1].volume.setInitValue(Number.NEGATIVE_INFINITY),c.oscillators.fields()[1].waveform.setInitValue(ze.square),c.host.refer(i),c.version.setValue(2)})},r.MIDIOutput={defaultName:"MIDIOutput",defaultIcon:De.Midi,description:"MIDI Output",trackType:ee.Notes,create:(n,i,o,s,a)=>vl.create(n,E.generate(),c=>{c.label.setValue(o),c.icon.setValue(De.toName(s)),c.host.refer(i)})},r.Soundfont={defaultName:"Soundfont",defaultIcon:De.SoundFont,description:"Soundfont Player",trackType:ee.Notes,create:(n,i,o,s,a)=>{a??(a={uuid:"d9f51577-2096-4671-9067-27ca2e12b329",name:"Upright Piano KW"});let c=a.uuid,l=E.parse(c),d=t(n,l,a.name);return yl.create(n,E.generate(),h=>{h.label.setValue(o),h.icon.setValue(De.toName(s)),h.host.refer(i),h.file.refer(d)})}},r.Named={Vaporisateur:r.Vaporisateur,Playfield:r.Playfield,Nano:r.Nano,Tape:r.Tape,Soundfont:r.Soundfont,MIDIOutput:r.MIDIOutput};let e=(n,i,o,s)=>n.findBox(i).unwrapOrElse(()=>Dr.create(n,i,a=>{a.fileName.setValue(o),a.endInSeconds.setValue(s)})),t=(n,i,o)=>n.findBox(i).unwrapOrElse(()=>Gr.create(n,i,s=>s.fileName.setValue(o)))})(sP||(sP={}));var ps;(function(r){r.empty=n=>{let i=new Rs(g.wrap(Os.create)),o=new Date().toISOString();console.debug(`New Project created on ${o}`),i.beginTransaction();let s=fl.create(i,E.generate(),f=>{f.label.setValue("Groove Shuffle")}),a=cl.create(i,E.generate(),f=>{f.groove.refer(s),f.created.setValue(o)}),c=Bi.create(i,E.generate(),f=>{f.collection.refer(a.audioBusses),f.label.setValue("Output"),f.icon.setValue(De.toName(De.SpeakerHeadphone)),f.color.setValue("hsl(189, 100%, 65%)")}),l=tt.create(i,E.generate(),f=>{f.type.setValue(bt.Output),f.collection.refer(a.audioUnits),f.output.refer(a.outputDevice),f.index.setValue(0)});n.createOutputCompressor&&ml.create(i,E.generate(),f=>{f.label.setValue("Compressor"),f.index.setValue(0),f.host.refer(l.audioEffects),f.threshold.setValue(0),f.ratio.setValue(24)});let d=zs.create(i,E.generate());a.timeline.refer(d.root),c.output.refer(l.input);let h=[];if(n.createDefaultUser){let f=Vs.create(i,E.generate());f.root.refer(a.users),h.push(f)}return i.endTransaction(),{boxGraph:i,mandatoryBoxes:{rootBox:a,primaryAudioBus:c,primaryAudioOutputUnit:l,timelineBox:d,userInterfaceBoxes:h}}},r.encode=n=>{let i=Ze.create();i.writeInt(1330660686),i.writeInt(2);let o=n.toArrayBuffer();return i.writeInt(o.byteLength),i.writeBytes(new Int8Array(o)),i.toArrayBuffer()},r.decode=n=>{let i=new Ge(n);B(i.readInt()===1330660686,"Corrupt header. Probably not an openDAW project file."),B(i.readInt()===2,"Deprecated Format");let o=i.readInt(),s=new Int8Array(o);i.readBytes(s);let a=new Rs(g.wrap(Os.create));return a.fromArrayBuffer(s.buffer),{boxGraph:a,mandatoryBoxes:r.findMandatoryBoxes(a)}},r.findMandatoryBoxes=n=>{let i=n.boxes().find(o=>o.accept({visitRootBox:()=>!0}));if(R(i)){let o=Be(i.outputDevice.pointerHub.incoming().at(0)?.box,tt),s=Be(o.input.pointerHub.incoming().at(0)?.box,Bi),a=Be(i.timeline.targetVertex.unwrap("TimelineBox not found").box,zs),c=i.users.pointerHub.incoming().map(({box:l})=>Be(l,Vs));return{rootBox:i,primaryAudioBus:s,primaryAudioOutputUnit:o,timelineBox:a,userInterfaceBoxes:c}}return N("Could not find mandatory boxes")}})(ps||(ps={}));var Wc;(function(r){let e=({graph:a},{graph:c})=>a===c,t=(a,c)=>a.index.getValue()-c.index.getValue(),n=a=>a.accept({visitTrackBox:c=>!0})===!0;r.extractAudioUnits=(a,{boxGraph:c,mandatoryBoxes:{primaryAudioBus:l,rootBox:d}},h={})=>{B(D.satisfy(a,e),"AudioUnits must share the same BoxGraph"),B(!h.includeAux&&!h.includeBus,"Options are not yet implemented");let f=h?.excludeTimeline===!0?n:po.alwaysFalse,v=a.flatMap(y=>Array.from(y.graph.dependenciesOf(y,{alwaysFollowMandatory:!0,excludeBox:f}).boxes)).filter(y=>y.name!==rn.ClassName&&y.name!==Ls.ClassName),m=i(a,v,d.audioUnits.address.uuid,l.address.uuid);return o(m,c,a,v),s(m,a,d),console.debug("inTransaction",c.inTransaction()),a.map(y=>Be(d.graph.findBox(m.get(y.address.uuid).target).unwrap("Target Track has not been copied"),tt))},r.extractRegions=(a,{boxGraph:c,mandatoryBoxes:{primaryAudioBus:l,rootBox:d}},h=0)=>{B(D.satisfy(a,e),"Region smust be from the same BoxGraph");let f=new Set(a),v=new Set,m=new Ha;a.forEach(G=>{let ye=Be(G.regions.targetVertex.unwrap().box,sr);v.add(ye);let ke=Be(ye.tracks.targetVertex.unwrap().box,tt);m.add(ke,ye)}),console.debug(`Found ${m.keyCount()} audioUnits`),console.debug(`Found ${v.size} tracks`);let y=[...m.keys()],x=G=>Ke(G,sr)&&!v.has(G)||hs.isRegionBox(G)&&!f.has(G),S=y.flatMap(G=>Array.from(G.graph.dependenciesOf(G,{excludeBox:x,alwaysFollowMandatory:!0}).boxes)).filter(G=>G.name!==rn.ClassName&&G.name!==Ls.ClassName),C=i(y,S,d.audioUnits.address.uuid,l.address.uuid);o(C,c,y,S),s(C,y,d),m.forEach((G,ye)=>[...ye].sort(t).forEach((ke,re)=>{let be=c.findBox(C.get(ke.address.uuid).target).unwrap("Target Track has not been copied");Be(be,sr).index.setValue(re)}));let V=a.reduce((G,ye)=>Math.min(G,ye.position.getValue()),Number.MAX_VALUE),K=h-V;a.forEach(G=>{let ye=c.findBox(C.get(G.address.uuid).target).unwrap("Target Track has not been copied"),ke=hs.asRegionBox(ye).position;ke.setValue(ke.getValue()+K)})};let i=(a,c,l,d)=>{let h=E.newSet(({source:f})=>f);return h.addMany([...a.filter(({output:{targetAddress:f}})=>f.nonEmpty()).map(f=>({source:f.output.targetAddress.unwrap().uuid,target:d})),...a.map(f=>({source:f.collection.targetAddress.unwrap("AudioUnitBox was not connected to a RootBox").uuid,target:l})),...a.map(f=>({source:f.address.uuid,target:E.generate()})),...c.map(({address:{uuid:f},name:v})=>({source:f,target:v===Dr.ClassName||v===Gr.ClassName?f:E.generate()}))]),h},o=(a,c,l,d)=>{$.decodeWith({map:(h,f)=>f.map(v=>a.opt(v.uuid).match({none:()=>v,some:({target:m})=>v.moveTo(m)}))},()=>{l.forEach(h=>{let f=new Ge(h.toArrayBuffer()),v=h.name,m=a.get(h.address.uuid).target;c.createBox(v,m,y=>y.read(f))}),d.forEach(h=>{let f=new Ge(h.toArrayBuffer()),v=h.name,m=a.get(h.address.uuid).target;if((h instanceof Dr||h instanceof Gr)&&c.findBox(h.address.uuid).nonEmpty()){h.read(f);return}c.createBox(v,m,y=>y.read(f))})})},s=(a,c,l)=>c.toSorted(t).map(d=>Be(l.graph.findBox(a.get(d.address.uuid).target).unwrap("Target Track has not been copied"),tt)).forEach(d=>al.collectIndexedBoxes(l.audioUnits,tt).toSorted((h,f)=>{let v=Kc[h.type.getValue()],m=Kc[f.type.getValue()],y=v-m;return y===0?f===d?-1:1:y}).forEach((h,f)=>h.index.setValue(f)))})(Wc||(Wc={}));var fs;(function(r){r.MAGIC_HEADER_OPEN=1330664005,r.FORMAT_VERSION=1})(fs||(fs={}));var aP;(function(r){r.decode=(e,t)=>{let n=new Ge(e.slice(0,8));if(n.readInt()!==fs.MAGIC_HEADER_OPEN){Ya.info({headline:"Could Not Import Preset",message:"Invalid preset file"}).then();return}if(n.readInt()!==fs.FORMAT_VERSION){Ya.info({headline:"Could Not Import Preset",message:"Invalid preset version"}).then();return}let i=new Rs(g.wrap(Os.create));try{i.fromArrayBuffer(e.slice(8))}catch(s){Ya.info({headline:"Could Not Import Preset",message:String(s)}).then();return}let o=i.boxes().filter(s=>Ke(s,tt)).filter(s=>s.type.getValue()!==bt.Output);Wc.extractAudioUnits(o,t,{excludeTimeline:!0}).filter(s=>s.type.getValue()!==bt.Output).forEach(s=>{let a=s.input.pointerHub.incoming().at(0)?.box;R(a)&&s.capture.targetVertex.ifSome(({box:c})=>{c instanceof Fo?sr.create(t.boxGraph,E.generate(),l=>{l.index.setValue(0),l.type.setValue(ee.Notes),l.target.refer(s),l.tracks.refer(s.tracks)}):c instanceof So&&sr.create(t.boxGraph,E.generate(),l=>{l.index.setValue(0),l.type.setValue(ee.Audio),l.target.refer(s),l.tracks.refer(s.tracks)})})})},r.replaceAudioUnit=(e,t,n)=>{console.debug("ReplaceAudioUnit with preset...");let i=ps.empty({createDefaultUser:!1,createOutputCompressor:!1}),o=i.boxGraph,s=t.graph;o.beginTransaction(),r.decode(e,i),o.endTransaction();let a=q(i.mandatoryBoxes.rootBox.audioUnits.pointerHub.incoming().map(({box:y})=>Be(y,tt)).find(y=>y.type.getValue()!==bt.Output),"Source has no audioUnitBox"),c=a.capture.targetVertex.mapOr(({box:y})=>y.name,""),l=t.capture.targetVertex.mapOr(({box:y})=>y.name,"");if(c!==l)return Bn.err("Cannot replace incompatible instruments");let d=n?.keepMIDIEffects!==!0,h=n?.keepAudioEffects!==!0;console.debug("replaceMIDIEffects",d),console.debug("replaceAudioEffects",h),q(t.input.pointerHub.incoming().at(0)?.box,"Target has no input").delete(),d?t.midiEffects.pointerHub.incoming().forEach(({box:y})=>y.delete()):(o.beginTransaction(),a.midiEffects.pointerHub.incoming().forEach(({box:y})=>y.delete()),o.endTransaction()),h?t.audioEffects.pointerHub.incoming().forEach(({box:y})=>y.delete()):(o.beginTransaction(),a.audioEffects.pointerHub.incoming().forEach(({box:y})=>y.delete()),o.endTransaction());let f=y=>y.accept({visitTrackBox:x=>!0,visitCaptureMidiBox:x=>!0,visitCaptureAudioBox:x=>!0})===!0,v=E.newSet(({source:y})=>y),m=Array.from(o.dependenciesOf(a,{excludeBox:f,alwaysFollowMandatory:!1}).boxes);return v.addMany([{source:a.address.uuid,target:t.address.uuid},...m.map(({address:{uuid:y},name:x})=>({source:y,target:x===Dr.ClassName||x===Gr.ClassName?y:E.generate()}))]),$.decodeWith({map:(y,x)=>x.map(S=>v.opt(S.uuid).match({none:()=>S,some:({target:C})=>S.moveTo(C)}))},()=>{m.forEach(y=>{let x=new Ge(y.toArrayBuffer()),S=y.name,C=v.get(y.address.uuid).target;if((y instanceof Dr||y instanceof Gr)&&s.findBox(y.address.uuid).nonEmpty()){y.read(x);return}s.createBox(S,C,V=>V.read(x))})}),Bn.Ok}})(aP||(aP={}));var lP;(function(r){r.encode=e=>{let t=Ze.create();t.writeInt(fs.MAGIC_HEADER_OPEN),t.writeInt(fs.FORMAT_VERSION);let n=ps.empty({createOutputCompressor:!1,createDefaultUser:!1});return n.boxGraph.beginTransaction(),Wc.extractAudioUnits([e],n,{excludeTimeline:!0}),n.boxGraph.endTransaction(),console.debug("SAVING..."),n.boxGraph.debugBoxes(),D.concatArrayBuffers(t.toArrayBuffer(),n.boxGraph.toArrayBuffer())}})(lP||(lP={}));var cP;(function(r){r.existingInstrumentNames=e=>e.audioUnits.pointerHub.incoming().map(({box:t})=>{let n=q(Be(t,tt).input.pointerHub.incoming().at(0)).box;return"label"in n&&n.label instanceof T?n.label.getValue():"N/A"})})(cP||(cP={}));var Ft={};Ss(Ft,{$brand:()=>pg,$input:()=>b0,$output:()=>w0,NEVER:()=>rw,TimePrecision:()=>E0,ZodAny:()=>UE,ZodArray:()=>WE,ZodBase64:()=>KA,ZodBase64URL:()=>WA,ZodBigInt:()=>ep,ZodBigIntFormat:()=>qA,ZodBoolean:()=>Xh,ZodCIDRv4:()=>jA,ZodCIDRv6:()=>LA,ZodCUID:()=>TA,ZodCUID2:()=>CA,ZodCatch:()=>uS,ZodCodec:()=>n_,ZodCustom:()=>bv,ZodCustomStringFormat:()=>Qh,ZodDate:()=>yv,ZodDefault:()=>nS,ZodDiscriminatedUnion:()=>ZE,ZodE164:()=>ZA,ZodEmail:()=>IA,ZodEmoji:()=>DA,ZodEnum:()=>Hh,ZodError:()=>XB,ZodFile:()=>tS,ZodFirstPartyTypeKind:()=>o_,ZodFunction:()=>xS,ZodGUID:()=>pv,ZodIPv4:()=>zA,ZodIPv6:()=>UA,ZodISODate:()=>cv,ZodISODateTime:()=>lv,ZodISODuration:()=>dv,ZodISOTime:()=>uv,ZodIntersection:()=>GE,ZodIssueCode:()=>pk,ZodJWT:()=>GA,ZodKSUID:()=>VA,ZodLazy:()=>gS,ZodLiteral:()=>eS,ZodMAC:()=>ME,ZodMap:()=>YE,ZodNaN:()=>hS,ZodNanoID:()=>MA,ZodNever:()=>LE,ZodNonOptional:()=>r_,ZodNull:()=>VE,ZodNullable:()=>iS,ZodNumber:()=>Yh,ZodNumberFormat:()=>su,ZodObject:()=>wv,ZodOptional:()=>t_,ZodPipe:()=>i_,ZodPrefault:()=>sS,ZodPromise:()=>yS,ZodReadonly:()=>pS,ZodRealError:()=>Br,ZodRecord:()=>YA,ZodSet:()=>XE,ZodString:()=>Jh,ZodStringFormat:()=>Je,ZodSuccess:()=>cS,ZodSymbol:()=>RE,ZodTemplateLiteral:()=>mS,ZodTransform:()=>rS,ZodTuple:()=>HE,ZodType:()=>Ae,ZodULID:()=>RA,ZodURL:()=>vv,ZodUUID:()=>so,ZodUndefined:()=>OE,ZodUnion:()=>JA,ZodUnknown:()=>jE,ZodVoid:()=>KE,ZodXID:()=>OA,_ZodString:()=>kA,_default:()=>oS,_function:()=>nk,any:()=>O$,array:()=>xv,base64:()=>b$,base64url:()=>A$,bigint:()=>D$,boolean:()=>CE,catch:()=>dS,check:()=>ok,cidrv4:()=>x$,cidrv6:()=>w$,clone:()=>hr,codec:()=>tk,coerce:()=>s_,config:()=>yt,core:()=>oo,cuid:()=>d$,cuid2:()=>h$,custom:()=>sk,date:()=>z$,decode:()=>AA,decodeAsync:()=>PA,describe:()=>ak,discriminatedUnion:()=>W$,e164:()=>_$,email:()=>t$,emoji:()=>c$,encode:()=>bA,encodeAsync:()=>_A,endsWith:()=>Uh,enum:()=>XA,file:()=>Q$,flattenError:()=>_h,float32:()=>B$,float64:()=>$$,formatError:()=>Ph,function:()=>nk,getErrorMap:()=>mk,globalRegistry:()=>pr,gt:()=>no,gte:()=>Nr,guid:()=>r$,hash:()=>N$,hex:()=>F$,hostname:()=>S$,httpUrl:()=>l$,includes:()=>Vh,instanceof:()=>ck,int:()=>$A,int32:()=>k$,int64:()=>M$,intersection:()=>qE,ipv4:()=>g$,ipv6:()=>y$,iso:()=>hv,json:()=>dk,jwt:()=>P$,keyof:()=>U$,ksuid:()=>m$,lazy:()=>vS,length:()=>iu,literal:()=>J$,locales:()=>Ih,looseObject:()=>K$,lowercase:()=>Rh,lt:()=>io,lte:()=>Pi,mac:()=>v$,map:()=>G$,maxLength:()=>ru,maxSize:()=>tu,meta:()=>lk,mime:()=>jh,minLength:()=>bs,minSize:()=>Oa,multipleOf:()=>Ra,nan:()=>ek,nanoid:()=>u$,nativeEnum:()=>H$,negative:()=>eA,never:()=>HA,nonnegative:()=>rA,nonoptional:()=>lS,nonpositive:()=>tA,normalize:()=>Lh,null:()=>zE,nullable:()=>mv,nullish:()=>Y$,number:()=>TE,object:()=>j$,optional:()=>fv,overwrite:()=>En,parse:()=>vA,parseAsync:()=>yA,partialRecord:()=>Z$,pipe:()=>gv,positive:()=>X0,prefault:()=>aS,preprocess:()=>hk,prettifyError:()=>fw,promise:()=>ik,property:()=>iA,readonly:()=>fS,record:()=>QE,refine:()=>wS,regex:()=>Ch,regexes:()=>_i,registry:()=>Ug,safeDecode:()=>SA,safeDecodeAsync:()=>NA,safeEncode:()=>EA,safeEncodeAsync:()=>FA,safeParse:()=>xA,safeParseAsync:()=>wA,set:()=>q$,setErrorMap:()=>fk,size:()=>Th,slugify:()=>Gh,startsWith:()=>zh,strictObject:()=>L$,string:()=>BA,stringFormat:()=>E$,stringbool:()=>uk,success:()=>X$,superRefine:()=>bS,symbol:()=>C$,templateLiteral:()=>rk,toJSONSchema:()=>hA,toLowerCase:()=>Wh,toUpperCase:()=>Zh,transform:()=>e_,treeifyError:()=>pw,trim:()=>Kh,tuple:()=>JE,uint32:()=>I$,uint64:()=>T$,ulid:()=>p$,undefined:()=>R$,union:()=>QA,unknown:()=>ou,uppercase:()=>Oh,url:()=>a$,util:()=>U,uuid:()=>i$,uuidv4:()=>n$,uuidv6:()=>o$,uuidv7:()=>s$,void:()=>V$,xid:()=>f$});var oo={};Ss(oo,{$ZodAny:()=>Lb,$ZodArray:()=>qb,$ZodAsyncError:()=>qi,$ZodBase64:()=>Db,$ZodBase64URL:()=>Mb,$ZodBigInt:()=>Tg,$ZodBigIntFormat:()=>Vb,$ZodBoolean:()=>Nh,$ZodCIDRv4:()=>$b,$ZodCIDRv6:()=>kb,$ZodCUID:()=>yb,$ZodCUID2:()=>xb,$ZodCatch:()=>d0,$ZodCheck:()=>He,$ZodCheckBigIntFormat:()=>qw,$ZodCheckEndsWith:()=>sb,$ZodCheckGreaterThan:()=>Ng,$ZodCheckIncludes:()=>nb,$ZodCheckLengthEquals:()=>eb,$ZodCheckLessThan:()=>Fg,$ZodCheckLowerCase:()=>rb,$ZodCheckMaxLength:()=>Yw,$ZodCheckMaxSize:()=>Hw,$ZodCheckMimeType:()=>lb,$ZodCheckMinLength:()=>Xw,$ZodCheckMinSize:()=>Jw,$ZodCheckMultipleOf:()=>Zw,$ZodCheckNumberFormat:()=>Gw,$ZodCheckOverwrite:()=>cb,$ZodCheckProperty:()=>ab,$ZodCheckRegex:()=>tb,$ZodCheckSizeEquals:()=>Qw,$ZodCheckStartsWith:()=>ob,$ZodCheckStringFormat:()=>Xc,$ZodCheckUpperCase:()=>ib,$ZodCodec:()=>Bh,$ZodCustom:()=>x0,$ZodCustomStringFormat:()=>Rb,$ZodDate:()=>Gb,$ZodDefault:()=>a0,$ZodDiscriminatedUnion:()=>Jb,$ZodE164:()=>Tb,$ZodEmail:()=>fb,$ZodEmoji:()=>gb,$ZodEncodeError:()=>ms,$ZodEnum:()=>t0,$ZodError:()=>Ah,$ZodFile:()=>i0,$ZodFunction:()=>g0,$ZodGUID:()=>hb,$ZodIPv4:()=>Fb,$ZodIPv6:()=>Nb,$ZodISODate:()=>Pb,$ZodISODateTime:()=>_b,$ZodISODuration:()=>Sb,$ZodISOTime:()=>Eb,$ZodIntersection:()=>Qb,$ZodJWT:()=>Cb,$ZodKSUID:()=>Ab,$ZodLazy:()=>y0,$ZodLiteral:()=>r0,$ZodMAC:()=>Bb,$ZodMap:()=>Xb,$ZodNaN:()=>h0,$ZodNanoID:()=>vb,$ZodNever:()=>Wb,$ZodNonOptional:()=>c0,$ZodNull:()=>jb,$ZodNullable:()=>s0,$ZodNumber:()=>Mg,$ZodNumberFormat:()=>Ob,$ZodObject:()=>TP,$ZodObjectJIT:()=>Hb,$ZodOptional:()=>o0,$ZodPipe:()=>p0,$ZodPrefault:()=>l0,$ZodPromise:()=>v0,$ZodReadonly:()=>f0,$ZodRealError:()=>Fr,$ZodRecord:()=>Yb,$ZodRegistry:()=>eu,$ZodSet:()=>e0,$ZodString:()=>Ca,$ZodStringFormat:()=>We,$ZodSuccess:()=>u0,$ZodSymbol:()=>zb,$ZodTemplateLiteral:()=>m0,$ZodTransform:()=>n0,$ZodTuple:()=>Rg,$ZodType:()=>he,$ZodULID:()=>wb,$ZodURL:()=>mb,$ZodUUID:()=>pb,$ZodUndefined:()=>Ub,$ZodUnion:()=>Cg,$ZodUnknown:()=>Kb,$ZodVoid:()=>Zb,$ZodXID:()=>bb,$brand:()=>pg,$constructor:()=>w,$input:()=>b0,$output:()=>w0,Doc:()=>Fh,JSONSchema:()=>kE,JSONSchemaGenerator:()=>qh,NEVER:()=>rw,TimePrecision:()=>E0,_any:()=>Z0,_array:()=>nA,_base64:()=>nv,_base64url:()=>ov,_bigint:()=>V0,_boolean:()=>R0,_catch:()=>ZB,_check:()=>$E,_cidrv4:()=>rv,_cidrv6:()=>iv,_coercedBigint:()=>z0,_coercedBoolean:()=>O0,_coercedDate:()=>Q0,_coercedNumber:()=>k0,_coercedString:()=>_0,_cuid:()=>Hg,_cuid2:()=>Jg,_custom:()=>sA,_date:()=>J0,_decode:()=>xg,_decodeAsync:()=>bg,_default:()=>LB,_discriminatedUnion:()=>kB,_e164:()=>sv,_email:()=>jg,_emoji:()=>Gg,_encode:()=>yg,_encodeAsync:()=>wg,_endsWith:()=>Uh,_enum:()=>RB,_file:()=>oA,_float32:()=>D0,_float64:()=>M0,_gt:()=>no,_gte:()=>Nr,_guid:()=>Dh,_includes:()=>Vh,_int:()=>I0,_int32:()=>T0,_int64:()=>U0,_intersection:()=>IB,_ipv4:()=>ev,_ipv6:()=>tv,_isoDate:()=>F0,_isoDateTime:()=>S0,_isoDuration:()=>B0,_isoTime:()=>N0,_jwt:()=>av,_ksuid:()=>Xg,_lazy:()=>JB,_length:()=>iu,_literal:()=>VB,_lowercase:()=>Rh,_lt:()=>io,_lte:()=>Pi,_mac:()=>P0,_map:()=>TB,_max:()=>Pi,_maxLength:()=>ru,_maxSize:()=>tu,_mime:()=>jh,_min:()=>Nr,_minLength:()=>bs,_minSize:()=>Oa,_multipleOf:()=>Ra,_nan:()=>Y0,_nanoid:()=>qg,_nativeEnum:()=>OB,_negative:()=>eA,_never:()=>q0,_nonnegative:()=>rA,_nonoptional:()=>KB,_nonpositive:()=>tA,_normalize:()=>Lh,_null:()=>W0,_nullable:()=>jB,_number:()=>$0,_optional:()=>UB,_overwrite:()=>En,_parse:()=>Hc,_parseAsync:()=>Jc,_pipe:()=>GB,_positive:()=>X0,_promise:()=>QB,_property:()=>iA,_readonly:()=>qB,_record:()=>MB,_refine:()=>aA,_regex:()=>Ch,_safeDecode:()=>_g,_safeDecodeAsync:()=>Eg,_safeEncode:()=>Ag,_safeEncodeAsync:()=>Pg,_safeParse:()=>Qc,_safeParseAsync:()=>Yc,_set:()=>CB,_size:()=>Th,_slugify:()=>Gh,_startsWith:()=>zh,_string:()=>A0,_stringFormat:()=>nu,_stringbool:()=>dA,_success:()=>WB,_superRefine:()=>lA,_symbol:()=>L0,_templateLiteral:()=>HB,_toLowerCase:()=>Wh,_toUpperCase:()=>Zh,_transform:()=>zB,_trim:()=>Kh,_tuple:()=>DB,_uint32:()=>C0,_uint64:()=>j0,_ulid:()=>Qg,_undefined:()=>K0,_union:()=>$B,_unknown:()=>G0,_uppercase:()=>Oh,_url:()=>Mh,_uuid:()=>Lg,_uuidv4:()=>Kg,_uuidv6:()=>Wg,_uuidv7:()=>Zg,_void:()=>H0,_xid:()=>Yg,clone:()=>hr,config:()=>yt,decode:()=>JF,decodeAsync:()=>YF,describe:()=>cA,encode:()=>HF,encodeAsync:()=>QF,flattenError:()=>_h,formatError:()=>Ph,globalConfig:()=>mh,globalRegistry:()=>pr,isValidBase64:()=>Ib,isValidBase64URL:()=>kP,isValidJWT:()=>IP,locales:()=>Ih,meta:()=>uA,parse:()=>gg,parseAsync:()=>vg,prettifyError:()=>fw,regexes:()=>_i,registry:()=>Ug,safeDecode:()=>eN,safeDecodeAsync:()=>rN,safeEncode:()=>XF,safeEncodeAsync:()=>tN,safeParse:()=>mw,safeParseAsync:()=>gw,toDotPath:()=>fP,toJSONSchema:()=>hA,treeifyError:()=>pw,util:()=>U,version:()=>ub});var rw=Object.freeze({status:"aborted"});function w(r,e,t){function n(a,c){if(a._zod||Object.defineProperty(a,"_zod",{value:{def:c,constr:s,traits:new Set},enumerable:!1}),a._zod.traits.has(r))return;a._zod.traits.add(r),e(a,c);let l=s.prototype,d=Object.keys(l);for(let h=0;h<d.length;h++){let f=d[h];f in a||(a[f]=l[f].bind(a))}}let i=t?.Parent??Object;class o extends i{}Object.defineProperty(o,"name",{value:r});function s(a){var c;let l=t?.Parent?new o:this;n(l,a),(c=l._zod).deferred??(c.deferred=[]);for(let d of l._zod.deferred)d();return l}return Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:a=>t?.Parent&&a instanceof t.Parent?!0:a?._zod?.traits?.has(r)}),Object.defineProperty(s,"name",{value:r}),s}var pg=Symbol("zod_brand"),qi=class extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}},ms=class extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}},mh={};function yt(r){return r&&Object.assign(mh,r),mh}var U={};Ss(U,{BIGINT_FORMAT_RANGES:()=>hw,Class:()=>nw,NUMBER_FORMAT_RANGES:()=>dw,aborted:()=>ws,allowsEval:()=>aw,assert:()=>FF,assertEqual:()=>_F,assertIs:()=>EF,assertNever:()=>SF,assertNotEqual:()=>PF,assignProp:()=>vs,base64ToUint8Array:()=>dP,base64urlToUint8Array:()=>KF,cached:()=>Gc,captureStackTrace:()=>mg,cleanEnum:()=>LF,cleanRegex:()=>yh,clone:()=>hr,cloneDef:()=>BF,createTransparentProxy:()=>TF,defineLazy:()=>$e,esc:()=>fg,escapeRegex:()=>Ai,extend:()=>OF,finalizeIssue:()=>Kr,floatSafeRemainder:()=>ow,getElementAtPath:()=>$F,getEnumValues:()=>vh,getLengthableOrigin:()=>bh,getParsedType:()=>MF,getSizableOrigin:()=>wh,hexToUint8Array:()=>ZF,isObject:()=>Ma,isPlainObject:()=>xs,issue:()=>qc,joinValues:()=>k,jsonStringifyReplacer:()=>Zc,merge:()=>zF,mergeDefs:()=>ys,normalizeParams:()=>z,nullish:()=>gs,numKeys:()=>DF,objectClone:()=>NF,omit:()=>RF,optionalKeys:()=>uw,partial:()=>UF,pick:()=>CF,prefixIssues:()=>Lr,primitiveTypes:()=>cw,promiseAllObject:()=>kF,propertyKeyTypes:()=>xh,randomString:()=>IF,required:()=>jF,safeExtend:()=>VF,shallowClone:()=>lw,slugify:()=>sw,stringifyPrimitive:()=>O,uint8ArrayToBase64:()=>hP,uint8ArrayToBase64url:()=>WF,uint8ArrayToHex:()=>GF,unwrapMessage:()=>gh});function _F(r){return r}function PF(r){return r}function EF(r){}function SF(r){throw new Error}function FF(r){}function vh(r){let e=Object.values(r).filter(n=>typeof n=="number");return Object.entries(r).filter(([n,i])=>e.indexOf(+n)===-1).map(([n,i])=>i)}function k(r,e="|"){return r.map(t=>O(t)).join(e)}function Zc(r,e){return typeof e=="bigint"?e.toString():e}function Gc(r){return{get value(){{let t=r();return Object.defineProperty(this,"value",{value:t}),t}throw new Error("cached value already set")}}}function gs(r){return r==null}function yh(r){let e=r.startsWith("^")?1:0,t=r.endsWith("$")?r.length-1:r.length;return r.slice(e,t)}function ow(r,e){let t=(r.toString().split(".")[1]||"").length,n=e.toString(),i=(n.split(".")[1]||"").length;if(i===0&&/\d?e-\d?/.test(n)){let c=n.match(/\d?e-(\d?)/);c?.[1]&&(i=Number.parseInt(c[1]))}let o=t>i?t:i,s=Number.parseInt(r.toFixed(o).replace(".","")),a=Number.parseInt(e.toFixed(o).replace(".",""));return s%a/10**o}var uP=Symbol("evaluating");function $e(r,e,t){let n;Object.defineProperty(r,e,{get(){if(n!==uP)return n===void 0&&(n=uP,n=t()),n},set(i){Object.defineProperty(r,e,{value:i})},configurable:!0})}function NF(r){return Object.create(Object.getPrototypeOf(r),Object.getOwnPropertyDescriptors(r))}function vs(r,e,t){Object.defineProperty(r,e,{value:t,writable:!0,enumerable:!0,configurable:!0})}function ys(...r){let e={};for(let t of r){let n=Object.getOwnPropertyDescriptors(t);Object.assign(e,n)}return Object.defineProperties({},e)}function BF(r){return ys(r._zod.def)}function $F(r,e){return e?e.reduce((t,n)=>t?.[n],r):r}function kF(r){let e=Object.keys(r),t=e.map(n=>r[n]);return Promise.all(t).then(n=>{let i={};for(let o=0;o<e.length;o++)i[e[o]]=n[o];return i})}function IF(r=10){let e="abcdefghijklmnopqrstuvwxyz",t="";for(let n=0;n<r;n++)t+=e[Math.floor(Math.random()*e.length)];return t}function fg(r){return JSON.stringify(r)}function sw(r){return r.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}var mg="captureStackTrace"in Error?Error.captureStackTrace:(...r)=>{};function Ma(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}var aw=Gc(()=>{if(typeof navigator<"u"&&navigator?.userAgent?.includes("Cloudflare"))return!1;try{let r=Function;return new r(""),!0}catch{return!1}});function xs(r){if(Ma(r)===!1)return!1;let e=r.constructor;if(e===void 0||typeof e!="function")return!0;let t=e.prototype;return!(Ma(t)===!1||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)}function lw(r){return xs(r)?{...r}:Array.isArray(r)?[...r]:r}function DF(r){let e=0;for(let t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}var MF=r=>{let e=typeof r;switch(e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(r)?"nan":"number";case"boolean":return"boolean";case"function":return"function";case"bigint":return"bigint";case"symbol":return"symbol";case"object":return Array.isArray(r)?"array":r===null?"null":r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?"promise":typeof Map<"u"&&r instanceof Map?"map":typeof Set<"u"&&r instanceof Set?"set":typeof Date<"u"&&r instanceof Date?"date":typeof File<"u"&&r instanceof File?"file":"object";default:throw new Error(`Unknown data type: ${e}`)}},xh=new Set(["string","number","symbol"]),cw=new Set(["string","number","bigint","boolean","symbol","undefined"]);function Ai(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function hr(r,e,t){let n=new r._zod.constr(e??r._zod.def);return(!e||t?.parent)&&(n._zod.parent=r),n}function z(r){let e=r;if(!e)return{};if(typeof e=="string")return{error:()=>e};if(e?.message!==void 0){if(e?.error!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function TF(r){let e;return new Proxy({},{get(t,n,i){return e??(e=r()),Reflect.get(e,n,i)},set(t,n,i,o){return e??(e=r()),Reflect.set(e,n,i,o)},has(t,n){return e??(e=r()),Reflect.has(e,n)},deleteProperty(t,n){return e??(e=r()),Reflect.deleteProperty(e,n)},ownKeys(t){return e??(e=r()),Reflect.ownKeys(e)},getOwnPropertyDescriptor(t,n){return e??(e=r()),Reflect.getOwnPropertyDescriptor(e,n)},defineProperty(t,n,i){return e??(e=r()),Reflect.defineProperty(e,n,i)}})}function O(r){return typeof r=="bigint"?r.toString()+"n":typeof r=="string"?`"${r}"`:`${r}`}function uw(r){return Object.keys(r).filter(e=>r[e]._zod.optin==="optional"&&r[e]._zod.optout==="optional")}var dw={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]},hw={int64:[BigInt("-9223372036854775808"),BigInt("9223372036854775807")],uint64:[BigInt(0),BigInt("18446744073709551615")]};function CF(r,e){let t=r._zod.def,n=ys(r._zod.def,{get shape(){let i={};for(let o in e){if(!(o in t.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(i[o]=t.shape[o])}return vs(this,"shape",i),i},checks:[]});return hr(r,n)}function RF(r,e){let t=r._zod.def,n=ys(r._zod.def,{get shape(){let i={...r._zod.def.shape};for(let o in e){if(!(o in t.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete i[o]}return vs(this,"shape",i),i},checks:[]});return hr(r,n)}function OF(r,e){if(!xs(e))throw new Error("Invalid input to extend: expected a plain object");let t=r._zod.def.checks;if(t&&t.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");let i=ys(r._zod.def,{get shape(){let o={...r._zod.def.shape,...e};return vs(this,"shape",o),o},checks:[]});return hr(r,i)}function VF(r,e){if(!xs(e))throw new Error("Invalid input to safeExtend: expected a plain object");let t={...r._zod.def,get shape(){let n={...r._zod.def.shape,...e};return vs(this,"shape",n),n},checks:r._zod.def.checks};return hr(r,t)}function zF(r,e){let t=ys(r._zod.def,{get shape(){let n={...r._zod.def.shape,...e._zod.def.shape};return vs(this,"shape",n),n},get catchall(){return e._zod.def.catchall},checks:[]});return hr(r,t)}function UF(r,e,t){let n=ys(e._zod.def,{get shape(){let i=e._zod.def.shape,o={...i};if(t)for(let s in t){if(!(s in i))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(o[s]=r?new r({type:"optional",innerType:i[s]}):i[s])}else for(let s in i)o[s]=r?new r({type:"optional",innerType:i[s]}):i[s];return vs(this,"shape",o),o},checks:[]});return hr(e,n)}function jF(r,e,t){let n=ys(e._zod.def,{get shape(){let i=e._zod.def.shape,o={...i};if(t)for(let s in t){if(!(s in o))throw new Error(`Unrecognized key: "${s}"`);t[s]&&(o[s]=new r({type:"nonoptional",innerType:i[s]}))}else for(let s in i)o[s]=new r({type:"nonoptional",innerType:i[s]});return vs(this,"shape",o),o},checks:[]});return hr(e,n)}function ws(r,e=0){if(r.aborted===!0)return!0;for(let t=e;t<r.issues.length;t++)if(r.issues[t]?.continue!==!0)return!0;return!1}function Lr(r,e){return e.map(t=>{var n;return(n=t).path??(n.path=[]),t.path.unshift(r),t})}function gh(r){return typeof r=="string"?r:r?.message}function Kr(r,e,t){let n={...r,path:r.path??[]};if(!r.message){let i=gh(r.inst?._zod.def?.error?.(r))??gh(e?.error?.(r))??gh(t.customError?.(r))??gh(t.localeError?.(r))??"Invalid input";n.message=i}return delete n.inst,delete n.continue,e?.reportInput||delete n.input,n}function wh(r){return r instanceof Set?"set":r instanceof Map?"map":r instanceof File?"file":"unknown"}function bh(r){return Array.isArray(r)?"array":typeof r=="string"?"string":"unknown"}function qc(...r){let[e,t,n]=r;return typeof e=="string"?{message:e,code:"custom",input:t,inst:n}:{...e}}function LF(r){return Object.entries(r).filter(([e,t])=>Number.isNaN(Number.parseInt(e,10))).map(e=>e[1])}function dP(r){let e=atob(r),t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function hP(r){let e="";for(let t=0;t<r.length;t++)e+=String.fromCharCode(r[t]);return btoa(e)}function KF(r){let e=r.replace(/-/g,"+").replace(/_/g,"/"),t="=".repeat((4-e.length%4)%4);return dP(e+t)}function WF(r){return hP(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function ZF(r){let e=r.replace(/^0x/,"");if(e.length%2!==0)throw new Error("Invalid hex string length");let t=new Uint8Array(e.length/2);for(let n=0;n<e.length;n+=2)t[n/2]=Number.parseInt(e.slice(n,n+2),16);return t}function GF(r){return Array.from(r).map(e=>e.toString(16).padStart(2,"0")).join("")}var nw=class{constructor(...e){}};var pP=(r,e)=>{r.name="$ZodError",Object.defineProperty(r,"_zod",{value:r._zod,enumerable:!1}),Object.defineProperty(r,"issues",{value:e,enumerable:!1}),r.message=JSON.stringify(e,Zc,2),Object.defineProperty(r,"toString",{value:()=>r.message,enumerable:!1})},Ah=w("$ZodError",pP),Fr=w("$ZodError",pP,{Parent:Error});function _h(r,e=t=>t.message){let t={},n=[];for(let i of r.issues)i.path.length>0?(t[i.path[0]]=t[i.path[0]]||[],t[i.path[0]].push(e(i))):n.push(e(i));return{formErrors:n,fieldErrors:t}}function Ph(r,e=t=>t.message){let t={_errors:[]},n=i=>{for(let o of i.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(s=>n({issues:s}));else if(o.code==="invalid_key")n({issues:o.issues});else if(o.code==="invalid_element")n({issues:o.issues});else if(o.path.length===0)t._errors.push(e(o));else{let s=t,a=0;for(;a<o.path.length;){let c=o.path[a];a===o.path.length-1?(s[c]=s[c]||{_errors:[]},s[c]._errors.push(e(o))):s[c]=s[c]||{_errors:[]},s=s[c],a++}}};return n(r),t}function pw(r,e=t=>t.message){let t={errors:[]},n=(i,o=[])=>{var s,a;for(let c of i.issues)if(c.code==="invalid_union"&&c.errors.length)c.errors.map(l=>n({issues:l},c.path));else if(c.code==="invalid_key")n({issues:c.issues},c.path);else if(c.code==="invalid_element")n({issues:c.issues},c.path);else{let l=[...o,...c.path];if(l.length===0){t.errors.push(e(c));continue}let d=t,h=0;for(;h<l.length;){let f=l[h],v=h===l.length-1;typeof f=="string"?(d.properties??(d.properties={}),(s=d.properties)[f]??(s[f]={errors:[]}),d=d.properties[f]):(d.items??(d.items=[]),(a=d.items)[f]??(a[f]={errors:[]}),d=d.items[f]),v&&d.errors.push(e(c)),h++}}};return n(r),t}function fP(r){let e=[],t=r.map(n=>typeof n=="object"?n.key:n);for(let n of t)typeof n=="number"?e.push(`[${n}]`):typeof n=="symbol"?e.push(`[${JSON.stringify(String(n))}]`):/[^\w$]/.test(n)?e.push(`[${JSON.stringify(n)}]`):(e.length&&e.push("."),e.push(n));return e.join("")}function fw(r){let e=[],t=[...r.issues].sort((n,i)=>(n.path??[]).length-(i.path??[]).length);for(let n of t)e.push(`\u2716 ${n.message}`),n.path?.length&&e.push(`  \u2192 at ${fP(n.path)}`);return e.join(`
`)}var Hc=r=>(e,t,n,i)=>{let o=n?Object.assign(n,{async:!1}):{async:!1},s=e._zod.run({value:t,issues:[]},o);if(s instanceof Promise)throw new qi;if(s.issues.length){let a=new(i?.Err??r)(s.issues.map(c=>Kr(c,o,yt())));throw mg(a,i?.callee),a}return s.value},gg=Hc(Fr),Jc=r=>async(e,t,n,i)=>{let o=n?Object.assign(n,{async:!0}):{async:!0},s=e._zod.run({value:t,issues:[]},o);if(s instanceof Promise&&(s=await s),s.issues.length){let a=new(i?.Err??r)(s.issues.map(c=>Kr(c,o,yt())));throw mg(a,i?.callee),a}return s.value},vg=Jc(Fr),Qc=r=>(e,t,n)=>{let i=n?{...n,async:!1}:{async:!1},o=e._zod.run({value:t,issues:[]},i);if(o instanceof Promise)throw new qi;return o.issues.length?{success:!1,error:new(r??Ah)(o.issues.map(s=>Kr(s,i,yt())))}:{success:!0,data:o.value}},mw=Qc(Fr),Yc=r=>async(e,t,n)=>{let i=n?Object.assign(n,{async:!0}):{async:!0},o=e._zod.run({value:t,issues:[]},i);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new r(o.issues.map(s=>Kr(s,i,yt())))}:{success:!0,data:o.value}},gw=Yc(Fr),yg=r=>(e,t,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Hc(r)(e,t,i)},HF=yg(Fr),xg=r=>(e,t,n)=>Hc(r)(e,t,n),JF=xg(Fr),wg=r=>async(e,t,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Jc(r)(e,t,i)},QF=wg(Fr),bg=r=>async(e,t,n)=>Jc(r)(e,t,n),YF=bg(Fr),Ag=r=>(e,t,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Qc(r)(e,t,i)},XF=Ag(Fr),_g=r=>(e,t,n)=>Qc(r)(e,t,n),eN=_g(Fr),Pg=r=>async(e,t,n)=>{let i=n?Object.assign(n,{direction:"backward"}):{direction:"backward"};return Yc(r)(e,t,i)},tN=Pg(Fr),Eg=r=>async(e,t,n)=>Yc(r)(e,t,n),rN=Eg(Fr);var _i={};Ss(_i,{base64:()=>Iw,base64url:()=>Sg,bigint:()=>Ow,boolean:()=>Uw,browserEmail:()=>uN,cidrv4:()=>$w,cidrv6:()=>kw,cuid:()=>vw,cuid2:()=>yw,date:()=>Mw,datetime:()=>Cw,domain:()=>pN,duration:()=>_w,e164:()=>Dw,email:()=>Ew,emoji:()=>Sw,extendedDuration:()=>iN,guid:()=>Pw,hex:()=>fN,hostname:()=>hN,html5Email:()=>aN,idnEmail:()=>cN,integer:()=>Vw,ipv4:()=>Fw,ipv6:()=>Nw,ksuid:()=>bw,lowercase:()=>Kw,mac:()=>Bw,md5_base64:()=>gN,md5_base64url:()=>vN,md5_hex:()=>mN,nanoid:()=>Aw,null:()=>jw,number:()=>zw,rfc5322Email:()=>lN,sha1_base64:()=>xN,sha1_base64url:()=>wN,sha1_hex:()=>yN,sha256_base64:()=>AN,sha256_base64url:()=>_N,sha256_hex:()=>bN,sha384_base64:()=>EN,sha384_base64url:()=>SN,sha384_hex:()=>PN,sha512_base64:()=>NN,sha512_base64url:()=>BN,sha512_hex:()=>FN,string:()=>Rw,time:()=>Tw,ulid:()=>xw,undefined:()=>Lw,unicodeEmail:()=>mP,uppercase:()=>Ww,uuid:()=>Ta,uuid4:()=>nN,uuid6:()=>oN,uuid7:()=>sN,xid:()=>ww});var vw=/^[cC][^\s-]{8,}$/,yw=/^[0-9a-z]+$/,xw=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,ww=/^[0-9a-vA-V]{20}$/,bw=/^[A-Za-z0-9]{27}$/,Aw=/^[a-zA-Z0-9_-]{21}$/,_w=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,iN=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Pw=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,Ta=r=>r?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${r}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,nN=Ta(4),oN=Ta(6),sN=Ta(7),Ew=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,aN=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,lN=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,mP=/^[^\s@"]{1,64}@[^\s@]{1,255}$/u,cN=mP,uN=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,dN="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function Sw(){return new RegExp(dN,"u")}var Fw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Nw=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,Bw=r=>{let e=Ai(r??":");return new RegExp(`^(?:[0-9A-F]{2}${e}){5}[0-9A-F]{2}$|^(?:[0-9a-f]{2}${e}){5}[0-9a-f]{2}$`)},$w=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,kw=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Iw=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Sg=/^[A-Za-z0-9_-]*$/,hN=/^(?=.{1,253}\.?$)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[-0-9a-zA-Z]{0,61}[0-9a-zA-Z])?)*\.?$/,pN=/^([a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,Dw=/^\+(?:[0-9]){6,14}[0-9]$/,gP="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",Mw=new RegExp(`^${gP}$`);function vP(r){let e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof r.precision=="number"?r.precision===-1?`${e}`:r.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${r.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function Tw(r){return new RegExp(`^${vP(r)}$`)}function Cw(r){let e=vP({precision:r.precision}),t=["Z"];r.local&&t.push(""),r.offset&&t.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");let n=`${e}(?:${t.join("|")})`;return new RegExp(`^${gP}T(?:${n})$`)}var Rw=r=>{let e=r?`[\\s\\S]{${r?.minimum??0},${r?.maximum??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},Ow=/^-?\d+n?$/,Vw=/^-?\d+$/,zw=/^-?\d+(?:\.\d+)?/,Uw=/^(?:true|false)$/i,jw=/^null$/i;var Lw=/^undefined$/i;var Kw=/^[^A-Z]*$/,Ww=/^[^a-z]*$/,fN=/^[0-9a-fA-F]*$/;function Eh(r,e){return new RegExp(`^[A-Za-z0-9+/]{${r}}${e}$`)}function Sh(r){return new RegExp(`^[A-Za-z0-9_-]{${r}}$`)}var mN=/^[0-9a-fA-F]{32}$/,gN=Eh(22,"=="),vN=Sh(22),yN=/^[0-9a-fA-F]{40}$/,xN=Eh(27,"="),wN=Sh(27),bN=/^[0-9a-fA-F]{64}$/,AN=Eh(43,"="),_N=Sh(43),PN=/^[0-9a-fA-F]{96}$/,EN=Eh(64,""),SN=Sh(64),FN=/^[0-9a-fA-F]{128}$/,NN=Eh(86,"=="),BN=Sh(86);var He=w("$ZodCheck",(r,e)=>{var t;r._zod??(r._zod={}),r._zod.def=e,(t=r._zod).onattach??(t.onattach=[])}),xP={number:"number",bigint:"bigint",object:"date"},Fg=w("$ZodCheckLessThan",(r,e)=>{He.init(r,e);let t=xP[typeof e.value];r._zod.onattach.push(n=>{let i=n._zod.bag,o=(e.inclusive?i.maximum:i.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?i.maximum=e.value:i.exclusiveMaximum=e.value)}),r._zod.check=n=>{(e.inclusive?n.value<=e.value:n.value<e.value)||n.issues.push({origin:t,code:"too_big",maximum:e.value,input:n.value,inclusive:e.inclusive,inst:r,continue:!e.abort})}}),Ng=w("$ZodCheckGreaterThan",(r,e)=>{He.init(r,e);let t=xP[typeof e.value];r._zod.onattach.push(n=>{let i=n._zod.bag,o=(e.inclusive?i.minimum:i.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?i.minimum=e.value:i.exclusiveMinimum=e.value)}),r._zod.check=n=>{(e.inclusive?n.value>=e.value:n.value>e.value)||n.issues.push({origin:t,code:"too_small",minimum:e.value,input:n.value,inclusive:e.inclusive,inst:r,continue:!e.abort})}}),Zw=w("$ZodCheckMultipleOf",(r,e)=>{He.init(r,e),r._zod.onattach.push(t=>{var n;(n=t._zod.bag).multipleOf??(n.multipleOf=e.value)}),r._zod.check=t=>{if(typeof t.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof t.value=="bigint"?t.value%e.value===BigInt(0):ow(t.value,e.value)===0)||t.issues.push({origin:typeof t.value,code:"not_multiple_of",divisor:e.value,input:t.value,inst:r,continue:!e.abort})}}),Gw=w("$ZodCheckNumberFormat",(r,e)=>{He.init(r,e),e.format=e.format||"float64";let t=e.format?.includes("int"),n=t?"int":"number",[i,o]=dw[e.format];r._zod.onattach.push(s=>{let a=s._zod.bag;a.format=e.format,a.minimum=i,a.maximum=o,t&&(a.pattern=Vw)}),r._zod.check=s=>{let a=s.value;if(t){if(!Number.isInteger(a)){s.issues.push({expected:n,format:e.format,code:"invalid_type",continue:!1,input:a,inst:r});return}if(!Number.isSafeInteger(a)){a>0?s.issues.push({input:a,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:r,origin:n,continue:!e.abort}):s.issues.push({input:a,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:r,origin:n,continue:!e.abort});return}}a<i&&s.issues.push({origin:"number",input:a,code:"too_small",minimum:i,inclusive:!0,inst:r,continue:!e.abort}),a>o&&s.issues.push({origin:"number",input:a,code:"too_big",maximum:o,inst:r})}}),qw=w("$ZodCheckBigIntFormat",(r,e)=>{He.init(r,e);let[t,n]=hw[e.format];r._zod.onattach.push(i=>{let o=i._zod.bag;o.format=e.format,o.minimum=t,o.maximum=n}),r._zod.check=i=>{let o=i.value;o<t&&i.issues.push({origin:"bigint",input:o,code:"too_small",minimum:t,inclusive:!0,inst:r,continue:!e.abort}),o>n&&i.issues.push({origin:"bigint",input:o,code:"too_big",maximum:n,inst:r})}}),Hw=w("$ZodCheckMaxSize",(r,e)=>{var t;He.init(r,e),(t=r._zod.def).when??(t.when=n=>{let i=n.value;return!gs(i)&&i.size!==void 0}),r._zod.onattach.push(n=>{let i=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(n._zod.bag.maximum=e.maximum)}),r._zod.check=n=>{let i=n.value;i.size<=e.maximum||n.issues.push({origin:wh(i),code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:r,continue:!e.abort})}}),Jw=w("$ZodCheckMinSize",(r,e)=>{var t;He.init(r,e),(t=r._zod.def).when??(t.when=n=>{let i=n.value;return!gs(i)&&i.size!==void 0}),r._zod.onattach.push(n=>{let i=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(n._zod.bag.minimum=e.minimum)}),r._zod.check=n=>{let i=n.value;i.size>=e.minimum||n.issues.push({origin:wh(i),code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:r,continue:!e.abort})}}),Qw=w("$ZodCheckSizeEquals",(r,e)=>{var t;He.init(r,e),(t=r._zod.def).when??(t.when=n=>{let i=n.value;return!gs(i)&&i.size!==void 0}),r._zod.onattach.push(n=>{let i=n._zod.bag;i.minimum=e.size,i.maximum=e.size,i.size=e.size}),r._zod.check=n=>{let i=n.value,o=i.size;if(o===e.size)return;let s=o>e.size;n.issues.push({origin:wh(i),...s?{code:"too_big",maximum:e.size}:{code:"too_small",minimum:e.size},inclusive:!0,exact:!0,input:n.value,inst:r,continue:!e.abort})}}),Yw=w("$ZodCheckMaxLength",(r,e)=>{var t;He.init(r,e),(t=r._zod.def).when??(t.when=n=>{let i=n.value;return!gs(i)&&i.length!==void 0}),r._zod.onattach.push(n=>{let i=n._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<i&&(n._zod.bag.maximum=e.maximum)}),r._zod.check=n=>{let i=n.value;if(i.length<=e.maximum)return;let s=bh(i);n.issues.push({origin:s,code:"too_big",maximum:e.maximum,inclusive:!0,input:i,inst:r,continue:!e.abort})}}),Xw=w("$ZodCheckMinLength",(r,e)=>{var t;He.init(r,e),(t=r._zod.def).when??(t.when=n=>{let i=n.value;return!gs(i)&&i.length!==void 0}),r._zod.onattach.push(n=>{let i=n._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>i&&(n._zod.bag.minimum=e.minimum)}),r._zod.check=n=>{let i=n.value;if(i.length>=e.minimum)return;let s=bh(i);n.issues.push({origin:s,code:"too_small",minimum:e.minimum,inclusive:!0,input:i,inst:r,continue:!e.abort})}}),eb=w("$ZodCheckLengthEquals",(r,e)=>{var t;He.init(r,e),(t=r._zod.def).when??(t.when=n=>{let i=n.value;return!gs(i)&&i.length!==void 0}),r._zod.onattach.push(n=>{let i=n._zod.bag;i.minimum=e.length,i.maximum=e.length,i.length=e.length}),r._zod.check=n=>{let i=n.value,o=i.length;if(o===e.length)return;let s=bh(i),a=o>e.length;n.issues.push({origin:s,...a?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:n.value,inst:r,continue:!e.abort})}}),Xc=w("$ZodCheckStringFormat",(r,e)=>{var t,n;He.init(r,e),r._zod.onattach.push(i=>{let o=i._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(t=r._zod).check??(t.check=i=>{e.pattern.lastIndex=0,!e.pattern.test(i.value)&&i.issues.push({origin:"string",code:"invalid_format",format:e.format,input:i.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:r,continue:!e.abort})}):(n=r._zod).check??(n.check=()=>{})}),tb=w("$ZodCheckRegex",(r,e)=>{Xc.init(r,e),r._zod.check=t=>{e.pattern.lastIndex=0,!e.pattern.test(t.value)&&t.issues.push({origin:"string",code:"invalid_format",format:"regex",input:t.value,pattern:e.pattern.toString(),inst:r,continue:!e.abort})}}),rb=w("$ZodCheckLowerCase",(r,e)=>{e.pattern??(e.pattern=Kw),Xc.init(r,e)}),ib=w("$ZodCheckUpperCase",(r,e)=>{e.pattern??(e.pattern=Ww),Xc.init(r,e)}),nb=w("$ZodCheckIncludes",(r,e)=>{He.init(r,e);let t=Ai(e.includes),n=new RegExp(typeof e.position=="number"?`^.{${e.position}}${t}`:t);e.pattern=n,r._zod.onattach.push(i=>{let o=i._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(n)}),r._zod.check=i=>{i.value.includes(e.includes,e.position)||i.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:i.value,inst:r,continue:!e.abort})}}),ob=w("$ZodCheckStartsWith",(r,e)=>{He.init(r,e);let t=new RegExp(`^${Ai(e.prefix)}.*`);e.pattern??(e.pattern=t),r._zod.onattach.push(n=>{let i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(t)}),r._zod.check=n=>{n.value.startsWith(e.prefix)||n.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:n.value,inst:r,continue:!e.abort})}}),sb=w("$ZodCheckEndsWith",(r,e)=>{He.init(r,e);let t=new RegExp(`.*${Ai(e.suffix)}$`);e.pattern??(e.pattern=t),r._zod.onattach.push(n=>{let i=n._zod.bag;i.patterns??(i.patterns=new Set),i.patterns.add(t)}),r._zod.check=n=>{n.value.endsWith(e.suffix)||n.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:n.value,inst:r,continue:!e.abort})}});function yP(r,e,t){r.issues.length&&e.issues.push(...Lr(t,r.issues))}var ab=w("$ZodCheckProperty",(r,e)=>{He.init(r,e),r._zod.check=t=>{let n=e.schema._zod.run({value:t.value[e.property],issues:[]},{});if(n instanceof Promise)return n.then(i=>yP(i,t,e.property));yP(n,t,e.property)}}),lb=w("$ZodCheckMimeType",(r,e)=>{He.init(r,e);let t=new Set(e.mime);r._zod.onattach.push(n=>{n._zod.bag.mime=e.mime}),r._zod.check=n=>{t.has(n.value.type)||n.issues.push({code:"invalid_value",values:e.mime,input:n.value.type,inst:r,continue:!e.abort})}}),cb=w("$ZodCheckOverwrite",(r,e)=>{He.init(r,e),r._zod.check=t=>{t.value=e.tx(t.value)}});var Fh=class{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}let n=e.split(`
`).filter(s=>s),i=Math.min(...n.map(s=>s.length-s.trimStart().length)),o=n.map(s=>s.slice(i)).map(s=>" ".repeat(this.indent*2)+s);for(let s of o)this.content.push(s)}compile(){let e=Function,t=this?.args,i=[...(this?.content??[""]).map(o=>`  ${o}`)];return new e(...t,i.join(`
`))}};var ub={major:4,minor:1,patch:13};var he=w("$ZodType",(r,e)=>{var t;r??(r={}),r._zod.def=e,r._zod.bag=r._zod.bag||{},r._zod.version=ub;let n=[...r._zod.def.checks??[]];r._zod.traits.has("$ZodCheck")&&n.unshift(r);for(let i of n)for(let o of i._zod.onattach)o(r);if(n.length===0)(t=r._zod).deferred??(t.deferred=[]),r._zod.deferred?.push(()=>{r._zod.run=r._zod.parse});else{let i=(s,a,c)=>{let l=ws(s),d;for(let h of a){if(h._zod.def.when){if(!h._zod.def.when(s))continue}else if(l)continue;let f=s.issues.length,v=h._zod.check(s);if(v instanceof Promise&&c?.async===!1)throw new qi;if(d||v instanceof Promise)d=(d??Promise.resolve()).then(async()=>{await v,s.issues.length!==f&&(l||(l=ws(s,f)))});else{if(s.issues.length===f)continue;l||(l=ws(s,f))}}return d?d.then(()=>s):s},o=(s,a,c)=>{if(ws(s))return s.aborted=!0,s;let l=i(a,n,c);if(l instanceof Promise){if(c.async===!1)throw new qi;return l.then(d=>r._zod.parse(d,c))}return r._zod.parse(l,c)};r._zod.run=(s,a)=>{if(a.skipChecks)return r._zod.parse(s,a);if(a.direction==="backward"){let l=r._zod.parse({value:s.value,issues:[]},{...a,skipChecks:!0});return l instanceof Promise?l.then(d=>o(d,s,a)):o(l,s,a)}let c=r._zod.parse(s,a);if(c instanceof Promise){if(a.async===!1)throw new qi;return c.then(l=>i(l,n,a))}return i(c,n,a)}}r["~standard"]={validate:i=>{try{let o=mw(r,i);return o.success?{value:o.data}:{issues:o.error?.issues}}catch{return gw(r,i).then(s=>s.success?{value:s.data}:{issues:s.error?.issues})}},vendor:"zod",version:1}}),Ca=w("$ZodString",(r,e)=>{he.init(r,e),r._zod.pattern=[...r?._zod.bag?.patterns??[]].pop()??Rw(r._zod.bag),r._zod.parse=(t,n)=>{if(e.coerce)try{t.value=String(t.value)}catch{}return typeof t.value=="string"||t.issues.push({expected:"string",code:"invalid_type",input:t.value,inst:r}),t}}),We=w("$ZodStringFormat",(r,e)=>{Xc.init(r,e),Ca.init(r,e)}),hb=w("$ZodGUID",(r,e)=>{e.pattern??(e.pattern=Pw),We.init(r,e)}),pb=w("$ZodUUID",(r,e)=>{if(e.version){let n={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(n===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=Ta(n))}else e.pattern??(e.pattern=Ta());We.init(r,e)}),fb=w("$ZodEmail",(r,e)=>{e.pattern??(e.pattern=Ew),We.init(r,e)}),mb=w("$ZodURL",(r,e)=>{We.init(r,e),r._zod.check=t=>{try{let n=t.value.trim(),i=new URL(n);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(i.hostname)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:t.value,inst:r,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(i.protocol.endsWith(":")?i.protocol.slice(0,-1):i.protocol)||t.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:t.value,inst:r,continue:!e.abort})),e.normalize?t.value=i.href:t.value=n;return}catch{t.issues.push({code:"invalid_format",format:"url",input:t.value,inst:r,continue:!e.abort})}}}),gb=w("$ZodEmoji",(r,e)=>{e.pattern??(e.pattern=Sw()),We.init(r,e)}),vb=w("$ZodNanoID",(r,e)=>{e.pattern??(e.pattern=Aw),We.init(r,e)}),yb=w("$ZodCUID",(r,e)=>{e.pattern??(e.pattern=vw),We.init(r,e)}),xb=w("$ZodCUID2",(r,e)=>{e.pattern??(e.pattern=yw),We.init(r,e)}),wb=w("$ZodULID",(r,e)=>{e.pattern??(e.pattern=xw),We.init(r,e)}),bb=w("$ZodXID",(r,e)=>{e.pattern??(e.pattern=ww),We.init(r,e)}),Ab=w("$ZodKSUID",(r,e)=>{e.pattern??(e.pattern=bw),We.init(r,e)}),_b=w("$ZodISODateTime",(r,e)=>{e.pattern??(e.pattern=Cw(e)),We.init(r,e)}),Pb=w("$ZodISODate",(r,e)=>{e.pattern??(e.pattern=Mw),We.init(r,e)}),Eb=w("$ZodISOTime",(r,e)=>{e.pattern??(e.pattern=Tw(e)),We.init(r,e)}),Sb=w("$ZodISODuration",(r,e)=>{e.pattern??(e.pattern=_w),We.init(r,e)}),Fb=w("$ZodIPv4",(r,e)=>{e.pattern??(e.pattern=Fw),We.init(r,e),r._zod.bag.format="ipv4"}),Nb=w("$ZodIPv6",(r,e)=>{e.pattern??(e.pattern=Nw),We.init(r,e),r._zod.bag.format="ipv6",r._zod.check=t=>{try{new URL(`http://[${t.value}]`)}catch{t.issues.push({code:"invalid_format",format:"ipv6",input:t.value,inst:r,continue:!e.abort})}}}),Bb=w("$ZodMAC",(r,e)=>{e.pattern??(e.pattern=Bw(e.delimiter)),We.init(r,e),r._zod.bag.format="mac"}),$b=w("$ZodCIDRv4",(r,e)=>{e.pattern??(e.pattern=$w),We.init(r,e)}),kb=w("$ZodCIDRv6",(r,e)=>{e.pattern??(e.pattern=kw),We.init(r,e),r._zod.check=t=>{let n=t.value.split("/");try{if(n.length!==2)throw new Error;let[i,o]=n;if(!o)throw new Error;let s=Number(o);if(`${s}`!==o)throw new Error;if(s<0||s>128)throw new Error;new URL(`http://[${i}]`)}catch{t.issues.push({code:"invalid_format",format:"cidrv6",input:t.value,inst:r,continue:!e.abort})}}});function Ib(r){if(r==="")return!0;if(r.length%4!==0)return!1;try{return atob(r),!0}catch{return!1}}var Db=w("$ZodBase64",(r,e)=>{e.pattern??(e.pattern=Iw),We.init(r,e),r._zod.bag.contentEncoding="base64",r._zod.check=t=>{Ib(t.value)||t.issues.push({code:"invalid_format",format:"base64",input:t.value,inst:r,continue:!e.abort})}});function kP(r){if(!Sg.test(r))return!1;let e=r.replace(/[-_]/g,n=>n==="-"?"+":"/"),t=e.padEnd(Math.ceil(e.length/4)*4,"=");return Ib(t)}var Mb=w("$ZodBase64URL",(r,e)=>{e.pattern??(e.pattern=Sg),We.init(r,e),r._zod.bag.contentEncoding="base64url",r._zod.check=t=>{kP(t.value)||t.issues.push({code:"invalid_format",format:"base64url",input:t.value,inst:r,continue:!e.abort})}}),Tb=w("$ZodE164",(r,e)=>{e.pattern??(e.pattern=Dw),We.init(r,e)});function IP(r,e=null){try{let t=r.split(".");if(t.length!==3)return!1;let[n]=t;if(!n)return!1;let i=JSON.parse(atob(n));return!("typ"in i&&i?.typ!=="JWT"||!i.alg||e&&(!("alg"in i)||i.alg!==e))}catch{return!1}}var Cb=w("$ZodJWT",(r,e)=>{We.init(r,e),r._zod.check=t=>{IP(t.value,e.alg)||t.issues.push({code:"invalid_format",format:"jwt",input:t.value,inst:r,continue:!e.abort})}}),Rb=w("$ZodCustomStringFormat",(r,e)=>{We.init(r,e),r._zod.check=t=>{e.fn(t.value)||t.issues.push({code:"invalid_format",format:e.format,input:t.value,inst:r,continue:!e.abort})}}),Mg=w("$ZodNumber",(r,e)=>{he.init(r,e),r._zod.pattern=r._zod.bag.pattern??zw,r._zod.parse=(t,n)=>{if(e.coerce)try{t.value=Number(t.value)}catch{}let i=t.value;if(typeof i=="number"&&!Number.isNaN(i)&&Number.isFinite(i))return t;let o=typeof i=="number"?Number.isNaN(i)?"NaN":Number.isFinite(i)?void 0:"Infinity":void 0;return t.issues.push({expected:"number",code:"invalid_type",input:i,inst:r,...o?{received:o}:{}}),t}}),Ob=w("$ZodNumberFormat",(r,e)=>{Gw.init(r,e),Mg.init(r,e)}),Nh=w("$ZodBoolean",(r,e)=>{he.init(r,e),r._zod.pattern=Uw,r._zod.parse=(t,n)=>{if(e.coerce)try{t.value=!!t.value}catch{}let i=t.value;return typeof i=="boolean"||t.issues.push({expected:"boolean",code:"invalid_type",input:i,inst:r}),t}}),Tg=w("$ZodBigInt",(r,e)=>{he.init(r,e),r._zod.pattern=Ow,r._zod.parse=(t,n)=>{if(e.coerce)try{t.value=BigInt(t.value)}catch{}return typeof t.value=="bigint"||t.issues.push({expected:"bigint",code:"invalid_type",input:t.value,inst:r}),t}}),Vb=w("$ZodBigIntFormat",(r,e)=>{qw.init(r,e),Tg.init(r,e)}),zb=w("$ZodSymbol",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{let i=t.value;return typeof i=="symbol"||t.issues.push({expected:"symbol",code:"invalid_type",input:i,inst:r}),t}}),Ub=w("$ZodUndefined",(r,e)=>{he.init(r,e),r._zod.pattern=Lw,r._zod.values=new Set([void 0]),r._zod.optin="optional",r._zod.optout="optional",r._zod.parse=(t,n)=>{let i=t.value;return typeof i>"u"||t.issues.push({expected:"undefined",code:"invalid_type",input:i,inst:r}),t}}),jb=w("$ZodNull",(r,e)=>{he.init(r,e),r._zod.pattern=jw,r._zod.values=new Set([null]),r._zod.parse=(t,n)=>{let i=t.value;return i===null||t.issues.push({expected:"null",code:"invalid_type",input:i,inst:r}),t}}),Lb=w("$ZodAny",(r,e)=>{he.init(r,e),r._zod.parse=t=>t}),Kb=w("$ZodUnknown",(r,e)=>{he.init(r,e),r._zod.parse=t=>t}),Wb=w("$ZodNever",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:r}),t)}),Zb=w("$ZodVoid",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{let i=t.value;return typeof i>"u"||t.issues.push({expected:"void",code:"invalid_type",input:i,inst:r}),t}}),Gb=w("$ZodDate",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{if(e.coerce)try{t.value=new Date(t.value)}catch{}let i=t.value,o=i instanceof Date;return o&&!Number.isNaN(i.getTime())||t.issues.push({expected:"date",code:"invalid_type",input:i,...o?{received:"Invalid Date"}:{},inst:r}),t}});function bP(r,e,t){r.issues.length&&e.issues.push(...Lr(t,r.issues)),e.value[t]=r.value}var qb=w("$ZodArray",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{let i=t.value;if(!Array.isArray(i))return t.issues.push({expected:"array",code:"invalid_type",input:i,inst:r}),t;t.value=Array(i.length);let o=[];for(let s=0;s<i.length;s++){let a=i[s],c=e.element._zod.run({value:a,issues:[]},n);c instanceof Promise?o.push(c.then(l=>bP(l,t,s))):bP(c,t,s)}return o.length?Promise.all(o).then(()=>t):t}});function Dg(r,e,t,n){r.issues.length&&e.issues.push(...Lr(t,r.issues)),r.value===void 0?t in n&&(e.value[t]=void 0):e.value[t]=r.value}function DP(r){let e=Object.keys(r.shape);for(let n of e)if(!r.shape?.[n]?._zod?.traits?.has("$ZodType"))throw new Error(`Invalid element at key "${n}": expected a Zod schema`);let t=uw(r.shape);return{...r,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(t)}}function MP(r,e,t,n,i,o){let s=[],a=i.keySet,c=i.catchall._zod,l=c.def.type;for(let d in e){if(a.has(d))continue;if(l==="never"){s.push(d);continue}let h=c.run({value:e[d],issues:[]},n);h instanceof Promise?r.push(h.then(f=>Dg(f,t,d,e))):Dg(h,t,d,e)}return s.length&&t.issues.push({code:"unrecognized_keys",keys:s,input:e,inst:o}),r.length?Promise.all(r).then(()=>t):t}var TP=w("$ZodObject",(r,e)=>{if(he.init(r,e),!Object.getOwnPropertyDescriptor(e,"shape")?.get){let a=e.shape;Object.defineProperty(e,"shape",{get:()=>{let c={...a};return Object.defineProperty(e,"shape",{value:c}),c}})}let n=Gc(()=>DP(e));$e(r._zod,"propValues",()=>{let a=e.shape,c={};for(let l in a){let d=a[l]._zod;if(d.values){c[l]??(c[l]=new Set);for(let h of d.values)c[l].add(h)}}return c});let i=Ma,o=e.catchall,s;r._zod.parse=(a,c)=>{s??(s=n.value);let l=a.value;if(!i(l))return a.issues.push({expected:"object",code:"invalid_type",input:l,inst:r}),a;a.value={};let d=[],h=s.shape;for(let f of s.keys){let m=h[f]._zod.run({value:l[f],issues:[]},c);m instanceof Promise?d.push(m.then(y=>Dg(y,a,f,l))):Dg(m,a,f,l)}return o?MP(d,l,a,c,n.value,r):d.length?Promise.all(d).then(()=>a):a}}),Hb=w("$ZodObjectJIT",(r,e)=>{TP.init(r,e);let t=r._zod.parse,n=Gc(()=>DP(e)),i=f=>{let v=new Fh(["shape","payload","ctx"]),m=n.value,y=V=>{let K=fg(V);return`shape[${K}]._zod.run({ value: input[${K}], issues: [] }, ctx)`};v.write("const input = payload.value;");let x=Object.create(null),S=0;for(let V of m.keys)x[V]=`key_${S++}`;v.write("const newResult = {};");for(let V of m.keys){let K=x[V],G=fg(V);v.write(`const ${K} = ${y(V)};`),v.write(`
        if (${K}.issues.length) {
          payload.issues = payload.issues.concat(${K}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${G}, ...iss.path] : [${G}]
          })));
        }
        
        
        if (${K}.value === undefined) {
          if (${G} in input) {
            newResult[${G}] = undefined;
          }
        } else {
          newResult[${G}] = ${K}.value;
        }
        
      `)}v.write("payload.value = newResult;"),v.write("return payload;");let C=v.compile();return(V,K)=>C(f,V,K)},o,s=Ma,a=!mh.jitless,l=a&&aw.value,d=e.catchall,h;r._zod.parse=(f,v)=>{h??(h=n.value);let m=f.value;return s(m)?a&&l&&v?.async===!1&&v.jitless!==!0?(o||(o=i(e.shape)),f=o(f,v),d?MP([],m,f,v,h,r):f):t(f,v):(f.issues.push({expected:"object",code:"invalid_type",input:m,inst:r}),f)}});function AP(r,e,t,n){for(let o of r)if(o.issues.length===0)return e.value=o.value,e;let i=r.filter(o=>!ws(o));return i.length===1?(e.value=i[0].value,i[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:t,errors:r.map(o=>o.issues.map(s=>Kr(s,n,yt())))}),e)}var Cg=w("$ZodUnion",(r,e)=>{he.init(r,e),$e(r._zod,"optin",()=>e.options.some(i=>i._zod.optin==="optional")?"optional":void 0),$e(r._zod,"optout",()=>e.options.some(i=>i._zod.optout==="optional")?"optional":void 0),$e(r._zod,"values",()=>{if(e.options.every(i=>i._zod.values))return new Set(e.options.flatMap(i=>Array.from(i._zod.values)))}),$e(r._zod,"pattern",()=>{if(e.options.every(i=>i._zod.pattern)){let i=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${i.map(o=>yh(o.source)).join("|")})$`)}});let t=e.options.length===1,n=e.options[0]._zod.run;r._zod.parse=(i,o)=>{if(t)return n(i,o);let s=!1,a=[];for(let c of e.options){let l=c._zod.run({value:i.value,issues:[]},o);if(l instanceof Promise)a.push(l),s=!0;else{if(l.issues.length===0)return l;a.push(l)}}return s?Promise.all(a).then(c=>AP(c,i,r,o)):AP(a,i,r,o)}}),Jb=w("$ZodDiscriminatedUnion",(r,e)=>{Cg.init(r,e);let t=r._zod.parse;$e(r._zod,"propValues",()=>{let i={};for(let o of e.options){let s=o._zod.propValues;if(!s||Object.keys(s).length===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(o)}"`);for(let[a,c]of Object.entries(s)){i[a]||(i[a]=new Set);for(let l of c)i[a].add(l)}}return i});let n=Gc(()=>{let i=e.options,o=new Map;for(let s of i){let a=s._zod.propValues?.[e.discriminator];if(!a||a.size===0)throw new Error(`Invalid discriminated union option at index "${e.options.indexOf(s)}"`);for(let c of a){if(o.has(c))throw new Error(`Duplicate discriminator value "${String(c)}"`);o.set(c,s)}}return o});r._zod.parse=(i,o)=>{let s=i.value;if(!Ma(s))return i.issues.push({code:"invalid_type",expected:"object",input:s,inst:r}),i;let a=n.value.get(s?.[e.discriminator]);return a?a._zod.run(i,o):e.unionFallback?t(i,o):(i.issues.push({code:"invalid_union",errors:[],note:"No matching discriminator",discriminator:e.discriminator,input:s,path:[e.discriminator],inst:r}),i)}}),Qb=w("$ZodIntersection",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{let i=t.value,o=e.left._zod.run({value:i,issues:[]},n),s=e.right._zod.run({value:i,issues:[]},n);return o instanceof Promise||s instanceof Promise?Promise.all([o,s]).then(([c,l])=>_P(t,c,l)):_P(t,o,s)}});function db(r,e){if(r===e)return{valid:!0,data:r};if(r instanceof Date&&e instanceof Date&&+r==+e)return{valid:!0,data:r};if(xs(r)&&xs(e)){let t=Object.keys(e),n=Object.keys(r).filter(o=>t.indexOf(o)!==-1),i={...r,...e};for(let o of n){let s=db(r[o],e[o]);if(!s.valid)return{valid:!1,mergeErrorPath:[o,...s.mergeErrorPath]};i[o]=s.data}return{valid:!0,data:i}}if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return{valid:!1,mergeErrorPath:[]};let t=[];for(let n=0;n<r.length;n++){let i=r[n],o=e[n],s=db(i,o);if(!s.valid)return{valid:!1,mergeErrorPath:[n,...s.mergeErrorPath]};t.push(s.data)}return{valid:!0,data:t}}return{valid:!1,mergeErrorPath:[]}}function _P(r,e,t){if(e.issues.length&&r.issues.push(...e.issues),t.issues.length&&r.issues.push(...t.issues),ws(r))return r;let n=db(e.value,t.value);if(!n.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(n.mergeErrorPath)}`);return r.value=n.data,r}var Rg=w("$ZodTuple",(r,e)=>{he.init(r,e);let t=e.items;r._zod.parse=(n,i)=>{let o=n.value;if(!Array.isArray(o))return n.issues.push({input:o,inst:r,expected:"tuple",code:"invalid_type"}),n;n.value=[];let s=[],a=[...t].reverse().findIndex(d=>d._zod.optin!=="optional"),c=a===-1?0:t.length-a;if(!e.rest){let d=o.length>t.length,h=o.length<c-1;if(d||h)return n.issues.push({...d?{code:"too_big",maximum:t.length}:{code:"too_small",minimum:t.length},input:o,inst:r,origin:"array"}),n}let l=-1;for(let d of t){if(l++,l>=o.length&&l>=c)continue;let h=d._zod.run({value:o[l],issues:[]},i);h instanceof Promise?s.push(h.then(f=>Bg(f,n,l))):Bg(h,n,l)}if(e.rest){let d=o.slice(t.length);for(let h of d){l++;let f=e.rest._zod.run({value:h,issues:[]},i);f instanceof Promise?s.push(f.then(v=>Bg(v,n,l))):Bg(f,n,l)}}return s.length?Promise.all(s).then(()=>n):n}});function Bg(r,e,t){r.issues.length&&e.issues.push(...Lr(t,r.issues)),e.value[t]=r.value}var Yb=w("$ZodRecord",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{let i=t.value;if(!xs(i))return t.issues.push({expected:"record",code:"invalid_type",input:i,inst:r}),t;let o=[],s=e.keyType._zod.values;if(s){t.value={};let a=new Set;for(let l of s)if(typeof l=="string"||typeof l=="number"||typeof l=="symbol"){a.add(typeof l=="number"?l.toString():l);let d=e.valueType._zod.run({value:i[l],issues:[]},n);d instanceof Promise?o.push(d.then(h=>{h.issues.length&&t.issues.push(...Lr(l,h.issues)),t.value[l]=h.value})):(d.issues.length&&t.issues.push(...Lr(l,d.issues)),t.value[l]=d.value)}let c;for(let l in i)a.has(l)||(c=c??[],c.push(l));c&&c.length>0&&t.issues.push({code:"unrecognized_keys",input:i,inst:r,keys:c})}else{t.value={};for(let a of Reflect.ownKeys(i)){if(a==="__proto__")continue;let c=e.keyType._zod.run({value:a,issues:[]},n);if(c instanceof Promise)throw new Error("Async schemas not supported in object keys currently");if(c.issues.length){t.issues.push({code:"invalid_key",origin:"record",issues:c.issues.map(d=>Kr(d,n,yt())),input:a,path:[a],inst:r}),t.value[c.value]=c.value;continue}let l=e.valueType._zod.run({value:i[a],issues:[]},n);l instanceof Promise?o.push(l.then(d=>{d.issues.length&&t.issues.push(...Lr(a,d.issues)),t.value[c.value]=d.value})):(l.issues.length&&t.issues.push(...Lr(a,l.issues)),t.value[c.value]=l.value)}}return o.length?Promise.all(o).then(()=>t):t}}),Xb=w("$ZodMap",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{let i=t.value;if(!(i instanceof Map))return t.issues.push({expected:"map",code:"invalid_type",input:i,inst:r}),t;let o=[];t.value=new Map;for(let[s,a]of i){let c=e.keyType._zod.run({value:s,issues:[]},n),l=e.valueType._zod.run({value:a,issues:[]},n);c instanceof Promise||l instanceof Promise?o.push(Promise.all([c,l]).then(([d,h])=>{PP(d,h,t,s,i,r,n)})):PP(c,l,t,s,i,r,n)}return o.length?Promise.all(o).then(()=>t):t}});function PP(r,e,t,n,i,o,s){r.issues.length&&(xh.has(typeof n)?t.issues.push(...Lr(n,r.issues)):t.issues.push({code:"invalid_key",origin:"map",input:i,inst:o,issues:r.issues.map(a=>Kr(a,s,yt()))})),e.issues.length&&(xh.has(typeof n)?t.issues.push(...Lr(n,e.issues)):t.issues.push({origin:"map",code:"invalid_element",input:i,inst:o,key:n,issues:e.issues.map(a=>Kr(a,s,yt()))})),t.value.set(r.value,e.value)}var e0=w("$ZodSet",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{let i=t.value;if(!(i instanceof Set))return t.issues.push({input:i,inst:r,expected:"set",code:"invalid_type"}),t;let o=[];t.value=new Set;for(let s of i){let a=e.valueType._zod.run({value:s,issues:[]},n);a instanceof Promise?o.push(a.then(c=>EP(c,t))):EP(a,t)}return o.length?Promise.all(o).then(()=>t):t}});function EP(r,e){r.issues.length&&e.issues.push(...r.issues),e.value.add(r.value)}var t0=w("$ZodEnum",(r,e)=>{he.init(r,e);let t=vh(e.entries),n=new Set(t);r._zod.values=n,r._zod.pattern=new RegExp(`^(${t.filter(i=>xh.has(typeof i)).map(i=>typeof i=="string"?Ai(i):i.toString()).join("|")})$`),r._zod.parse=(i,o)=>{let s=i.value;return n.has(s)||i.issues.push({code:"invalid_value",values:t,input:s,inst:r}),i}}),r0=w("$ZodLiteral",(r,e)=>{if(he.init(r,e),e.values.length===0)throw new Error("Cannot create literal schema with no valid values");let t=new Set(e.values);r._zod.values=t,r._zod.pattern=new RegExp(`^(${e.values.map(n=>typeof n=="string"?Ai(n):n?Ai(n.toString()):String(n)).join("|")})$`),r._zod.parse=(n,i)=>{let o=n.value;return t.has(o)||n.issues.push({code:"invalid_value",values:e.values,input:o,inst:r}),n}}),i0=w("$ZodFile",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{let i=t.value;return i instanceof File||t.issues.push({expected:"file",code:"invalid_type",input:i,inst:r}),t}}),n0=w("$ZodTransform",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{if(n.direction==="backward")throw new ms(r.constructor.name);let i=e.transform(t.value,t);if(n.async)return(i instanceof Promise?i:Promise.resolve(i)).then(s=>(t.value=s,t));if(i instanceof Promise)throw new qi;return t.value=i,t}});function SP(r,e){return r.issues.length&&e===void 0?{issues:[],value:void 0}:r}var o0=w("$ZodOptional",(r,e)=>{he.init(r,e),r._zod.optin="optional",r._zod.optout="optional",$e(r._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),$e(r._zod,"pattern",()=>{let t=e.innerType._zod.pattern;return t?new RegExp(`^(${yh(t.source)})?$`):void 0}),r._zod.parse=(t,n)=>{if(e.innerType._zod.optin==="optional"){let i=e.innerType._zod.run(t,n);return i instanceof Promise?i.then(o=>SP(o,t.value)):SP(i,t.value)}return t.value===void 0?t:e.innerType._zod.run(t,n)}}),s0=w("$ZodNullable",(r,e)=>{he.init(r,e),$e(r._zod,"optin",()=>e.innerType._zod.optin),$e(r._zod,"optout",()=>e.innerType._zod.optout),$e(r._zod,"pattern",()=>{let t=e.innerType._zod.pattern;return t?new RegExp(`^(${yh(t.source)}|null)$`):void 0}),$e(r._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),r._zod.parse=(t,n)=>t.value===null?t:e.innerType._zod.run(t,n)}),a0=w("$ZodDefault",(r,e)=>{he.init(r,e),r._zod.optin="optional",$e(r._zod,"values",()=>e.innerType._zod.values),r._zod.parse=(t,n)=>{if(n.direction==="backward")return e.innerType._zod.run(t,n);if(t.value===void 0)return t.value=e.defaultValue,t;let i=e.innerType._zod.run(t,n);return i instanceof Promise?i.then(o=>FP(o,e)):FP(i,e)}});function FP(r,e){return r.value===void 0&&(r.value=e.defaultValue),r}var l0=w("$ZodPrefault",(r,e)=>{he.init(r,e),r._zod.optin="optional",$e(r._zod,"values",()=>e.innerType._zod.values),r._zod.parse=(t,n)=>(n.direction==="backward"||t.value===void 0&&(t.value=e.defaultValue),e.innerType._zod.run(t,n))}),c0=w("$ZodNonOptional",(r,e)=>{he.init(r,e),$e(r._zod,"values",()=>{let t=e.innerType._zod.values;return t?new Set([...t].filter(n=>n!==void 0)):void 0}),r._zod.parse=(t,n)=>{let i=e.innerType._zod.run(t,n);return i instanceof Promise?i.then(o=>NP(o,r)):NP(i,r)}});function NP(r,e){return!r.issues.length&&r.value===void 0&&r.issues.push({code:"invalid_type",expected:"nonoptional",input:r.value,inst:e}),r}var u0=w("$ZodSuccess",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>{if(n.direction==="backward")throw new ms("ZodSuccess");let i=e.innerType._zod.run(t,n);return i instanceof Promise?i.then(o=>(t.value=o.issues.length===0,t)):(t.value=i.issues.length===0,t)}}),d0=w("$ZodCatch",(r,e)=>{he.init(r,e),$e(r._zod,"optin",()=>e.innerType._zod.optin),$e(r._zod,"optout",()=>e.innerType._zod.optout),$e(r._zod,"values",()=>e.innerType._zod.values),r._zod.parse=(t,n)=>{if(n.direction==="backward")return e.innerType._zod.run(t,n);let i=e.innerType._zod.run(t,n);return i instanceof Promise?i.then(o=>(t.value=o.value,o.issues.length&&(t.value=e.catchValue({...t,error:{issues:o.issues.map(s=>Kr(s,n,yt()))},input:t.value}),t.issues=[]),t)):(t.value=i.value,i.issues.length&&(t.value=e.catchValue({...t,error:{issues:i.issues.map(o=>Kr(o,n,yt()))},input:t.value}),t.issues=[]),t)}}),h0=w("$ZodNaN",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>((typeof t.value!="number"||!Number.isNaN(t.value))&&t.issues.push({input:t.value,inst:r,expected:"nan",code:"invalid_type"}),t)}),p0=w("$ZodPipe",(r,e)=>{he.init(r,e),$e(r._zod,"values",()=>e.in._zod.values),$e(r._zod,"optin",()=>e.in._zod.optin),$e(r._zod,"optout",()=>e.out._zod.optout),$e(r._zod,"propValues",()=>e.in._zod.propValues),r._zod.parse=(t,n)=>{if(n.direction==="backward"){let o=e.out._zod.run(t,n);return o instanceof Promise?o.then(s=>$g(s,e.in,n)):$g(o,e.in,n)}let i=e.in._zod.run(t,n);return i instanceof Promise?i.then(o=>$g(o,e.out,n)):$g(i,e.out,n)}});function $g(r,e,t){return r.issues.length?(r.aborted=!0,r):e._zod.run({value:r.value,issues:r.issues},t)}var Bh=w("$ZodCodec",(r,e)=>{he.init(r,e),$e(r._zod,"values",()=>e.in._zod.values),$e(r._zod,"optin",()=>e.in._zod.optin),$e(r._zod,"optout",()=>e.out._zod.optout),$e(r._zod,"propValues",()=>e.in._zod.propValues),r._zod.parse=(t,n)=>{if((n.direction||"forward")==="forward"){let o=e.in._zod.run(t,n);return o instanceof Promise?o.then(s=>kg(s,e,n)):kg(o,e,n)}else{let o=e.out._zod.run(t,n);return o instanceof Promise?o.then(s=>kg(s,e,n)):kg(o,e,n)}}});function kg(r,e,t){if(r.issues.length)return r.aborted=!0,r;if((t.direction||"forward")==="forward"){let i=e.transform(r.value,r);return i instanceof Promise?i.then(o=>Ig(r,o,e.out,t)):Ig(r,i,e.out,t)}else{let i=e.reverseTransform(r.value,r);return i instanceof Promise?i.then(o=>Ig(r,o,e.in,t)):Ig(r,i,e.in,t)}}function Ig(r,e,t,n){return r.issues.length?(r.aborted=!0,r):t._zod.run({value:e,issues:r.issues},n)}var f0=w("$ZodReadonly",(r,e)=>{he.init(r,e),$e(r._zod,"propValues",()=>e.innerType._zod.propValues),$e(r._zod,"values",()=>e.innerType._zod.values),$e(r._zod,"optin",()=>e.innerType?._zod?.optin),$e(r._zod,"optout",()=>e.innerType?._zod?.optout),r._zod.parse=(t,n)=>{if(n.direction==="backward")return e.innerType._zod.run(t,n);let i=e.innerType._zod.run(t,n);return i instanceof Promise?i.then(BP):BP(i)}});function BP(r){return r.value=Object.freeze(r.value),r}var m0=w("$ZodTemplateLiteral",(r,e)=>{he.init(r,e);let t=[];for(let n of e.parts)if(typeof n=="object"&&n!==null){if(!n._zod.pattern)throw new Error(`Invalid template literal part, no pattern found: ${[...n._zod.traits].shift()}`);let i=n._zod.pattern instanceof RegExp?n._zod.pattern.source:n._zod.pattern;if(!i)throw new Error(`Invalid template literal part: ${n._zod.traits}`);let o=i.startsWith("^")?1:0,s=i.endsWith("$")?i.length-1:i.length;t.push(i.slice(o,s))}else if(n===null||cw.has(typeof n))t.push(Ai(`${n}`));else throw new Error(`Invalid template literal part: ${n}`);r._zod.pattern=new RegExp(`^${t.join("")}$`),r._zod.parse=(n,i)=>typeof n.value!="string"?(n.issues.push({input:n.value,inst:r,expected:"template_literal",code:"invalid_type"}),n):(r._zod.pattern.lastIndex=0,r._zod.pattern.test(n.value)||n.issues.push({input:n.value,inst:r,code:"invalid_format",format:e.format??"template_literal",pattern:r._zod.pattern.source}),n)}),g0=w("$ZodFunction",(r,e)=>(he.init(r,e),r._def=e,r._zod.def=e,r.implement=t=>{if(typeof t!="function")throw new Error("implement() must be called with a function");return function(...n){let i=r._def.input?gg(r._def.input,n):n,o=Reflect.apply(t,this,i);return r._def.output?gg(r._def.output,o):o}},r.implementAsync=t=>{if(typeof t!="function")throw new Error("implementAsync() must be called with a function");return async function(...n){let i=r._def.input?await vg(r._def.input,n):n,o=await Reflect.apply(t,this,i);return r._def.output?await vg(r._def.output,o):o}},r._zod.parse=(t,n)=>typeof t.value!="function"?(t.issues.push({code:"invalid_type",expected:"function",input:t.value,inst:r}),t):(r._def.output&&r._def.output._zod.def.type==="promise"?t.value=r.implementAsync(t.value):t.value=r.implement(t.value),t),r.input=(...t)=>{let n=r.constructor;return Array.isArray(t[0])?new n({type:"function",input:new Rg({type:"tuple",items:t[0],rest:t[1]}),output:r._def.output}):new n({type:"function",input:t[0],output:r._def.output})},r.output=t=>{let n=r.constructor;return new n({type:"function",input:r._def.input,output:t})},r)),v0=w("$ZodPromise",(r,e)=>{he.init(r,e),r._zod.parse=(t,n)=>Promise.resolve(t.value).then(i=>e.innerType._zod.run({value:i,issues:[]},n))}),y0=w("$ZodLazy",(r,e)=>{he.init(r,e),$e(r._zod,"innerType",()=>e.getter()),$e(r._zod,"pattern",()=>r._zod.innerType?._zod?.pattern),$e(r._zod,"propValues",()=>r._zod.innerType?._zod?.propValues),$e(r._zod,"optin",()=>r._zod.innerType?._zod?.optin??void 0),$e(r._zod,"optout",()=>r._zod.innerType?._zod?.optout??void 0),r._zod.parse=(t,n)=>r._zod.innerType._zod.run(t,n)}),x0=w("$ZodCustom",(r,e)=>{He.init(r,e),he.init(r,e),r._zod.parse=(t,n)=>t,r._zod.check=t=>{let n=t.value,i=e.fn(n);if(i instanceof Promise)return i.then(o=>$P(o,t,n,r));$P(i,t,n,r)}});function $P(r,e,t,n){if(!r){let i={code:"custom",input:t,inst:n,path:[...n._zod.def.path??[]],continue:!n._zod.def.abort};n._zod.def.params&&(i.params=n._zod.def.params),e.issues.push(qc(i))}}var Ih={};Ss(Ih,{ar:()=>CP,az:()=>RP,be:()=>VP,bg:()=>zP,ca:()=>UP,cs:()=>jP,da:()=>LP,de:()=>KP,en:()=>Og,eo:()=>WP,es:()=>ZP,fa:()=>GP,fi:()=>qP,fr:()=>HP,frCA:()=>JP,he:()=>QP,hu:()=>YP,id:()=>XP,is:()=>eE,it:()=>tE,ja:()=>rE,ka:()=>iE,kh:()=>nE,km:()=>Vg,ko:()=>oE,lt:()=>aE,mk:()=>lE,ms:()=>cE,nl:()=>uE,no:()=>dE,ota:()=>hE,pl:()=>fE,ps:()=>pE,pt:()=>mE,ru:()=>vE,sl:()=>yE,sv:()=>xE,ta:()=>wE,th:()=>bE,tr:()=>AE,ua:()=>_E,uk:()=>zg,ur:()=>PE,vi:()=>EE,yo:()=>NE,zhCN:()=>SE,zhTW:()=>FE});var kN=()=>{let r={string:{unit:"\u062D\u0631\u0641",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},file:{unit:"\u0628\u0627\u064A\u062A",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},array:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"},set:{unit:"\u0639\u0646\u0635\u0631",verb:"\u0623\u0646 \u064A\u062D\u0648\u064A"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0645\u062F\u062E\u0644",email:"\u0628\u0631\u064A\u062F \u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",url:"\u0631\u0627\u0628\u0637",emoji:"\u0625\u064A\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u064A\u062E \u0648\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",date:"\u062A\u0627\u0631\u064A\u062E \u0628\u0645\u0639\u064A\u0627\u0631 ISO",time:"\u0648\u0642\u062A \u0628\u0645\u0639\u064A\u0627\u0631 ISO",duration:"\u0645\u062F\u0629 \u0628\u0645\u0639\u064A\u0627\u0631 ISO",ipv4:"\u0639\u0646\u0648\u0627\u0646 IPv4",ipv6:"\u0639\u0646\u0648\u0627\u0646 IPv6",cidrv4:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv4",cidrv6:"\u0645\u062F\u0649 \u0639\u0646\u0627\u0648\u064A\u0646 \u0628\u0635\u064A\u063A\u0629 IPv6",base64:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64-encoded",base64url:"\u0646\u064E\u0635 \u0628\u062A\u0631\u0645\u064A\u0632 base64url-encoded",json_string:"\u0646\u064E\u0635 \u0639\u0644\u0649 \u0647\u064A\u0626\u0629 JSON",e164:"\u0631\u0642\u0645 \u0647\u0627\u062A\u0641 \u0628\u0645\u0639\u064A\u0627\u0631 E.164",jwt:"JWT",template_literal:"\u0645\u062F\u062E\u0644"};return i=>{switch(i.code){case"invalid_type":return`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${i.expected}\u060C \u0648\u0644\u0643\u0646 \u062A\u0645 \u0625\u062F\u062E\u0627\u0644 ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\u0645\u062F\u062E\u0644\u0627\u062A \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644\u0629: \u064A\u0641\u062A\u0631\u0636 \u0625\u062F\u062E\u0627\u0644 ${O(i.values[0])}`:`\u0627\u062E\u062A\u064A\u0627\u0631 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062A\u0648\u0642\u0639 \u0627\u0646\u062A\u0642\u0627\u0621 \u0623\u062D\u062F \u0647\u0630\u0647 \u0627\u0644\u062E\u064A\u0627\u0631\u0627\u062A: ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?` \u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${i.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631"}`:`\u0623\u0643\u0628\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0623\u0646 \u062A\u0643\u0648\u0646 ${i.origin??"\u0627\u0644\u0642\u064A\u0645\u0629"} ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${i.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${i.minimum.toString()} ${s.unit}`:`\u0623\u0635\u063A\u0631 \u0645\u0646 \u0627\u0644\u0644\u0627\u0632\u0645: \u064A\u0641\u062A\u0631\u0636 \u0644\u0640 ${i.origin} \u0623\u0646 \u064A\u0643\u0648\u0646 ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0628\u062F\u0623 \u0628\u0640 "${i.prefix}"`:o.format==="ends_with"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0646\u062A\u0647\u064A \u0628\u0640 "${o.suffix}"`:o.format==="includes"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u062A\u0636\u0645\u0651\u064E\u0646 "${o.includes}"`:o.format==="regex"?`\u0646\u064E\u0635 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0637\u0627\u0628\u0642 \u0627\u0644\u0646\u0645\u0637 ${o.pattern}`:`${n[o.format]??i.format} \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644`}case"not_multiple_of":return`\u0631\u0642\u0645 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644: \u064A\u062C\u0628 \u0623\u0646 \u064A\u0643\u0648\u0646 \u0645\u0646 \u0645\u0636\u0627\u0639\u0641\u0627\u062A ${i.divisor}`;case"unrecognized_keys":return`\u0645\u0639\u0631\u0641${i.keys.length>1?"\u0627\u062A":""} \u063A\u0631\u064A\u0628${i.keys.length>1?"\u0629":""}: ${k(i.keys,"\u060C ")}`;case"invalid_key":return`\u0645\u0639\u0631\u0641 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${i.origin}`;case"invalid_union":return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644";case"invalid_element":return`\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644 \u0641\u064A ${i.origin}`;default:return"\u0645\u062F\u062E\u0644 \u063A\u064A\u0631 \u0645\u0642\u0628\u0648\u0644"}}};function CP(){return{localeError:kN()}}var IN=()=>{let r={string:{unit:"simvol",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"element",verb:"olmal\u0131d\u0131r"},set:{unit:"element",verb:"olmal\u0131d\u0131r"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${i.expected}, daxil olan ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Yanl\u0131\u015F d\u0259y\u0259r: g\xF6zl\u0259nil\u0259n ${O(i.values[0])}`:`Yanl\u0131\u015F se\xE7im: a\u015Fa\u011F\u0131dak\u0131lardan biri olmal\u0131d\u0131r: ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${i.origin??"d\u0259y\u0259r"} ${o}${i.maximum.toString()} ${s.unit??"element"}`:`\xC7ox b\xF6y\xFCk: g\xF6zl\u0259nil\u0259n ${i.origin??"d\u0259y\u0259r"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${i.origin} ${o}${i.minimum.toString()} ${s.unit}`:`\xC7ox ki\xE7ik: g\xF6zl\u0259nil\u0259n ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Yanl\u0131\u015F m\u0259tn: "${o.prefix}" il\u0259 ba\u015Flamal\u0131d\u0131r`:o.format==="ends_with"?`Yanl\u0131\u015F m\u0259tn: "${o.suffix}" il\u0259 bitm\u0259lidir`:o.format==="includes"?`Yanl\u0131\u015F m\u0259tn: "${o.includes}" daxil olmal\u0131d\u0131r`:o.format==="regex"?`Yanl\u0131\u015F m\u0259tn: ${o.pattern} \u015Fablonuna uy\u011Fun olmal\u0131d\u0131r`:`Yanl\u0131\u015F ${n[o.format]??i.format}`}case"not_multiple_of":return`Yanl\u0131\u015F \u0259d\u0259d: ${i.divisor} il\u0259 b\xF6l\xFCn\u0259 bil\u0259n olmal\u0131d\u0131r`;case"unrecognized_keys":return`Tan\u0131nmayan a\xE7ar${i.keys.length>1?"lar":""}: ${k(i.keys,", ")}`;case"invalid_key":return`${i.origin} daxilind\u0259 yanl\u0131\u015F a\xE7ar`;case"invalid_union":return"Yanl\u0131\u015F d\u0259y\u0259r";case"invalid_element":return`${i.origin} daxilind\u0259 yanl\u0131\u015F d\u0259y\u0259r`;default:return"Yanl\u0131\u015F d\u0259y\u0259r"}}};function RP(){return{localeError:IN()}}function OP(r,e,t,n){let i=Math.abs(r),o=i%10,s=i%100;return s>=11&&s<=19?n:o===1?e:o>=2&&o<=4?t:n}var DN=()=>{let r={string:{unit:{one:"\u0441\u0456\u043C\u0432\u0430\u043B",few:"\u0441\u0456\u043C\u0432\u0430\u043B\u044B",many:"\u0441\u0456\u043C\u0432\u0430\u043B\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u044B",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u044B",many:"\u0431\u0430\u0439\u0442\u0430\u045E"},verb:"\u043C\u0435\u0446\u044C"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u043B\u0456\u043A";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0456\u045E";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0443\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0430\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0456 \u0447\u0430\u0441",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0447\u0430\u0441",duration:"ISO \u043F\u0440\u0430\u0446\u044F\u0433\u043B\u0430\u0441\u0446\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0430\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0430\u0441",cidrv4:"IPv4 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u044B\u044F\u043F\u0430\u0437\u043E\u043D",base64:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64",base64url:"\u0440\u0430\u0434\u043E\u043A \u0443 \u0444\u0430\u0440\u043C\u0430\u0446\u0435 base64url",json_string:"JSON \u0440\u0430\u0434\u043E\u043A",e164:"\u043D\u0443\u043C\u0430\u0440 E.164",jwt:"JWT",template_literal:"\u0443\u0432\u043E\u0434"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u045E\u0441\u044F ${i.expected}, \u0430\u0442\u0440\u044B\u043C\u0430\u043D\u0430 ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F ${O(i.values[0])}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0432\u0430\u0440\u044B\u044F\u043D\u0442: \u0447\u0430\u043A\u0430\u045E\u0441\u044F \u0430\u0434\u0437\u0456\u043D \u0437 ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);if(s){let a=Number(i.maximum),c=OP(a,s.unit.one,s.unit.few,s.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${s.verb} ${o}${i.maximum.toString()} ${c}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u0432\u044F\u043B\u0456\u043A\u0456: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435"} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);if(s){let a=Number(i.minimum),c=OP(a,s.unit.one,s.unit.few,s.unit.many);return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 ${s.verb} ${o}${i.minimum.toString()} ${c}`}return`\u0417\u0430\u043D\u0430\u0434\u0442\u0430 \u043C\u0430\u043B\u044B: \u0447\u0430\u043A\u0430\u043B\u0430\u0441\u044F, \u0448\u0442\u043E ${i.origin} \u043F\u0430\u0432\u0456\u043D\u043D\u0430 \u0431\u044B\u0446\u044C ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u043F\u0430\u0447\u044B\u043D\u0430\u0446\u0446\u0430 \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u0430\u043A\u0430\u043D\u0447\u0432\u0430\u0446\u0446\u0430 \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0437\u043C\u044F\u0448\u0447\u0430\u0446\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u0440\u0430\u0434\u043E\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0430\u0434\u043F\u0430\u0432\u044F\u0434\u0430\u0446\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B ${n[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043B\u0456\u043A: \u043F\u0430\u0432\u0456\u043D\u0435\u043D \u0431\u044B\u0446\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u0430\u0437\u043D\u0430\u043D\u044B ${i.keys.length>1?"\u043A\u043B\u044E\u0447\u044B":"\u043A\u043B\u044E\u0447"}: ${k(i.keys,", ")}`;case"invalid_key":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u043A\u043B\u044E\u0447 \u0443 ${i.origin}`;case"invalid_union":return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434";case"invalid_element":return`\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u0430\u0435 \u0437\u043D\u0430\u0447\u044D\u043D\u043D\u0435 \u045E ${i.origin}`;default:return"\u041D\u044F\u043F\u0440\u0430\u0432\u0456\u043B\u044C\u043D\u044B \u045E\u0432\u043E\u0434"}}};function VP(){return{localeError:DN()}}var MN=r=>{let e=typeof r;switch(e){case"number":return Number.isNaN(r)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(r))return"\u043C\u0430\u0441\u0438\u0432";if(r===null)return"null";if(Object.getPrototypeOf(r)!==Object.prototype&&r.constructor)return r.constructor.name}}return e},TN=()=>{let r={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},file:{unit:"\u0431\u0430\u0439\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430",verb:"\u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430"}};function e(n){return r[n]??null}let t={regex:"\u0432\u0445\u043E\u0434",email:"\u0438\u043C\u0435\u0439\u043B \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0436\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u043F\u0440\u043E\u0434\u044A\u043B\u0436\u0438\u0442\u0435\u043B\u043D\u043E\u0441\u0442",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"base64-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",base64url:"base64url-\u043A\u043E\u0434\u0438\u0440\u0430\u043D \u043D\u0438\u0437",json_string:"JSON \u043D\u0438\u0437",e164:"E.164 \u043D\u043E\u043C\u0435\u0440",jwt:"JWT",template_literal:"\u0432\u0445\u043E\u0434"};return n=>{switch(n.code){case"invalid_type":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${n.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D ${MN(n.input)}`;case"invalid_value":return n.values.length===1?`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434: \u043E\u0447\u0430\u043A\u0432\u0430\u043D ${O(n.values[0])}`:`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u043E\u043F\u0446\u0438\u044F: \u043E\u0447\u0430\u043A\u0432\u0430\u043D\u043E \u0435\u0434\u043D\u043E \u043E\u0442 ${k(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",o=e(n.origin);return o?`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${i}${n.maximum.toString()} ${o.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0430"}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u0433\u043E\u043B\u044F\u043C\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin??"\u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442"} \u0434\u0430 \u0431\u044A\u0434\u0435 ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=e(n.origin);return o?`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0441\u044A\u0434\u044A\u0440\u0436\u0430 ${i}${n.minimum.toString()} ${o.unit}`:`\u0422\u0432\u044A\u0440\u0434\u0435 \u043C\u0430\u043B\u043A\u043E: \u043E\u0447\u0430\u043A\u0432\u0430 \u0441\u0435 ${n.origin} \u0434\u0430 \u0431\u044A\u0434\u0435 ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;if(i.format==="starts_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u0432\u0430 \u0441 "${i.prefix}"`;if(i.format==="ends_with")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0437\u0430\u0432\u044A\u0440\u0448\u0432\u0430 \u0441 "${i.suffix}"`;if(i.format==="includes")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0432\u043A\u043B\u044E\u0447\u0432\u0430 "${i.includes}"`;if(i.format==="regex")return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043D\u0438\u0437: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0441\u044A\u0432\u043F\u0430\u0434\u0430 \u0441 ${i.pattern}`;let o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D";return i.format==="emoji"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),i.format==="datetime"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),i.format==="date"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),i.format==="time"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E"),i.format==="duration"&&(o="\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430"),`${o} ${t[i.format]??n.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u043E \u0447\u0438\u0441\u043B\u043E: \u0442\u0440\u044F\u0431\u0432\u0430 \u0434\u0430 \u0431\u044A\u0434\u0435 \u043A\u0440\u0430\u0442\u043D\u043E \u043D\u0430 ${n.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0437\u043F\u043E\u0437\u043D\u0430\u0442${n.keys.length>1?"\u0438":""} \u043A\u043B\u044E\u0447${n.keys.length>1?"\u043E\u0432\u0435":""}: ${k(n.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u043A\u043B\u044E\u0447 \u0432 ${n.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434";case"invalid_element":return`\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u043D\u0430 \u0441\u0442\u043E\u0439\u043D\u043E\u0441\u0442 \u0432 ${n.origin}`;default:return"\u041D\u0435\u0432\u0430\u043B\u0438\u0434\u0435\u043D \u0432\u0445\u043E\u0434"}}};function zP(){return{localeError:TN()}}var CN=()=>{let r={string:{unit:"car\xE0cters",verb:"contenir"},file:{unit:"bytes",verb:"contenir"},array:{unit:"elements",verb:"contenir"},set:{unit:"elements",verb:"contenir"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"entrada",email:"adre\xE7a electr\xF2nica",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i hora ISO",date:"data ISO",time:"hora ISO",duration:"durada ISO",ipv4:"adre\xE7a IPv4",ipv6:"adre\xE7a IPv6",cidrv4:"rang IPv4",cidrv6:"rang IPv6",base64:"cadena codificada en base64",base64url:"cadena codificada en base64url",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{switch(i.code){case"invalid_type":return`Tipus inv\xE0lid: s'esperava ${i.expected}, s'ha rebut ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Valor inv\xE0lid: s'esperava ${O(i.values[0])}`:`Opci\xF3 inv\xE0lida: s'esperava una de ${k(i.values," o ")}`;case"too_big":{let o=i.inclusive?"com a m\xE0xim":"menys de",s=e(i.origin);return s?`Massa gran: s'esperava que ${i.origin??"el valor"} contingu\xE9s ${o} ${i.maximum.toString()} ${s.unit??"elements"}`:`Massa gran: s'esperava que ${i.origin??"el valor"} fos ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"com a m\xEDnim":"m\xE9s de",s=e(i.origin);return s?`Massa petit: s'esperava que ${i.origin} contingu\xE9s ${o} ${i.minimum.toString()} ${s.unit}`:`Massa petit: s'esperava que ${i.origin} fos ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Format inv\xE0lid: ha de comen\xE7ar amb "${o.prefix}"`:o.format==="ends_with"?`Format inv\xE0lid: ha d'acabar amb "${o.suffix}"`:o.format==="includes"?`Format inv\xE0lid: ha d'incloure "${o.includes}"`:o.format==="regex"?`Format inv\xE0lid: ha de coincidir amb el patr\xF3 ${o.pattern}`:`Format inv\xE0lid per a ${n[o.format]??i.format}`}case"not_multiple_of":return`N\xFAmero inv\xE0lid: ha de ser m\xFAltiple de ${i.divisor}`;case"unrecognized_keys":return`Clau${i.keys.length>1?"s":""} no reconeguda${i.keys.length>1?"s":""}: ${k(i.keys,", ")}`;case"invalid_key":return`Clau inv\xE0lida a ${i.origin}`;case"invalid_union":return"Entrada inv\xE0lida";case"invalid_element":return`Element inv\xE0lid a ${i.origin}`;default:return"Entrada inv\xE0lida"}}};function UP(){return{localeError:CN()}}var RN=()=>{let r={string:{unit:"znak\u016F",verb:"m\xEDt"},file:{unit:"bajt\u016F",verb:"m\xEDt"},array:{unit:"prvk\u016F",verb:"m\xEDt"},set:{unit:"prvk\u016F",verb:"m\xEDt"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u010D\xEDslo";case"string":return"\u0159et\u011Bzec";case"boolean":return"boolean";case"bigint":return"bigint";case"function":return"funkce";case"symbol":return"symbol";case"undefined":return"undefined";case"object":{if(Array.isArray(i))return"pole";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"regul\xE1rn\xED v\xFDraz",email:"e-mailov\xE1 adresa",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"datum a \u010Das ve form\xE1tu ISO",date:"datum ve form\xE1tu ISO",time:"\u010Das ve form\xE1tu ISO",duration:"doba trv\xE1n\xED ISO",ipv4:"IPv4 adresa",ipv6:"IPv6 adresa",cidrv4:"rozsah IPv4",cidrv6:"rozsah IPv6",base64:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64",base64url:"\u0159et\u011Bzec zak\xF3dovan\xFD ve form\xE1tu base64url",json_string:"\u0159et\u011Bzec ve form\xE1tu JSON",e164:"\u010D\xEDslo E.164",jwt:"JWT",template_literal:"vstup"};return i=>{switch(i.code){case"invalid_type":return`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${i.expected}, obdr\u017Eeno ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Neplatn\xFD vstup: o\u010Dek\xE1v\xE1no ${O(i.values[0])}`:`Neplatn\xE1 mo\u017Enost: o\u010Dek\xE1v\xE1na jedna z hodnot ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${i.origin??"hodnota"} mus\xED m\xEDt ${o}${i.maximum.toString()} ${s.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 velk\xE1: ${i.origin??"hodnota"} mus\xED b\xFDt ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${i.origin??"hodnota"} mus\xED m\xEDt ${o}${i.minimum.toString()} ${s.unit??"prvk\u016F"}`:`Hodnota je p\u0159\xEDli\u0161 mal\xE1: ${i.origin??"hodnota"} mus\xED b\xFDt ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED za\u010D\xEDnat na "${o.prefix}"`:o.format==="ends_with"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED kon\u010Dit na "${o.suffix}"`:o.format==="includes"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED obsahovat "${o.includes}"`:o.format==="regex"?`Neplatn\xFD \u0159et\u011Bzec: mus\xED odpov\xEDdat vzoru ${o.pattern}`:`Neplatn\xFD form\xE1t ${n[o.format]??i.format}`}case"not_multiple_of":return`Neplatn\xE9 \u010D\xEDslo: mus\xED b\xFDt n\xE1sobkem ${i.divisor}`;case"unrecognized_keys":return`Nezn\xE1m\xE9 kl\xED\u010De: ${k(i.keys,", ")}`;case"invalid_key":return`Neplatn\xFD kl\xED\u010D v ${i.origin}`;case"invalid_union":return"Neplatn\xFD vstup";case"invalid_element":return`Neplatn\xE1 hodnota v ${i.origin}`;default:return"Neplatn\xFD vstup"}}};function jP(){return{localeError:RN()}}var ON=()=>{let r={string:{unit:"tegn",verb:"havde"},file:{unit:"bytes",verb:"havde"},array:{unit:"elementer",verb:"indeholdt"},set:{unit:"elementer",verb:"indeholdt"}},e={string:"streng",number:"tal",boolean:"boolean",array:"liste",object:"objekt",set:"s\xE6t",file:"fil"};function t(s){return r[s]??null}function n(s){return e[s]??s}let i=s=>{let a=typeof s;switch(a){case"number":return Number.isNaN(s)?"NaN":"tal";case"object":return Array.isArray(s)?"liste":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype&&s.constructor?s.constructor.name:"objekt"}return a},o={regex:"input",email:"e-mailadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkesl\xE6t",date:"ISO-dato",time:"ISO-klokkesl\xE6t",duration:"ISO-varighed",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodet streng",base64url:"base64url-kodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return s=>{switch(s.code){case"invalid_type":return`Ugyldigt input: forventede ${n(s.expected)}, fik ${n(i(s.input))}`;case"invalid_value":return s.values.length===1?`Ugyldig v\xE6rdi: forventede ${O(s.values[0])}`:`Ugyldigt valg: forventede en af f\xF8lgende ${k(s.values,"|")}`;case"too_big":{let a=s.inclusive?"<=":"<",c=t(s.origin),l=n(s.origin);return c?`For stor: forventede ${l??"value"} ${c.verb} ${a} ${s.maximum.toString()} ${c.unit??"elementer"}`:`For stor: forventede ${l??"value"} havde ${a} ${s.maximum.toString()}`}case"too_small":{let a=s.inclusive?">=":">",c=t(s.origin),l=n(s.origin);return c?`For lille: forventede ${l} ${c.verb} ${a} ${s.minimum.toString()} ${c.unit}`:`For lille: forventede ${l} havde ${a} ${s.minimum.toString()}`}case"invalid_format":{let a=s;return a.format==="starts_with"?`Ugyldig streng: skal starte med "${a.prefix}"`:a.format==="ends_with"?`Ugyldig streng: skal ende med "${a.suffix}"`:a.format==="includes"?`Ugyldig streng: skal indeholde "${a.includes}"`:a.format==="regex"?`Ugyldig streng: skal matche m\xF8nsteret ${a.pattern}`:`Ugyldig ${o[a.format]??s.format}`}case"not_multiple_of":return`Ugyldigt tal: skal v\xE6re deleligt med ${s.divisor}`;case"unrecognized_keys":return`${s.keys.length>1?"Ukendte n\xF8gler":"Ukendt n\xF8gle"}: ${k(s.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8gle i ${s.origin}`;case"invalid_union":return"Ugyldigt input: matcher ingen af de tilladte typer";case"invalid_element":return`Ugyldig v\xE6rdi i ${s.origin}`;default:return"Ugyldigt input"}}};function LP(){return{localeError:ON()}}var VN=()=>{let r={string:{unit:"Zeichen",verb:"zu haben"},file:{unit:"Bytes",verb:"zu haben"},array:{unit:"Elemente",verb:"zu haben"},set:{unit:"Elemente",verb:"zu haben"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"Zahl";case"object":{if(Array.isArray(i))return"Array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"Eingabe",email:"E-Mail-Adresse",url:"URL",emoji:"Emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-Datum und -Uhrzeit",date:"ISO-Datum",time:"ISO-Uhrzeit",duration:"ISO-Dauer",ipv4:"IPv4-Adresse",ipv6:"IPv6-Adresse",cidrv4:"IPv4-Bereich",cidrv6:"IPv6-Bereich",base64:"Base64-codierter String",base64url:"Base64-URL-codierter String",json_string:"JSON-String",e164:"E.164-Nummer",jwt:"JWT",template_literal:"Eingabe"};return i=>{switch(i.code){case"invalid_type":return`Ung\xFCltige Eingabe: erwartet ${i.expected}, erhalten ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Ung\xFCltige Eingabe: erwartet ${O(i.values[0])}`:`Ung\xFCltige Option: erwartet eine von ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Zu gro\xDF: erwartet, dass ${i.origin??"Wert"} ${o}${i.maximum.toString()} ${s.unit??"Elemente"} hat`:`Zu gro\xDF: erwartet, dass ${i.origin??"Wert"} ${o}${i.maximum.toString()} ist`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Zu klein: erwartet, dass ${i.origin} ${o}${i.minimum.toString()} ${s.unit} hat`:`Zu klein: erwartet, dass ${i.origin} ${o}${i.minimum.toString()} ist`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ung\xFCltiger String: muss mit "${o.prefix}" beginnen`:o.format==="ends_with"?`Ung\xFCltiger String: muss mit "${o.suffix}" enden`:o.format==="includes"?`Ung\xFCltiger String: muss "${o.includes}" enthalten`:o.format==="regex"?`Ung\xFCltiger String: muss dem Muster ${o.pattern} entsprechen`:`Ung\xFCltig: ${n[o.format]??i.format}`}case"not_multiple_of":return`Ung\xFCltige Zahl: muss ein Vielfaches von ${i.divisor} sein`;case"unrecognized_keys":return`${i.keys.length>1?"Unbekannte Schl\xFCssel":"Unbekannter Schl\xFCssel"}: ${k(i.keys,", ")}`;case"invalid_key":return`Ung\xFCltiger Schl\xFCssel in ${i.origin}`;case"invalid_union":return"Ung\xFCltige Eingabe";case"invalid_element":return`Ung\xFCltiger Wert in ${i.origin}`;default:return"Ung\xFCltige Eingabe"}}};function KP(){return{localeError:VN()}}var zN=r=>{let e=typeof r;switch(e){case"number":return Number.isNaN(r)?"NaN":"number";case"object":{if(Array.isArray(r))return"array";if(r===null)return"null";if(Object.getPrototypeOf(r)!==Object.prototype&&r.constructor)return r.constructor.name}}return e},UN=()=>{let r={string:{unit:"characters",verb:"to have"},file:{unit:"bytes",verb:"to have"},array:{unit:"items",verb:"to have"},set:{unit:"items",verb:"to have"}};function e(n){return r[n]??null}let t={regex:"input",email:"email address",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datetime",date:"ISO date",time:"ISO time",duration:"ISO duration",ipv4:"IPv4 address",ipv6:"IPv6 address",mac:"MAC address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded string",base64url:"base64url-encoded string",json_string:"JSON string",e164:"E.164 number",jwt:"JWT",template_literal:"input"};return n=>{switch(n.code){case"invalid_type":return`Invalid input: expected ${n.expected}, received ${zN(n.input)}`;case"invalid_value":return n.values.length===1?`Invalid input: expected ${O(n.values[0])}`:`Invalid option: expected one of ${k(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",o=e(n.origin);return o?`Too big: expected ${n.origin??"value"} to have ${i}${n.maximum.toString()} ${o.unit??"elements"}`:`Too big: expected ${n.origin??"value"} to be ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=e(n.origin);return o?`Too small: expected ${n.origin} to have ${i}${n.minimum.toString()} ${o.unit}`:`Too small: expected ${n.origin} to be ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Invalid string: must start with "${i.prefix}"`:i.format==="ends_with"?`Invalid string: must end with "${i.suffix}"`:i.format==="includes"?`Invalid string: must include "${i.includes}"`:i.format==="regex"?`Invalid string: must match pattern ${i.pattern}`:`Invalid ${t[i.format]??n.format}`}case"not_multiple_of":return`Invalid number: must be a multiple of ${n.divisor}`;case"unrecognized_keys":return`Unrecognized key${n.keys.length>1?"s":""}: ${k(n.keys,", ")}`;case"invalid_key":return`Invalid key in ${n.origin}`;case"invalid_union":return"Invalid input";case"invalid_element":return`Invalid value in ${n.origin}`;default:return"Invalid input"}}};function Og(){return{localeError:UN()}}var jN=r=>{let e=typeof r;switch(e){case"number":return Number.isNaN(r)?"NaN":"nombro";case"object":{if(Array.isArray(r))return"tabelo";if(r===null)return"senvalora";if(Object.getPrototypeOf(r)!==Object.prototype&&r.constructor)return r.constructor.name}}return e},LN=()=>{let r={string:{unit:"karaktrojn",verb:"havi"},file:{unit:"bajtojn",verb:"havi"},array:{unit:"elementojn",verb:"havi"},set:{unit:"elementojn",verb:"havi"}};function e(n){return r[n]??null}let t={regex:"enigo",email:"retadreso",url:"URL",emoji:"emo\u011Dio",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datotempo",date:"ISO-dato",time:"ISO-tempo",duration:"ISO-da\u016Dro",ipv4:"IPv4-adreso",ipv6:"IPv6-adreso",cidrv4:"IPv4-rango",cidrv6:"IPv6-rango",base64:"64-ume kodita karaktraro",base64url:"URL-64-ume kodita karaktraro",json_string:"JSON-karaktraro",e164:"E.164-nombro",jwt:"JWT",template_literal:"enigo"};return n=>{switch(n.code){case"invalid_type":return`Nevalida enigo: atendi\u011Dis ${n.expected}, ricevi\u011Dis ${jN(n.input)}`;case"invalid_value":return n.values.length===1?`Nevalida enigo: atendi\u011Dis ${O(n.values[0])}`:`Nevalida opcio: atendi\u011Dis unu el ${k(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",o=e(n.origin);return o?`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${i}${n.maximum.toString()} ${o.unit??"elementojn"}`:`Tro granda: atendi\u011Dis ke ${n.origin??"valoro"} havu ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=e(n.origin);return o?`Tro malgranda: atendi\u011Dis ke ${n.origin} havu ${i}${n.minimum.toString()} ${o.unit}`:`Tro malgranda: atendi\u011Dis ke ${n.origin} estu ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Nevalida karaktraro: devas komenci\u011Di per "${i.prefix}"`:i.format==="ends_with"?`Nevalida karaktraro: devas fini\u011Di per "${i.suffix}"`:i.format==="includes"?`Nevalida karaktraro: devas inkluzivi "${i.includes}"`:i.format==="regex"?`Nevalida karaktraro: devas kongrui kun la modelo ${i.pattern}`:`Nevalida ${t[i.format]??n.format}`}case"not_multiple_of":return`Nevalida nombro: devas esti oblo de ${n.divisor}`;case"unrecognized_keys":return`Nekonata${n.keys.length>1?"j":""} \u015Dlosilo${n.keys.length>1?"j":""}: ${k(n.keys,", ")}`;case"invalid_key":return`Nevalida \u015Dlosilo en ${n.origin}`;case"invalid_union":return"Nevalida enigo";case"invalid_element":return`Nevalida valoro en ${n.origin}`;default:return"Nevalida enigo"}}};function WP(){return{localeError:LN()}}var KN=()=>{let r={string:{unit:"caracteres",verb:"tener"},file:{unit:"bytes",verb:"tener"},array:{unit:"elementos",verb:"tener"},set:{unit:"elementos",verb:"tener"}},e={string:"texto",number:"n\xFAmero",boolean:"booleano",array:"arreglo",object:"objeto",set:"conjunto",file:"archivo",date:"fecha",bigint:"n\xFAmero grande",symbol:"s\xEDmbolo",undefined:"indefinido",null:"nulo",function:"funci\xF3n",map:"mapa",record:"registro",tuple:"tupla",enum:"enumeraci\xF3n",union:"uni\xF3n",literal:"literal",promise:"promesa",void:"vac\xEDo",never:"nunca",unknown:"desconocido",any:"cualquiera"};function t(s){return r[s]??null}function n(s){return e[s]??s}let i=s=>{let a=typeof s;switch(a){case"number":return Number.isNaN(s)?"NaN":"number";case"object":return Array.isArray(s)?"array":s===null?"null":Object.getPrototypeOf(s)!==Object.prototype?s.constructor.name:"object"}return a},o={regex:"entrada",email:"direcci\xF3n de correo electr\xF3nico",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"fecha y hora ISO",date:"fecha ISO",time:"hora ISO",duration:"duraci\xF3n ISO",ipv4:"direcci\xF3n IPv4",ipv6:"direcci\xF3n IPv6",cidrv4:"rango IPv4",cidrv6:"rango IPv6",base64:"cadena codificada en base64",base64url:"URL codificada en base64",json_string:"cadena JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return s=>{switch(s.code){case"invalid_type":return`Entrada inv\xE1lida: se esperaba ${n(s.expected)}, recibido ${n(i(s.input))}`;case"invalid_value":return s.values.length===1?`Entrada inv\xE1lida: se esperaba ${O(s.values[0])}`:`Opci\xF3n inv\xE1lida: se esperaba una de ${k(s.values,"|")}`;case"too_big":{let a=s.inclusive?"<=":"<",c=t(s.origin),l=n(s.origin);return c?`Demasiado grande: se esperaba que ${l??"valor"} tuviera ${a}${s.maximum.toString()} ${c.unit??"elementos"}`:`Demasiado grande: se esperaba que ${l??"valor"} fuera ${a}${s.maximum.toString()}`}case"too_small":{let a=s.inclusive?">=":">",c=t(s.origin),l=n(s.origin);return c?`Demasiado peque\xF1o: se esperaba que ${l} tuviera ${a}${s.minimum.toString()} ${c.unit}`:`Demasiado peque\xF1o: se esperaba que ${l} fuera ${a}${s.minimum.toString()}`}case"invalid_format":{let a=s;return a.format==="starts_with"?`Cadena inv\xE1lida: debe comenzar con "${a.prefix}"`:a.format==="ends_with"?`Cadena inv\xE1lida: debe terminar en "${a.suffix}"`:a.format==="includes"?`Cadena inv\xE1lida: debe incluir "${a.includes}"`:a.format==="regex"?`Cadena inv\xE1lida: debe coincidir con el patr\xF3n ${a.pattern}`:`Inv\xE1lido ${o[a.format]??s.format}`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: debe ser m\xFAltiplo de ${s.divisor}`;case"unrecognized_keys":return`Llave${s.keys.length>1?"s":""} desconocida${s.keys.length>1?"s":""}: ${k(s.keys,", ")}`;case"invalid_key":return`Llave inv\xE1lida en ${n(s.origin)}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido en ${n(s.origin)}`;default:return"Entrada inv\xE1lida"}}};function ZP(){return{localeError:KN()}}var WN=()=>{let r={string:{unit:"\u06A9\u0627\u0631\u0627\u06A9\u062A\u0631",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},file:{unit:"\u0628\u0627\u06CC\u062A",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},array:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"},set:{unit:"\u0622\u06CC\u062A\u0645",verb:"\u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(i))return"\u0622\u0631\u0627\u06CC\u0647";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0648\u0631\u0648\u062F\u06CC",email:"\u0622\u062F\u0631\u0633 \u0627\u06CC\u0645\u06CC\u0644",url:"URL",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u062A\u0627\u0631\u06CC\u062E \u0648 \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",date:"\u062A\u0627\u0631\u06CC\u062E \u0627\u06CC\u0632\u0648",time:"\u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",duration:"\u0645\u062F\u062A \u0632\u0645\u0627\u0646 \u0627\u06CC\u0632\u0648",ipv4:"IPv4 \u0622\u062F\u0631\u0633",ipv6:"IPv6 \u0622\u062F\u0631\u0633",cidrv4:"IPv4 \u062F\u0627\u0645\u0646\u0647",cidrv6:"IPv6 \u062F\u0627\u0645\u0646\u0647",base64:"base64-encoded \u0631\u0634\u062A\u0647",base64url:"base64url-encoded \u0631\u0634\u062A\u0647",json_string:"JSON \u0631\u0634\u062A\u0647",e164:"E.164 \u0639\u062F\u062F",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u06CC"};return i=>{switch(i.code){case"invalid_type":return`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${i.expected} \u0645\u06CC\u200C\u0628\u0648\u062F\u060C ${t(i.input)} \u062F\u0631\u06CC\u0627\u0641\u062A \u0634\u062F`;case"invalid_value":return i.values.length===1?`\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A ${O(i.values[0])} \u0645\u06CC\u200C\u0628\u0648\u062F`:`\u06AF\u0632\u06CC\u0646\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0645\u06CC\u200C\u0628\u0627\u06CC\u0633\u062A \u06CC\u06A9\u06CC \u0627\u0632 ${k(i.values,"|")} \u0645\u06CC\u200C\u0628\u0648\u062F`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${i.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631"} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u0628\u0632\u0631\u06AF: ${i.origin??"\u0645\u0642\u062F\u0627\u0631"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} \u0628\u0627\u0634\u062F`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} ${s.unit} \u0628\u0627\u0634\u062F`:`\u062E\u06CC\u0644\u06CC \u06A9\u0648\u0686\u06A9: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} \u0628\u0627\u0634\u062F`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.prefix}" \u0634\u0631\u0648\u0639 \u0634\u0648\u062F`:o.format==="ends_with"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 "${o.suffix}" \u062A\u0645\u0627\u0645 \u0634\u0648\u062F`:o.format==="includes"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0634\u0627\u0645\u0644 "${o.includes}" \u0628\u0627\u0634\u062F`:o.format==="regex"?`\u0631\u0634\u062A\u0647 \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0628\u0627 \u0627\u0644\u06AF\u0648\u06CC ${o.pattern} \u0645\u0637\u0627\u0628\u0642\u062A \u062F\u0627\u0634\u062A\u0647 \u0628\u0627\u0634\u062F`:`${n[o.format]??i.format} \u0646\u0627\u0645\u0639\u062A\u0628\u0631`}case"not_multiple_of":return`\u0639\u062F\u062F \u0646\u0627\u0645\u0639\u062A\u0628\u0631: \u0628\u0627\u06CC\u062F \u0645\u0636\u0631\u0628 ${i.divisor} \u0628\u0627\u0634\u062F`;case"unrecognized_keys":return`\u06A9\u0644\u06CC\u062F${i.keys.length>1?"\u0647\u0627\u06CC":""} \u0646\u0627\u0634\u0646\u0627\u0633: ${k(i.keys,", ")}`;case"invalid_key":return`\u06A9\u0644\u06CC\u062F \u0646\u0627\u0634\u0646\u0627\u0633 \u062F\u0631 ${i.origin}`;case"invalid_union":return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631";case"invalid_element":return`\u0645\u0642\u062F\u0627\u0631 \u0646\u0627\u0645\u0639\u062A\u0628\u0631 \u062F\u0631 ${i.origin}`;default:return"\u0648\u0631\u0648\u062F\u06CC \u0646\u0627\u0645\u0639\u062A\u0628\u0631"}}};function GP(){return{localeError:WN()}}var ZN=()=>{let r={string:{unit:"merkki\xE4",subject:"merkkijonon"},file:{unit:"tavua",subject:"tiedoston"},array:{unit:"alkiota",subject:"listan"},set:{unit:"alkiota",subject:"joukon"},number:{unit:"",subject:"luvun"},bigint:{unit:"",subject:"suuren kokonaisluvun"},int:{unit:"",subject:"kokonaisluvun"},date:{unit:"",subject:"p\xE4iv\xE4m\xE4\xE4r\xE4n"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"s\xE4\xE4nn\xF6llinen lauseke",email:"s\xE4hk\xF6postiosoite",url:"URL-osoite",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-aikaleima",date:"ISO-p\xE4iv\xE4m\xE4\xE4r\xE4",time:"ISO-aika",duration:"ISO-kesto",ipv4:"IPv4-osoite",ipv6:"IPv6-osoite",cidrv4:"IPv4-alue",cidrv6:"IPv6-alue",base64:"base64-koodattu merkkijono",base64url:"base64url-koodattu merkkijono",json_string:"JSON-merkkijono",e164:"E.164-luku",jwt:"JWT",template_literal:"templaattimerkkijono"};return i=>{switch(i.code){case"invalid_type":return`Virheellinen tyyppi: odotettiin ${i.expected}, oli ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Virheellinen sy\xF6te: t\xE4ytyy olla ${O(i.values[0])}`:`Virheellinen valinta: t\xE4ytyy olla yksi seuraavista: ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Liian suuri: ${s.subject} t\xE4ytyy olla ${o}${i.maximum.toString()} ${s.unit}`.trim():`Liian suuri: arvon t\xE4ytyy olla ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Liian pieni: ${s.subject} t\xE4ytyy olla ${o}${i.minimum.toString()} ${s.unit}`.trim():`Liian pieni: arvon t\xE4ytyy olla ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Virheellinen sy\xF6te: t\xE4ytyy alkaa "${o.prefix}"`:o.format==="ends_with"?`Virheellinen sy\xF6te: t\xE4ytyy loppua "${o.suffix}"`:o.format==="includes"?`Virheellinen sy\xF6te: t\xE4ytyy sis\xE4lt\xE4\xE4 "${o.includes}"`:o.format==="regex"?`Virheellinen sy\xF6te: t\xE4ytyy vastata s\xE4\xE4nn\xF6llist\xE4 lauseketta ${o.pattern}`:`Virheellinen ${n[o.format]??i.format}`}case"not_multiple_of":return`Virheellinen luku: t\xE4ytyy olla luvun ${i.divisor} monikerta`;case"unrecognized_keys":return`${i.keys.length>1?"Tuntemattomat avaimet":"Tuntematon avain"}: ${k(i.keys,", ")}`;case"invalid_key":return"Virheellinen avain tietueessa";case"invalid_union":return"Virheellinen unioni";case"invalid_element":return"Virheellinen arvo joukossa";default:return"Virheellinen sy\xF6te"}}};function qP(){return{localeError:ZN()}}var GN=()=>{let r={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"nombre";case"object":{if(Array.isArray(i))return"tableau";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"entr\xE9e",email:"adresse e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date et heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return i=>{switch(i.code){case"invalid_type":return`Entr\xE9e invalide : ${i.expected} attendu, ${t(i.input)} re\xE7u`;case"invalid_value":return i.values.length===1?`Entr\xE9e invalide : ${O(i.values[0])} attendu`:`Option invalide : une valeur parmi ${k(i.values,"|")} attendue`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Trop grand : ${i.origin??"valeur"} doit ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"\xE9l\xE9ment(s)"}`:`Trop grand : ${i.origin??"valeur"} doit \xEAtre ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Trop petit : ${i.origin} doit ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Trop petit : ${i.origin} doit \xEAtre ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au mod\xE8le ${o.pattern}`:`${n[o.format]??i.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${i.divisor}`;case"unrecognized_keys":return`Cl\xE9${i.keys.length>1?"s":""} non reconnue${i.keys.length>1?"s":""} : ${k(i.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${i.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${i.origin}`;default:return"Entr\xE9e invalide"}}};function HP(){return{localeError:GN()}}var qN=()=>{let r={string:{unit:"caract\xE8res",verb:"avoir"},file:{unit:"octets",verb:"avoir"},array:{unit:"\xE9l\xE9ments",verb:"avoir"},set:{unit:"\xE9l\xE9ments",verb:"avoir"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"entr\xE9e",email:"adresse courriel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"date-heure ISO",date:"date ISO",time:"heure ISO",duration:"dur\xE9e ISO",ipv4:"adresse IPv4",ipv6:"adresse IPv6",cidrv4:"plage IPv4",cidrv6:"plage IPv6",base64:"cha\xEEne encod\xE9e en base64",base64url:"cha\xEEne encod\xE9e en base64url",json_string:"cha\xEEne JSON",e164:"num\xE9ro E.164",jwt:"JWT",template_literal:"entr\xE9e"};return i=>{switch(i.code){case"invalid_type":return`Entr\xE9e invalide : attendu ${i.expected}, re\xE7u ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Entr\xE9e invalide : attendu ${O(i.values[0])}`:`Option invalide : attendu l'une des valeurs suivantes ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"\u2264":"<",s=e(i.origin);return s?`Trop grand : attendu que ${i.origin??"la valeur"} ait ${o}${i.maximum.toString()} ${s.unit}`:`Trop grand : attendu que ${i.origin??"la valeur"} soit ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"\u2265":">",s=e(i.origin);return s?`Trop petit : attendu que ${i.origin} ait ${o}${i.minimum.toString()} ${s.unit}`:`Trop petit : attendu que ${i.origin} soit ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Cha\xEEne invalide : doit commencer par "${o.prefix}"`:o.format==="ends_with"?`Cha\xEEne invalide : doit se terminer par "${o.suffix}"`:o.format==="includes"?`Cha\xEEne invalide : doit inclure "${o.includes}"`:o.format==="regex"?`Cha\xEEne invalide : doit correspondre au motif ${o.pattern}`:`${n[o.format]??i.format} invalide`}case"not_multiple_of":return`Nombre invalide : doit \xEAtre un multiple de ${i.divisor}`;case"unrecognized_keys":return`Cl\xE9${i.keys.length>1?"s":""} non reconnue${i.keys.length>1?"s":""} : ${k(i.keys,", ")}`;case"invalid_key":return`Cl\xE9 invalide dans ${i.origin}`;case"invalid_union":return"Entr\xE9e invalide";case"invalid_element":return`Valeur invalide dans ${i.origin}`;default:return"Entr\xE9e invalide"}}};function JP(){return{localeError:qN()}}var HN=()=>{let r={string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA",gender:"f"},number:{label:"\u05DE\u05E1\u05E4\u05E8",gender:"m"},boolean:{label:"\u05E2\u05E8\u05DA \u05D1\u05D5\u05DC\u05D9\u05D0\u05E0\u05D9",gender:"m"},bigint:{label:"BigInt",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA",gender:"m"},array:{label:"\u05DE\u05E2\u05E8\u05DA",gender:"m"},object:{label:"\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8",gender:"m"},null:{label:"\u05E2\u05E8\u05DA \u05E8\u05D9\u05E7 (null)",gender:"m"},undefined:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05DE\u05D5\u05D2\u05D3\u05E8 (undefined)",gender:"m"},symbol:{label:"\u05E1\u05D9\u05DE\u05D1\u05D5\u05DC (Symbol)",gender:"m"},function:{label:"\u05E4\u05D5\u05E0\u05E7\u05E6\u05D9\u05D4",gender:"f"},map:{label:"\u05DE\u05E4\u05D4 (Map)",gender:"f"},set:{label:"\u05E7\u05D1\u05D5\u05E6\u05D4 (Set)",gender:"f"},file:{label:"\u05E7\u05D5\u05D1\u05E5",gender:"m"},promise:{label:"Promise",gender:"m"},NaN:{label:"NaN",gender:"m"},unknown:{label:"\u05E2\u05E8\u05DA \u05DC\u05D0 \u05D9\u05D3\u05D5\u05E2",gender:"m"},value:{label:"\u05E2\u05E8\u05DA",gender:"m"}},e={string:{unit:"\u05EA\u05D5\u05D5\u05D9\u05DD",shortLabel:"\u05E7\u05E6\u05E8",longLabel:"\u05D0\u05E8\u05D5\u05DA"},file:{unit:"\u05D1\u05D9\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},array:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},set:{unit:"\u05E4\u05E8\u05D9\u05D8\u05D9\u05DD",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"},number:{unit:"",shortLabel:"\u05E7\u05D8\u05DF",longLabel:"\u05D2\u05D3\u05D5\u05DC"}},t=l=>l?r[l]:void 0,n=l=>{let d=t(l);return d?d.label:l??r.unknown.label},i=l=>`\u05D4${n(l)}`,o=l=>(t(l)?.gender??"m")==="f"?"\u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05D9\u05D5\u05EA":"\u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA",s=l=>l?e[l]??null:null,a=l=>{let d=typeof l;switch(d){case"number":return Number.isNaN(l)?"NaN":"number";case"object":return Array.isArray(l)?"array":l===null?"null":Object.getPrototypeOf(l)!==Object.prototype&&l.constructor?l.constructor.name:"object";default:return d}},c={regex:{label:"\u05E7\u05DC\u05D8",gender:"m"},email:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05D0\u05D9\u05DE\u05D9\u05D9\u05DC",gender:"f"},url:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA \u05E8\u05E9\u05EA",gender:"f"},emoji:{label:"\u05D0\u05D9\u05DE\u05D5\u05D2'\u05D9",gender:"m"},uuid:{label:"UUID",gender:"m"},nanoid:{label:"nanoid",gender:"m"},guid:{label:"GUID",gender:"m"},cuid:{label:"cuid",gender:"m"},cuid2:{label:"cuid2",gender:"m"},ulid:{label:"ULID",gender:"m"},xid:{label:"XID",gender:"m"},ksuid:{label:"KSUID",gender:"m"},datetime:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA \u05D5\u05D6\u05DE\u05DF ISO",gender:"m"},date:{label:"\u05EA\u05D0\u05E8\u05D9\u05DA ISO",gender:"m"},time:{label:"\u05D6\u05DE\u05DF ISO",gender:"m"},duration:{label:"\u05DE\u05E9\u05DA \u05D6\u05DE\u05DF ISO",gender:"m"},ipv4:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv4",gender:"f"},ipv6:{label:"\u05DB\u05EA\u05D5\u05D1\u05EA IPv6",gender:"f"},cidrv4:{label:"\u05D8\u05D5\u05D5\u05D7 IPv4",gender:"m"},cidrv6:{label:"\u05D8\u05D5\u05D5\u05D7 IPv6",gender:"m"},base64:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64",gender:"f"},base64url:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D1\u05D1\u05E1\u05D9\u05E1 64 \u05DC\u05DB\u05EA\u05D5\u05D1\u05D5\u05EA \u05E8\u05E9\u05EA",gender:"f"},json_string:{label:"\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA JSON",gender:"f"},e164:{label:"\u05DE\u05E1\u05E4\u05E8 E.164",gender:"m"},jwt:{label:"JWT",gender:"m"},ends_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},includes:{label:"\u05E7\u05DC\u05D8",gender:"m"},lowercase:{label:"\u05E7\u05DC\u05D8",gender:"m"},starts_with:{label:"\u05E7\u05DC\u05D8",gender:"m"},uppercase:{label:"\u05E7\u05DC\u05D8",gender:"m"}};return l=>{switch(l.code){case"invalid_type":{let d=l.expected,h=n(d),f=a(l.input),v=r[f]?.label??f;return`\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${h}, \u05D4\u05EA\u05E7\u05D1\u05DC ${v}`}case"invalid_value":{if(l.values.length===1)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05E2\u05E8\u05DA \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA ${O(l.values[0])}`;let d=l.values.map(v=>O(v));if(l.values.length===2)return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${d[0]} \u05D0\u05D5 ${d[1]}`;let h=d[d.length-1];return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D4\u05D0\u05E4\u05E9\u05E8\u05D5\u05D9\u05D5\u05EA \u05D4\u05DE\u05EA\u05D0\u05D9\u05DE\u05D5\u05EA \u05D4\u05DF ${d.slice(0,-1).join(", ")} \u05D0\u05D5 ${h}`}case"too_big":{let d=s(l.origin),h=i(l.origin??"value");if(l.origin==="string")return`${d?.longLabel??"\u05D0\u05E8\u05D5\u05DA"} \u05DE\u05D3\u05D9: ${h} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${l.maximum.toString()} ${d?.unit??""} ${l.inclusive?"\u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA":"\u05DC\u05DB\u05DC \u05D4\u05D9\u05D5\u05EA\u05E8"}`.trim();if(l.origin==="number"){let m=l.inclusive?`\u05E7\u05D8\u05DF \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${l.maximum}`:`\u05E7\u05D8\u05DF \u05DE-${l.maximum}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${h} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${m}`}if(l.origin==="array"||l.origin==="set"){let m=l.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA",y=l.inclusive?`${l.maximum} ${d?.unit??""} \u05D0\u05D5 \u05E4\u05D7\u05D5\u05EA`:`\u05E4\u05D7\u05D5\u05EA \u05DE-${l.maximum} ${d?.unit??""}`;return`\u05D2\u05D3\u05D5\u05DC \u05DE\u05D3\u05D9: ${h} ${m} \u05DC\u05D4\u05DB\u05D9\u05DC ${y}`.trim()}let f=l.inclusive?"<=":"<",v=o(l.origin??"value");return d?.unit?`${d.longLabel} \u05DE\u05D3\u05D9: ${h} ${v} ${f}${l.maximum.toString()} ${d.unit}`:`${d?.longLabel??"\u05D2\u05D3\u05D5\u05DC"} \u05DE\u05D3\u05D9: ${h} ${v} ${f}${l.maximum.toString()}`}case"too_small":{let d=s(l.origin),h=i(l.origin??"value");if(l.origin==="string")return`${d?.shortLabel??"\u05E7\u05E6\u05E8"} \u05DE\u05D3\u05D9: ${h} \u05E6\u05E8\u05D9\u05DB\u05D4 \u05DC\u05D4\u05DB\u05D9\u05DC ${l.minimum.toString()} ${d?.unit??""} ${l.inclusive?"\u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8":"\u05DC\u05E4\u05D7\u05D5\u05EA"}`.trim();if(l.origin==="number"){let m=l.inclusive?`\u05D2\u05D3\u05D5\u05DC \u05D0\u05D5 \u05E9\u05D5\u05D5\u05D4 \u05DC-${l.minimum}`:`\u05D2\u05D3\u05D5\u05DC \u05DE-${l.minimum}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${h} \u05E6\u05E8\u05D9\u05DA \u05DC\u05D4\u05D9\u05D5\u05EA ${m}`}if(l.origin==="array"||l.origin==="set"){let m=l.origin==="set"?"\u05E6\u05E8\u05D9\u05DB\u05D4":"\u05E6\u05E8\u05D9\u05DA";if(l.minimum===1&&l.inclusive){let x=(l.origin==="set","\u05DC\u05E4\u05D7\u05D5\u05EA \u05E4\u05E8\u05D9\u05D8 \u05D0\u05D7\u05D3");return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${h} ${m} \u05DC\u05D4\u05DB\u05D9\u05DC ${x}`}let y=l.inclusive?`${l.minimum} ${d?.unit??""} \u05D0\u05D5 \u05D9\u05D5\u05EA\u05E8`:`\u05D9\u05D5\u05EA\u05E8 \u05DE-${l.minimum} ${d?.unit??""}`;return`\u05E7\u05D8\u05DF \u05DE\u05D3\u05D9: ${h} ${m} \u05DC\u05D4\u05DB\u05D9\u05DC ${y}`.trim()}let f=l.inclusive?">=":">",v=o(l.origin??"value");return d?.unit?`${d.shortLabel} \u05DE\u05D3\u05D9: ${h} ${v} ${f}${l.minimum.toString()} ${d.unit}`:`${d?.shortLabel??"\u05E7\u05D8\u05DF"} \u05DE\u05D3\u05D9: ${h} ${v} ${f}${l.minimum.toString()}`}case"invalid_format":{let d=l;if(d.format==="starts_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D7\u05D9\u05DC \u05D1 "${d.prefix}"`;if(d.format==="ends_with")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05E1\u05EA\u05D9\u05D9\u05DD \u05D1 "${d.suffix}"`;if(d.format==="includes")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05DB\u05DC\u05D5\u05DC "${d.includes}"`;if(d.format==="regex")return`\u05D4\u05DE\u05D7\u05E8\u05D5\u05D6\u05EA \u05D7\u05D9\u05D9\u05D1\u05EA \u05DC\u05D4\u05EA\u05D0\u05D9\u05DD \u05DC\u05EA\u05D1\u05E0\u05D9\u05EA ${d.pattern}`;let h=c[d.format],f=h?.label??d.format,m=(h?.gender??"m")==="f"?"\u05EA\u05E7\u05D9\u05E0\u05D4":"\u05EA\u05E7\u05D9\u05DF";return`${f} \u05DC\u05D0 ${m}`}case"not_multiple_of":return`\u05DE\u05E1\u05E4\u05E8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF: \u05D7\u05D9\u05D9\u05D1 \u05DC\u05D4\u05D9\u05D5\u05EA \u05DE\u05DB\u05E4\u05DC\u05D4 \u05E9\u05DC ${l.divisor}`;case"unrecognized_keys":return`\u05DE\u05E4\u05EA\u05D7${l.keys.length>1?"\u05D5\u05EA":""} \u05DC\u05D0 \u05DE\u05D6\u05D5\u05D4${l.keys.length>1?"\u05D9\u05DD":"\u05D4"}: ${k(l.keys,", ")}`;case"invalid_key":return"\u05E9\u05D3\u05D4 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1\u05D0\u05D5\u05D1\u05D9\u05D9\u05E7\u05D8";case"invalid_union":return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF";case"invalid_element":return`\u05E2\u05E8\u05DA \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF \u05D1${i(l.origin??"array")}`;default:return"\u05E7\u05DC\u05D8 \u05DC\u05D0 \u05EA\u05E7\u05D9\u05DF"}}};function QP(){return{localeError:HN()}}var JN=()=>{let r={string:{unit:"karakter",verb:"legyen"},file:{unit:"byte",verb:"legyen"},array:{unit:"elem",verb:"legyen"},set:{unit:"elem",verb:"legyen"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"sz\xE1m";case"object":{if(Array.isArray(i))return"t\xF6mb";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"bemenet",email:"email c\xEDm",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO id\u0151b\xE9lyeg",date:"ISO d\xE1tum",time:"ISO id\u0151",duration:"ISO id\u0151intervallum",ipv4:"IPv4 c\xEDm",ipv6:"IPv6 c\xEDm",cidrv4:"IPv4 tartom\xE1ny",cidrv6:"IPv6 tartom\xE1ny",base64:"base64-k\xF3dolt string",base64url:"base64url-k\xF3dolt string",json_string:"JSON string",e164:"E.164 sz\xE1m",jwt:"JWT",template_literal:"bemenet"};return i=>{switch(i.code){case"invalid_type":return`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${i.expected}, a kapott \xE9rt\xE9k ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\xC9rv\xE9nytelen bemenet: a v\xE1rt \xE9rt\xE9k ${O(i.values[0])}`:`\xC9rv\xE9nytelen opci\xF3: valamelyik \xE9rt\xE9k v\xE1rt ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`T\xFAl nagy: ${i.origin??"\xE9rt\xE9k"} m\xE9rete t\xFAl nagy ${o}${i.maximum.toString()} ${s.unit??"elem"}`:`T\xFAl nagy: a bemeneti \xE9rt\xE9k ${i.origin??"\xE9rt\xE9k"} t\xFAl nagy: ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${i.origin} m\xE9rete t\xFAl kicsi ${o}${i.minimum.toString()} ${s.unit}`:`T\xFAl kicsi: a bemeneti \xE9rt\xE9k ${i.origin} t\xFAl kicsi ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\xC9rv\xE9nytelen string: "${o.prefix}" \xE9rt\xE9kkel kell kezd\u0151dnie`:o.format==="ends_with"?`\xC9rv\xE9nytelen string: "${o.suffix}" \xE9rt\xE9kkel kell v\xE9gz\u0151dnie`:o.format==="includes"?`\xC9rv\xE9nytelen string: "${o.includes}" \xE9rt\xE9ket kell tartalmaznia`:o.format==="regex"?`\xC9rv\xE9nytelen string: ${o.pattern} mint\xE1nak kell megfelelnie`:`\xC9rv\xE9nytelen ${n[o.format]??i.format}`}case"not_multiple_of":return`\xC9rv\xE9nytelen sz\xE1m: ${i.divisor} t\xF6bbsz\xF6r\xF6s\xE9nek kell lennie`;case"unrecognized_keys":return`Ismeretlen kulcs${i.keys.length>1?"s":""}: ${k(i.keys,", ")}`;case"invalid_key":return`\xC9rv\xE9nytelen kulcs ${i.origin}`;case"invalid_union":return"\xC9rv\xE9nytelen bemenet";case"invalid_element":return`\xC9rv\xE9nytelen \xE9rt\xE9k: ${i.origin}`;default:return"\xC9rv\xE9nytelen bemenet"}}};function YP(){return{localeError:JN()}}var QN=()=>{let r={string:{unit:"karakter",verb:"memiliki"},file:{unit:"byte",verb:"memiliki"},array:{unit:"item",verb:"memiliki"},set:{unit:"item",verb:"memiliki"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"alamat email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tanggal dan waktu format ISO",date:"tanggal format ISO",time:"jam format ISO",duration:"durasi format ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"rentang alamat IPv4",cidrv6:"rentang alamat IPv6",base64:"string dengan enkode base64",base64url:"string dengan enkode base64url",json_string:"string JSON",e164:"angka E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input tidak valid: diharapkan ${i.expected}, diterima ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Input tidak valid: diharapkan ${O(i.values[0])}`:`Pilihan tidak valid: diharapkan salah satu dari ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Terlalu besar: diharapkan ${i.origin??"value"} memiliki ${o}${i.maximum.toString()} ${s.unit??"elemen"}`:`Terlalu besar: diharapkan ${i.origin??"value"} menjadi ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Terlalu kecil: diharapkan ${i.origin} memiliki ${o}${i.minimum.toString()} ${s.unit}`:`Terlalu kecil: diharapkan ${i.origin} menjadi ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`String tidak valid: harus dimulai dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak valid: harus berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak valid: harus menyertakan "${o.includes}"`:o.format==="regex"?`String tidak valid: harus sesuai pola ${o.pattern}`:`${n[o.format]??i.format} tidak valid`}case"not_multiple_of":return`Angka tidak valid: harus kelipatan dari ${i.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali ${i.keys.length>1?"s":""}: ${k(i.keys,", ")}`;case"invalid_key":return`Kunci tidak valid di ${i.origin}`;case"invalid_union":return"Input tidak valid";case"invalid_element":return`Nilai tidak valid di ${i.origin}`;default:return"Input tidak valid"}}};function XP(){return{localeError:QN()}}var YN=r=>{let e=typeof r;switch(e){case"number":return Number.isNaN(r)?"NaN":"n\xFAmer";case"object":{if(Array.isArray(r))return"fylki";if(r===null)return"null";if(Object.getPrototypeOf(r)!==Object.prototype&&r.constructor)return r.constructor.name}}return e},XN=()=>{let r={string:{unit:"stafi",verb:"a\xF0 hafa"},file:{unit:"b\xE6ti",verb:"a\xF0 hafa"},array:{unit:"hluti",verb:"a\xF0 hafa"},set:{unit:"hluti",verb:"a\xF0 hafa"}};function e(n){return r[n]??null}let t={regex:"gildi",email:"netfang",url:"vefsl\xF3\xF0",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dagsetning og t\xEDmi",date:"ISO dagsetning",time:"ISO t\xEDmi",duration:"ISO t\xEDmalengd",ipv4:"IPv4 address",ipv6:"IPv6 address",cidrv4:"IPv4 range",cidrv6:"IPv6 range",base64:"base64-encoded strengur",base64url:"base64url-encoded strengur",json_string:"JSON strengur",e164:"E.164 t\xF6lugildi",jwt:"JWT",template_literal:"gildi"};return n=>{switch(n.code){case"invalid_type":return`Rangt gildi: \xDE\xFA sl\xF3st inn ${YN(n.input)} \xFEar sem \xE1 a\xF0 vera ${n.expected}`;case"invalid_value":return n.values.length===1?`Rangt gildi: gert r\xE1\xF0 fyrir ${O(n.values[0])}`:`\xD3gilt val: m\xE1 vera eitt af eftirfarandi ${k(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",o=e(n.origin);return o?`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} hafi ${i}${n.maximum.toString()} ${o.unit??"hluti"}`:`Of st\xF3rt: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin??"gildi"} s\xE9 ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=e(n.origin);return o?`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} hafi ${i}${n.minimum.toString()} ${o.unit}`:`Of l\xEDti\xF0: gert er r\xE1\xF0 fyrir a\xF0 ${n.origin} s\xE9 ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 byrja \xE1 "${i.prefix}"`:i.format==="ends_with"?`\xD3gildur strengur: ver\xF0ur a\xF0 enda \xE1 "${i.suffix}"`:i.format==="includes"?`\xD3gildur strengur: ver\xF0ur a\xF0 innihalda "${i.includes}"`:i.format==="regex"?`\xD3gildur strengur: ver\xF0ur a\xF0 fylgja mynstri ${i.pattern}`:`Rangt ${t[i.format]??n.format}`}case"not_multiple_of":return`R\xF6ng tala: ver\xF0ur a\xF0 vera margfeldi af ${n.divisor}`;case"unrecognized_keys":return`\xD3\xFEekkt ${n.keys.length>1?"ir lyklar":"ur lykill"}: ${k(n.keys,", ")}`;case"invalid_key":return`Rangur lykill \xED ${n.origin}`;case"invalid_union":return"Rangt gildi";case"invalid_element":return`Rangt gildi \xED ${n.origin}`;default:return"Rangt gildi"}}};function eE(){return{localeError:XN()}}var eB=()=>{let r={string:{unit:"caratteri",verb:"avere"},file:{unit:"byte",verb:"avere"},array:{unit:"elementi",verb:"avere"},set:{unit:"elementi",verb:"avere"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"numero";case"object":{if(Array.isArray(i))return"vettore";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"indirizzo email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e ora ISO",date:"data ISO",time:"ora ISO",duration:"durata ISO",ipv4:"indirizzo IPv4",ipv6:"indirizzo IPv6",cidrv4:"intervallo IPv4",cidrv6:"intervallo IPv6",base64:"stringa codificata in base64",base64url:"URL codificata in base64",json_string:"stringa JSON",e164:"numero E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input non valido: atteso ${i.expected}, ricevuto ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Input non valido: atteso ${O(i.values[0])}`:`Opzione non valida: atteso uno tra ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Troppo grande: ${i.origin??"valore"} deve avere ${o}${i.maximum.toString()} ${s.unit??"elementi"}`:`Troppo grande: ${i.origin??"valore"} deve essere ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Troppo piccolo: ${i.origin} deve avere ${o}${i.minimum.toString()} ${s.unit}`:`Troppo piccolo: ${i.origin} deve essere ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Stringa non valida: deve iniziare con "${o.prefix}"`:o.format==="ends_with"?`Stringa non valida: deve terminare con "${o.suffix}"`:o.format==="includes"?`Stringa non valida: deve includere "${o.includes}"`:o.format==="regex"?`Stringa non valida: deve corrispondere al pattern ${o.pattern}`:`Invalid ${n[o.format]??i.format}`}case"not_multiple_of":return`Numero non valido: deve essere un multiplo di ${i.divisor}`;case"unrecognized_keys":return`Chiav${i.keys.length>1?"i":"e"} non riconosciut${i.keys.length>1?"e":"a"}: ${k(i.keys,", ")}`;case"invalid_key":return`Chiave non valida in ${i.origin}`;case"invalid_union":return"Input non valido";case"invalid_element":return`Valore non valido in ${i.origin}`;default:return"Input non valido"}}};function tE(){return{localeError:eB()}}var tB=()=>{let r={string:{unit:"\u6587\u5B57",verb:"\u3067\u3042\u308B"},file:{unit:"\u30D0\u30A4\u30C8",verb:"\u3067\u3042\u308B"},array:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"},set:{unit:"\u8981\u7D20",verb:"\u3067\u3042\u308B"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u6570\u5024";case"object":{if(Array.isArray(i))return"\u914D\u5217";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u5165\u529B\u5024",email:"\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9",url:"URL",emoji:"\u7D75\u6587\u5B57",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u6642",date:"ISO\u65E5\u4ED8",time:"ISO\u6642\u523B",duration:"ISO\u671F\u9593",ipv4:"IPv4\u30A2\u30C9\u30EC\u30B9",ipv6:"IPv6\u30A2\u30C9\u30EC\u30B9",cidrv4:"IPv4\u7BC4\u56F2",cidrv6:"IPv6\u7BC4\u56F2",base64:"base64\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",base64url:"base64url\u30A8\u30F3\u30B3\u30FC\u30C9\u6587\u5B57\u5217",json_string:"JSON\u6587\u5B57\u5217",e164:"E.164\u756A\u53F7",jwt:"JWT",template_literal:"\u5165\u529B\u5024"};return i=>{switch(i.code){case"invalid_type":return`\u7121\u52B9\u306A\u5165\u529B: ${i.expected}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F\u304C\u3001${t(i.input)}\u304C\u5165\u529B\u3055\u308C\u307E\u3057\u305F`;case"invalid_value":return i.values.length===1?`\u7121\u52B9\u306A\u5165\u529B: ${O(i.values[0])}\u304C\u671F\u5F85\u3055\u308C\u307E\u3057\u305F`:`\u7121\u52B9\u306A\u9078\u629E: ${k(i.values,"\u3001")}\u306E\u3044\u305A\u308C\u304B\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"too_big":{let o=i.inclusive?"\u4EE5\u4E0B\u3067\u3042\u308B":"\u3088\u308A\u5C0F\u3055\u3044",s=e(i.origin);return s?`\u5927\u304D\u3059\u304E\u308B\u5024: ${i.origin??"\u5024"}\u306F${i.maximum.toString()}${s.unit??"\u8981\u7D20"}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5927\u304D\u3059\u304E\u308B\u5024: ${i.origin??"\u5024"}\u306F${i.maximum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"too_small":{let o=i.inclusive?"\u4EE5\u4E0A\u3067\u3042\u308B":"\u3088\u308A\u5927\u304D\u3044",s=e(i.origin);return s?`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${i.origin}\u306F${i.minimum.toString()}${s.unit}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u5C0F\u3055\u3059\u304E\u308B\u5024: ${i.origin}\u306F${i.minimum.toString()}${o}\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.prefix}"\u3067\u59CB\u307E\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="ends_with"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.suffix}"\u3067\u7D42\u308F\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="includes"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: "${o.includes}"\u3092\u542B\u3080\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:o.format==="regex"?`\u7121\u52B9\u306A\u6587\u5B57\u5217: \u30D1\u30BF\u30FC\u30F3${o.pattern}\u306B\u4E00\u81F4\u3059\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`:`\u7121\u52B9\u306A${n[o.format]??i.format}`}case"not_multiple_of":return`\u7121\u52B9\u306A\u6570\u5024: ${i.divisor}\u306E\u500D\u6570\u3067\u3042\u308B\u5FC5\u8981\u304C\u3042\u308A\u307E\u3059`;case"unrecognized_keys":return`\u8A8D\u8B58\u3055\u308C\u3066\u3044\u306A\u3044\u30AD\u30FC${i.keys.length>1?"\u7FA4":""}: ${k(i.keys,"\u3001")}`;case"invalid_key":return`${i.origin}\u5185\u306E\u7121\u52B9\u306A\u30AD\u30FC`;case"invalid_union":return"\u7121\u52B9\u306A\u5165\u529B";case"invalid_element":return`${i.origin}\u5185\u306E\u7121\u52B9\u306A\u5024`;default:return"\u7121\u52B9\u306A\u5165\u529B"}}};function rE(){return{localeError:tB()}}var rB=r=>{let e=typeof r;switch(e){case"number":return Number.isNaN(r)?"NaN":"\u10E0\u10D8\u10EA\u10EE\u10D5\u10D8";case"object":{if(Array.isArray(r))return"\u10DB\u10D0\u10E1\u10D8\u10D5\u10D8";if(r===null)return"null";if(Object.getPrototypeOf(r)!==Object.prototype&&r.constructor)return r.constructor.name}}return{string:"\u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",boolean:"\u10D1\u10E3\u10DA\u10D4\u10D0\u10DC\u10D8",undefined:"undefined",bigint:"bigint",symbol:"symbol",function:"\u10E4\u10E3\u10DC\u10E5\u10EA\u10D8\u10D0"}[e]??e},iB=()=>{let r={string:{unit:"\u10E1\u10D8\u10DB\u10D1\u10DD\u10DA\u10DD",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},file:{unit:"\u10D1\u10D0\u10D8\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},array:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"},set:{unit:"\u10D4\u10DA\u10D4\u10DB\u10D4\u10DC\u10E2\u10D8",verb:"\u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1"}};function e(n){return r[n]??null}let t={regex:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0",email:"\u10D4\u10DA-\u10E4\u10DD\u10E1\u10E2\u10D8\u10E1 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",url:"URL",emoji:"\u10D4\u10DB\u10DD\u10EF\u10D8",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8-\u10D3\u10E0\u10DD",date:"\u10D7\u10D0\u10E0\u10D8\u10E6\u10D8",time:"\u10D3\u10E0\u10DD",duration:"\u10EE\u10D0\u10DC\u10D2\u10E0\u10EB\u10DA\u10D8\u10D5\u10DD\u10D1\u10D0",ipv4:"IPv4 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",ipv6:"IPv6 \u10DB\u10D8\u10E1\u10D0\u10DB\u10D0\u10E0\u10D7\u10D8",cidrv4:"IPv4 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",cidrv6:"IPv6 \u10D3\u10D8\u10D0\u10DE\u10D0\u10D6\u10DD\u10DC\u10D8",base64:"base64-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",base64url:"base64url-\u10D9\u10DD\u10D3\u10D8\u10E0\u10D4\u10D1\u10E3\u10DA\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",json_string:"JSON \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8",e164:"E.164 \u10DC\u10DD\u10DB\u10D4\u10E0\u10D8",jwt:"JWT",template_literal:"\u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"};return n=>{switch(n.code){case"invalid_type":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.expected}, \u10DB\u10D8\u10E6\u10D4\u10D1\u10E3\u10DA\u10D8 ${rB(n.input)}`;case"invalid_value":return n.values.length===1?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${O(n.values[0])}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D5\u10D0\u10E0\u10D8\u10D0\u10DC\u10E2\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8\u10D0 \u10D4\u10E0\u10D7-\u10D4\u10E0\u10D7\u10D8 ${k(n.values,"|")}-\u10D3\u10D0\u10DC`;case"too_big":{let i=n.inclusive?"<=":"<",o=e(n.origin);return o?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} ${o.verb} ${i}${n.maximum.toString()} ${o.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10D3\u10D8\u10D3\u10D8: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin??"\u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0"} \u10D8\u10E7\u10DD\u10E1 ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=e(n.origin);return o?`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} ${o.verb} ${i}${n.minimum.toString()} ${o.unit}`:`\u10D6\u10D4\u10D3\u10DB\u10D4\u10E2\u10D0\u10D3 \u10DE\u10D0\u10E2\u10D0\u10E0\u10D0: \u10DB\u10DD\u10E1\u10D0\u10DA\u10DD\u10D3\u10DC\u10D4\u10DA\u10D8 ${n.origin} \u10D8\u10E7\u10DD\u10E1 ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10EC\u10E7\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${i.prefix}"-\u10D8\u10D7`:i.format==="ends_with"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10DB\u10D7\u10D0\u10D5\u10E0\u10D3\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 "${i.suffix}"-\u10D8\u10D7`:i.format==="includes"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D8\u10EA\u10D0\u10D5\u10D3\u10D4\u10E1 "${i.includes}"-\u10E1`:i.format==="regex"?`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E1\u10E2\u10E0\u10D8\u10DC\u10D2\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10E8\u10D4\u10D4\u10E1\u10D0\u10D1\u10D0\u10DB\u10D4\u10D1\u10DD\u10D3\u10D4\u10E1 \u10E8\u10D0\u10D1\u10DA\u10DD\u10DC\u10E1 ${i.pattern}`:`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 ${t[i.format]??n.format}`}case"not_multiple_of":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E0\u10D8\u10EA\u10EE\u10D5\u10D8: \u10E3\u10DC\u10D3\u10D0 \u10D8\u10E7\u10DD\u10E1 ${n.divisor}-\u10D8\u10E1 \u10EF\u10D4\u10E0\u10D0\u10D3\u10D8`;case"unrecognized_keys":return`\u10E3\u10EA\u10DC\u10DD\u10D1\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1${n.keys.length>1?"\u10D4\u10D1\u10D8":"\u10D8"}: ${k(n.keys,", ")}`;case"invalid_key":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10D2\u10D0\u10E1\u10D0\u10E6\u10D4\u10D1\u10D8 ${n.origin}-\u10E8\u10D8`;case"invalid_union":return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0";case"invalid_element":return`\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10DB\u10DC\u10D8\u10E8\u10D5\u10DC\u10D4\u10DA\u10DD\u10D1\u10D0 ${n.origin}-\u10E8\u10D8`;default:return"\u10D0\u10E0\u10D0\u10E1\u10EC\u10DD\u10E0\u10D8 \u10E8\u10D4\u10E7\u10D5\u10D0\u10DC\u10D0"}}};function iE(){return{localeError:iB()}}var nB=()=>{let r={string:{unit:"\u178F\u17BD\u17A2\u1780\u17D2\u179F\u179A",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},file:{unit:"\u1794\u17C3",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},array:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"},set:{unit:"\u1792\u17B6\u178F\u17BB",verb:"\u1782\u17BD\u179A\u1798\u17B6\u1793"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u1798\u17B7\u1793\u1798\u17C2\u1793\u1787\u17B6\u179B\u17C1\u1781 (NaN)":"\u179B\u17C1\u1781";case"object":{if(Array.isArray(i))return"\u17A2\u17B6\u179A\u17C1 (Array)";if(i===null)return"\u1782\u17D2\u1798\u17B6\u1793\u178F\u1798\u17D2\u179B\u17C3 (null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B",email:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793\u17A2\u17CA\u17B8\u1798\u17C2\u179B",url:"URL",emoji:"\u179F\u1789\u17D2\u1789\u17B6\u17A2\u17B6\u179A\u1798\u17D2\u1798\u178E\u17CD",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 \u1793\u17B7\u1784\u1798\u17C9\u17C4\u1784 ISO",date:"\u1780\u17B6\u179B\u1794\u179A\u17B7\u1785\u17D2\u1786\u17C1\u1791 ISO",time:"\u1798\u17C9\u17C4\u1784 ISO",duration:"\u179A\u1799\u17C8\u1796\u17C1\u179B ISO",ipv4:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",ipv6:"\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",cidrv4:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv4",cidrv6:"\u178A\u17C2\u1793\u17A2\u17B6\u179F\u1799\u178A\u17D2\u178B\u17B6\u1793 IPv6",base64:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64",base64url:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u17A2\u17CA\u17B7\u1780\u17BC\u178A base64url",json_string:"\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A JSON",e164:"\u179B\u17C1\u1781 E.164",jwt:"JWT",template_literal:"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B"};return i=>{switch(i.code){case"invalid_type":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.expected} \u1794\u17C9\u17BB\u1793\u17D2\u178F\u17C2\u1791\u1791\u17BD\u179B\u1794\u17B6\u1793 ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1794\u1789\u17D2\u1785\u17BC\u179B\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${O(i.values[0])}`:`\u1787\u1798\u17D2\u179A\u17BE\u179F\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1787\u17B6\u1798\u17BD\u1799\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798 ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${i.maximum.toString()} ${s.unit??"\u1792\u17B6\u178F\u17BB"}`:`\u1792\u17C6\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin??"\u178F\u1798\u17D2\u179B\u17C3"} ${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin} ${o} ${i.minimum.toString()} ${s.unit}`:`\u178F\u17BC\u1785\u1796\u17C1\u1780\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1780\u17B6\u179A ${i.origin} ${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1785\u17B6\u1794\u17CB\u1795\u17D2\u178F\u17BE\u1798\u178A\u17C4\u1799 "${o.prefix}"`:o.format==="ends_with"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1794\u1789\u17D2\u1785\u1794\u17CB\u178A\u17C4\u1799 "${o.suffix}"`:o.format==="includes"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u1798\u17B6\u1793 "${o.includes}"`:o.format==="regex"?`\u1781\u17D2\u179F\u17C2\u17A2\u1780\u17D2\u179F\u179A\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1795\u17D2\u1782\u17BC\u1795\u17D2\u1782\u1784\u1793\u17B9\u1784\u1791\u1798\u17D2\u179A\u1784\u17CB\u178A\u17C2\u179B\u1794\u17B6\u1793\u1780\u17C6\u178E\u178F\u17CB ${o.pattern}`:`\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u179B\u17C1\u1781\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u17D6 \u178F\u17D2\u179A\u17BC\u179C\u178F\u17C2\u1787\u17B6\u1796\u17A0\u17BB\u1782\u17BB\u178E\u1793\u17C3 ${i.divisor}`;case"unrecognized_keys":return`\u179A\u1780\u1783\u17BE\u1789\u179F\u17C4\u1798\u17B7\u1793\u179F\u17D2\u1782\u17B6\u179B\u17CB\u17D6 ${k(i.keys,", ")}`;case"invalid_key":return`\u179F\u17C4\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${i.origin}`;case"invalid_union":return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C";case"invalid_element":return`\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784 ${i.origin}`;default:return"\u1791\u17B7\u1793\u17D2\u1793\u1793\u17D0\u1799\u1798\u17B7\u1793\u178F\u17D2\u179A\u17B9\u1798\u178F\u17D2\u179A\u17BC\u179C"}}};function Vg(){return{localeError:nB()}}function nE(){return Vg()}var oB=()=>{let r={string:{unit:"\uBB38\uC790",verb:"to have"},file:{unit:"\uBC14\uC774\uD2B8",verb:"to have"},array:{unit:"\uAC1C",verb:"to have"},set:{unit:"\uAC1C",verb:"to have"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\uC785\uB825",email:"\uC774\uBA54\uC77C \uC8FC\uC18C",url:"URL",emoji:"\uC774\uBAA8\uC9C0",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \uB0A0\uC9DC\uC2DC\uAC04",date:"ISO \uB0A0\uC9DC",time:"ISO \uC2DC\uAC04",duration:"ISO \uAE30\uAC04",ipv4:"IPv4 \uC8FC\uC18C",ipv6:"IPv6 \uC8FC\uC18C",cidrv4:"IPv4 \uBC94\uC704",cidrv6:"IPv6 \uBC94\uC704",base64:"base64 \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",base64url:"base64url \uC778\uCF54\uB529 \uBB38\uC790\uC5F4",json_string:"JSON \uBB38\uC790\uC5F4",e164:"E.164 \uBC88\uD638",jwt:"JWT",template_literal:"\uC785\uB825"};return i=>{switch(i.code){case"invalid_type":return`\uC798\uBABB\uB41C \uC785\uB825: \uC608\uC0C1 \uD0C0\uC785\uC740 ${i.expected}, \uBC1B\uC740 \uD0C0\uC785\uC740 ${t(i.input)}\uC785\uB2C8\uB2E4`;case"invalid_value":return i.values.length===1?`\uC798\uBABB\uB41C \uC785\uB825: \uAC12\uC740 ${O(i.values[0])} \uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C \uC635\uC158: ${k(i.values,"\uB610\uB294 ")} \uC911 \uD558\uB098\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"too_big":{let o=i.inclusive?"\uC774\uD558":"\uBBF8\uB9CC",s=o==="\uBBF8\uB9CC"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",a=e(i.origin),c=a?.unit??"\uC694\uC18C";return a?`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${i.maximum.toString()}${c} ${o}${s}`:`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uD07D\uB2C8\uB2E4: ${i.maximum.toString()} ${o}${s}`}case"too_small":{let o=i.inclusive?"\uC774\uC0C1":"\uCD08\uACFC",s=o==="\uC774\uC0C1"?"\uC774\uC5B4\uC57C \uD569\uB2C8\uB2E4":"\uC5EC\uC57C \uD569\uB2C8\uB2E4",a=e(i.origin),c=a?.unit??"\uC694\uC18C";return a?`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${i.minimum.toString()}${c} ${o}${s}`:`${i.origin??"\uAC12"}\uC774 \uB108\uBB34 \uC791\uC2B5\uB2C8\uB2E4: ${i.minimum.toString()} ${o}${s}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.prefix}"(\uC73C)\uB85C \uC2DC\uC791\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="ends_with"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.suffix}"(\uC73C)\uB85C \uB05D\uB098\uC57C \uD569\uB2C8\uB2E4`:o.format==="includes"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: "${o.includes}"\uC744(\uB97C) \uD3EC\uD568\uD574\uC57C \uD569\uB2C8\uB2E4`:o.format==="regex"?`\uC798\uBABB\uB41C \uBB38\uC790\uC5F4: \uC815\uADDC\uC2DD ${o.pattern} \uD328\uD134\uACFC \uC77C\uCE58\uD574\uC57C \uD569\uB2C8\uB2E4`:`\uC798\uBABB\uB41C ${n[o.format]??i.format}`}case"not_multiple_of":return`\uC798\uBABB\uB41C \uC22B\uC790: ${i.divisor}\uC758 \uBC30\uC218\uC5EC\uC57C \uD569\uB2C8\uB2E4`;case"unrecognized_keys":return`\uC778\uC2DD\uD560 \uC218 \uC5C6\uB294 \uD0A4: ${k(i.keys,", ")}`;case"invalid_key":return`\uC798\uBABB\uB41C \uD0A4: ${i.origin}`;case"invalid_union":return"\uC798\uBABB\uB41C \uC785\uB825";case"invalid_element":return`\uC798\uBABB\uB41C \uAC12: ${i.origin}`;default:return"\uC798\uBABB\uB41C \uC785\uB825"}}};function oE(){return{localeError:oB()}}var sB=r=>kh(typeof r,r),kh=(r,e=void 0)=>{switch(r){case"number":return Number.isNaN(e)?"NaN":"skai\u010Dius";case"bigint":return"sveikasis skai\u010Dius";case"string":return"eilut\u0117";case"boolean":return"login\u0117 reik\u0161m\u0117";case"undefined":case"void":return"neapibr\u0117\u017Eta reik\u0161m\u0117";case"function":return"funkcija";case"symbol":return"simbolis";case"object":return e===void 0?"ne\u017Einomas objektas":e===null?"nulin\u0117 reik\u0161m\u0117":Array.isArray(e)?"masyvas":Object.getPrototypeOf(e)!==Object.prototype&&e.constructor?e.constructor.name:"objektas";case"null":return"nulin\u0117 reik\u0161m\u0117"}return r},$h=r=>r.charAt(0).toUpperCase()+r.slice(1);function sE(r){let e=Math.abs(r),t=e%10,n=e%100;return n>=11&&n<=19||t===0?"many":t===1?"one":"few"}var aB=()=>{let r={string:{unit:{one:"simbolis",few:"simboliai",many:"simboli\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne ilgesn\u0117 kaip",notInclusive:"turi b\u016Bti trumpesn\u0117 kaip"},bigger:{inclusive:"turi b\u016Bti ne trumpesn\u0117 kaip",notInclusive:"turi b\u016Bti ilgesn\u0117 kaip"}}},file:{unit:{one:"baitas",few:"baitai",many:"bait\u0173"},verb:{smaller:{inclusive:"turi b\u016Bti ne didesnis kaip",notInclusive:"turi b\u016Bti ma\u017Eesnis kaip"},bigger:{inclusive:"turi b\u016Bti ne ma\u017Eesnis kaip",notInclusive:"turi b\u016Bti didesnis kaip"}}},array:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}},set:{unit:{one:"element\u0105",few:"elementus",many:"element\u0173"},verb:{smaller:{inclusive:"turi tur\u0117ti ne daugiau kaip",notInclusive:"turi tur\u0117ti ma\u017Eiau kaip"},bigger:{inclusive:"turi tur\u0117ti ne ma\u017Eiau kaip",notInclusive:"turi tur\u0117ti daugiau kaip"}}}};function e(n,i,o,s){let a=r[n]??null;return a===null?a:{unit:a.unit[i],verb:a.verb[s][o?"inclusive":"notInclusive"]}}let t={regex:"\u012Fvestis",email:"el. pa\u0161to adresas",url:"URL",emoji:"jaustukas",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO data ir laikas",date:"ISO data",time:"ISO laikas",duration:"ISO trukm\u0117",ipv4:"IPv4 adresas",ipv6:"IPv6 adresas",cidrv4:"IPv4 tinklo prefiksas (CIDR)",cidrv6:"IPv6 tinklo prefiksas (CIDR)",base64:"base64 u\u017Ekoduota eilut\u0117",base64url:"base64url u\u017Ekoduota eilut\u0117",json_string:"JSON eilut\u0117",e164:"E.164 numeris",jwt:"JWT",template_literal:"\u012Fvestis"};return n=>{switch(n.code){case"invalid_type":return`Gautas tipas ${sB(n.input)}, o tik\u0117tasi - ${kh(n.expected)}`;case"invalid_value":return n.values.length===1?`Privalo b\u016Bti ${O(n.values[0])}`:`Privalo b\u016Bti vienas i\u0161 ${k(n.values,"|")} pasirinkim\u0173`;case"too_big":{let i=kh(n.origin),o=e(n.origin,sE(Number(n.maximum)),n.inclusive??!1,"smaller");if(o?.verb)return`${$h(i??n.origin??"reik\u0161m\u0117")} ${o.verb} ${n.maximum.toString()} ${o.unit??"element\u0173"}`;let s=n.inclusive?"ne didesnis kaip":"ma\u017Eesnis kaip";return`${$h(i??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${s} ${n.maximum.toString()} ${o?.unit}`}case"too_small":{let i=kh(n.origin),o=e(n.origin,sE(Number(n.minimum)),n.inclusive??!1,"bigger");if(o?.verb)return`${$h(i??n.origin??"reik\u0161m\u0117")} ${o.verb} ${n.minimum.toString()} ${o.unit??"element\u0173"}`;let s=n.inclusive?"ne ma\u017Eesnis kaip":"didesnis kaip";return`${$h(i??n.origin??"reik\u0161m\u0117")} turi b\u016Bti ${s} ${n.minimum.toString()} ${o?.unit}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Eilut\u0117 privalo prasid\u0117ti "${i.prefix}"`:i.format==="ends_with"?`Eilut\u0117 privalo pasibaigti "${i.suffix}"`:i.format==="includes"?`Eilut\u0117 privalo \u012Ftraukti "${i.includes}"`:i.format==="regex"?`Eilut\u0117 privalo atitikti ${i.pattern}`:`Neteisingas ${t[i.format]??n.format}`}case"not_multiple_of":return`Skai\u010Dius privalo b\u016Bti ${n.divisor} kartotinis.`;case"unrecognized_keys":return`Neatpa\u017Eint${n.keys.length>1?"i":"as"} rakt${n.keys.length>1?"ai":"as"}: ${k(n.keys,", ")}`;case"invalid_key":return"Rastas klaidingas raktas";case"invalid_union":return"Klaidinga \u012Fvestis";case"invalid_element":{let i=kh(n.origin);return`${$h(i??n.origin??"reik\u0161m\u0117")} turi klaiding\u0105 \u012Fvest\u012F`}default:return"Klaidinga \u012Fvestis"}}};function aE(){return{localeError:aB()}}var lB=()=>{let r={string:{unit:"\u0437\u043D\u0430\u0446\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},file:{unit:"\u0431\u0430\u0458\u0442\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},array:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"},set:{unit:"\u0441\u0442\u0430\u0432\u043A\u0438",verb:"\u0434\u0430 \u0438\u043C\u0430\u0430\u0442"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0431\u0440\u043E\u0458";case"object":{if(Array.isArray(i))return"\u043D\u0438\u0437\u0430";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0432\u043D\u0435\u0441",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u043D\u0430 \u0435-\u043F\u043E\u0448\u0442\u0430",url:"URL",emoji:"\u0435\u043C\u043E\u045F\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0443\u043C \u0438 \u0432\u0440\u0435\u043C\u0435",date:"ISO \u0434\u0430\u0442\u0443\u043C",time:"ISO \u0432\u0440\u0435\u043C\u0435",duration:"ISO \u0432\u0440\u0435\u043C\u0435\u0442\u0440\u0430\u0435\u045A\u0435",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441\u0430",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441\u0430",cidrv4:"IPv4 \u043E\u043F\u0441\u0435\u0433",cidrv6:"IPv6 \u043E\u043F\u0441\u0435\u0433",base64:"base64-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",base64url:"base64url-\u0435\u043D\u043A\u043E\u0434\u0438\u0440\u0430\u043D\u0430 \u043D\u0438\u0437\u0430",json_string:"JSON \u043D\u0438\u0437\u0430",e164:"E.164 \u0431\u0440\u043E\u0458",jwt:"JWT",template_literal:"\u0432\u043D\u0435\u0441"};return i=>{switch(i.code){case"invalid_type":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.expected}, \u043F\u0440\u0438\u043C\u0435\u043D\u043E ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Invalid input: expected ${O(i.values[0])}`:`\u0413\u0440\u0435\u0448\u0430\u043D\u0430 \u043E\u043F\u0446\u0438\u0458\u0430: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 \u0435\u0434\u043D\u0430 ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0438\u043C\u0430 ${o}${i.maximum.toString()} ${s.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0438"}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u0433\u043E\u043B\u0435\u043C: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin??"\u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442\u0430"} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin} \u0434\u0430 \u0438\u043C\u0430 ${o}${i.minimum.toString()} ${s.unit}`:`\u041F\u0440\u0435\u043C\u043D\u043E\u0433\u0443 \u043C\u0430\u043B: \u0441\u0435 \u043E\u0447\u0435\u043A\u0443\u0432\u0430 ${i.origin} \u0434\u0430 \u0431\u0438\u0434\u0435 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u043F\u043E\u0447\u043D\u0443\u0432\u0430 \u0441\u043E "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0437\u0430\u0432\u0440\u0448\u0443\u0432\u0430 \u0441\u043E "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0432\u043A\u043B\u0443\u0447\u0443\u0432\u0430 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0430\u0436\u0435\u0447\u043A\u0430 \u043D\u0438\u0437\u0430: \u043C\u043E\u0440\u0430 \u0434\u0430 \u043E\u0434\u0433\u043E\u0430\u0440\u0430 \u043D\u0430 \u043F\u0430\u0442\u0435\u0440\u043D\u043E\u0442 ${o.pattern}`:`Invalid ${n[o.format]??i.format}`}case"not_multiple_of":return`\u0413\u0440\u0435\u0448\u0435\u043D \u0431\u0440\u043E\u0458: \u043C\u043E\u0440\u0430 \u0434\u0430 \u0431\u0438\u0434\u0435 \u0434\u0435\u043B\u0438\u0432 \u0441\u043E ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D\u0438 \u043A\u043B\u0443\u0447\u0435\u0432\u0438":"\u041D\u0435\u043F\u0440\u0435\u043F\u043E\u0437\u043D\u0430\u0435\u043D \u043A\u043B\u0443\u0447"}: ${k(i.keys,", ")}`;case"invalid_key":return`\u0413\u0440\u0435\u0448\u0435\u043D \u043A\u043B\u0443\u0447 \u0432\u043E ${i.origin}`;case"invalid_union":return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441";case"invalid_element":return`\u0413\u0440\u0435\u0448\u043D\u0430 \u0432\u0440\u0435\u0434\u043D\u043E\u0441\u0442 \u0432\u043E ${i.origin}`;default:return"\u0413\u0440\u0435\u0448\u0435\u043D \u0432\u043D\u0435\u0441"}}};function lE(){return{localeError:lB()}}var cB=()=>{let r={string:{unit:"aksara",verb:"mempunyai"},file:{unit:"bait",verb:"mempunyai"},array:{unit:"elemen",verb:"mempunyai"},set:{unit:"elemen",verb:"mempunyai"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"nombor";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"alamat e-mel",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"tarikh masa ISO",date:"tarikh ISO",time:"masa ISO",duration:"tempoh ISO",ipv4:"alamat IPv4",ipv6:"alamat IPv6",cidrv4:"julat IPv4",cidrv6:"julat IPv6",base64:"string dikodkan base64",base64url:"string dikodkan base64url",json_string:"string JSON",e164:"nombor E.164",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Input tidak sah: dijangka ${i.expected}, diterima ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Input tidak sah: dijangka ${O(i.values[0])}`:`Pilihan tidak sah: dijangka salah satu daripada ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Terlalu besar: dijangka ${i.origin??"nilai"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"elemen"}`:`Terlalu besar: dijangka ${i.origin??"nilai"} adalah ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Terlalu kecil: dijangka ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Terlalu kecil: dijangka ${i.origin} adalah ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`String tidak sah: mesti bermula dengan "${o.prefix}"`:o.format==="ends_with"?`String tidak sah: mesti berakhir dengan "${o.suffix}"`:o.format==="includes"?`String tidak sah: mesti mengandungi "${o.includes}"`:o.format==="regex"?`String tidak sah: mesti sepadan dengan corak ${o.pattern}`:`${n[o.format]??i.format} tidak sah`}case"not_multiple_of":return`Nombor tidak sah: perlu gandaan ${i.divisor}`;case"unrecognized_keys":return`Kunci tidak dikenali: ${k(i.keys,", ")}`;case"invalid_key":return`Kunci tidak sah dalam ${i.origin}`;case"invalid_union":return"Input tidak sah";case"invalid_element":return`Nilai tidak sah dalam ${i.origin}`;default:return"Input tidak sah"}}};function cE(){return{localeError:cB()}}var uB=()=>{let r={string:{unit:"tekens",verb:"te hebben"},file:{unit:"bytes",verb:"te hebben"},array:{unit:"elementen",verb:"te hebben"},set:{unit:"elementen",verb:"te hebben"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"getal";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"invoer",email:"emailadres",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum en tijd",date:"ISO datum",time:"ISO tijd",duration:"ISO duur",ipv4:"IPv4-adres",ipv6:"IPv6-adres",cidrv4:"IPv4-bereik",cidrv6:"IPv6-bereik",base64:"base64-gecodeerde tekst",base64url:"base64 URL-gecodeerde tekst",json_string:"JSON string",e164:"E.164-nummer",jwt:"JWT",template_literal:"invoer"};return i=>{switch(i.code){case"invalid_type":return`Ongeldige invoer: verwacht ${i.expected}, ontving ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Ongeldige invoer: verwacht ${O(i.values[0])}`:`Ongeldige optie: verwacht \xE9\xE9n van ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Te groot: verwacht dat ${i.origin??"waarde"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"elementen"}`:`Te groot: verwacht dat ${i.origin??"waarde"} ${o}${i.maximum.toString()} is`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Te klein: verwacht dat ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Te klein: verwacht dat ${i.origin} ${o}${i.minimum.toString()} is`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ongeldige tekst: moet met "${o.prefix}" beginnen`:o.format==="ends_with"?`Ongeldige tekst: moet op "${o.suffix}" eindigen`:o.format==="includes"?`Ongeldige tekst: moet "${o.includes}" bevatten`:o.format==="regex"?`Ongeldige tekst: moet overeenkomen met patroon ${o.pattern}`:`Ongeldig: ${n[o.format]??i.format}`}case"not_multiple_of":return`Ongeldig getal: moet een veelvoud van ${i.divisor} zijn`;case"unrecognized_keys":return`Onbekende key${i.keys.length>1?"s":""}: ${k(i.keys,", ")}`;case"invalid_key":return`Ongeldige key in ${i.origin}`;case"invalid_union":return"Ongeldige invoer";case"invalid_element":return`Ongeldige waarde in ${i.origin}`;default:return"Ongeldige invoer"}}};function uE(){return{localeError:uB()}}var dB=()=>{let r={string:{unit:"tegn",verb:"\xE5 ha"},file:{unit:"bytes",verb:"\xE5 ha"},array:{unit:"elementer",verb:"\xE5 inneholde"},set:{unit:"elementer",verb:"\xE5 inneholde"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"tall";case"object":{if(Array.isArray(i))return"liste";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"input",email:"e-postadresse",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO dato- og klokkeslett",date:"ISO-dato",time:"ISO-klokkeslett",duration:"ISO-varighet",ipv4:"IPv4-omr\xE5de",ipv6:"IPv6-omr\xE5de",cidrv4:"IPv4-spekter",cidrv6:"IPv6-spekter",base64:"base64-enkodet streng",base64url:"base64url-enkodet streng",json_string:"JSON-streng",e164:"E.164-nummer",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`Ugyldig input: forventet ${i.expected}, fikk ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Ugyldig verdi: forventet ${O(i.values[0])}`:`Ugyldig valg: forventet en av ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`For stor(t): forventet ${i.origin??"value"} til \xE5 ha ${o}${i.maximum.toString()} ${s.unit??"elementer"}`:`For stor(t): forventet ${i.origin??"value"} til \xE5 ha ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`For lite(n): forventet ${i.origin} til \xE5 ha ${o}${i.minimum.toString()} ${s.unit}`:`For lite(n): forventet ${i.origin} til \xE5 ha ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ugyldig streng: m\xE5 starte med "${o.prefix}"`:o.format==="ends_with"?`Ugyldig streng: m\xE5 ende med "${o.suffix}"`:o.format==="includes"?`Ugyldig streng: m\xE5 inneholde "${o.includes}"`:o.format==="regex"?`Ugyldig streng: m\xE5 matche m\xF8nsteret ${o.pattern}`:`Ugyldig ${n[o.format]??i.format}`}case"not_multiple_of":return`Ugyldig tall: m\xE5 v\xE6re et multiplum av ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ukjente n\xF8kler":"Ukjent n\xF8kkel"}: ${k(i.keys,", ")}`;case"invalid_key":return`Ugyldig n\xF8kkel i ${i.origin}`;case"invalid_union":return"Ugyldig input";case"invalid_element":return`Ugyldig verdi i ${i.origin}`;default:return"Ugyldig input"}}};function dE(){return{localeError:dB()}}var hB=()=>{let r={string:{unit:"harf",verb:"olmal\u0131d\u0131r"},file:{unit:"bayt",verb:"olmal\u0131d\u0131r"},array:{unit:"unsur",verb:"olmal\u0131d\u0131r"},set:{unit:"unsur",verb:"olmal\u0131d\u0131r"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"numara";case"object":{if(Array.isArray(i))return"saf";if(i===null)return"gayb";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"giren",email:"epostag\xE2h",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO heng\xE2m\u0131",date:"ISO tarihi",time:"ISO zaman\u0131",duration:"ISO m\xFCddeti",ipv4:"IPv4 ni\u015F\xE2n\u0131",ipv6:"IPv6 ni\u015F\xE2n\u0131",cidrv4:"IPv4 menzili",cidrv6:"IPv6 menzili",base64:"base64-\u015Fifreli metin",base64url:"base64url-\u015Fifreli metin",json_string:"JSON metin",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"giren"};return i=>{switch(i.code){case"invalid_type":return`F\xE2sit giren: umulan ${i.expected}, al\u0131nan ${t(i.input)}`;case"invalid_value":return i.values.length===1?`F\xE2sit giren: umulan ${O(i.values[0])}`:`F\xE2sit tercih: m\xFBteberler ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Fazla b\xFCy\xFCk: ${i.origin??"value"}, ${o}${i.maximum.toString()} ${s.unit??"elements"} sahip olmal\u0131yd\u0131.`:`Fazla b\xFCy\xFCk: ${i.origin??"value"}, ${o}${i.maximum.toString()} olmal\u0131yd\u0131.`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Fazla k\xFC\xE7\xFCk: ${i.origin}, ${o}${i.minimum.toString()} ${s.unit} sahip olmal\u0131yd\u0131.`:`Fazla k\xFC\xE7\xFCk: ${i.origin}, ${o}${i.minimum.toString()} olmal\u0131yd\u0131.`}case"invalid_format":{let o=i;return o.format==="starts_with"?`F\xE2sit metin: "${o.prefix}" ile ba\u015Flamal\u0131.`:o.format==="ends_with"?`F\xE2sit metin: "${o.suffix}" ile bitmeli.`:o.format==="includes"?`F\xE2sit metin: "${o.includes}" ihtiv\xE2 etmeli.`:o.format==="regex"?`F\xE2sit metin: ${o.pattern} nak\u015F\u0131na uymal\u0131.`:`F\xE2sit ${n[o.format]??i.format}`}case"not_multiple_of":return`F\xE2sit say\u0131: ${i.divisor} kat\u0131 olmal\u0131yd\u0131.`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar ${i.keys.length>1?"s":""}: ${k(i.keys,", ")}`;case"invalid_key":return`${i.origin} i\xE7in tan\u0131nmayan anahtar var.`;case"invalid_union":return"Giren tan\u0131namad\u0131.";case"invalid_element":return`${i.origin} i\xE7in tan\u0131nmayan k\u0131ymet var.`;default:return"K\u0131ymet tan\u0131namad\u0131."}}};function hE(){return{localeError:hB()}}var pB=()=>{let r={string:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},file:{unit:"\u0628\u0627\u06CC\u067C\u0633",verb:"\u0648\u0644\u0631\u064A"},array:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"},set:{unit:"\u062A\u0648\u06A9\u064A",verb:"\u0648\u0644\u0631\u064A"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0639\u062F\u062F";case"object":{if(Array.isArray(i))return"\u0627\u0631\u06D0";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0648\u0631\u0648\u062F\u064A",email:"\u0628\u0631\u06CC\u069A\u0646\u0627\u0644\u06CC\u06A9",url:"\u06CC\u0648 \u0622\u0631 \u0627\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u064A",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0646\u06CC\u067C\u0647 \u0627\u0648 \u0648\u062E\u062A",date:"\u0646\u06D0\u067C\u0647",time:"\u0648\u062E\u062A",duration:"\u0645\u0648\u062F\u0647",ipv4:"\u062F IPv4 \u067E\u062A\u0647",ipv6:"\u062F IPv6 \u067E\u062A\u0647",cidrv4:"\u062F IPv4 \u0633\u0627\u062D\u0647",cidrv6:"\u062F IPv6 \u0633\u0627\u062D\u0647",base64:"base64-encoded \u0645\u062A\u0646",base64url:"base64url-encoded \u0645\u062A\u0646",json_string:"JSON \u0645\u062A\u0646",e164:"\u062F E.164 \u0634\u0645\u06D0\u0631\u0647",jwt:"JWT",template_literal:"\u0648\u0631\u0648\u062F\u064A"};return i=>{switch(i.code){case"invalid_type":return`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${i.expected} \u0648\u0627\u06CC, \u0645\u06AB\u0631 ${t(i.input)} \u062A\u0631\u0644\u0627\u0633\u0647 \u0634\u0648`;case"invalid_value":return i.values.length===1?`\u0646\u0627\u0633\u0645 \u0648\u0631\u0648\u062F\u064A: \u0628\u0627\u06CC\u062F ${O(i.values[0])} \u0648\u0627\u06CC`:`\u0646\u0627\u0633\u0645 \u0627\u0646\u062A\u062E\u0627\u0628: \u0628\u0627\u06CC\u062F \u06CC\u0648 \u0644\u0647 ${k(i.values,"|")} \u0685\u062E\u0647 \u0648\u0627\u06CC`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${i.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0635\u0631\u0648\u0646\u0647"} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u0644\u0648\u06CC: ${i.origin??"\u0627\u0631\u0632\u069A\u062A"} \u0628\u0627\u06CC\u062F ${o}${i.maximum.toString()} \u0648\u064A`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} ${s.unit} \u0648\u0644\u0631\u064A`:`\u0689\u06CC\u0631 \u06A9\u0648\u0686\u0646\u06CC: ${i.origin} \u0628\u0627\u06CC\u062F ${o}${i.minimum.toString()} \u0648\u064A`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.prefix}" \u0633\u0631\u0647 \u067E\u06CC\u0644 \u0634\u064A`:o.format==="ends_with"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F "${o.suffix}" \u0633\u0631\u0647 \u067E\u0627\u06CC \u062A\u0647 \u0648\u0631\u0633\u064A\u0696\u064A`:o.format==="includes"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F "${o.includes}" \u0648\u0644\u0631\u064A`:o.format==="regex"?`\u0646\u0627\u0633\u0645 \u0645\u062A\u0646: \u0628\u0627\u06CC\u062F \u062F ${o.pattern} \u0633\u0631\u0647 \u0645\u0637\u0627\u0628\u0642\u062A \u0648\u0644\u0631\u064A`:`${n[o.format]??i.format} \u0646\u0627\u0633\u0645 \u062F\u06CC`}case"not_multiple_of":return`\u0646\u0627\u0633\u0645 \u0639\u062F\u062F: \u0628\u0627\u06CC\u062F \u062F ${i.divisor} \u0645\u0636\u0631\u0628 \u0648\u064A`;case"unrecognized_keys":return`\u0646\u0627\u0633\u0645 ${i.keys.length>1?"\u06A9\u0644\u06CC\u0689\u0648\u0646\u0647":"\u06A9\u0644\u06CC\u0689"}: ${k(i.keys,", ")}`;case"invalid_key":return`\u0646\u0627\u0633\u0645 \u06A9\u0644\u06CC\u0689 \u067E\u0647 ${i.origin} \u06A9\u06D0`;case"invalid_union":return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A";case"invalid_element":return`\u0646\u0627\u0633\u0645 \u0639\u0646\u0635\u0631 \u067E\u0647 ${i.origin} \u06A9\u06D0`;default:return"\u0646\u0627\u0633\u0645\u0647 \u0648\u0631\u0648\u062F\u064A"}}};function pE(){return{localeError:pB()}}var fB=()=>{let r={string:{unit:"znak\xF3w",verb:"mie\u0107"},file:{unit:"bajt\xF3w",verb:"mie\u0107"},array:{unit:"element\xF3w",verb:"mie\u0107"},set:{unit:"element\xF3w",verb:"mie\u0107"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"liczba";case"object":{if(Array.isArray(i))return"tablica";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"wyra\u017Cenie",email:"adres email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data i godzina w formacie ISO",date:"data w formacie ISO",time:"godzina w formacie ISO",duration:"czas trwania ISO",ipv4:"adres IPv4",ipv6:"adres IPv6",cidrv4:"zakres IPv4",cidrv6:"zakres IPv6",base64:"ci\u0105g znak\xF3w zakodowany w formacie base64",base64url:"ci\u0105g znak\xF3w zakodowany w formacie base64url",json_string:"ci\u0105g znak\xF3w w formacie JSON",e164:"liczba E.164",jwt:"JWT",template_literal:"wej\u015Bcie"};return i=>{switch(i.code){case"invalid_type":return`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${i.expected}, otrzymano ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Nieprawid\u0142owe dane wej\u015Bciowe: oczekiwano ${O(i.values[0])}`:`Nieprawid\u0142owa opcja: oczekiwano jednej z warto\u015Bci ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Za du\u017Ca warto\u015B\u0107: oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${i.maximum.toString()} ${s.unit??"element\xF3w"}`:`Zbyt du\u017C(y/a/e): oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Za ma\u0142a warto\u015B\u0107: oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie mie\u0107 ${o}${i.minimum.toString()} ${s.unit??"element\xF3w"}`:`Zbyt ma\u0142(y/a/e): oczekiwano, \u017Ce ${i.origin??"warto\u015B\u0107"} b\u0119dzie wynosi\u0107 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zaczyna\u0107 si\u0119 od "${o.prefix}"`:o.format==="ends_with"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi ko\u0144czy\u0107 si\u0119 na "${o.suffix}"`:o.format==="includes"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi zawiera\u0107 "${o.includes}"`:o.format==="regex"?`Nieprawid\u0142owy ci\u0105g znak\xF3w: musi odpowiada\u0107 wzorcowi ${o.pattern}`:`Nieprawid\u0142ow(y/a/e) ${n[o.format]??i.format}`}case"not_multiple_of":return`Nieprawid\u0142owa liczba: musi by\u0107 wielokrotno\u015Bci\u0105 ${i.divisor}`;case"unrecognized_keys":return`Nierozpoznane klucze${i.keys.length>1?"s":""}: ${k(i.keys,", ")}`;case"invalid_key":return`Nieprawid\u0142owy klucz w ${i.origin}`;case"invalid_union":return"Nieprawid\u0142owe dane wej\u015Bciowe";case"invalid_element":return`Nieprawid\u0142owa warto\u015B\u0107 w ${i.origin}`;default:return"Nieprawid\u0142owe dane wej\u015Bciowe"}}};function fE(){return{localeError:fB()}}var mB=()=>{let r={string:{unit:"caracteres",verb:"ter"},file:{unit:"bytes",verb:"ter"},array:{unit:"itens",verb:"ter"},set:{unit:"itens",verb:"ter"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\xFAmero";case"object":{if(Array.isArray(i))return"array";if(i===null)return"nulo";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"padr\xE3o",email:"endere\xE7o de e-mail",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"data e hora ISO",date:"data ISO",time:"hora ISO",duration:"dura\xE7\xE3o ISO",ipv4:"endere\xE7o IPv4",ipv6:"endere\xE7o IPv6",cidrv4:"faixa de IPv4",cidrv6:"faixa de IPv6",base64:"texto codificado em base64",base64url:"URL codificada em base64",json_string:"texto JSON",e164:"n\xFAmero E.164",jwt:"JWT",template_literal:"entrada"};return i=>{switch(i.code){case"invalid_type":return`Tipo inv\xE1lido: esperado ${i.expected}, recebido ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Entrada inv\xE1lida: esperado ${O(i.values[0])}`:`Op\xE7\xE3o inv\xE1lida: esperada uma das ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Muito grande: esperado que ${i.origin??"valor"} tivesse ${o}${i.maximum.toString()} ${s.unit??"elementos"}`:`Muito grande: esperado que ${i.origin??"valor"} fosse ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Muito pequeno: esperado que ${i.origin} tivesse ${o}${i.minimum.toString()} ${s.unit}`:`Muito pequeno: esperado que ${i.origin} fosse ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Texto inv\xE1lido: deve come\xE7ar com "${o.prefix}"`:o.format==="ends_with"?`Texto inv\xE1lido: deve terminar com "${o.suffix}"`:o.format==="includes"?`Texto inv\xE1lido: deve incluir "${o.includes}"`:o.format==="regex"?`Texto inv\xE1lido: deve corresponder ao padr\xE3o ${o.pattern}`:`${n[o.format]??i.format} inv\xE1lido`}case"not_multiple_of":return`N\xFAmero inv\xE1lido: deve ser m\xFAltiplo de ${i.divisor}`;case"unrecognized_keys":return`Chave${i.keys.length>1?"s":""} desconhecida${i.keys.length>1?"s":""}: ${k(i.keys,", ")}`;case"invalid_key":return`Chave inv\xE1lida em ${i.origin}`;case"invalid_union":return"Entrada inv\xE1lida";case"invalid_element":return`Valor inv\xE1lido em ${i.origin}`;default:return"Campo inv\xE1lido"}}};function mE(){return{localeError:mB()}}function gE(r,e,t,n){let i=Math.abs(r),o=i%10,s=i%100;return s>=11&&s<=19?n:o===1?e:o>=2&&o<=4?t:n}var gB=()=>{let r={string:{unit:{one:"\u0441\u0438\u043C\u0432\u043E\u043B",few:"\u0441\u0438\u043C\u0432\u043E\u043B\u0430",many:"\u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},file:{unit:{one:"\u0431\u0430\u0439\u0442",few:"\u0431\u0430\u0439\u0442\u0430",many:"\u0431\u0430\u0439\u0442"},verb:"\u0438\u043C\u0435\u0442\u044C"},array:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"},set:{unit:{one:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442",few:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u0430",many:"\u044D\u043B\u0435\u043C\u0435\u043D\u0442\u043E\u0432"},verb:"\u0438\u043C\u0435\u0442\u044C"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0441\u0438\u0432";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0432\u0432\u043E\u0434",email:"email \u0430\u0434\u0440\u0435\u0441",url:"URL",emoji:"\u044D\u043C\u043E\u0434\u0437\u0438",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0434\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043C\u044F",date:"ISO \u0434\u0430\u0442\u0430",time:"ISO \u0432\u0440\u0435\u043C\u044F",duration:"ISO \u0434\u043B\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C",ipv4:"IPv4 \u0430\u0434\u0440\u0435\u0441",ipv6:"IPv6 \u0430\u0434\u0440\u0435\u0441",cidrv4:"IPv4 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",cidrv6:"IPv6 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D",base64:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64",base64url:"\u0441\u0442\u0440\u043E\u043A\u0430 \u0432 \u0444\u043E\u0440\u043C\u0430\u0442\u0435 base64url",json_string:"JSON \u0441\u0442\u0440\u043E\u043A\u0430",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0432\u043E\u0434"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${i.expected}, \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0432\u043E\u0434: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C ${O(i.values[0])}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0432\u0430\u0440\u0438\u0430\u043D\u0442: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u043E\u0434\u043D\u043E \u0438\u0437 ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);if(s){let a=Number(i.maximum),c=gE(a,s.unit.one,s.unit.few,s.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${i.maximum.toString()} ${c}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u0431\u043E\u043B\u044C\u0448\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435"} \u0431\u0443\u0434\u0435\u0442 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);if(s){let a=Number(i.minimum),c=gE(a,s.unit.one,s.unit.few,s.unit.many);return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin} \u0431\u0443\u0434\u0435\u0442 \u0438\u043C\u0435\u0442\u044C ${o}${i.minimum.toString()} ${c}`}return`\u0421\u043B\u0438\u0448\u043A\u043E\u043C \u043C\u0430\u043B\u0435\u043D\u044C\u043A\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435: \u043E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C, \u0447\u0442\u043E ${i.origin} \u0431\u0443\u0434\u0435\u0442 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u043D\u0430\u0447\u0438\u043D\u0430\u0442\u044C\u0441\u044F \u0441 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u0442\u044C\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u0432\u0435\u0440\u043D\u0430\u044F \u0441\u0442\u0440\u043E\u043A\u0430: \u0434\u043E\u043B\u0436\u043D\u0430 \u0441\u043E\u043E\u0442\u0432\u0435\u0442\u0441\u0442\u0432\u043E\u0432\u0430\u0442\u044C \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0447\u0438\u0441\u043B\u043E: \u0434\u043E\u043B\u0436\u043D\u043E \u0431\u044B\u0442\u044C \u043A\u0440\u0430\u0442\u043D\u044B\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u0430\u0441\u043F\u043E\u0437\u043D\u0430\u043D\u043D${i.keys.length>1?"\u044B\u0435":"\u044B\u0439"} \u043A\u043B\u044E\u0447${i.keys.length>1?"\u0438":""}: ${k(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u043A\u043B\u044E\u0447 \u0432 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435";case"invalid_element":return`\u041D\u0435\u0432\u0435\u0440\u043D\u043E\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0432 ${i.origin}`;default:return"\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0435 \u0432\u0445\u043E\u0434\u043D\u044B\u0435 \u0434\u0430\u043D\u043D\u044B\u0435"}}};function vE(){return{localeError:gB()}}var vB=()=>{let r={string:{unit:"znakov",verb:"imeti"},file:{unit:"bajtov",verb:"imeti"},array:{unit:"elementov",verb:"imeti"},set:{unit:"elementov",verb:"imeti"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0161tevilo";case"object":{if(Array.isArray(i))return"tabela";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"vnos",email:"e-po\u0161tni naslov",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO datum in \u010Das",date:"ISO datum",time:"ISO \u010Das",duration:"ISO trajanje",ipv4:"IPv4 naslov",ipv6:"IPv6 naslov",cidrv4:"obseg IPv4",cidrv6:"obseg IPv6",base64:"base64 kodiran niz",base64url:"base64url kodiran niz",json_string:"JSON niz",e164:"E.164 \u0161tevilka",jwt:"JWT",template_literal:"vnos"};return i=>{switch(i.code){case"invalid_type":return`Neveljaven vnos: pri\u010Dakovano ${i.expected}, prejeto ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Neveljaven vnos: pri\u010Dakovano ${O(i.values[0])}`:`Neveljavna mo\u017Enost: pri\u010Dakovano eno izmed ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Preveliko: pri\u010Dakovano, da bo ${i.origin??"vrednost"} imelo ${o}${i.maximum.toString()} ${s.unit??"elementov"}`:`Preveliko: pri\u010Dakovano, da bo ${i.origin??"vrednost"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Premajhno: pri\u010Dakovano, da bo ${i.origin} imelo ${o}${i.minimum.toString()} ${s.unit}`:`Premajhno: pri\u010Dakovano, da bo ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Neveljaven niz: mora se za\u010Deti z "${o.prefix}"`:o.format==="ends_with"?`Neveljaven niz: mora se kon\u010Dati z "${o.suffix}"`:o.format==="includes"?`Neveljaven niz: mora vsebovati "${o.includes}"`:o.format==="regex"?`Neveljaven niz: mora ustrezati vzorcu ${o.pattern}`:`Neveljaven ${n[o.format]??i.format}`}case"not_multiple_of":return`Neveljavno \u0161tevilo: mora biti ve\u010Dkratnik ${i.divisor}`;case"unrecognized_keys":return`Neprepoznan${i.keys.length>1?"i klju\u010Di":" klju\u010D"}: ${k(i.keys,", ")}`;case"invalid_key":return`Neveljaven klju\u010D v ${i.origin}`;case"invalid_union":return"Neveljaven vnos";case"invalid_element":return`Neveljavna vrednost v ${i.origin}`;default:return"Neveljaven vnos"}}};function yE(){return{localeError:vB()}}var yB=()=>{let r={string:{unit:"tecken",verb:"att ha"},file:{unit:"bytes",verb:"att ha"},array:{unit:"objekt",verb:"att inneh\xE5lla"},set:{unit:"objekt",verb:"att inneh\xE5lla"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"antal";case"object":{if(Array.isArray(i))return"lista";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"regulj\xE4rt uttryck",email:"e-postadress",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO-datum och tid",date:"ISO-datum",time:"ISO-tid",duration:"ISO-varaktighet",ipv4:"IPv4-intervall",ipv6:"IPv6-intervall",cidrv4:"IPv4-spektrum",cidrv6:"IPv6-spektrum",base64:"base64-kodad str\xE4ng",base64url:"base64url-kodad str\xE4ng",json_string:"JSON-str\xE4ng",e164:"E.164-nummer",jwt:"JWT",template_literal:"mall-literal"};return i=>{switch(i.code){case"invalid_type":return`Ogiltig inmatning: f\xF6rv\xE4ntat ${i.expected}, fick ${t(i.input)}`;case"invalid_value":return i.values.length===1?`Ogiltig inmatning: f\xF6rv\xE4ntat ${O(i.values[0])}`:`Ogiltigt val: f\xF6rv\xE4ntade en av ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`F\xF6r stor(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.maximum.toString()} ${s.unit??"element"}`:`F\xF6r stor(t): f\xF6rv\xE4ntat ${i.origin??"v\xE4rdet"} att ha ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`F\xF6r lite(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.minimum.toString()} ${s.unit}`:`F\xF6r lite(t): f\xF6rv\xE4ntade ${i.origin??"v\xE4rdet"} att ha ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Ogiltig str\xE4ng: m\xE5ste b\xF6rja med "${o.prefix}"`:o.format==="ends_with"?`Ogiltig str\xE4ng: m\xE5ste sluta med "${o.suffix}"`:o.format==="includes"?`Ogiltig str\xE4ng: m\xE5ste inneh\xE5lla "${o.includes}"`:o.format==="regex"?`Ogiltig str\xE4ng: m\xE5ste matcha m\xF6nstret "${o.pattern}"`:`Ogiltig(t) ${n[o.format]??i.format}`}case"not_multiple_of":return`Ogiltigt tal: m\xE5ste vara en multipel av ${i.divisor}`;case"unrecognized_keys":return`${i.keys.length>1?"Ok\xE4nda nycklar":"Ok\xE4nd nyckel"}: ${k(i.keys,", ")}`;case"invalid_key":return`Ogiltig nyckel i ${i.origin??"v\xE4rdet"}`;case"invalid_union":return"Ogiltig input";case"invalid_element":return`Ogiltigt v\xE4rde i ${i.origin??"v\xE4rdet"}`;default:return"Ogiltig input"}}};function xE(){return{localeError:yB()}}var xB=()=>{let r={string:{unit:"\u0B8E\u0BB4\u0BC1\u0BA4\u0BCD\u0BA4\u0BC1\u0B95\u0BCD\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},file:{unit:"\u0BAA\u0BC8\u0B9F\u0BCD\u0B9F\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},array:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"},set:{unit:"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD",verb:"\u0B95\u0BCA\u0BA3\u0BCD\u0B9F\u0BBF\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u0B8E\u0BA3\u0BCD \u0B85\u0BB2\u0BCD\u0BB2\u0BBE\u0BA4\u0BA4\u0BC1":"\u0B8E\u0BA3\u0BCD";case"object":{if(Array.isArray(i))return"\u0B85\u0BA3\u0BBF";if(i===null)return"\u0BB5\u0BC6\u0BB1\u0BC1\u0BAE\u0BC8";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1",email:"\u0BAE\u0BBF\u0BA9\u0BCD\u0BA9\u0B9E\u0BCD\u0B9A\u0BB2\u0BCD \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u0BA4\u0BC7\u0BA4\u0BBF \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",date:"ISO \u0BA4\u0BC7\u0BA4\u0BBF",time:"ISO \u0BA8\u0BC7\u0BB0\u0BAE\u0BCD",duration:"ISO \u0B95\u0BBE\u0BB2 \u0B85\u0BB3\u0BB5\u0BC1",ipv4:"IPv4 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",ipv6:"IPv6 \u0BAE\u0BC1\u0B95\u0BB5\u0BB0\u0BBF",cidrv4:"IPv4 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",cidrv6:"IPv6 \u0BB5\u0BB0\u0BAE\u0BCD\u0BAA\u0BC1",base64:"base64-encoded \u0B9A\u0BB0\u0BAE\u0BCD",base64url:"base64url-encoded \u0B9A\u0BB0\u0BAE\u0BCD",json_string:"JSON \u0B9A\u0BB0\u0BAE\u0BCD",e164:"E.164 \u0B8E\u0BA3\u0BCD",jwt:"JWT",template_literal:"input"};return i=>{switch(i.code){case"invalid_type":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.expected}, \u0BAA\u0BC6\u0BB1\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${O(i.values[0])}`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0BB0\u0BC1\u0BAA\u0BCD\u0BAA\u0BAE\u0BCD: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${k(i.values,"|")} \u0B87\u0BB2\u0BCD \u0B92\u0BA9\u0BCD\u0BB1\u0BC1`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${i.maximum.toString()} ${s.unit??"\u0B89\u0BB1\u0BC1\u0BAA\u0BCD\u0BAA\u0BC1\u0B95\u0BB3\u0BCD"} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95 \u0BAA\u0BC6\u0BB0\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin??"\u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1"} ${o}${i.maximum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin} ${o}${i.minimum.toString()} ${s.unit} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BAE\u0BBF\u0B95\u0B9A\u0BCD \u0B9A\u0BBF\u0BB1\u0BBF\u0BAF\u0BA4\u0BC1: \u0B8E\u0BA4\u0BBF\u0BB0\u0BCD\u0BAA\u0BBE\u0BB0\u0BCD\u0B95\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0B9F\u0BCD\u0B9F\u0BA4\u0BC1 ${i.origin} ${o}${i.minimum.toString()} \u0B86\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.prefix}" \u0B87\u0BB2\u0BCD \u0BA4\u0BCA\u0B9F\u0B99\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="ends_with"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.suffix}" \u0B87\u0BB2\u0BCD \u0BAE\u0BC1\u0B9F\u0BBF\u0BB5\u0B9F\u0BC8\u0BAF \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="includes"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: "${o.includes}" \u0B90 \u0B89\u0BB3\u0BCD\u0BB3\u0B9F\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:o.format==="regex"?`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B9A\u0BB0\u0BAE\u0BCD: ${o.pattern} \u0BAE\u0BC1\u0BB1\u0BC8\u0BAA\u0BBE\u0B9F\u0BCD\u0B9F\u0BC1\u0B9F\u0BA9\u0BCD \u0BAA\u0BCA\u0BB0\u0BC1\u0BA8\u0BCD\u0BA4 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`:`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B8E\u0BA3\u0BCD: ${i.divisor} \u0B87\u0BA9\u0BCD \u0BAA\u0BB2\u0BAE\u0BBE\u0B95 \u0B87\u0BB0\u0BC1\u0B95\u0BCD\u0B95 \u0BB5\u0BC7\u0BA3\u0BCD\u0B9F\u0BC1\u0BAE\u0BCD`;case"unrecognized_keys":return`\u0B85\u0B9F\u0BC8\u0BAF\u0BBE\u0BB3\u0BAE\u0BCD \u0BA4\u0BC6\u0BB0\u0BBF\u0BAF\u0BBE\u0BA4 \u0BB5\u0BBF\u0B9A\u0BC8${i.keys.length>1?"\u0B95\u0BB3\u0BCD":""}: ${k(i.keys,", ")}`;case"invalid_key":return`${i.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BB5\u0BBF\u0B9A\u0BC8`;case"invalid_union":return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1";case"invalid_element":return`${i.origin} \u0B87\u0BB2\u0BCD \u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0BAE\u0BA4\u0BBF\u0BAA\u0BCD\u0BAA\u0BC1`;default:return"\u0BA4\u0BB5\u0BB1\u0BBE\u0BA9 \u0B89\u0BB3\u0BCD\u0BB3\u0BC0\u0B9F\u0BC1"}}};function wE(){return{localeError:xB()}}var wB=()=>{let r={string:{unit:"\u0E15\u0E31\u0E27\u0E2D\u0E31\u0E01\u0E29\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},file:{unit:"\u0E44\u0E1A\u0E15\u0E4C",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},array:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"},set:{unit:"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23",verb:"\u0E04\u0E27\u0E23\u0E21\u0E35"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u0E44\u0E21\u0E48\u0E43\u0E0A\u0E48\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02 (NaN)":"\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02";case"object":{if(Array.isArray(i))return"\u0E2D\u0E32\u0E23\u0E4C\u0E40\u0E23\u0E22\u0E4C (Array)";if(i===null)return"\u0E44\u0E21\u0E48\u0E21\u0E35\u0E04\u0E48\u0E32 (null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19",email:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48\u0E2D\u0E35\u0E40\u0E21\u0E25",url:"URL",emoji:"\u0E2D\u0E34\u0E42\u0E21\u0E08\u0E34",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",date:"\u0E27\u0E31\u0E19\u0E17\u0E35\u0E48\u0E41\u0E1A\u0E1A ISO",time:"\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",duration:"\u0E0A\u0E48\u0E27\u0E07\u0E40\u0E27\u0E25\u0E32\u0E41\u0E1A\u0E1A ISO",ipv4:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv4",ipv6:"\u0E17\u0E35\u0E48\u0E2D\u0E22\u0E39\u0E48 IPv6",cidrv4:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv4",cidrv6:"\u0E0A\u0E48\u0E27\u0E07 IP \u0E41\u0E1A\u0E1A IPv6",base64:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64",base64url:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A Base64 \u0E2A\u0E33\u0E2B\u0E23\u0E31\u0E1A URL",json_string:"\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E41\u0E1A\u0E1A JSON",e164:"\u0E40\u0E1A\u0E2D\u0E23\u0E4C\u0E42\u0E17\u0E23\u0E28\u0E31\u0E1E\u0E17\u0E4C\u0E23\u0E30\u0E2B\u0E27\u0E48\u0E32\u0E07\u0E1B\u0E23\u0E30\u0E40\u0E17\u0E28 (E.164)",jwt:"\u0E42\u0E17\u0E40\u0E04\u0E19 JWT",template_literal:"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E17\u0E35\u0E48\u0E1B\u0E49\u0E2D\u0E19"};return i=>{switch(i.code){case"invalid_type":return`\u0E1B\u0E23\u0E30\u0E40\u0E20\u0E17\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${i.expected} \u0E41\u0E15\u0E48\u0E44\u0E14\u0E49\u0E23\u0E31\u0E1A ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\u0E04\u0E48\u0E32\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19 ${O(i.values[0])}`:`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E37\u0E2D\u0E01\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E04\u0E27\u0E23\u0E40\u0E1B\u0E47\u0E19\u0E2B\u0E19\u0E36\u0E48\u0E07\u0E43\u0E19 ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"\u0E44\u0E21\u0E48\u0E40\u0E01\u0E34\u0E19":"\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32",s=e(i.origin);return s?`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.maximum.toString()} ${s.unit??"\u0E23\u0E32\u0E22\u0E01\u0E32\u0E23"}`:`\u0E40\u0E01\u0E34\u0E19\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin??"\u0E04\u0E48\u0E32"} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?"\u0E2D\u0E22\u0E48\u0E32\u0E07\u0E19\u0E49\u0E2D\u0E22":"\u0E21\u0E32\u0E01\u0E01\u0E27\u0E48\u0E32",s=e(i.origin);return s?`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.minimum.toString()} ${s.unit}`:`\u0E19\u0E49\u0E2D\u0E22\u0E01\u0E27\u0E48\u0E32\u0E01\u0E33\u0E2B\u0E19\u0E14: ${i.origin} \u0E04\u0E27\u0E23\u0E21\u0E35${o} ${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E02\u0E36\u0E49\u0E19\u0E15\u0E49\u0E19\u0E14\u0E49\u0E27\u0E22 "${o.prefix}"`:o.format==="ends_with"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E25\u0E07\u0E17\u0E49\u0E32\u0E22\u0E14\u0E49\u0E27\u0E22 "${o.suffix}"`:o.format==="includes"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21\u0E15\u0E49\u0E2D\u0E07\u0E21\u0E35 "${o.includes}" \u0E2D\u0E22\u0E39\u0E48\u0E43\u0E19\u0E02\u0E49\u0E2D\u0E04\u0E27\u0E32\u0E21`:o.format==="regex"?`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14 ${o.pattern}`:`\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: ${n[o.format]??i.format}`}case"not_multiple_of":return`\u0E15\u0E31\u0E27\u0E40\u0E25\u0E02\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E15\u0E49\u0E2D\u0E07\u0E40\u0E1B\u0E47\u0E19\u0E08\u0E33\u0E19\u0E27\u0E19\u0E17\u0E35\u0E48\u0E2B\u0E32\u0E23\u0E14\u0E49\u0E27\u0E22 ${i.divisor} \u0E44\u0E14\u0E49\u0E25\u0E07\u0E15\u0E31\u0E27`;case"unrecognized_keys":return`\u0E1E\u0E1A\u0E04\u0E35\u0E22\u0E4C\u0E17\u0E35\u0E48\u0E44\u0E21\u0E48\u0E23\u0E39\u0E49\u0E08\u0E31\u0E01: ${k(i.keys,", ")}`;case"invalid_key":return`\u0E04\u0E35\u0E22\u0E4C\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${i.origin}`;case"invalid_union":return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07: \u0E44\u0E21\u0E48\u0E15\u0E23\u0E07\u0E01\u0E31\u0E1A\u0E23\u0E39\u0E1B\u0E41\u0E1A\u0E1A\u0E22\u0E39\u0E40\u0E19\u0E35\u0E22\u0E19\u0E17\u0E35\u0E48\u0E01\u0E33\u0E2B\u0E19\u0E14\u0E44\u0E27\u0E49";case"invalid_element":return`\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07\u0E43\u0E19 ${i.origin}`;default:return"\u0E02\u0E49\u0E2D\u0E21\u0E39\u0E25\u0E44\u0E21\u0E48\u0E16\u0E39\u0E01\u0E15\u0E49\u0E2D\u0E07"}}};function bE(){return{localeError:wB()}}var bB=r=>{let e=typeof r;switch(e){case"number":return Number.isNaN(r)?"NaN":"number";case"object":{if(Array.isArray(r))return"array";if(r===null)return"null";if(Object.getPrototypeOf(r)!==Object.prototype&&r.constructor)return r.constructor.name}}return e},AB=()=>{let r={string:{unit:"karakter",verb:"olmal\u0131"},file:{unit:"bayt",verb:"olmal\u0131"},array:{unit:"\xF6\u011Fe",verb:"olmal\u0131"},set:{unit:"\xF6\u011Fe",verb:"olmal\u0131"}};function e(n){return r[n]??null}let t={regex:"girdi",email:"e-posta adresi",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO tarih ve saat",date:"ISO tarih",time:"ISO saat",duration:"ISO s\xFCre",ipv4:"IPv4 adresi",ipv6:"IPv6 adresi",cidrv4:"IPv4 aral\u0131\u011F\u0131",cidrv6:"IPv6 aral\u0131\u011F\u0131",base64:"base64 ile \u015Fifrelenmi\u015F metin",base64url:"base64url ile \u015Fifrelenmi\u015F metin",json_string:"JSON dizesi",e164:"E.164 say\u0131s\u0131",jwt:"JWT",template_literal:"\u015Eablon dizesi"};return n=>{switch(n.code){case"invalid_type":return`Ge\xE7ersiz de\u011Fer: beklenen ${n.expected}, al\u0131nan ${bB(n.input)}`;case"invalid_value":return n.values.length===1?`Ge\xE7ersiz de\u011Fer: beklenen ${O(n.values[0])}`:`Ge\xE7ersiz se\xE7enek: a\u015Fa\u011F\u0131dakilerden biri olmal\u0131: ${k(n.values,"|")}`;case"too_big":{let i=n.inclusive?"<=":"<",o=e(n.origin);return o?`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${i}${n.maximum.toString()} ${o.unit??"\xF6\u011Fe"}`:`\xC7ok b\xFCy\xFCk: beklenen ${n.origin??"de\u011Fer"} ${i}${n.maximum.toString()}`}case"too_small":{let i=n.inclusive?">=":">",o=e(n.origin);return o?`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${i}${n.minimum.toString()} ${o.unit}`:`\xC7ok k\xFC\xE7\xFCk: beklenen ${n.origin} ${i}${n.minimum.toString()}`}case"invalid_format":{let i=n;return i.format==="starts_with"?`Ge\xE7ersiz metin: "${i.prefix}" ile ba\u015Flamal\u0131`:i.format==="ends_with"?`Ge\xE7ersiz metin: "${i.suffix}" ile bitmeli`:i.format==="includes"?`Ge\xE7ersiz metin: "${i.includes}" i\xE7ermeli`:i.format==="regex"?`Ge\xE7ersiz metin: ${i.pattern} desenine uymal\u0131`:`Ge\xE7ersiz ${t[i.format]??n.format}`}case"not_multiple_of":return`Ge\xE7ersiz say\u0131: ${n.divisor} ile tam b\xF6l\xFCnebilmeli`;case"unrecognized_keys":return`Tan\u0131nmayan anahtar${n.keys.length>1?"lar":""}: ${k(n.keys,", ")}`;case"invalid_key":return`${n.origin} i\xE7inde ge\xE7ersiz anahtar`;case"invalid_union":return"Ge\xE7ersiz de\u011Fer";case"invalid_element":return`${n.origin} i\xE7inde ge\xE7ersiz de\u011Fer`;default:return"Ge\xE7ersiz de\u011Fer"}}};function AE(){return{localeError:AB()}}var _B=()=>{let r={string:{unit:"\u0441\u0438\u043C\u0432\u043E\u043B\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},file:{unit:"\u0431\u0430\u0439\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},array:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"},set:{unit:"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432",verb:"\u043C\u0430\u0442\u0438\u043C\u0435"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0447\u0438\u0441\u043B\u043E";case"object":{if(Array.isArray(i))return"\u043C\u0430\u0441\u0438\u0432";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456",email:"\u0430\u0434\u0440\u0435\u0441\u0430 \u0435\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u043E\u0457 \u043F\u043E\u0448\u0442\u0438",url:"URL",emoji:"\u0435\u043C\u043E\u0434\u0437\u0456",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\u0434\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 ISO",date:"\u0434\u0430\u0442\u0430 ISO",time:"\u0447\u0430\u0441 ISO",duration:"\u0442\u0440\u0438\u0432\u0430\u043B\u0456\u0441\u0442\u044C ISO",ipv4:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv4",ipv6:"\u0430\u0434\u0440\u0435\u0441\u0430 IPv6",cidrv4:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv4",cidrv6:"\u0434\u0456\u0430\u043F\u0430\u0437\u043E\u043D IPv6",base64:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64",base64url:"\u0440\u044F\u0434\u043E\u043A \u0443 \u043A\u043E\u0434\u0443\u0432\u0430\u043D\u043D\u0456 base64url",json_string:"\u0440\u044F\u0434\u043E\u043A JSON",e164:"\u043D\u043E\u043C\u0435\u0440 E.164",jwt:"JWT",template_literal:"\u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"};return i=>{switch(i.code){case"invalid_type":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${i.expected}, \u043E\u0442\u0440\u0438\u043C\u0430\u043D\u043E ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F ${O(i.values[0])}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0430 \u043E\u043F\u0446\u0456\u044F: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F \u043E\u0434\u043D\u0435 \u0437 ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"\u0435\u043B\u0435\u043C\u0435\u043D\u0442\u0456\u0432"}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u0432\u0435\u043B\u0438\u043A\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin??"\u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F"} \u0431\u0443\u0434\u0435 ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`\u0417\u0430\u043D\u0430\u0434\u0442\u043E \u043C\u0430\u043B\u0435: \u043E\u0447\u0456\u043A\u0443\u0454\u0442\u044C\u0441\u044F, \u0449\u043E ${i.origin} \u0431\u0443\u0434\u0435 ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043F\u043E\u0447\u0438\u043D\u0430\u0442\u0438\u0441\u044F \u0437 "${o.prefix}"`:o.format==="ends_with"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0437\u0430\u043A\u0456\u043D\u0447\u0443\u0432\u0430\u0442\u0438\u0441\u044F \u043D\u0430 "${o.suffix}"`:o.format==="includes"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u043C\u0456\u0441\u0442\u0438\u0442\u0438 "${o.includes}"`:o.format==="regex"?`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u0440\u044F\u0434\u043E\u043A: \u043F\u043E\u0432\u0438\u043D\u0435\u043D \u0432\u0456\u0434\u043F\u043E\u0432\u0456\u0434\u0430\u0442\u0438 \u0448\u0430\u0431\u043B\u043E\u043D\u0443 ${o.pattern}`:`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0447\u0438\u0441\u043B\u043E: \u043F\u043E\u0432\u0438\u043D\u043D\u043E \u0431\u0443\u0442\u0438 \u043A\u0440\u0430\u0442\u043D\u0438\u043C ${i.divisor}`;case"unrecognized_keys":return`\u041D\u0435\u0440\u043E\u0437\u043F\u0456\u0437\u043D\u0430\u043D\u0438\u0439 \u043A\u043B\u044E\u0447${i.keys.length>1?"\u0456":""}: ${k(i.keys,", ")}`;case"invalid_key":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0438\u0439 \u043A\u043B\u044E\u0447 \u0443 ${i.origin}`;case"invalid_union":return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456";case"invalid_element":return`\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u043D\u044F \u0443 ${i.origin}`;default:return"\u041D\u0435\u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u0456 \u0432\u0445\u0456\u0434\u043D\u0456 \u0434\u0430\u043D\u0456"}}};function zg(){return{localeError:_B()}}function _E(){return zg()}var PB=()=>{let r={string:{unit:"\u062D\u0631\u0648\u0641",verb:"\u06C1\u0648\u0646\u0627"},file:{unit:"\u0628\u0627\u0626\u0679\u0633",verb:"\u06C1\u0648\u0646\u0627"},array:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"},set:{unit:"\u0622\u0626\u0679\u0645\u0632",verb:"\u06C1\u0648\u0646\u0627"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"\u0646\u0645\u0628\u0631";case"object":{if(Array.isArray(i))return"\u0622\u0631\u06D2";if(i===null)return"\u0646\u0644";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0627\u0646 \u067E\u0679",email:"\u0627\u06CC \u0645\u06CC\u0644 \u0627\u06CC\u0688\u0631\u06CC\u0633",url:"\u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644",emoji:"\u0627\u06CC\u0645\u0648\u062C\u06CC",uuid:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",uuidv4:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 4",uuidv6:"\u06CC\u0648 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC \u0648\u06CC 6",nanoid:"\u0646\u06CC\u0646\u0648 \u0622\u0626\u06CC \u0688\u06CC",guid:"\u062C\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",cuid2:"\u0633\u06CC \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC 2",ulid:"\u06CC\u0648 \u0627\u06CC\u0644 \u0622\u0626\u06CC \u0688\u06CC",xid:"\u0627\u06CC\u06A9\u0633 \u0622\u0626\u06CC \u0688\u06CC",ksuid:"\u06A9\u06D2 \u0627\u06CC\u0633 \u06CC\u0648 \u0622\u0626\u06CC \u0688\u06CC",datetime:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0688\u06CC\u0679 \u0679\u0627\u0626\u0645",date:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u062A\u0627\u0631\u06CC\u062E",time:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0648\u0642\u062A",duration:"\u0622\u0626\u06CC \u0627\u06CC\u0633 \u0627\u0648 \u0645\u062F\u062A",ipv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0627\u06CC\u0688\u0631\u06CC\u0633",ipv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0627\u06CC\u0688\u0631\u06CC\u0633",cidrv4:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 4 \u0631\u06CC\u0646\u062C",cidrv6:"\u0622\u0626\u06CC \u067E\u06CC \u0648\u06CC 6 \u0631\u06CC\u0646\u062C",base64:"\u0628\u06CC\u0633 64 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",base64url:"\u0628\u06CC\u0633 64 \u06CC\u0648 \u0622\u0631 \u0627\u06CC\u0644 \u0627\u0646 \u06A9\u0648\u0688\u0688 \u0633\u0679\u0631\u0646\u06AF",json_string:"\u062C\u06D2 \u0627\u06CC\u0633 \u0627\u0648 \u0627\u06CC\u0646 \u0633\u0679\u0631\u0646\u06AF",e164:"\u0627\u06CC 164 \u0646\u0645\u0628\u0631",jwt:"\u062C\u06D2 \u0688\u0628\u0644\u06CC\u0648 \u0679\u06CC",template_literal:"\u0627\u0646 \u067E\u0679"};return i=>{switch(i.code){case"invalid_type":return`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${i.expected} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627\u060C ${t(i.input)} \u0645\u0648\u0635\u0648\u0644 \u06C1\u0648\u0627`;case"invalid_value":return i.values.length===1?`\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679: ${O(i.values[0])} \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`:`\u063A\u0644\u0637 \u0622\u067E\u0634\u0646: ${k(i.values,"|")} \u0645\u06CC\u06BA \u0633\u06D2 \u0627\u06CC\u06A9 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u0628\u06C1\u062A \u0628\u0691\u0627: ${i.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u06D2 ${o}${i.maximum.toString()} ${s.unit??"\u0639\u0646\u0627\u0635\u0631"} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0628\u0691\u0627: ${i.origin??"\u0648\u06CC\u0644\u06CC\u0648"} \u06A9\u0627 ${o}${i.maximum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${i.origin} \u06A9\u06D2 ${o}${i.minimum.toString()} ${s.unit} \u06C1\u0648\u0646\u06D2 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u06D2`:`\u0628\u06C1\u062A \u0686\u06BE\u0648\u0679\u0627: ${i.origin} \u06A9\u0627 ${o}${i.minimum.toString()} \u06C1\u0648\u0646\u0627 \u0645\u062A\u0648\u0642\u0639 \u062A\u06BE\u0627`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.prefix}" \u0633\u06D2 \u0634\u0631\u0648\u0639 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="ends_with"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.suffix}" \u067E\u0631 \u062E\u062A\u0645 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="includes"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: "${o.includes}" \u0634\u0627\u0645\u0644 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:o.format==="regex"?`\u063A\u0644\u0637 \u0633\u0679\u0631\u0646\u06AF: \u067E\u06CC\u0679\u0631\u0646 ${o.pattern} \u0633\u06D2 \u0645\u06CC\u0686 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`:`\u063A\u0644\u0637 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u063A\u0644\u0637 \u0646\u0645\u0628\u0631: ${i.divisor} \u06A9\u0627 \u0645\u0636\u0627\u0639\u0641 \u06C1\u0648\u0646\u0627 \u0686\u0627\u06C1\u06CC\u06D2`;case"unrecognized_keys":return`\u063A\u06CC\u0631 \u062A\u0633\u0644\u06CC\u0645 \u0634\u062F\u06C1 \u06A9\u06CC${i.keys.length>1?"\u0632":""}: ${k(i.keys,"\u060C ")}`;case"invalid_key":return`${i.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u06A9\u06CC`;case"invalid_union":return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679";case"invalid_element":return`${i.origin} \u0645\u06CC\u06BA \u063A\u0644\u0637 \u0648\u06CC\u0644\u06CC\u0648`;default:return"\u063A\u0644\u0637 \u0627\u0646 \u067E\u0679"}}};function PE(){return{localeError:PB()}}var EB=()=>{let r={string:{unit:"k\xFD t\u1EF1",verb:"c\xF3"},file:{unit:"byte",verb:"c\xF3"},array:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"},set:{unit:"ph\u1EA7n t\u1EED",verb:"c\xF3"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"s\u1ED1";case"object":{if(Array.isArray(i))return"m\u1EA3ng";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u0111\u1EA7u v\xE0o",email:"\u0111\u1ECBa ch\u1EC9 email",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ng\xE0y gi\u1EDD ISO",date:"ng\xE0y ISO",time:"gi\u1EDD ISO",duration:"kho\u1EA3ng th\u1EDDi gian ISO",ipv4:"\u0111\u1ECBa ch\u1EC9 IPv4",ipv6:"\u0111\u1ECBa ch\u1EC9 IPv6",cidrv4:"d\u1EA3i IPv4",cidrv6:"d\u1EA3i IPv6",base64:"chu\u1ED7i m\xE3 h\xF3a base64",base64url:"chu\u1ED7i m\xE3 h\xF3a base64url",json_string:"chu\u1ED7i JSON",e164:"s\u1ED1 E.164",jwt:"JWT",template_literal:"\u0111\u1EA7u v\xE0o"};return i=>{switch(i.code){case"invalid_type":return`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${i.expected}, nh\u1EADn \u0111\u01B0\u1EE3c ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i ${O(i.values[0])}`:`T\xF9y ch\u1ECDn kh\xF4ng h\u1EE3p l\u1EC7: mong \u0111\u1EE3i m\u1ED9t trong c\xE1c gi\xE1 tr\u1ECB ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${i.origin??"gi\xE1 tr\u1ECB"} ${s.verb} ${o}${i.maximum.toString()} ${s.unit??"ph\u1EA7n t\u1EED"}`:`Qu\xE1 l\u1EDBn: mong \u0111\u1EE3i ${i.origin??"gi\xE1 tr\u1ECB"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${i.origin} ${s.verb} ${o}${i.minimum.toString()} ${s.unit}`:`Qu\xE1 nh\u1ECF: mong \u0111\u1EE3i ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i b\u1EAFt \u0111\u1EA7u b\u1EB1ng "${o.prefix}"`:o.format==="ends_with"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i k\u1EBFt th\xFAc b\u1EB1ng "${o.suffix}"`:o.format==="includes"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i bao g\u1ED3m "${o.includes}"`:o.format==="regex"?`Chu\u1ED7i kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i kh\u1EDBp v\u1EDBi m\u1EABu ${o.pattern}`:`${n[o.format]??i.format} kh\xF4ng h\u1EE3p l\u1EC7`}case"not_multiple_of":return`S\u1ED1 kh\xF4ng h\u1EE3p l\u1EC7: ph\u1EA3i l\xE0 b\u1ED9i s\u1ED1 c\u1EE7a ${i.divisor}`;case"unrecognized_keys":return`Kh\xF3a kh\xF4ng \u0111\u01B0\u1EE3c nh\u1EADn d\u1EA1ng: ${k(i.keys,", ")}`;case"invalid_key":return`Kh\xF3a kh\xF4ng h\u1EE3p l\u1EC7 trong ${i.origin}`;case"invalid_union":return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7";case"invalid_element":return`Gi\xE1 tr\u1ECB kh\xF4ng h\u1EE3p l\u1EC7 trong ${i.origin}`;default:return"\u0110\u1EA7u v\xE0o kh\xF4ng h\u1EE3p l\u1EC7"}}};function EE(){return{localeError:EB()}}var SB=()=>{let r={string:{unit:"\u5B57\u7B26",verb:"\u5305\u542B"},file:{unit:"\u5B57\u8282",verb:"\u5305\u542B"},array:{unit:"\u9879",verb:"\u5305\u542B"},set:{unit:"\u9879",verb:"\u5305\u542B"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"\u975E\u6570\u5B57(NaN)":"\u6570\u5B57";case"object":{if(Array.isArray(i))return"\u6570\u7EC4";if(i===null)return"\u7A7A\u503C(null)";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u8F93\u5165",email:"\u7535\u5B50\u90AE\u4EF6",url:"URL",emoji:"\u8868\u60C5\u7B26\u53F7",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO\u65E5\u671F\u65F6\u95F4",date:"ISO\u65E5\u671F",time:"ISO\u65F6\u95F4",duration:"ISO\u65F6\u957F",ipv4:"IPv4\u5730\u5740",ipv6:"IPv6\u5730\u5740",cidrv4:"IPv4\u7F51\u6BB5",cidrv6:"IPv6\u7F51\u6BB5",base64:"base64\u7F16\u7801\u5B57\u7B26\u4E32",base64url:"base64url\u7F16\u7801\u5B57\u7B26\u4E32",json_string:"JSON\u5B57\u7B26\u4E32",e164:"E.164\u53F7\u7801",jwt:"JWT",template_literal:"\u8F93\u5165"};return i=>{switch(i.code){case"invalid_type":return`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${i.expected}\uFF0C\u5B9E\u9645\u63A5\u6536 ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\u65E0\u6548\u8F93\u5165\uFF1A\u671F\u671B ${O(i.values[0])}`:`\u65E0\u6548\u9009\u9879\uFF1A\u671F\u671B\u4EE5\u4E0B\u4E4B\u4E00 ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${i.origin??"\u503C"} ${o}${i.maximum.toString()} ${s.unit??"\u4E2A\u5143\u7D20"}`:`\u6570\u503C\u8FC7\u5927\uFF1A\u671F\u671B ${i.origin??"\u503C"} ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${i.origin} ${o}${i.minimum.toString()} ${s.unit}`:`\u6570\u503C\u8FC7\u5C0F\uFF1A\u671F\u671B ${i.origin} ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.prefix}" \u5F00\u5934`:o.format==="ends_with"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u4EE5 "${o.suffix}" \u7ED3\u5C3E`:o.format==="includes"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u65E0\u6548\u5B57\u7B26\u4E32\uFF1A\u5FC5\u987B\u6EE1\u8DB3\u6B63\u5219\u8868\u8FBE\u5F0F ${o.pattern}`:`\u65E0\u6548${n[o.format]??i.format}`}case"not_multiple_of":return`\u65E0\u6548\u6570\u5B57\uFF1A\u5FC5\u987B\u662F ${i.divisor} \u7684\u500D\u6570`;case"unrecognized_keys":return`\u51FA\u73B0\u672A\u77E5\u7684\u952E(key): ${k(i.keys,", ")}`;case"invalid_key":return`${i.origin} \u4E2D\u7684\u952E(key)\u65E0\u6548`;case"invalid_union":return"\u65E0\u6548\u8F93\u5165";case"invalid_element":return`${i.origin} \u4E2D\u5305\u542B\u65E0\u6548\u503C(value)`;default:return"\u65E0\u6548\u8F93\u5165"}}};function SE(){return{localeError:SB()}}var FB=()=>{let r={string:{unit:"\u5B57\u5143",verb:"\u64C1\u6709"},file:{unit:"\u4F4D\u5143\u7D44",verb:"\u64C1\u6709"},array:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"},set:{unit:"\u9805\u76EE",verb:"\u64C1\u6709"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"number";case"object":{if(Array.isArray(i))return"array";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u8F38\u5165",email:"\u90F5\u4EF6\u5730\u5740",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"ISO \u65E5\u671F\u6642\u9593",date:"ISO \u65E5\u671F",time:"ISO \u6642\u9593",duration:"ISO \u671F\u9593",ipv4:"IPv4 \u4F4D\u5740",ipv6:"IPv6 \u4F4D\u5740",cidrv4:"IPv4 \u7BC4\u570D",cidrv6:"IPv6 \u7BC4\u570D",base64:"base64 \u7DE8\u78BC\u5B57\u4E32",base64url:"base64url \u7DE8\u78BC\u5B57\u4E32",json_string:"JSON \u5B57\u4E32",e164:"E.164 \u6578\u503C",jwt:"JWT",template_literal:"\u8F38\u5165"};return i=>{switch(i.code){case"invalid_type":return`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${i.expected}\uFF0C\u4F46\u6536\u5230 ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\u7121\u6548\u7684\u8F38\u5165\u503C\uFF1A\u9810\u671F\u70BA ${O(i.values[0])}`:`\u7121\u6548\u7684\u9078\u9805\uFF1A\u9810\u671F\u70BA\u4EE5\u4E0B\u5176\u4E2D\u4E4B\u4E00 ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${i.origin??"\u503C"} \u61C9\u70BA ${o}${i.maximum.toString()} ${s.unit??"\u500B\u5143\u7D20"}`:`\u6578\u503C\u904E\u5927\uFF1A\u9810\u671F ${i.origin??"\u503C"} \u61C9\u70BA ${o}${i.maximum.toString()}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${i.origin} \u61C9\u70BA ${o}${i.minimum.toString()} ${s.unit}`:`\u6578\u503C\u904E\u5C0F\uFF1A\u9810\u671F ${i.origin} \u61C9\u70BA ${o}${i.minimum.toString()}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.prefix}" \u958B\u982D`:o.format==="ends_with"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u4EE5 "${o.suffix}" \u7D50\u5C3E`:o.format==="includes"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u5305\u542B "${o.includes}"`:o.format==="regex"?`\u7121\u6548\u7684\u5B57\u4E32\uFF1A\u5FC5\u9808\u7B26\u5408\u683C\u5F0F ${o.pattern}`:`\u7121\u6548\u7684 ${n[o.format]??i.format}`}case"not_multiple_of":return`\u7121\u6548\u7684\u6578\u5B57\uFF1A\u5FC5\u9808\u70BA ${i.divisor} \u7684\u500D\u6578`;case"unrecognized_keys":return`\u7121\u6CD5\u8B58\u5225\u7684\u9375\u503C${i.keys.length>1?"\u5011":""}\uFF1A${k(i.keys,"\u3001")}`;case"invalid_key":return`${i.origin} \u4E2D\u6709\u7121\u6548\u7684\u9375\u503C`;case"invalid_union":return"\u7121\u6548\u7684\u8F38\u5165\u503C";case"invalid_element":return`${i.origin} \u4E2D\u6709\u7121\u6548\u7684\u503C`;default:return"\u7121\u6548\u7684\u8F38\u5165\u503C"}}};function FE(){return{localeError:FB()}}var NB=()=>{let r={string:{unit:"\xE0mi",verb:"n\xED"},file:{unit:"bytes",verb:"n\xED"},array:{unit:"nkan",verb:"n\xED"},set:{unit:"nkan",verb:"n\xED"}};function e(i){return r[i]??null}let t=i=>{let o=typeof i;switch(o){case"number":return Number.isNaN(i)?"NaN":"n\u1ECD\u0301mb\xE0";case"object":{if(Array.isArray(i))return"akop\u1ECD";if(i===null)return"null";if(Object.getPrototypeOf(i)!==Object.prototype&&i.constructor)return i.constructor.name}}return o},n={regex:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9",email:"\xE0d\xEDr\u1EB9\u0301s\xEC \xECm\u1EB9\u0301l\xEC",url:"URL",emoji:"emoji",uuid:"UUID",uuidv4:"UUIDv4",uuidv6:"UUIDv6",nanoid:"nanoid",guid:"GUID",cuid:"cuid",cuid2:"cuid2",ulid:"ULID",xid:"XID",ksuid:"KSUID",datetime:"\xE0k\xF3k\xF2 ISO",date:"\u1ECDj\u1ECD\u0301 ISO",time:"\xE0k\xF3k\xF2 ISO",duration:"\xE0k\xF3k\xF2 t\xF3 p\xE9 ISO",ipv4:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv4",ipv6:"\xE0d\xEDr\u1EB9\u0301s\xEC IPv6",cidrv4:"\xE0gb\xE8gb\xE8 IPv4",cidrv6:"\xE0gb\xE8gb\xE8 IPv6",base64:"\u1ECD\u0300r\u1ECD\u0300 t\xED a k\u1ECD\u0301 n\xED base64",base64url:"\u1ECD\u0300r\u1ECD\u0300 base64url",json_string:"\u1ECD\u0300r\u1ECD\u0300 JSON",e164:"n\u1ECD\u0301mb\xE0 E.164",jwt:"JWT",template_literal:"\u1EB9\u0300r\u1ECD \xECb\xE1w\u1ECDl\xE9"};return i=>{switch(i.code){case"invalid_type":return`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${i.expected}, \xE0m\u1ECD\u0300 a r\xED ${t(i.input)}`;case"invalid_value":return i.values.length===1?`\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e: a n\xED l\xE1ti fi ${O(i.values[0])}`:`\xC0\u1E63\xE0y\xE0n a\u1E63\xEC\u1E63e: yan \u1ECD\u0300kan l\xE1ra ${k(i.values,"|")}`;case"too_big":{let o=i.inclusive?"<=":"<",s=e(i.origin);return s?`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${i.origin??"iye"} ${s.verb} ${o}${i.maximum} ${s.unit}`:`T\xF3 p\u1ECD\u0300 j\xF9: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${i.maximum}`}case"too_small":{let o=i.inclusive?">=":">",s=e(i.origin);return s?`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 p\xE9 ${i.origin} ${s.verb} ${o}${i.minimum} ${s.unit}`:`K\xE9r\xE9 ju: a n\xED l\xE1ti j\u1EB9\u0301 ${o}${i.minimum}`}case"invalid_format":{let o=i;return o.format==="starts_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\u1EB9\u0300r\u1EB9\u0300 p\u1EB9\u0300l\xFA "${o.prefix}"`:o.format==="ends_with"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 par\xED p\u1EB9\u0300l\xFA "${o.suffix}"`:o.format==="includes"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 n\xED "${o.includes}"`:o.format==="regex"?`\u1ECC\u0300r\u1ECD\u0300 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 b\xE1 \xE0p\u1EB9\u1EB9r\u1EB9 mu ${o.pattern}`:`A\u1E63\xEC\u1E63e: ${n[o.format]??i.format}`}case"not_multiple_of":return`N\u1ECD\u0301mb\xE0 a\u1E63\xEC\u1E63e: gb\u1ECD\u0301d\u1ECD\u0300 j\u1EB9\u0301 \xE8y\xE0 p\xEDp\xEDn ti ${i.divisor}`;case"unrecognized_keys":return`B\u1ECDt\xECn\xEC \xE0\xECm\u1ECD\u0300: ${k(i.keys,", ")}`;case"invalid_key":return`B\u1ECDt\xECn\xEC a\u1E63\xEC\u1E63e n\xEDn\xFA ${i.origin}`;case"invalid_union":return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e";case"invalid_element":return`Iye a\u1E63\xEC\u1E63e n\xEDn\xFA ${i.origin}`;default:return"\xCCb\xE1w\u1ECDl\xE9 a\u1E63\xEC\u1E63e"}}};function NE(){return{localeError:NB()}}var BE,w0=Symbol("ZodOutput"),b0=Symbol("ZodInput"),eu=class{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){let n=t[0];if(this._map.set(e,n),n&&typeof n=="object"&&"id"in n){if(this._idmap.has(n.id))throw new Error(`ID ${n.id} already exists in the registry`);this._idmap.set(n.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){let t=this._map.get(e);return t&&typeof t=="object"&&"id"in t&&this._idmap.delete(t.id),this._map.delete(e),this}get(e){let t=e._zod.parent;if(t){let n={...this.get(t)??{}};delete n.id;let i={...n,...this._map.get(e)};return Object.keys(i).length?i:void 0}return this._map.get(e)}has(e){return this._map.has(e)}};function Ug(){return new eu}(BE=globalThis).__zod_globalRegistry??(BE.__zod_globalRegistry=Ug());var pr=globalThis.__zod_globalRegistry;function A0(r,e){return new r({type:"string",...z(e)})}function _0(r,e){return new r({type:"string",coerce:!0,...z(e)})}function jg(r,e){return new r({type:"string",format:"email",check:"string_format",abort:!1,...z(e)})}function Dh(r,e){return new r({type:"string",format:"guid",check:"string_format",abort:!1,...z(e)})}function Lg(r,e){return new r({type:"string",format:"uuid",check:"string_format",abort:!1,...z(e)})}function Kg(r,e){return new r({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...z(e)})}function Wg(r,e){return new r({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...z(e)})}function Zg(r,e){return new r({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...z(e)})}function Mh(r,e){return new r({type:"string",format:"url",check:"string_format",abort:!1,...z(e)})}function Gg(r,e){return new r({type:"string",format:"emoji",check:"string_format",abort:!1,...z(e)})}function qg(r,e){return new r({type:"string",format:"nanoid",check:"string_format",abort:!1,...z(e)})}function Hg(r,e){return new r({type:"string",format:"cuid",check:"string_format",abort:!1,...z(e)})}function Jg(r,e){return new r({type:"string",format:"cuid2",check:"string_format",abort:!1,...z(e)})}function Qg(r,e){return new r({type:"string",format:"ulid",check:"string_format",abort:!1,...z(e)})}function Yg(r,e){return new r({type:"string",format:"xid",check:"string_format",abort:!1,...z(e)})}function Xg(r,e){return new r({type:"string",format:"ksuid",check:"string_format",abort:!1,...z(e)})}function ev(r,e){return new r({type:"string",format:"ipv4",check:"string_format",abort:!1,...z(e)})}function tv(r,e){return new r({type:"string",format:"ipv6",check:"string_format",abort:!1,...z(e)})}function P0(r,e){return new r({type:"string",format:"mac",check:"string_format",abort:!1,...z(e)})}function rv(r,e){return new r({type:"string",format:"cidrv4",check:"string_format",abort:!1,...z(e)})}function iv(r,e){return new r({type:"string",format:"cidrv6",check:"string_format",abort:!1,...z(e)})}function nv(r,e){return new r({type:"string",format:"base64",check:"string_format",abort:!1,...z(e)})}function ov(r,e){return new r({type:"string",format:"base64url",check:"string_format",abort:!1,...z(e)})}function sv(r,e){return new r({type:"string",format:"e164",check:"string_format",abort:!1,...z(e)})}function av(r,e){return new r({type:"string",format:"jwt",check:"string_format",abort:!1,...z(e)})}var E0={Any:null,Minute:-1,Second:0,Millisecond:3,Microsecond:6};function S0(r,e){return new r({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...z(e)})}function F0(r,e){return new r({type:"string",format:"date",check:"string_format",...z(e)})}function N0(r,e){return new r({type:"string",format:"time",check:"string_format",precision:null,...z(e)})}function B0(r,e){return new r({type:"string",format:"duration",check:"string_format",...z(e)})}function $0(r,e){return new r({type:"number",checks:[],...z(e)})}function k0(r,e){return new r({type:"number",coerce:!0,checks:[],...z(e)})}function I0(r,e){return new r({type:"number",check:"number_format",abort:!1,format:"safeint",...z(e)})}function D0(r,e){return new r({type:"number",check:"number_format",abort:!1,format:"float32",...z(e)})}function M0(r,e){return new r({type:"number",check:"number_format",abort:!1,format:"float64",...z(e)})}function T0(r,e){return new r({type:"number",check:"number_format",abort:!1,format:"int32",...z(e)})}function C0(r,e){return new r({type:"number",check:"number_format",abort:!1,format:"uint32",...z(e)})}function R0(r,e){return new r({type:"boolean",...z(e)})}function O0(r,e){return new r({type:"boolean",coerce:!0,...z(e)})}function V0(r,e){return new r({type:"bigint",...z(e)})}function z0(r,e){return new r({type:"bigint",coerce:!0,...z(e)})}function U0(r,e){return new r({type:"bigint",check:"bigint_format",abort:!1,format:"int64",...z(e)})}function j0(r,e){return new r({type:"bigint",check:"bigint_format",abort:!1,format:"uint64",...z(e)})}function L0(r,e){return new r({type:"symbol",...z(e)})}function K0(r,e){return new r({type:"undefined",...z(e)})}function W0(r,e){return new r({type:"null",...z(e)})}function Z0(r){return new r({type:"any"})}function G0(r){return new r({type:"unknown"})}function q0(r,e){return new r({type:"never",...z(e)})}function H0(r,e){return new r({type:"void",...z(e)})}function J0(r,e){return new r({type:"date",...z(e)})}function Q0(r,e){return new r({type:"date",coerce:!0,...z(e)})}function Y0(r,e){return new r({type:"nan",...z(e)})}function io(r,e){return new Fg({check:"less_than",...z(e),value:r,inclusive:!1})}function Pi(r,e){return new Fg({check:"less_than",...z(e),value:r,inclusive:!0})}function no(r,e){return new Ng({check:"greater_than",...z(e),value:r,inclusive:!1})}function Nr(r,e){return new Ng({check:"greater_than",...z(e),value:r,inclusive:!0})}function X0(r){return no(0,r)}function eA(r){return io(0,r)}function tA(r){return Pi(0,r)}function rA(r){return Nr(0,r)}function Ra(r,e){return new Zw({check:"multiple_of",...z(e),value:r})}function tu(r,e){return new Hw({check:"max_size",...z(e),maximum:r})}function Oa(r,e){return new Jw({check:"min_size",...z(e),minimum:r})}function Th(r,e){return new Qw({check:"size_equals",...z(e),size:r})}function ru(r,e){return new Yw({check:"max_length",...z(e),maximum:r})}function bs(r,e){return new Xw({check:"min_length",...z(e),minimum:r})}function iu(r,e){return new eb({check:"length_equals",...z(e),length:r})}function Ch(r,e){return new tb({check:"string_format",format:"regex",...z(e),pattern:r})}function Rh(r){return new rb({check:"string_format",format:"lowercase",...z(r)})}function Oh(r){return new ib({check:"string_format",format:"uppercase",...z(r)})}function Vh(r,e){return new nb({check:"string_format",format:"includes",...z(e),includes:r})}function zh(r,e){return new ob({check:"string_format",format:"starts_with",...z(e),prefix:r})}function Uh(r,e){return new sb({check:"string_format",format:"ends_with",...z(e),suffix:r})}function iA(r,e,t){return new ab({check:"property",property:r,schema:e,...z(t)})}function jh(r,e){return new lb({check:"mime_type",mime:r,...z(e)})}function En(r){return new cb({check:"overwrite",tx:r})}function Lh(r){return En(e=>e.normalize(r))}function Kh(){return En(r=>r.trim())}function Wh(){return En(r=>r.toLowerCase())}function Zh(){return En(r=>r.toUpperCase())}function Gh(){return En(r=>sw(r))}function nA(r,e,t){return new r({type:"array",element:e,...z(t)})}function $B(r,e,t){return new r({type:"union",options:e,...z(t)})}function kB(r,e,t,n){return new r({type:"union",options:t,discriminator:e,...z(n)})}function IB(r,e,t){return new r({type:"intersection",left:e,right:t})}function DB(r,e,t,n){let i=t instanceof he,o=i?n:t,s=i?t:null;return new r({type:"tuple",items:e,rest:s,...z(o)})}function MB(r,e,t,n){return new r({type:"record",keyType:e,valueType:t,...z(n)})}function TB(r,e,t,n){return new r({type:"map",keyType:e,valueType:t,...z(n)})}function CB(r,e,t){return new r({type:"set",valueType:e,...z(t)})}function RB(r,e,t){let n=Array.isArray(e)?Object.fromEntries(e.map(i=>[i,i])):e;return new r({type:"enum",entries:n,...z(t)})}function OB(r,e,t){return new r({type:"enum",entries:e,...z(t)})}function VB(r,e,t){return new r({type:"literal",values:Array.isArray(e)?e:[e],...z(t)})}function oA(r,e){return new r({type:"file",...z(e)})}function zB(r,e){return new r({type:"transform",transform:e})}function UB(r,e){return new r({type:"optional",innerType:e})}function jB(r,e){return new r({type:"nullable",innerType:e})}function LB(r,e,t){return new r({type:"default",innerType:e,get defaultValue(){return typeof t=="function"?t():lw(t)}})}function KB(r,e,t){return new r({type:"nonoptional",innerType:e,...z(t)})}function WB(r,e){return new r({type:"success",innerType:e})}function ZB(r,e,t){return new r({type:"catch",innerType:e,catchValue:typeof t=="function"?t:()=>t})}function GB(r,e,t){return new r({type:"pipe",in:e,out:t})}function qB(r,e){return new r({type:"readonly",innerType:e})}function HB(r,e,t){return new r({type:"template_literal",parts:e,...z(t)})}function JB(r,e){return new r({type:"lazy",getter:e})}function QB(r,e){return new r({type:"promise",innerType:e})}function sA(r,e,t){let n=z(t);return n.abort??(n.abort=!0),new r({type:"custom",check:"custom",fn:e,...n})}function aA(r,e,t){return new r({type:"custom",check:"custom",fn:e,...z(t)})}function lA(r){let e=$E(t=>(t.addIssue=n=>{if(typeof n=="string")t.issues.push(qc(n,t.value,e._zod.def));else{let i=n;i.fatal&&(i.continue=!1),i.code??(i.code="custom"),i.input??(i.input=t.value),i.inst??(i.inst=e),i.continue??(i.continue=!e._zod.def.abort),t.issues.push(qc(i))}},r(t.value,t)));return e}function $E(r,e){let t=new He({check:"custom",...z(e)});return t._zod.check=r,t}function cA(r){let e=new He({check:"describe"});return e._zod.onattach=[t=>{let n=pr.get(t)??{};pr.add(t,{...n,description:r})}],e._zod.check=()=>{},e}function uA(r){let e=new He({check:"meta"});return e._zod.onattach=[t=>{let n=pr.get(t)??{};pr.add(t,{...n,...r})}],e._zod.check=()=>{},e}function dA(r,e){let t=z(e),n=t.truthy??["true","1","yes","on","y","enabled"],i=t.falsy??["false","0","no","off","n","disabled"];t.case!=="sensitive"&&(n=n.map(v=>typeof v=="string"?v.toLowerCase():v),i=i.map(v=>typeof v=="string"?v.toLowerCase():v));let o=new Set(n),s=new Set(i),a=r.Codec??Bh,c=r.Boolean??Nh,l=r.String??Ca,d=new l({type:"string",error:t.error}),h=new c({type:"boolean",error:t.error}),f=new a({type:"pipe",in:d,out:h,transform:((v,m)=>{let y=v;return t.case!=="sensitive"&&(y=y.toLowerCase()),o.has(y)?!0:s.has(y)?!1:(m.issues.push({code:"invalid_value",expected:"stringbool",values:[...o,...s],input:m.value,inst:f,continue:!1}),{})}),reverseTransform:((v,m)=>v===!0?n[0]||"true":i[0]||"false"),error:t.error});return f}function nu(r,e,t,n={}){let i=z(n),o={...z(n),check:"string_format",type:"string",format:e,fn:typeof t=="function"?t:a=>t.test(a),...i};return t instanceof RegExp&&(o.pattern=t),new r(o)}var qh=class{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??pr,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var n;let i=e._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},s=this.seen.get(e);if(s)return s.count++,t.schemaPath.includes(e)&&(s.cycle=t.path),s.schema;let a={schema:{},count:1,cycle:void 0,path:t.path};this.seen.set(e,a);let c=e._zod.toJSONSchema?.();if(c)a.schema=c;else{let h={...t,schemaPath:[...t.schemaPath,e],path:t.path},f=e._zod.parent;if(f)a.ref=f,this.process(f,h),this.seen.get(f).isParent=!0;else{let v=a.schema;switch(i.type){case"string":{let m=v;m.type="string";let{minimum:y,maximum:x,format:S,patterns:C,contentEncoding:V}=e._zod.bag;if(typeof y=="number"&&(m.minLength=y),typeof x=="number"&&(m.maxLength=x),S&&(m.format=o[S]??S,m.format===""&&delete m.format),V&&(m.contentEncoding=V),C&&C.size>0){let K=[...C];K.length===1?m.pattern=K[0].source:K.length>1&&(a.schema.allOf=[...K.map(G=>({...this.target==="draft-7"||this.target==="draft-4"||this.target==="openapi-3.0"?{type:"string"}:{},pattern:G.source}))])}break}case"number":{let m=v,{minimum:y,maximum:x,format:S,multipleOf:C,exclusiveMaximum:V,exclusiveMinimum:K}=e._zod.bag;typeof S=="string"&&S.includes("int")?m.type="integer":m.type="number",typeof K=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(m.minimum=K,m.exclusiveMinimum=!0):m.exclusiveMinimum=K),typeof y=="number"&&(m.minimum=y,typeof K=="number"&&this.target!=="draft-4"&&(K>=y?delete m.minimum:delete m.exclusiveMinimum)),typeof V=="number"&&(this.target==="draft-4"||this.target==="openapi-3.0"?(m.maximum=V,m.exclusiveMaximum=!0):m.exclusiveMaximum=V),typeof x=="number"&&(m.maximum=x,typeof V=="number"&&this.target!=="draft-4"&&(V<=x?delete m.maximum:delete m.exclusiveMaximum)),typeof C=="number"&&(m.multipleOf=C);break}case"boolean":{let m=v;m.type="boolean";break}case"bigint":{if(this.unrepresentable==="throw")throw new Error("BigInt cannot be represented in JSON Schema");break}case"symbol":{if(this.unrepresentable==="throw")throw new Error("Symbols cannot be represented in JSON Schema");break}case"null":{this.target==="openapi-3.0"?(v.type="string",v.nullable=!0,v.enum=[null]):v.type="null";break}case"any":break;case"unknown":break;case"undefined":{if(this.unrepresentable==="throw")throw new Error("Undefined cannot be represented in JSON Schema");break}case"void":{if(this.unrepresentable==="throw")throw new Error("Void cannot be represented in JSON Schema");break}case"never":{v.not={};break}case"date":{if(this.unrepresentable==="throw")throw new Error("Date cannot be represented in JSON Schema");break}case"array":{let m=v,{minimum:y,maximum:x}=e._zod.bag;typeof y=="number"&&(m.minItems=y),typeof x=="number"&&(m.maxItems=x),m.type="array",m.items=this.process(i.element,{...h,path:[...h.path,"items"]});break}case"object":{let m=v;m.type="object",m.properties={};let y=i.shape;for(let C in y)m.properties[C]=this.process(y[C],{...h,path:[...h.path,"properties",C]});let x=new Set(Object.keys(y)),S=new Set([...x].filter(C=>{let V=i.shape[C]._zod;return this.io==="input"?V.optin===void 0:V.optout===void 0}));S.size>0&&(m.required=Array.from(S)),i.catchall?._zod.def.type==="never"?m.additionalProperties=!1:i.catchall?i.catchall&&(m.additionalProperties=this.process(i.catchall,{...h,path:[...h.path,"additionalProperties"]})):this.io==="output"&&(m.additionalProperties=!1);break}case"union":{let m=v,y=i.discriminator!==void 0,x=i.options.map((S,C)=>this.process(S,{...h,path:[...h.path,y?"oneOf":"anyOf",C]}));y?m.oneOf=x:m.anyOf=x;break}case"intersection":{let m=v,y=this.process(i.left,{...h,path:[...h.path,"allOf",0]}),x=this.process(i.right,{...h,path:[...h.path,"allOf",1]}),S=V=>"allOf"in V&&Object.keys(V).length===1,C=[...S(y)?y.allOf:[y],...S(x)?x.allOf:[x]];m.allOf=C;break}case"tuple":{let m=v;m.type="array";let y=this.target==="draft-2020-12"?"prefixItems":"items",x=this.target==="draft-2020-12"||this.target==="openapi-3.0"?"items":"additionalItems",S=i.items.map((G,ye)=>this.process(G,{...h,path:[...h.path,y,ye]})),C=i.rest?this.process(i.rest,{...h,path:[...h.path,x,...this.target==="openapi-3.0"?[i.items.length]:[]]}):null;this.target==="draft-2020-12"?(m.prefixItems=S,C&&(m.items=C)):this.target==="openapi-3.0"?(m.items={anyOf:S},C&&m.items.anyOf.push(C),m.minItems=S.length,C||(m.maxItems=S.length)):(m.items=S,C&&(m.additionalItems=C));let{minimum:V,maximum:K}=e._zod.bag;typeof V=="number"&&(m.minItems=V),typeof K=="number"&&(m.maxItems=K);break}case"record":{let m=v;m.type="object",(this.target==="draft-7"||this.target==="draft-2020-12")&&(m.propertyNames=this.process(i.keyType,{...h,path:[...h.path,"propertyNames"]})),m.additionalProperties=this.process(i.valueType,{...h,path:[...h.path,"additionalProperties"]});break}case"map":{if(this.unrepresentable==="throw")throw new Error("Map cannot be represented in JSON Schema");break}case"set":{if(this.unrepresentable==="throw")throw new Error("Set cannot be represented in JSON Schema");break}case"enum":{let m=v,y=vh(i.entries);y.every(x=>typeof x=="number")&&(m.type="number"),y.every(x=>typeof x=="string")&&(m.type="string"),m.enum=y;break}case"literal":{let m=v,y=[];for(let x of i.values)if(x===void 0){if(this.unrepresentable==="throw")throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if(typeof x=="bigint"){if(this.unrepresentable==="throw")throw new Error("BigInt literals cannot be represented in JSON Schema");y.push(Number(x))}else y.push(x);if(y.length!==0)if(y.length===1){let x=y[0];m.type=x===null?"null":typeof x,this.target==="draft-4"||this.target==="openapi-3.0"?m.enum=[x]:m.const=x}else y.every(x=>typeof x=="number")&&(m.type="number"),y.every(x=>typeof x=="string")&&(m.type="string"),y.every(x=>typeof x=="boolean")&&(m.type="string"),y.every(x=>x===null)&&(m.type="null"),m.enum=y;break}case"file":{let m=v,y={type:"string",format:"binary",contentEncoding:"binary"},{minimum:x,maximum:S,mime:C}=e._zod.bag;x!==void 0&&(y.minLength=x),S!==void 0&&(y.maxLength=S),C?C.length===1?(y.contentMediaType=C[0],Object.assign(m,y)):m.anyOf=C.map(V=>({...y,contentMediaType:V})):Object.assign(m,y);break}case"transform":{if(this.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema");break}case"nullable":{let m=this.process(i.innerType,h);this.target==="openapi-3.0"?(a.ref=i.innerType,v.nullable=!0):v.anyOf=[m,{type:"null"}];break}case"nonoptional":{this.process(i.innerType,h),a.ref=i.innerType;break}case"success":{let m=v;m.type="boolean";break}case"default":{this.process(i.innerType,h),a.ref=i.innerType,v.default=JSON.parse(JSON.stringify(i.defaultValue));break}case"prefault":{this.process(i.innerType,h),a.ref=i.innerType,this.io==="input"&&(v._prefault=JSON.parse(JSON.stringify(i.defaultValue)));break}case"catch":{this.process(i.innerType,h),a.ref=i.innerType;let m;try{m=i.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}v.default=m;break}case"nan":{if(this.unrepresentable==="throw")throw new Error("NaN cannot be represented in JSON Schema");break}case"template_literal":{let m=v,y=e._zod.pattern;if(!y)throw new Error("Pattern not found in template literal");m.type="string",m.pattern=y.source;break}case"pipe":{let m=this.io==="input"?i.in._zod.def.type==="transform"?i.out:i.in:i.out;this.process(m,h),a.ref=m;break}case"readonly":{this.process(i.innerType,h),a.ref=i.innerType,v.readOnly=!0;break}case"promise":{this.process(i.innerType,h),a.ref=i.innerType;break}case"optional":{this.process(i.innerType,h),a.ref=i.innerType;break}case"lazy":{let m=e._zod.innerType;this.process(m,h),a.ref=m;break}case"custom":{if(this.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema");break}case"function":{if(this.unrepresentable==="throw")throw new Error("Function types cannot be represented in JSON Schema");break}default:}}}let l=this.metadataRegistry.get(e);return l&&Object.assign(a.schema,l),this.io==="input"&&fr(e)&&(delete a.schema.examples,delete a.schema.default),this.io==="input"&&a.schema._prefault&&((n=a.schema).default??(n.default=a.schema._prefault)),delete a.schema._prefault,this.seen.get(e).schema}emit(e,t){let n={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},i=this.seen.get(e);if(!i)throw new Error("Unprocessed schema. This is a bug in Zod.");let o=d=>{let h=this.target==="draft-2020-12"?"$defs":"definitions";if(n.external){let y=n.external.registry.get(d[0])?.id,x=n.external.uri??(C=>C);if(y)return{ref:x(y)};let S=d[1].defId??d[1].schema.id??`schema${this.counter++}`;return d[1].defId=S,{defId:S,ref:`${x("__shared")}#/${h}/${S}`}}if(d[1]===i)return{ref:"#"};let v=`#/${h}/`,m=d[1].schema.id??`__schema${this.counter++}`;return{defId:m,ref:v+m}},s=d=>{if(d[1].schema.$ref)return;let h=d[1],{ref:f,defId:v}=o(d);h.def={...h.schema},v&&(h.defId=v);let m=h.schema;for(let y in m)delete m[y];m.$ref=f};if(n.cycles==="throw")for(let d of this.seen.entries()){let h=d[1];if(h.cycle)throw new Error(`Cycle detected: #/${h.cycle?.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(let d of this.seen.entries()){let h=d[1];if(e===d[0]){s(d);continue}if(n.external){let v=n.external.registry.get(d[0])?.id;if(e!==d[0]&&v){s(d);continue}}if(this.metadataRegistry.get(d[0])?.id){s(d);continue}if(h.cycle){s(d);continue}if(h.count>1&&n.reused==="ref"){s(d);continue}}let a=(d,h)=>{let f=this.seen.get(d),v=f.def??f.schema,m={...v};if(f.ref===null)return;let y=f.ref;if(f.ref=null,y){a(y,h);let x=this.seen.get(y).schema;x.$ref&&(h.target==="draft-7"||h.target==="draft-4"||h.target==="openapi-3.0")?(v.allOf=v.allOf??[],v.allOf.push(x)):(Object.assign(v,x),Object.assign(v,m))}f.isParent||this.override({zodSchema:d,jsonSchema:v,path:f.path??[]})};for(let d of[...this.seen.entries()].reverse())a(d[0],{target:this.target});let c={};if(this.target==="draft-2020-12"?c.$schema="https://json-schema.org/draft/2020-12/schema":this.target==="draft-7"?c.$schema="http://json-schema.org/draft-07/schema#":this.target==="draft-4"?c.$schema="http://json-schema.org/draft-04/schema#":this.target==="openapi-3.0"||console.warn(`Invalid target: ${this.target}`),n.external?.uri){let d=n.external.registry.get(e)?.id;if(!d)throw new Error("Schema is missing an `id` property");c.$id=n.external.uri(d)}Object.assign(c,i.def);let l=n.external?.defs??{};for(let d of this.seen.entries()){let h=d[1];h.def&&h.defId&&(l[h.defId]=h.def)}n.external||Object.keys(l).length>0&&(this.target==="draft-2020-12"?c.$defs=l:c.definitions=l);try{return JSON.parse(JSON.stringify(c))}catch{throw new Error("Error converting schema to JSON.")}}};function hA(r,e){if(r instanceof eu){let n=new qh(e),i={};for(let a of r._idmap.entries()){let[c,l]=a;n.process(l)}let o={},s={registry:r,uri:e?.uri,defs:i};for(let a of r._idmap.entries()){let[c,l]=a;o[c]=n.emit(l,{...e,external:s})}if(Object.keys(i).length>0){let a=n.target==="draft-2020-12"?"$defs":"definitions";o.__shared={[a]:i}}return{schemas:o}}let t=new qh(e);return t.process(r),t.emit(r,e)}function fr(r,e){let t=e??{seen:new Set};if(t.seen.has(r))return!1;t.seen.add(r);let n=r._zod.def;if(n.type==="transform")return!0;if(n.type==="array")return fr(n.element,t);if(n.type==="set")return fr(n.valueType,t);if(n.type==="lazy")return fr(n.getter(),t);if(n.type==="promise"||n.type==="optional"||n.type==="nonoptional"||n.type==="nullable"||n.type==="readonly"||n.type==="default"||n.type==="prefault")return fr(n.innerType,t);if(n.type==="intersection")return fr(n.left,t)||fr(n.right,t);if(n.type==="record"||n.type==="map")return fr(n.keyType,t)||fr(n.valueType,t);if(n.type==="pipe")return fr(n.in,t)||fr(n.out,t);if(n.type==="object"){for(let i in n.shape)if(fr(n.shape[i],t))return!0;return!1}if(n.type==="union"){for(let i of n.options)if(fr(i,t))return!0;return!1}if(n.type==="tuple"){for(let i of n.items)if(fr(i,t))return!0;return!!(n.rest&&fr(n.rest,t))}return!1}var kE={};var hv={};Ss(hv,{ZodISODate:()=>cv,ZodISODateTime:()=>lv,ZodISODuration:()=>dv,ZodISOTime:()=>uv,date:()=>fA,datetime:()=>pA,duration:()=>gA,time:()=>mA});var lv=w("ZodISODateTime",(r,e)=>{_b.init(r,e),Je.init(r,e)});function pA(r){return S0(lv,r)}var cv=w("ZodISODate",(r,e)=>{Pb.init(r,e),Je.init(r,e)});function fA(r){return F0(cv,r)}var uv=w("ZodISOTime",(r,e)=>{Eb.init(r,e),Je.init(r,e)});function mA(r){return N0(uv,r)}var dv=w("ZodISODuration",(r,e)=>{Sb.init(r,e),Je.init(r,e)});function gA(r){return B0(dv,r)}var DE=(r,e)=>{Ah.init(r,e),r.name="ZodError",Object.defineProperties(r,{format:{value:t=>Ph(r,t)},flatten:{value:t=>_h(r,t)},addIssue:{value:t=>{r.issues.push(t),r.message=JSON.stringify(r.issues,Zc,2)}},addIssues:{value:t=>{r.issues.push(...t),r.message=JSON.stringify(r.issues,Zc,2)}},isEmpty:{get(){return r.issues.length===0}}})},XB=w("ZodError",DE),Br=w("ZodError",DE,{Parent:Error});var vA=Hc(Br),yA=Jc(Br),xA=Qc(Br),wA=Yc(Br),bA=yg(Br),AA=xg(Br),_A=wg(Br),PA=bg(Br),EA=Ag(Br),SA=_g(Br),FA=Pg(Br),NA=Eg(Br);var Ae=w("ZodType",(r,e)=>(he.init(r,e),r.def=e,r.type=e.type,Object.defineProperty(r,"_def",{value:e}),r.check=(...t)=>r.clone(U.mergeDefs(e,{checks:[...e.checks??[],...t.map(n=>typeof n=="function"?{_zod:{check:n,def:{check:"custom"},onattach:[]}}:n)]})),r.clone=(t,n)=>hr(r,t,n),r.brand=()=>r,r.register=((t,n)=>(t.add(r,n),r)),r.parse=(t,n)=>vA(r,t,n,{callee:r.parse}),r.safeParse=(t,n)=>xA(r,t,n),r.parseAsync=async(t,n)=>yA(r,t,n,{callee:r.parseAsync}),r.safeParseAsync=async(t,n)=>wA(r,t,n),r.spa=r.safeParseAsync,r.encode=(t,n)=>bA(r,t,n),r.decode=(t,n)=>AA(r,t,n),r.encodeAsync=async(t,n)=>_A(r,t,n),r.decodeAsync=async(t,n)=>PA(r,t,n),r.safeEncode=(t,n)=>EA(r,t,n),r.safeDecode=(t,n)=>SA(r,t,n),r.safeEncodeAsync=async(t,n)=>FA(r,t,n),r.safeDecodeAsync=async(t,n)=>NA(r,t,n),r.refine=(t,n)=>r.check(wS(t,n)),r.superRefine=t=>r.check(bS(t)),r.overwrite=t=>r.check(En(t)),r.optional=()=>fv(r),r.nullable=()=>mv(r),r.nullish=()=>fv(mv(r)),r.nonoptional=t=>lS(r,t),r.array=()=>xv(r),r.or=t=>QA([r,t]),r.and=t=>qE(r,t),r.transform=t=>gv(r,e_(t)),r.default=t=>oS(r,t),r.prefault=t=>aS(r,t),r.catch=t=>dS(r,t),r.pipe=t=>gv(r,t),r.readonly=()=>fS(r),r.describe=t=>{let n=r.clone();return pr.add(n,{description:t}),n},Object.defineProperty(r,"description",{get(){return pr.get(r)?.description},configurable:!0}),r.meta=(...t)=>{if(t.length===0)return pr.get(r);let n=r.clone();return pr.add(n,t[0]),n},r.isOptional=()=>r.safeParse(void 0).success,r.isNullable=()=>r.safeParse(null).success,r)),kA=w("_ZodString",(r,e)=>{Ca.init(r,e),Ae.init(r,e);let t=r._zod.bag;r.format=t.format??null,r.minLength=t.minimum??null,r.maxLength=t.maximum??null,r.regex=(...n)=>r.check(Ch(...n)),r.includes=(...n)=>r.check(Vh(...n)),r.startsWith=(...n)=>r.check(zh(...n)),r.endsWith=(...n)=>r.check(Uh(...n)),r.min=(...n)=>r.check(bs(...n)),r.max=(...n)=>r.check(ru(...n)),r.length=(...n)=>r.check(iu(...n)),r.nonempty=(...n)=>r.check(bs(1,...n)),r.lowercase=n=>r.check(Rh(n)),r.uppercase=n=>r.check(Oh(n)),r.trim=()=>r.check(Kh()),r.normalize=(...n)=>r.check(Lh(...n)),r.toLowerCase=()=>r.check(Wh()),r.toUpperCase=()=>r.check(Zh()),r.slugify=()=>r.check(Gh())}),Jh=w("ZodString",(r,e)=>{Ca.init(r,e),kA.init(r,e),r.email=t=>r.check(jg(IA,t)),r.url=t=>r.check(Mh(vv,t)),r.jwt=t=>r.check(av(GA,t)),r.emoji=t=>r.check(Gg(DA,t)),r.guid=t=>r.check(Dh(pv,t)),r.uuid=t=>r.check(Lg(so,t)),r.uuidv4=t=>r.check(Kg(so,t)),r.uuidv6=t=>r.check(Wg(so,t)),r.uuidv7=t=>r.check(Zg(so,t)),r.nanoid=t=>r.check(qg(MA,t)),r.guid=t=>r.check(Dh(pv,t)),r.cuid=t=>r.check(Hg(TA,t)),r.cuid2=t=>r.check(Jg(CA,t)),r.ulid=t=>r.check(Qg(RA,t)),r.base64=t=>r.check(nv(KA,t)),r.base64url=t=>r.check(ov(WA,t)),r.xid=t=>r.check(Yg(OA,t)),r.ksuid=t=>r.check(Xg(VA,t)),r.ipv4=t=>r.check(ev(zA,t)),r.ipv6=t=>r.check(tv(UA,t)),r.cidrv4=t=>r.check(rv(jA,t)),r.cidrv6=t=>r.check(iv(LA,t)),r.e164=t=>r.check(sv(ZA,t)),r.datetime=t=>r.check(pA(t)),r.date=t=>r.check(fA(t)),r.time=t=>r.check(mA(t)),r.duration=t=>r.check(gA(t))});function BA(r){return A0(Jh,r)}var Je=w("ZodStringFormat",(r,e)=>{We.init(r,e),kA.init(r,e)}),IA=w("ZodEmail",(r,e)=>{fb.init(r,e),Je.init(r,e)});function t$(r){return jg(IA,r)}var pv=w("ZodGUID",(r,e)=>{hb.init(r,e),Je.init(r,e)});function r$(r){return Dh(pv,r)}var so=w("ZodUUID",(r,e)=>{pb.init(r,e),Je.init(r,e)});function i$(r){return Lg(so,r)}function n$(r){return Kg(so,r)}function o$(r){return Wg(so,r)}function s$(r){return Zg(so,r)}var vv=w("ZodURL",(r,e)=>{mb.init(r,e),Je.init(r,e)});function a$(r){return Mh(vv,r)}function l$(r){return Mh(vv,{protocol:/^https?$/,hostname:_i.domain,...U.normalizeParams(r)})}var DA=w("ZodEmoji",(r,e)=>{gb.init(r,e),Je.init(r,e)});function c$(r){return Gg(DA,r)}var MA=w("ZodNanoID",(r,e)=>{vb.init(r,e),Je.init(r,e)});function u$(r){return qg(MA,r)}var TA=w("ZodCUID",(r,e)=>{yb.init(r,e),Je.init(r,e)});function d$(r){return Hg(TA,r)}var CA=w("ZodCUID2",(r,e)=>{xb.init(r,e),Je.init(r,e)});function h$(r){return Jg(CA,r)}var RA=w("ZodULID",(r,e)=>{wb.init(r,e),Je.init(r,e)});function p$(r){return Qg(RA,r)}var OA=w("ZodXID",(r,e)=>{bb.init(r,e),Je.init(r,e)});function f$(r){return Yg(OA,r)}var VA=w("ZodKSUID",(r,e)=>{Ab.init(r,e),Je.init(r,e)});function m$(r){return Xg(VA,r)}var zA=w("ZodIPv4",(r,e)=>{Fb.init(r,e),Je.init(r,e)});function g$(r){return ev(zA,r)}var ME=w("ZodMAC",(r,e)=>{Bb.init(r,e),Je.init(r,e)});function v$(r){return P0(ME,r)}var UA=w("ZodIPv6",(r,e)=>{Nb.init(r,e),Je.init(r,e)});function y$(r){return tv(UA,r)}var jA=w("ZodCIDRv4",(r,e)=>{$b.init(r,e),Je.init(r,e)});function x$(r){return rv(jA,r)}var LA=w("ZodCIDRv6",(r,e)=>{kb.init(r,e),Je.init(r,e)});function w$(r){return iv(LA,r)}var KA=w("ZodBase64",(r,e)=>{Db.init(r,e),Je.init(r,e)});function b$(r){return nv(KA,r)}var WA=w("ZodBase64URL",(r,e)=>{Mb.init(r,e),Je.init(r,e)});function A$(r){return ov(WA,r)}var ZA=w("ZodE164",(r,e)=>{Tb.init(r,e),Je.init(r,e)});function _$(r){return sv(ZA,r)}var GA=w("ZodJWT",(r,e)=>{Cb.init(r,e),Je.init(r,e)});function P$(r){return av(GA,r)}var Qh=w("ZodCustomStringFormat",(r,e)=>{Rb.init(r,e),Je.init(r,e)});function E$(r,e,t={}){return nu(Qh,r,e,t)}function S$(r){return nu(Qh,"hostname",_i.hostname,r)}function F$(r){return nu(Qh,"hex",_i.hex,r)}function N$(r,e){let t=e?.enc??"hex",n=`${r}_${t}`,i=_i[n];if(!i)throw new Error(`Unrecognized hash format: ${n}`);return nu(Qh,n,i,e)}var Yh=w("ZodNumber",(r,e)=>{Mg.init(r,e),Ae.init(r,e),r.gt=(n,i)=>r.check(no(n,i)),r.gte=(n,i)=>r.check(Nr(n,i)),r.min=(n,i)=>r.check(Nr(n,i)),r.lt=(n,i)=>r.check(io(n,i)),r.lte=(n,i)=>r.check(Pi(n,i)),r.max=(n,i)=>r.check(Pi(n,i)),r.int=n=>r.check($A(n)),r.safe=n=>r.check($A(n)),r.positive=n=>r.check(no(0,n)),r.nonnegative=n=>r.check(Nr(0,n)),r.negative=n=>r.check(io(0,n)),r.nonpositive=n=>r.check(Pi(0,n)),r.multipleOf=(n,i)=>r.check(Ra(n,i)),r.step=(n,i)=>r.check(Ra(n,i)),r.finite=()=>r;let t=r._zod.bag;r.minValue=Math.max(t.minimum??Number.NEGATIVE_INFINITY,t.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,r.maxValue=Math.min(t.maximum??Number.POSITIVE_INFINITY,t.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,r.isInt=(t.format??"").includes("int")||Number.isSafeInteger(t.multipleOf??.5),r.isFinite=!0,r.format=t.format??null});function TE(r){return $0(Yh,r)}var su=w("ZodNumberFormat",(r,e)=>{Ob.init(r,e),Yh.init(r,e)});function $A(r){return I0(su,r)}function B$(r){return D0(su,r)}function $$(r){return M0(su,r)}function k$(r){return T0(su,r)}function I$(r){return C0(su,r)}var Xh=w("ZodBoolean",(r,e)=>{Nh.init(r,e),Ae.init(r,e)});function CE(r){return R0(Xh,r)}var ep=w("ZodBigInt",(r,e)=>{Tg.init(r,e),Ae.init(r,e),r.gte=(n,i)=>r.check(Nr(n,i)),r.min=(n,i)=>r.check(Nr(n,i)),r.gt=(n,i)=>r.check(no(n,i)),r.gte=(n,i)=>r.check(Nr(n,i)),r.min=(n,i)=>r.check(Nr(n,i)),r.lt=(n,i)=>r.check(io(n,i)),r.lte=(n,i)=>r.check(Pi(n,i)),r.max=(n,i)=>r.check(Pi(n,i)),r.positive=n=>r.check(no(BigInt(0),n)),r.negative=n=>r.check(io(BigInt(0),n)),r.nonpositive=n=>r.check(Pi(BigInt(0),n)),r.nonnegative=n=>r.check(Nr(BigInt(0),n)),r.multipleOf=(n,i)=>r.check(Ra(n,i));let t=r._zod.bag;r.minValue=t.minimum??null,r.maxValue=t.maximum??null,r.format=t.format??null});function D$(r){return V0(ep,r)}var qA=w("ZodBigIntFormat",(r,e)=>{Vb.init(r,e),ep.init(r,e)});function M$(r){return U0(qA,r)}function T$(r){return j0(qA,r)}var RE=w("ZodSymbol",(r,e)=>{zb.init(r,e),Ae.init(r,e)});function C$(r){return L0(RE,r)}var OE=w("ZodUndefined",(r,e)=>{Ub.init(r,e),Ae.init(r,e)});function R$(r){return K0(OE,r)}var VE=w("ZodNull",(r,e)=>{jb.init(r,e),Ae.init(r,e)});function zE(r){return W0(VE,r)}var UE=w("ZodAny",(r,e)=>{Lb.init(r,e),Ae.init(r,e)});function O$(){return Z0(UE)}var jE=w("ZodUnknown",(r,e)=>{Kb.init(r,e),Ae.init(r,e)});function ou(){return G0(jE)}var LE=w("ZodNever",(r,e)=>{Wb.init(r,e),Ae.init(r,e)});function HA(r){return q0(LE,r)}var KE=w("ZodVoid",(r,e)=>{Zb.init(r,e),Ae.init(r,e)});function V$(r){return H0(KE,r)}var yv=w("ZodDate",(r,e)=>{Gb.init(r,e),Ae.init(r,e),r.min=(n,i)=>r.check(Nr(n,i)),r.max=(n,i)=>r.check(Pi(n,i));let t=r._zod.bag;r.minDate=t.minimum?new Date(t.minimum):null,r.maxDate=t.maximum?new Date(t.maximum):null});function z$(r){return J0(yv,r)}var WE=w("ZodArray",(r,e)=>{qb.init(r,e),Ae.init(r,e),r.element=e.element,r.min=(t,n)=>r.check(bs(t,n)),r.nonempty=t=>r.check(bs(1,t)),r.max=(t,n)=>r.check(ru(t,n)),r.length=(t,n)=>r.check(iu(t,n)),r.unwrap=()=>r.element});function xv(r,e){return nA(WE,r,e)}function U$(r){let e=r._zod.def.shape;return XA(Object.keys(e))}var wv=w("ZodObject",(r,e)=>{Hb.init(r,e),Ae.init(r,e),U.defineLazy(r,"shape",()=>e.shape),r.keyof=()=>XA(Object.keys(r._zod.def.shape)),r.catchall=t=>r.clone({...r._zod.def,catchall:t}),r.passthrough=()=>r.clone({...r._zod.def,catchall:ou()}),r.loose=()=>r.clone({...r._zod.def,catchall:ou()}),r.strict=()=>r.clone({...r._zod.def,catchall:HA()}),r.strip=()=>r.clone({...r._zod.def,catchall:void 0}),r.extend=t=>U.extend(r,t),r.safeExtend=t=>U.safeExtend(r,t),r.merge=t=>U.merge(r,t),r.pick=t=>U.pick(r,t),r.omit=t=>U.omit(r,t),r.partial=(...t)=>U.partial(t_,r,t[0]),r.required=(...t)=>U.required(r_,r,t[0])});function j$(r,e){let t={type:"object",shape:r??{},...U.normalizeParams(e)};return new wv(t)}function L$(r,e){return new wv({type:"object",shape:r,catchall:HA(),...U.normalizeParams(e)})}function K$(r,e){return new wv({type:"object",shape:r,catchall:ou(),...U.normalizeParams(e)})}var JA=w("ZodUnion",(r,e)=>{Cg.init(r,e),Ae.init(r,e),r.options=e.options});function QA(r,e){return new JA({type:"union",options:r,...U.normalizeParams(e)})}var ZE=w("ZodDiscriminatedUnion",(r,e)=>{JA.init(r,e),Jb.init(r,e)});function W$(r,e,t){return new ZE({type:"union",options:e,discriminator:r,...U.normalizeParams(t)})}var GE=w("ZodIntersection",(r,e)=>{Qb.init(r,e),Ae.init(r,e)});function qE(r,e){return new GE({type:"intersection",left:r,right:e})}var HE=w("ZodTuple",(r,e)=>{Rg.init(r,e),Ae.init(r,e),r.rest=t=>r.clone({...r._zod.def,rest:t})});function JE(r,e,t){let n=e instanceof he,i=n?t:e,o=n?e:null;return new HE({type:"tuple",items:r,rest:o,...U.normalizeParams(i)})}var YA=w("ZodRecord",(r,e)=>{Yb.init(r,e),Ae.init(r,e),r.keyType=e.keyType,r.valueType=e.valueType});function QE(r,e,t){return new YA({type:"record",keyType:r,valueType:e,...U.normalizeParams(t)})}function Z$(r,e,t){let n=hr(r);return n._zod.values=void 0,new YA({type:"record",keyType:n,valueType:e,...U.normalizeParams(t)})}var YE=w("ZodMap",(r,e)=>{Xb.init(r,e),Ae.init(r,e),r.keyType=e.keyType,r.valueType=e.valueType});function G$(r,e,t){return new YE({type:"map",keyType:r,valueType:e,...U.normalizeParams(t)})}var XE=w("ZodSet",(r,e)=>{e0.init(r,e),Ae.init(r,e),r.min=(...t)=>r.check(Oa(...t)),r.nonempty=t=>r.check(Oa(1,t)),r.max=(...t)=>r.check(tu(...t)),r.size=(...t)=>r.check(Th(...t))});function q$(r,e){return new XE({type:"set",valueType:r,...U.normalizeParams(e)})}var Hh=w("ZodEnum",(r,e)=>{t0.init(r,e),Ae.init(r,e),r.enum=e.entries,r.options=Object.values(e.entries);let t=new Set(Object.keys(e.entries));r.extract=(n,i)=>{let o={};for(let s of n)if(t.has(s))o[s]=e.entries[s];else throw new Error(`Key ${s} not found in enum`);return new Hh({...e,checks:[],...U.normalizeParams(i),entries:o})},r.exclude=(n,i)=>{let o={...e.entries};for(let s of n)if(t.has(s))delete o[s];else throw new Error(`Key ${s} not found in enum`);return new Hh({...e,checks:[],...U.normalizeParams(i),entries:o})}});function XA(r,e){let t=Array.isArray(r)?Object.fromEntries(r.map(n=>[n,n])):r;return new Hh({type:"enum",entries:t,...U.normalizeParams(e)})}function H$(r,e){return new Hh({type:"enum",entries:r,...U.normalizeParams(e)})}var eS=w("ZodLiteral",(r,e)=>{r0.init(r,e),Ae.init(r,e),r.values=new Set(e.values),Object.defineProperty(r,"value",{get(){if(e.values.length>1)throw new Error("This schema contains multiple valid literal values. Use `.values` instead.");return e.values[0]}})});function J$(r,e){return new eS({type:"literal",values:Array.isArray(r)?r:[r],...U.normalizeParams(e)})}var tS=w("ZodFile",(r,e)=>{i0.init(r,e),Ae.init(r,e),r.min=(t,n)=>r.check(Oa(t,n)),r.max=(t,n)=>r.check(tu(t,n)),r.mime=(t,n)=>r.check(jh(Array.isArray(t)?t:[t],n))});function Q$(r){return oA(tS,r)}var rS=w("ZodTransform",(r,e)=>{n0.init(r,e),Ae.init(r,e),r._zod.parse=(t,n)=>{if(n.direction==="backward")throw new ms(r.constructor.name);t.addIssue=o=>{if(typeof o=="string")t.issues.push(U.issue(o,t.value,e));else{let s=o;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=t.value),s.inst??(s.inst=r),t.issues.push(U.issue(s))}};let i=e.transform(t.value,t);return i instanceof Promise?i.then(o=>(t.value=o,t)):(t.value=i,t)}});function e_(r){return new rS({type:"transform",transform:r})}var t_=w("ZodOptional",(r,e)=>{o0.init(r,e),Ae.init(r,e),r.unwrap=()=>r._zod.def.innerType});function fv(r){return new t_({type:"optional",innerType:r})}var iS=w("ZodNullable",(r,e)=>{s0.init(r,e),Ae.init(r,e),r.unwrap=()=>r._zod.def.innerType});function mv(r){return new iS({type:"nullable",innerType:r})}function Y$(r){return fv(mv(r))}var nS=w("ZodDefault",(r,e)=>{a0.init(r,e),Ae.init(r,e),r.unwrap=()=>r._zod.def.innerType,r.removeDefault=r.unwrap});function oS(r,e){return new nS({type:"default",innerType:r,get defaultValue(){return typeof e=="function"?e():U.shallowClone(e)}})}var sS=w("ZodPrefault",(r,e)=>{l0.init(r,e),Ae.init(r,e),r.unwrap=()=>r._zod.def.innerType});function aS(r,e){return new sS({type:"prefault",innerType:r,get defaultValue(){return typeof e=="function"?e():U.shallowClone(e)}})}var r_=w("ZodNonOptional",(r,e)=>{c0.init(r,e),Ae.init(r,e),r.unwrap=()=>r._zod.def.innerType});function lS(r,e){return new r_({type:"nonoptional",innerType:r,...U.normalizeParams(e)})}var cS=w("ZodSuccess",(r,e)=>{u0.init(r,e),Ae.init(r,e),r.unwrap=()=>r._zod.def.innerType});function X$(r){return new cS({type:"success",innerType:r})}var uS=w("ZodCatch",(r,e)=>{d0.init(r,e),Ae.init(r,e),r.unwrap=()=>r._zod.def.innerType,r.removeCatch=r.unwrap});function dS(r,e){return new uS({type:"catch",innerType:r,catchValue:typeof e=="function"?e:()=>e})}var hS=w("ZodNaN",(r,e)=>{h0.init(r,e),Ae.init(r,e)});function ek(r){return Y0(hS,r)}var i_=w("ZodPipe",(r,e)=>{p0.init(r,e),Ae.init(r,e),r.in=e.in,r.out=e.out});function gv(r,e){return new i_({type:"pipe",in:r,out:e})}var n_=w("ZodCodec",(r,e)=>{i_.init(r,e),Bh.init(r,e)});function tk(r,e,t){return new n_({type:"pipe",in:r,out:e,transform:t.decode,reverseTransform:t.encode})}var pS=w("ZodReadonly",(r,e)=>{f0.init(r,e),Ae.init(r,e),r.unwrap=()=>r._zod.def.innerType});function fS(r){return new pS({type:"readonly",innerType:r})}var mS=w("ZodTemplateLiteral",(r,e)=>{m0.init(r,e),Ae.init(r,e)});function rk(r,e){return new mS({type:"template_literal",parts:r,...U.normalizeParams(e)})}var gS=w("ZodLazy",(r,e)=>{y0.init(r,e),Ae.init(r,e),r.unwrap=()=>r._zod.def.getter()});function vS(r){return new gS({type:"lazy",getter:r})}var yS=w("ZodPromise",(r,e)=>{v0.init(r,e),Ae.init(r,e),r.unwrap=()=>r._zod.def.innerType});function ik(r){return new yS({type:"promise",innerType:r})}var xS=w("ZodFunction",(r,e)=>{g0.init(r,e),Ae.init(r,e)});function nk(r){return new xS({type:"function",input:Array.isArray(r?.input)?JE(r?.input):r?.input??xv(ou()),output:r?.output??ou()})}var bv=w("ZodCustom",(r,e)=>{x0.init(r,e),Ae.init(r,e)});function ok(r){let e=new He({check:"custom"});return e._zod.check=r,e}function sk(r,e){return sA(bv,r??(()=>!0),e)}function wS(r,e={}){return aA(bv,r,e)}function bS(r){return lA(r)}var ak=cA,lk=uA;function ck(r,e={error:`Input not instance of ${r.name}`}){let t=new bv({type:"custom",check:"custom",fn:n=>n instanceof r,abort:!0,...U.normalizeParams(e)});return t._zod.bag.Class=r,t}var uk=(...r)=>dA({Codec:n_,Boolean:Xh,String:Jh},...r);function dk(r){let e=vS(()=>QA([BA(r),TE(),CE(),zE(),xv(e),QE(BA(),e)]));return e}function hk(r,e){return gv(e_(r),e)}var pk={invalid_type:"invalid_type",too_big:"too_big",too_small:"too_small",invalid_format:"invalid_format",not_multiple_of:"not_multiple_of",unrecognized_keys:"unrecognized_keys",invalid_union:"invalid_union",invalid_key:"invalid_key",invalid_element:"invalid_element",invalid_value:"invalid_value",custom:"custom"};function fk(r){yt({customError:r})}function mk(){return yt().customError}var o_;o_||(o_={});var s_={};Ss(s_,{bigint:()=>xk,boolean:()=>yk,date:()=>wk,number:()=>vk,string:()=>gk});function gk(r){return _0(Jh,r)}function vk(r){return k0(Yh,r)}function yk(r){return O0(Xh,r)}function xk(r){return z0(ep,r)}function wk(r){return Q0(yv,r)}yt(Og());var AS=Ft.object({name:Ft.string(),bpm:Ft.number(),duration:Ft.number(),sample_rate:Ft.number(),origin:Ft.enum(["openDAW","recording","import"])});var SY=AS.extend({uuid:E.zType(Ft)});var bk,Ak,_k,Pk,Ek,Sk;bk=new WeakMap,Ak=new WeakMap,_k=new WeakMap,Pk=new WeakMap,Ek=new WeakMap,Sk=new WeakMap;var au=function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},Fk,Nk,a_,l_,c_,Bk,$k;Nk=new WeakMap,a_=new WeakMap,l_=new WeakMap,c_=new WeakMap,Bk=new WeakMap,Fk=new WeakSet,$k=function(e){return e.pointerHub.catchupAndSubscribe({onAdded:t=>{let n=Be(t.box,rn);B(n.isAttached(),"SelectionBox is not attached");let i=n.selectable.targetVertex.unwrap(()=>`SelectionBox has no target (${n.selectable.targetAddress.unwrapOrUndefined()?.toString()??"No address"})`),o={box:n,selectable:i};au(this,c_,"f").proxy.onSelected(i),B(au(this,a_,"f").add(o),"Could not add to entityMap"),B(au(this,l_,"f").add(o),"Could not add to selectableMap")},onRemoved:t=>{let n=Be(t.box,rn),i=au(this,a_,"f").removeByKey(n.address.uuid);B(i.box===n,"Broken selection");let o=i.selectable;au(this,c_,"f").proxy.onDeselected(o),au(this,l_,"f").removeByKey(o.address)}},u.Selection)};var _S=Ft.object({name:Ft.string(),size:Ft.number().int(),url:Ft.string(),license:Ft.string(),origin:Ft.enum(["openDAW","import"])});var KY=_S.extend({uuid:E.zType(Ft)});var PS;(function(r){r.cut=(e,t,n)=>{if(!(e.position>=t||t>=e.complete))if(tw.isLoopableRegion(e)){let{position:i,complete:o,loopOffset:s,loopDuration:a}=e;e.box.duration.setValue(t-i),e.copyTo({position:t,duration:o-t,loopOffset:mu(s+(t-i),a),consolidate:n})}else return N("Not yet implemented")},r.clip=(e,t,n)=>{if(tw.isLoopableRegion(e)){let{position:i,complete:o,loopOffset:s,loopDuration:a}=e;if(o-n<=0)return N(`duration will zero or negative(${o-n})`);e.box.duration.setValue(t-i),e.copyTo({position:n,duration:o-n,loopOffset:mu(s+(n-i),a)})}else return N("Not yet implemented")}})(PS||(PS={}));var lu;(e=>e.create=(t,n,i,o)=>0|(t?1:0)|(n?2:0)|(i?4:0)|(o?8:0))(lu||={});var _e=class r{static PEAK_DECAY=Math.exp(-1/(sampleRate*.25));static RMS_WINDOW=Math.floor(sampleRate*.1);#e;#t;#r;#i;#n;#o=0;#s=0;#l=0;#a=0;constructor(e,t){this.#e=e,this.#t=t,this.#r=new Float32Array(4),this.#i=D.create(()=>new nl(r.RMS_WINDOW),2),this.#n=this.#e.broadcastFloats(this.#t,this.#r,()=>{this.#r[0]=this.#o,this.#r[1]=this.#s,this.#r[2]=this.#l,this.#r[3]=this.#a})}clear(){this.#i[0].clear(),this.#i[1].clear(),this.#o=0,this.#s=0}process(e,t,n=0,i=128){let o=i-n,s=r.PEAK_DECAY**o,a=0,c=0;for(let l=n;l<i;l++){let d=Math.abs(e[l]),h=Math.abs(t[l]);d>a&&(a=d),h>c&&(c=h)}this.#o=Math.max(a,this.#o*s),this.#s=Math.max(c,this.#s*s),this.#l=this.#i[0].processBlock(e,n,i),this.#a=this.#i[1].processBlock(t,n,i)}processStereo([e,t],n=0,i=128){this.process(e,t,n,i)}terminate(){this.#n.terminate()}};var Av=class{#e=new j;#t;#r;#i;#n=g.None;#o;constructor(e,t){this.#t=e,this.#r=t,this.#i=new ne,this.#o=this.#r.getValue(),this.#e.own(this.#r.subscribe(n=>{this.#o=n.getValue(),this.#i.notify(this)}))}get adapter(){return this.#r}get address(){return this.#r.address}subscribe(e){return this.#i.subscribe(e)}getValue(){return this.#o}getUnitValue(){return this.#r.valueMapping.x(this.#o)}onStartAutomation(){B(this.#n.isEmpty(),"Already broadcasting"),this.#n=g.wrap(this.#t.broadcaster.broadcastFloat(this.#r.address,()=>this.getUnitValue()))}updateAutomation(e){let t=this.#r.valueAt(e);return this.#o!==t?(this.#o=t,!0):!1}onStopAutomation(){B(this.#n.nonEmpty(),"Never started broadcasting"),this.#n.unwrap().terminate(),this.#n=g.None,this.#o=this.#r.getValue()}own(e){return this.#e.own(e)}ownAll(...e){this.#e.ownAll(...e)}spawn(){return this.#e.spawn()}terminate(){this.#e.terminate()}};var cu=class{#e;constructor(){this.#e=new Is}add(e,t){this.#e.add(e,t)}get(e){return this.#e.get(e)}forEach(e){return this.#e.forEach(e)}clear(){this.#e.clear()}};var Xt=class{#e=new j;#t;#r;#i;#n;#o=g.None;constructor(e){this.#t=e,this.#r=new cu,this.#i=[],this.#n=[]}parameterChanged(e,t){return N(`Got update event for ${e}, but has no parameter change method`)}get context(){return this.#t}get eventInput(){return this.#r}bindParameter(e){let t=new Av(this.#t,e);return t.ownAll(e.field.pointerHub.catchupAndSubscribe({onAdded:n=>{this.#o.isEmpty()&&(this.#o=g.wrap(this.#t.updateClock.addEventOutput(this.#r))),this.#n.push(t),t.onStartAutomation()},onRemoved:n=>{D.remove(this.#n,t),this.#n.length===0&&(this.#o.ifSome(i=>i.terminate()),this.#o=g.None),t.onStopAutomation()}},u.Automation),t.subscribe(()=>this.parameterChanged(t))),this.#i.push(t),t}updateParameters(e,t){this.#n.forEach(n=>{n.updateAutomation(e)&&this.parameterChanged(n,t)})}readAllParameters(){this.#i.forEach(e=>this.parameterChanged(e,0))}own(e){return this.#e.own(e)}ownAll(...e){return this.#e.ownAll(...e)}spawn(){return this.#e.spawn()}terminate(){this.#o.ifSome(e=>e.terminate()),this.#o=g.None,this.#i.length=0,this.#e.terminate()}toString(){return`{${this.constructor.name}}`}};var tp;(e=>e.isOfType=t=>t.type==="update-event")(tp||={});var _v=class extends Xt{#e=[];constructor(e){super(e),this.own(this.context.registerProcessor(this))}reset(){this.eventInput.clear()}addEventOutput(e){return this.#e.push(e),{terminate:()=>D.remove(this.#e,e)}}process({blocks:e}){e.forEach(({p0:t,p1:n,flags:i},o)=>{if(st.every(i,1))for(let s of Qi.iterate(t,n,Np)){let a={type:"update-event",position:s};this.#e.forEach(c=>c.add(o,a))}})}toString(){return`{${this.constructor.name}}`}};var Me=class extends Xt{constructor(e){super(e)}process({blocks:e}){e.forEach(t=>{this.introduceBlock(t);let{index:n,p0:i,s0:o,s1:s,bpm:a}=t,c=null,l=o;for(let d of this.eventInput.get(n)){let h=d.position-i,f=Math.abs(h)<1e-7?o:o+Math.floor(Y.pulsesToSamples(h,a,sampleRate));B(o<=f&&f<=s,()=>`${f} out of bounds. event: ${d.position} (${d.type}), p0: ${i}`),c?.forEach(v=>this.handleEvent(v)),c=null,l<f&&(this.processAudio(t,l,f),l=f),tp.isOfType(d)?this.updateParameters(d.position,o/sampleRate+Y.pulsesToSeconds(d.position-i,a)):(c??=[]).push(d)}c?.forEach(d=>this.handleEvent(d)),c=null,l<s&&this.processAudio(t,l,s)}),this.eventInput.clear(),this.finishProcess()}introduceBlock(e){}handleEvent(e){return N(`${this} received an event but has no accepting method.`)}finishProcess(){}};var Pv=class r{static#e=P.exponential(20/sampleRate,2e4/sampleRate);#t;#r;#i;#n;#o;feedback=.7;cross=0;wet=.75;dry=.75;#s=0;#l=0;#a=0;#c=0;#u=0;#h=!1;#d=!1;constructor(e,t){let n=kn(e);this.#t=n,this.#r=[new Float32Array(n),new Float32Array(n)],this.#i=[new wt,new wt],this.#n=new Ji,this.#o=t}reset(){this.#l=0,this.#h&&(this.#i.forEach(e=>e.reset()),this.#r.forEach(e=>e.fill(0)),this.#h=!1,this.#d=!1),this.#m()}set offset(e){B(0<=e&&e<this.#t,"Out of bounds"),this.#c!==e&&(this.#c=e,this.#h?this.#w():this.#m())}get offset(){return this.#c}set filter(e){e===0?this.#n.identity():e>0?this.#n.setHighpassParams(r.#e.y(e)):e<0&&this.#n.setLowpassParams(r.#e.y(1+e))}process(e,t,n,i){this.#d?this.#f(e,t,n,i):this.#p(e,t,n,i),this.#h=!0}#p(e,t,n,i){let o=this.#t-1,s=this.#r,a=this.feedback,c=this.wet,l=this.dry,d=this.#l,h=d-Math.floor(this.#a);h<0&&(h+=this.#t);let f=e[0],v=e[1],m=t[0],y=t[1],x=this.#i[0],S=this.#i[1],C=s[0],V=s[1];for(let K=n;K<i;++K){let G=f[K],ye=v[K],ke=x.processFrame(this.#n,C[h]*.96),re=S.processFrame(this.#n,V[h]*.96),be=this.cross*(re-ke),H=ke+be,xe=re-be;C[d]=(G+H)*a+1e-18-1e-18,V[d]=(ye+xe)*a+1e-18-1e-18,m[K]=H*c+G*l,y[K]=xe*c+ye*l,h=++h&o,d=++d&o}this.#l=d}#f(e,t,n,i){let o=this.#t-1,s=this.#r,a=this.feedback,c=this.wet,l=this.dry,d=this.#l;for(let h=n;h<i;++h){0<this.#u?(this.#a+=this.#s,this.#u--):(this.#a=this.#c,this.#d=!1);let f=d-this.#a;f<0&&(f+=this.#t);let v=f|0,m=f-v,y=e[0][h],x=e[1][h],S=s[0][v],C=s[0][v],V=this.#i[0].processFrame(this.#n,S+m*(s[0][v+1&o]-S)),K=this.#i[1].processFrame(this.#n,C+m*(s[1][v+1&o]-C));s[0][d]=y+V*a+1e-18-1e-18,s[1][d]=x+V*a+1e-18-1e-18,t[0][h]=V*c+y*l,t[1][h]=K*c+x*l,d=++d&o}this.#l=d}#m(){this.#a=this.#c,this.#u=0,this.#d=!1}#w(){this.#c!==this.#a&&(this.#u=this.#o,this.#s=(this.#c-this.#a)/this.#u,this.#d=!0)}};var Ev=class r extends Me{static ID=0;#e=r.ID++;#t;parameterDelay;parameterFeedback;parameterCross;parameterFilter;parameterDry;parameterWet;#r;#i;#n;#o=g.None;#s=!0;constructor(e,t){super(e),this.#t=t,this.#r=new pe,this.#i=this.own(new _e(e.broadcaster,t.address));let{delay:n,feedback:i,cross:o,filter:s,dry:a,wet:c}=t.namedParameter;this.parameterDelay=this.own(this.bindParameter(n)),this.parameterFeedback=this.own(this.bindParameter(i)),this.parameterCross=this.own(this.bindParameter(o)),this.parameterFilter=this.own(this.bindParameter(s)),this.parameterDry=this.own(this.bindParameter(a)),this.parameterWet=this.own(this.bindParameter(c));let l=Y.pulsesToSamples(ir.toPPQN(ni.OffsetFractions[0]),30,sampleRate),d=Math.floor(.5*sampleRate);this.#n=new Pv(l,d),this.own(e.registerProcessor(this)),this.readAllParameters()}get incoming(){return this}get outgoing(){return this}reset(){this.#r.clear(),this.#n.reset(),this.#i.clear(),this.eventInput.clear()}get uuid(){return this.#t.uuid}get audioOutput(){return this.#r}setAudioSource(e){return this.#o=g.wrap(e),{terminate:()=>this.#o=g.None}}index(){return this.#t.indexField.getValue()}adapter(){return this.#t}handleEvent(e){}processAudio({bpm:e,flags:t},n,i){if(this.#o.isEmpty())return;if(this.#s||st.some(t,8)){let s=this.parameterDelay.getValue(),a=ir.toPPQN(ni.OffsetFractions[s]);this.#n.offset=Y.pulsesToSamples(a,e,sampleRate),this.#s=!1}let o=this.#o.unwrap();this.#n.process(o.channels(),this.#r.channels(),n,i),this.#i.process(this.#r.getChannel(0),this.#r.getChannel(1),n,i)}parameterChanged(e){e===this.parameterDelay?this.#s=!0:e===this.parameterFeedback?this.#n.feedback=this.parameterFeedback.getValue():e===this.parameterCross?this.#n.cross=this.parameterCross.getValue():e===this.parameterFilter?this.#n.filter=this.parameterFilter.getValue():e===this.parameterDry?this.#n.dry=Oe(this.parameterDry.getValue()):e===this.parameterWet&&(this.#n.wet=Oe(this.parameterWet.getValue()))}toString(){return`{${this.constructor.name} (${this.#e})}`}};var rp=class r extends Xt{static ID=0;#e=r.ID++;#t;#r;#i;#n=g.None;constructor(e,t){super(e),this.#t=t,this.#r=new pe,this.#i=this.own(new _e(e.broadcaster,t.address)),this.own(e.registerProcessor(this))}get incoming(){return this}get outgoing(){return this}reset(){this.#i.clear(),this.#r.clear(),this.eventInput.clear()}get uuid(){return this.#t.uuid}get audioOutput(){return this.#r}setAudioSource(e){return this.#n=g.wrap(e),{terminate:()=>this.#n=g.None}}index(){return this.#t.indexField.getValue()}adapter(){return this.#t}process(e){if(this.#n.isEmpty())return;let t=this.#n.unwrap(),[n,i]=t.channels(),[o,s]=this.#r.channels();for(let a=0;a<128;a++)o[a]=n[a],s[a]=i[a];this.#i.process(o,s)}parameterChanged(e){}toString(){return`{${this.constructor.name} (${this.#e})`}};var uu=class r extends Xt{static ID=0;#e=r.ID++;#t;#r;#i;#n;constructor(e,t){super(e),this.#t=t,this.#r=new pe,this.#i=this.own(new _e(e.broadcaster,t.address)),this.#n=[],this.own(e.registerProcessor(this))}get noteEventTarget(){return g.None}get incoming(){return this}get outgoing(){return this}get uuid(){return this.#t.uuid}reset(){this.#i.clear(),this.#r.clear()}addAudioSource(e){return this.#n.push(e),{terminate:()=>{D.remove(this.#n,e),this.#r.clear()}}}get adapter(){return this.#t}get audioOutput(){return this.#r}process(e){this.#r.clear();let[t,n]=this.#r.channels();for(let i of this.#n){let[o,s]=i.channels();for(let a=0;a<128;a++)t[a]+=o[a],n[a]+=s[a]}this.#r.assertSanity(),this.#i.process(this.#r.getChannel(0),this.#r.getChannel(1))}parameterChanged(e){}toString(){return`{${this.constructor.name} (${this.#e})}`}};var me;(a=>{a.Comparator=(c,l)=>{let d=c.position-l.position;return d!==0?d:c.type==="note-complete-event"?-1:l.type==="note-complete-event"?1:0},a.start=(c,l,d,h,f=0)=>({type:"note-event",position:c,duration:l,pitch:d,velocity:h,cent:f,id:++s}),a.startWith=(c,l,d)=>({type:"note-event",position:l??c.position,duration:d??c.duration,pitch:c.pitch,cent:c.cent,velocity:c.velocity,id:++s}),a.stop=({id:c,pitch:l},d)=>({type:"note-complete-event",position:d,pitch:l,id:c}),a.isStart=c=>c.type==="note-event"&&"id"in c&&typeof c.id=="number",a.isStop=c=>c.type==="note-complete-event";let s=0})(me||={});var Sn=class{#e=new j;#t;#r;#i;#n=g.None;constructor(e,t,n){this.#t=e,this.#r=this.#e.own(new bi(t,n)),this.#i=new Array(16)}setNoteEventSource(e){return B(this.#n.isEmpty(),"NoteEventSource already set"),this.#n=g.wrap(e),this.#t.reset(),W.create(()=>{this.#n=g.None,this.#t.reset()})}introduceBlock({index:e,p0:t,p1:n,flags:i}){if(!this.#n.isEmpty()){for(let o of this.#n.unwrap().processNotes(t,n,i))this.#i.push(o);this.#i.sort(me.Comparator).forEach(o=>{o.pitch>=0&&o.pitch<=127&&(this.#t.eventInput.add(e,o),this.#o(o))}),this.#i.length=0}}clear(){}terminate(){this.#e.terminate()}#o(e){me.isStart(e)?this.#r.noteOn(e.pitch):me.isStop(e)&&this.#r.noteOff(e.pitch)}};var u_;(e=>e.NotSet={start:()=>N("VoicingStrategy.start"),stop:()=>N("VoicingStrategy.stop"),forceStop:()=>mr,process:()=>N("VoicingStrategy.process"),reset:mr,processing:()=>D.empty()})(u_||={});var Sv=class{#e;#t=[];constructor(e=u_.NotSet){this.#e=e}set strategy(e){this.#t.push(this.#e),this.#e.forceStop(),this.#e=e}get strategy(){return this.#e}start(e){this.#e.start(e)}stop(e){this.#e.stop(e)}process(e,t,n,i){this.#e.process(e,t,n,i);for(let o=this.#t.length-1;o>=0;o--)this.#t[o].process(e,t,n,i)&&this.#t.splice(o,1)}reset(){this.#t.forEach(e=>e.reset()),this.#t.length=0,this.#e.reset()}};var Fv=class{#e;#t=[];#r=[];constructor(e){this.#e=e}start(e){let t=NaN;for(let o=0;o<this.#r.length;o++){let s=this.#r[o];if(!s.gate){t=s.currentFrequency,this.#r.splice(o,1);break}}let n=this.#e.computeFrequency(e),i=this.#e.create();isNaN(t)?i.start(e,n,1,0):(i.start(e,t,1,0),i.startGlide(n,this.#e.glideTime)),this.#r.push(i),this.#t.push(i)}stop(e){this.#t.find(t=>t.id===e)?.stop()}forceStop(){this.#t.forEach(e=>e.forceStop())}reset(){this.#t.length=0,this.#r.length=0}process(e,t,n,i){e.clear(n,i);for(let o=this.#t.length-1;o>=0;o--){let s=this.#t[o];s.process(e,t,n,i)&&(D.removeIf(this.#r,a=>a===s),this.#t.splice(o,1))}return this.#t.length===0}processing(){return this.#t}};var Nv=class{#e;#t=[];#r=[];#i=null;#n=null;constructor(e){this.#e=e}start(e){if(this.#r.push(e),R(this.#i)&&this.#i.gate){this.#i.startGlide(this.#e.computeFrequency(e),this.#e.glideTime);return}R(this.#n)&&this.#n.forceStop();let t=this.#e.create();t.start(e,this.#e.computeFrequency(e),1,0),this.#i=t,this.#n=t,this.#t.push(t)}stop(e){let t=this.#r.findIndex(n=>n.id===e);if(t!==-1&&(this.#r.splice(t,1),!!R(this.#i))){if(t===this.#r.length){let n=this.#r.at(-1);if(R(n)){this.#i.startGlide(this.#e.computeFrequency(n),this.#e.glideTime);return}}this.#r.length===0&&(this.#i.stop(),this.#i=null)}}forceStop(){this.#t.forEach(e=>e.forceStop())}reset(){this.#r.length=0,this.#t.length=0,this.#i=null,this.#n=null}process(e,t,n,i){e.clear(n,i);for(let o=this.#t.length-1;o>=0;o--){let s=this.#t[o];s.process(e,t,n,i)&&(this.#t.splice(o,1),s===this.#i&&(this.#i=null),s===this.#n&&(this.#n=null))}return this.#t.length===0}processing(){return this.#t}};var ip=class{#e;#t=[];#r=new il;#i;gate=!0;id=-1;constructor(e,t){this.#e=e,this.#i=t}get currentFrequency(){return this.#r.currentFrequency()}start(e,t,n,i){if(this.id=e.id,this.#r.init(t),this.#i===1){let o=this.#e();o.start(e,t,n,i),this.#t.push(o)}else for(let o=0;o<this.#i;++o){let s=o/(this.#i-1)*2-1,a=this.#e(),c=(1-Math.abs(i))*s+i;a.start(e,t,n/Math.sqrt(this.#i),c),this.#t.push(a)}}startGlide(e,t){this.#r.glideTo(e,t),this.#t.forEach(n=>n.startGlide(e,t))}process(e,t,n,i){this.#r.advance(t.bpm,n,i);for(let o=this.#t.length-1;o>=0;o--)this.#t[o].process(e,t,n,i)&&this.#t.splice(o,1);return this.#t.length===0}stop(){this.#t.forEach(e=>e.stop()),this.gate=!1}forceStop(){this.#t.forEach(e=>e.forceStop()),this.gate=!1}processing(){return this.#t}};var[ES,SS,d_,FS,NS,Bv,BS,$S,$v]=T_(Float32Array,128),np=class{device;oscA;oscB;lfo;filter;env;glide;gainASmooth;gainBSmooth;gainVcaSmooth;#e=Bs("NoteEvent not set");#t=1;#r=1;id=-1;phase=0;filter_keyboard_delta=0;constructor(e){this.device=e,this.oscA=new _u(sampleRate),this.oscB=new _u(sampleRate),this.lfo=new Ap(sampleRate),this.filter=new fp(xn.MIN_CUTOFF,xn.MAX_CUTOFF,sampleRate),this.filter.order=1,this.env=new el(sampleRate),this.env.set(this.device.env_attack,this.device.env_decay,this.device.env_sustain,this.device.env_release),this.env.gateOn(),this.glide=new il,this.gainASmooth=new Fi(.003,sampleRate),this.gainBSmooth=new Fi(.003,sampleRate),this.gainVcaSmooth=new Fi(.003,sampleRate)}start(e,t,n,i){this.#e=e,this.#t=n,this.#r=i,this.filter_keyboard_delta=_p.keyboardTracking(e.pitch,this.device.parameterFilterKeyboard.getValue()),this.glide.init(t)}stop(){this.env.gateOff()}forceStop(){this.env.forceStop()}startGlide(e,t){this.glide.glideTo(e,t)}get gate(){return this.env.gate}get currentFrequency(){return this.glide.currentFrequency()}process(e,{bpm:t},n,i){let{gainOscA:o,gainOscB:s,oscA_waveform:a,oscB_waveform:c,flt_cutoff:l,flt_resonance:d,flt_env_amount:h,flt_order:f,frequencyAMultiplier:v,frequencyBMultiplier:m,parameterLfoShape:y,parameterLfoRate:x,parameterLfoTargetTune:S,parameterLfoTargetCutoff:C,parameterLfoTargetVolume:V,parameterUnisonDetune:K,parameterUnisonStereo:G}=this.device,ye=tl(this.#e.velocity)*this.#t,ke=2**(this.#r*(K.getValue()/1200)),re=this.#r*G.getValue(),[be,H]=Mn.panningToGains(re,Yi.Linear),[xe,Te]=e.channels();d_.fill(ke,n,i),this.glide.process(d_,t,n,i),this.lfo.fill(BS,y.getValue(),x.getValue(),n,i),this.env.process(Bv,n,i);let et=S.getValue(),er=C.getValue(),Nt=V.getValue();for(let Pe=n;Pe<i;Pe++){let Bt=BS[Pe];$S[Pe]=l+this.filter_keyboard_delta+Bv[Pe]*h+Bt*er,Bv[Pe]*=Wr(ye+Bt*Nt);let Ei=d_[Pe]*2**(Bt*et);FS[Pe]=Ei*v,NS[Pe]=Ei*m}this.oscA.generateFromFrequencies(ES,FS,a,n,i),this.oscB.generateFromFrequencies(SS,NS,c,n,i);for(let Pe=n;Pe<i;Pe++)$v[Pe]=ES[Pe]*this.gainASmooth.process(o)+SS[Pe]*this.gainBSmooth.process(s);this.filter.order=f,this.filter.process($v,$v,$S,d,n,i);for(let Pe=n;Pe<i;Pe++){let Bt=this.gainVcaSmooth.process(Wr(Bv[Pe])),Ei=$v[Pe]*Bt;if(xe[Pe]+=Ei*be,Te[Pe]+=Ei*H,this.env.complete&&Bt<1e-4)return!0}return!1}};var kv=class extends Me{#e;#t;#r;#i;#n;#o;#s;#l;#a;#c;#u;#h;#d;#p;#f;#m;#w;#b;#_;#$;#F;#N;#A;#x;#y;#g;#E;#S;#P;#B;#k;#I;#T;gainOscA=1;gainOscB=1;frequencyAMultiplier=1;frequencyBMultiplier=1;env_attack=1;env_decay=1;env_sustain=1;env_release=1;oscA_waveform=ze.sine;oscB_waveform=ze.sine;flt_cutoff=1;flt_resonance=Math.SQRT1_2;flt_env_amount=0;flt_order=1;#D=0;constructor(e,t){super(e),this.#e=t,this.#t=new Sv,this.#r=new Sn(this,e.broadcaster,t.audioUnitBoxAdapter().address),this.#i=new pe,this.#n=new Sp(sampleRate),this.#o=this.own(new _e(e.broadcaster,t.address));let{namedParameter:n}=this.#e,{oscillators:i}=n;this.#s=this.own(this.bindParameter(i[0].waveform)),this.#l=this.own(this.bindParameter(i[0].octave)),this.#a=this.own(this.bindParameter(i[0].tune)),this.#c=this.own(this.bindParameter(i[0].volume)),this.#u=this.own(this.bindParameter(i[1].waveform)),this.#h=this.own(this.bindParameter(i[1].octave)),this.#d=this.own(this.bindParameter(i[1].tune)),this.#p=this.own(this.bindParameter(i[1].volume)),this.#f=this.own(this.bindParameter(n.attack)),this.#m=this.own(this.bindParameter(n.decay)),this.#w=this.own(this.bindParameter(n.sustain)),this.#b=this.own(this.bindParameter(n.release)),this.#_=this.own(this.bindParameter(n.cutoff)),this.#$=this.own(this.bindParameter(n.resonance)),this.#F=this.own(this.bindParameter(n.filterEnvelope)),this.#N=this.own(this.bindParameter(n.filterOrder)),this.#A=this.own(this.bindParameter(n.filterKeyboard)),this.#x=this.own(this.bindParameter(n.glideTime)),this.#y=this.own(this.bindParameter(n.voicingMode)),this.#g=this.own(this.bindParameter(n.unisonCount)),this.#E=this.own(this.bindParameter(n.unisonDetune)),this.#S=this.own(this.bindParameter(n.unisonStereo)),this.#P=this.own(this.bindParameter(n.lfoWaveform)),this.#B=this.own(this.bindParameter(n.lfoRate)),this.#k=this.own(this.bindParameter(n.lfoTargetTune)),this.#I=this.own(this.bindParameter(n.lfoTargetCutoff)),this.#T=this.own(this.bindParameter(n.lfoTargetVolume));let o=new Float32Array(32);this.ownAll(e.broadcaster.broadcastFloats(t.address.append(0),o,()=>{let s=0;this.#t.strategy.processing().forEach(a=>{let l=Be(a,ip).processing().at(0);l instanceof np&&(o[s++]=l.env.phase),o.length-1}),o[s]=-1}),e.registerProcessor(this)),this.readAllParameters()}computeFrequency(e){return wu(e.pitch+e.cent/100,440)}get glideTime(){return this.#D}get parameterFilterKeyboard(){return this.#A}get parameterLfoShape(){return this.#P}get parameterLfoRate(){return this.#B}get parameterLfoTargetTune(){return this.#k}get parameterLfoTargetCutoff(){return this.#I}get parameterLfoTargetVolume(){return this.#T}get parameterUnisonDetune(){return this.#E}get parameterUnisonStereo(){return this.#S}create(){return new ip(()=>new np(this),this.#g.getValue())}get noteEventTarget(){return g.wrap(this)}introduceBlock(e){this.#r.introduceBlock(e)}setNoteEventSource(e){return this.#r.setNoteEventSource(e)}get incoming(){return this}get outgoing(){return this}reset(){this.#r.clear(),this.#o.clear(),this.#t.reset(),this.#i.clear(),this.eventInput.clear()}get uuid(){return this.#e.uuid}get audioOutput(){return this.#i}get adapter(){return this.#e}handleEvent(e){me.isStart(e)?this.#t.start(e):me.isStop(e)&&this.#t.stop(e.id)}processAudio(e,t,n){this.#t.process(this.#i,e,t,n),this.#n.replace(this.#i,t,n)}parameterChanged(e){if(e===this.#c)this.gainOscA=Oe(this.#c.getValue());else if(e===this.#p)this.gainOscB=Oe(this.#p.getValue());else if(e===this.#l||e===this.#a)this.frequencyAMultiplier=2**(this.#l.getValue()+this.#a.getValue()/1200);else if(e===this.#h||e===this.#d)this.frequencyBMultiplier=2**(this.#h.getValue()+this.#d.getValue()/1200);else if(e===this.#f)this.env_attack=this.#f.getValue();else if(e===this.#m)this.env_decay=this.#m.getValue();else if(e===this.#w)this.env_sustain=this.#w.getValue();else if(e===this.#b)this.env_release=this.#b.getValue();else if(e===this.#s)this.oscA_waveform=Nn(this.#s.getValue(),ze);else if(e===this.#u)this.oscB_waveform=Nn(this.#u.getValue(),ze);else if(e===this.#_)this.flt_cutoff=this.#_.getUnitValue();else if(e===this.#$)this.flt_resonance=this.#$.getValue();else if(e===this.#F)this.flt_env_amount=this.#F.getValue();else if(e===this.#N)this.flt_order=this.#N.getValue();else if(e===this.#x)this.#D=this.#x.getValue()*Y.Bar;else if(e===this.#y){let t=this.#y.getValue();switch(t){case tn.Monophonic:{this.#t.strategy=new Nv(this);return}case tn.Polyphonic:{this.#t.strategy=new Fv(this);return}default:return N(`Unknown VoicingMode '${t}'`)}}}finishProcess(){this.#i.assertSanity(),this.#o.process(this.#i.getChannel(0),this.#i.getChannel(1))}toString(){return"{VaporisateurDevice}"}};var Iv=class extends Xt{#e;#t;#r;#i;#n=128;constructor(e,t){super(e),this.#e=t,this.#t=new pe(2),this.#r=this.own(new _e(e.broadcaster,t.address)),this.#i=E.newSet(({adapter:{uuid:n}})=>n),this.ownAll(this.#e.deviceHost().audioUnitBoxAdapter().tracks.catchupAndSubscribe({onAdd:n=>this.#i.add({adapter:n,lastRead:NaN,lastStepSize:0}),onRemove:n=>this.#i.removeByKey(n.uuid),onReorder:n=>{}}),e.registerProcessor(this))}get noteEventTarget(){return g.None}reset(){this.#r.clear(),this.#t.clear(),this.eventInput.clear()}get uuid(){return this.#e.uuid}get incoming(){return this}get outgoing(){return this}get audioOutput(){return this.#t}process({blocks:e}){this.#t.clear(0,128);let[t,n]=this.#t.channels();this.#i.forEach(i=>e.forEach(o=>{let{adapter:s}=i;if(s.type!==ee.Audio||!s.enabled.getValue())return;let{p0:a,p1:c,flags:l}=o;if(!st.every(l,5))return;let d=this.context.clipSequencing.iterate(s.uuid,a,c);for(let{optClip:h,sectionFrom:f,sectionTo:v}of d)h.match({none:()=>{for(let m of s.regions.collection.iterateRange(a,c)){if(m.mute||!Ke(m,jo))continue;let x=m.file.getOrCreateLoader().data;if(x.isEmpty())return;let S=x.unwrap();for(let C of vr.locateLoops(m,a,c))this.#o(this.#t,S,C,o,i)}},some:m=>{if(!Ke(m,To))return;let y=m.file.getOrCreateLoader().data;if(y.isEmpty())return;let x=y.unwrap();for(let S of vr.locateLoops({position:0,loopDuration:m.duration,loopOffset:0,complete:Number.POSITIVE_INFINITY},f,v))this.#o(this.#t,x,S,o,i)}})})),this.#t.assertSanity(),this.#r.process(t,n)}parameterChanged(e){}#o(e,t,n,{p0:i,p1:o,s0:s,s1:a},c){let[l,d]=e.channels(),{numberOfFrames:h,frames:f}=t,v=f[0],m=f.length===1?f[0]:f[1],y=a-s,x=o-i,S=h*n.resultStartValue,C=h*n.resultEndValue,V=(n.resultStart-i)/x,K=(n.resultEnd-i)/x,G=s+y*V,ye=s+y*K,ke=ye-G|0,re=(C-S)/ke;B(s<=G&&ye<=a,`Out of bounds ${G}, ${ye}`);let be=!Number.isFinite(c.lastRead)||Math.abs(S-(c.lastRead+re))>2;for(let H=0,xe=G|0;H<ke;H++,xe++){let Te=S+H*re,et=Te|0,er=0,Nt=0;if(et>=0&&et<h-1){let Pe=Te-et,Bt=v[et],Ei=m[et];er=Bt+Pe*(v[et+1]-Bt),Nt=Ei+Pe*(m[et+1]-Ei)}if(be&&H<this.#n&&Number.isFinite(c.lastRead)){let Pe=H/this.#n,Bt=1-Pe,Ei=c.lastRead+H*c.lastStepSize,Es=Ei|0;if(Es>=0&&Es<h-1){let w_=Ei-Es,b_=v[Es],A_=m[Es],HS=b_+w_*(v[Es+1]-b_),JS=A_+w_*(m[Es+1]-A_);l[xe]+=Bt*HS+Pe*er,d[xe]+=Bt*JS+Pe*Nt}else l[xe]+=er,d[xe]+=Nt}else l[xe]+=er,d[xe]+=Nt}c.lastRead=S+(ke-1)*re,c.lastStepSize=re}};var $r=class extends Xt{process({blocks:e}){e.forEach(t=>{this.introduceBlock(t);let{index:n,p0:i,p1:o,s0:s,bpm:a}=t,c=null,l=i;for(let d of this.eventInput.get(n))c?.forEach(h=>this.handleEvent(t,h)),c=null,l<d.position&&(this.processEvents(t,l,d.position),l=d.position),tp.isOfType(d)?this.updateParameters(d.position,s/sampleRate+Y.pulsesToSeconds(d.position-i,a)):(c??=[]).push(d);c?.forEach(d=>this.handleEvent(t,d)),c=null,l<o&&this.processEvents(t,l,o)}),this.eventInput.clear()}introduceBlock(e){}};var du;(t=>(t.create=()=>({mult:1,add:0}),t.apply=(n,i)=>i*n.mult+n.add))(du||={});var Dv=Object.freeze([{name:"up",run:(r,e,t,n,i,o)=>{let s=r.length,a=s*e,c=t%s,l=Math.floor(t%a/s),d=r[c];return me.start(n,i,d.pitch+l*12,du.apply(o,d.velocity))}},{name:"down",run:(r,e,t,n,i,o)=>{let s=r.length,a=s*e,c=s-1-t%s,l=e-1-Math.floor(t%a/s),d=r[c];return me.start(n,i,d.pitch+l*12,du.apply(o,d.velocity))}},{name:"up-down",run:(r,e,t,n,i,o)=>{let s=r.length,a=s*e,c=Math.max(1,a*2-2),l=t%c,d=l<a?l:c-l,h=d%s,f=Math.floor(d/s),v=r[h];return me.start(n,i,v.pitch+f*12,du.apply(o,v.velocity))}}]);var Mv=class extends $r{#e;#t;#r;#i;#n;#o;#s;#l;#a;#c=du.create();#u=g.None;#h=Dv[0];#d=NaN;#p=1;#f=1;#m=1;constructor(e,t){super(e),this.#e=t,this.#t=[],this.#r=new rl,this.#i=this.own(this.bindParameter(t.namedParameter.modeIndex)),this.#n=this.own(this.bindParameter(t.namedParameter.rate)),this.#o=this.own(this.bindParameter(t.namedParameter.gate)),this.#s=this.own(this.bindParameter(t.namedParameter.repeat)),this.#l=this.own(this.bindParameter(t.namedParameter.numOctaves)),this.#a=this.own(this.bindParameter(t.namedParameter.velocity)),this.ownAll(e.registerProcessor(this)),this.readAllParameters()}get uuid(){return this.#e.uuid}get incoming(){return this}get outgoing(){return this}get noteEventTarget(){return g.wrap(this)}setNoteEventSource(e){return B(this.#u.isEmpty(),"NoteEventSource already set"),this.#u=g.wrap(e),W.create(()=>this.#u=g.None)}*processNotes(e,t,n){if(this.#r.nonEmpty())if(st.every(n,2))for(let o of this.#r.releaseAll())yield me.stop(o,e);else for(let o of this.#r.releaseLinearCompleted(t))yield me.stop(o,o.position+o.duration);if(this.#u.nonEmpty()){let i=this.#u.unwrap();for(let s of i.processNotes(e,t,n));let o=!st.every(n,1);for(let{position:s,index:a}of Qi.iterateWithIndex(e,t,this.#d)){let c=Array.from(i.iterateActiveNotesAt(s,o));if(c.length===0)continue;let l=Math.floor(a/this.#f),d=Math.max(1,Math.floor(this.#d*this.#p)),h=this.#h.run(c,this.#m,l,s,d,this.#c);this.#r.addAndRetain({...h}),yield h}for(let s of this.#r.releaseLinearCompleted(t))yield me.stop(s,s.position+s.duration)}}*iterateActiveNotesAt(e,t){this.#u.isEmpty()||t||(yield*this.#r.overlapping(e,nr.Comparator))}reset(){this.#t.length=0,this.#r.clear(),this.eventInput.clear()}processEvents(e,t,n){}parameterChanged(e){if(e===this.#i)this.#h=Dv.at(this.#i.getValue())??Dv[0];else if(e===this.#n)this.#d=ir.toPPQN(Ui.RateFractions[this.#n.getValue()]);else if(e===this.#o)this.#p=this.#o.getValue();else if(e===this.#s)this.#f=this.#s.getValue();else if(e===this.#l)this.#m=this.#l.getValue();else if(e===this.#a){let t=this.#a.getValue();t<=0?(this.#c.add=1+t,this.#c.mult=0):(this.#c.add=1-t,this.#c.mult=t)}}handleEvent(e,t){}index(){return this.#e.indexField.getValue()}adapter(){return this.#e}};var Tv=class extends $r{#e;#t;#r;#i;#n;#o=g.None;constructor(e,t){super(e),this.#e=t,this.#t=this.own(new bi(e.broadcaster,t.address)),this.#r=this.own(this.bindParameter(t.namedParameter.octaves)),this.#i=this.own(this.bindParameter(t.namedParameter.semiTones)),this.#n=this.own(this.bindParameter(t.namedParameter.cent)),this.own(e.registerProcessor(this)),this.readAllParameters()}setNoteEventSource(e){return B(this.#o.isEmpty(),"NoteEventSource already set"),this.#o=g.wrap(e),W.create(()=>this.#o=g.None)}get uuid(){return this.#e.uuid}get incoming(){return this}get outgoing(){return this}*processNotes(e,t,n){if(!this.#o.isEmpty())for(let i of this.#o.unwrap().processNotes(e,t,n))if(me.isStart(i)){this.#t.noteOn(i.pitch);let{cent:o,octaves:s,semiTones:a}=this.#e.namedParameter;yield Ir.overwrite(i,{pitch:i.pitch+s.valueAt(i.position)*12+a.valueAt(i.position),cent:i.cent+o.valueAt(i.position)})}else this.#t.noteOff(i.pitch),yield i}*iterateActiveNotesAt(e,t){if(!this.#o.isEmpty()){for(let n of this.#o.unwrap().iterateActiveNotesAt(e,t))if(n.type==="note-event"){let{cent:i,octaves:o,semiTones:s}=this.#e.namedParameter;yield Ir.overwrite(n,{pitch:n.pitch+o.valueAt(n.position)*12+s.valueAt(n.position),cent:n.cent+i.valueAt(n.position)})}}}reset(){this.eventInput.clear()}processEvents(e,t,n){}parameterChanged(e){}handleEvent(e,t){}index(){return this.#e.indexField.getValue()}adapter(){return this.#e}};var Cv=class r{static DEFAULT_SIZE=1024;#e;#t;#r;#i;#n;#o;#s;#l=0;decay=!1;constructor(e=r.DEFAULT_SIZE){this.#e=e,this.#r=new yp(this.#e),this.#i=new Float32Array(this.#e),this.#n=new Float32Array(this.#e),this.#o=Eu.create(Eu.Type.Blackman,this.#e),this.#t=this.#e>>1,this.#s=new Float32Array(this.#t)}clear(){this.#s.fill(0),this.#l=0}numBins(){return this.#t}bins(){return this.#s}process(e,t,n,i){for(let o=n;o<i;++o)this.#i[this.#l]=this.#o[this.#l]*(e[o]+t[o]),++this.#l===this.#e&&this.#a()}#a(){this.#r.process(this.#i,this.#n);let e=1/this.#t;for(let t=0;t<this.#t;++t){let n=this.#i[t],i=this.#n[t],o=Math.sqrt(n*n+i*i)*e;this.#s[t]<o?this.#s[t]=o:this.decay&&(this.#s[t]*=.9)}this.#l=0,this.#n.fill(0),this.decay=!1}};var Rv=class r extends Me{static ID=0;#e=r.ID++;#t;#r;#i;#n;#o;#s;#l;#a;#c;#u;#h;#d;#p;#f;#m;#w;#b;#_;#$;#F;#N;#A;#x;#y;#g;#E;#S;#P;#B;#k;#I;#T;#D;#C;#R;#O;#M=g.None;constructor(e,t){super(e),this.#t=t,this.#r=new pe,this.#i=this.own(new _e(e.broadcaster,t.address)),this.#n=new Cv,this.#o=new Float32Array(this.#n.numBins()),this.#s=D.create(()=>new Ji,7),this.#l=[new mo(4),new mo(4)],this.#a=[new mo(4),new mo(4)],this.#c=[this.#a,[new wt,new wt],[new wt,new wt],[new wt,new wt],[new wt,new wt],[new wt,new wt],this.#l],this.#u=D.create(()=>!0,7);let n=this.#t.namedParameter;this.#h=this.own(this.bindParameter(n.highPass.enabled)),this.#p=this.own(this.bindParameter(n.highPass.q)),this.#d=this.own(this.bindParameter(n.highPass.frequency)),this.#f=this.own(this.bindParameter(n.highPass.order)),this.#m=this.own(this.bindParameter(n.lowShelf.enabled)),this.#w=this.own(this.bindParameter(n.lowShelf.frequency)),this.#b=this.own(this.bindParameter(n.lowShelf.gain)),this.#_=this.own(this.bindParameter(n.lowBell.enabled)),this.#$=this.own(this.bindParameter(n.lowBell.frequency)),this.#F=this.own(this.bindParameter(n.lowBell.gain)),this.#N=this.own(this.bindParameter(n.lowBell.q)),this.#A=this.own(this.bindParameter(n.midBell.enabled)),this.#x=this.own(this.bindParameter(n.midBell.frequency)),this.#y=this.own(this.bindParameter(n.midBell.gain)),this.#g=this.own(this.bindParameter(n.midBell.q)),this.#E=this.own(this.bindParameter(n.highBell.enabled)),this.#S=this.own(this.bindParameter(n.highBell.frequency)),this.#P=this.own(this.bindParameter(n.highBell.gain)),this.#B=this.own(this.bindParameter(n.highBell.q)),this.#k=this.own(this.bindParameter(n.highShelf.enabled)),this.#I=this.own(this.bindParameter(n.highShelf.frequency)),this.#T=this.own(this.bindParameter(n.highShelf.gain)),this.#D=this.own(this.bindParameter(n.lowPass.enabled)),this.#C=this.own(this.bindParameter(n.lowPass.frequency)),this.#R=this.own(this.bindParameter(n.lowPass.q)),this.#O=this.own(this.bindParameter(n.lowPass.order)),this.own(e.registerProcessor(this)),e.broadcaster.broadcastFloats(t.spectrum,this.#o,()=>{this.#o.set(this.#n.bins()),this.#n.decay=!0}),this.readAllParameters()}get incoming(){return this}get outgoing(){return this}reset(){this.#i.clear(),this.#r.clear(),this.#c.forEach(e=>e.forEach(t=>t.reset())),this.eventInput.clear()}get uuid(){return this.#t.uuid}get audioOutput(){return this.#r}setAudioSource(e){return this.#M=g.wrap(e),{terminate:()=>this.#M=g.None}}index(){return this.#t.indexField.getValue()}adapter(){return this.#t}processAudio(e,t,n){if(this.#M.isEmpty())return;let[i,o]=this.#r.channels(),s=this.#M.unwrap();if(this.#u.some(a=>a)){let[a,c]=s.channels();this.#s.forEach((l,d)=>{if(this.#u[d]){let[h,f]=this.#c[d];h.process(l,a,i,t,n),f.process(l,c,o,t,n),a=i,c=o}})}else{let[a,c]=s.channels();for(let l=t;l<n;l++)i[l]=a[l],o[l]=c[l]}this.#i.process(i,o,t,n),this.#n.process(i,o,t,n)}parameterChanged(e){if(e===this.#O){let n=this.#O.getValue()+1;this.#l[0].order=n,this.#l[1].order=n}else if(e===this.#f){let n=this.#f.getValue()+1;this.#a[0].order=n,this.#a[1].order=n}else if(e===this.#d||e===this.#p){let t=this.#d.getValue(),n=this.#p.getValue();this.#s[0].setHighpassParams(t/sampleRate,n)}else if(e===this.#w||e===this.#b){let t=this.#w.getValue(),n=this.#b.getValue();this.#s[1].setLowShelfParams(t/sampleRate,n)}else if(e===this.#$||e===this.#F||e===this.#N){let t=this.#$.getValue(),n=this.#F.getValue(),i=this.#N.getValue();this.#s[2].setPeakingParams(t/sampleRate,i,n)}else if(e===this.#x||e===this.#y||e===this.#g){let t=this.#x.getValue(),n=this.#y.getValue(),i=this.#g.getValue();this.#s[3].setPeakingParams(t/sampleRate,i,n)}else if(e===this.#S||e===this.#P||e===this.#B){let t=this.#S.getValue(),n=this.#P.getValue(),i=this.#B.getValue();this.#s[4].setPeakingParams(t/sampleRate,i,n)}else if(e===this.#I||e===this.#T){let t=this.#I.getValue(),n=this.#T.getValue();this.#s[5].setHighShelfParams(t/sampleRate,n)}else if(e===this.#C||e===this.#R){let t=this.#C.getValue(),n=this.#R.getValue();this.#s[6].setLowpassParams(t/sampleRate,n)}else e===this.#h?this.#u[0]=this.#h.getValue():e===this.#m?this.#u[1]=this.#m.getValue():e===this.#_?this.#u[2]=this.#_.getValue():e===this.#A?this.#u[3]=this.#A.getValue():e===this.#E?this.#u[4]=this.#E.getValue():e===this.#k?this.#u[5]=this.#k.getValue():e===this.#D&&(this.#u[6]=this.#D.getValue())}toString(){return`{${this.constructor.name} (${this.#e})`}};var Ov=class{roomSize;damp;predelayInSamples;wetGain;dryGain;#e=new Float32Array(2048);#t=new Float32Array(2048);#r=new Float32Array(2048);#i=new Float32Array(2048);#n=new Float32Array(2048);#o=new Float32Array(2048);#s=new Float32Array(2048);#l=new Float32Array(2048);#a=new Float32Array(1024);#c=new Float32Array(512);#u=new Float32Array(512);#h=new Float32Array(256);#d=new Float32Array(2048);#p=new Float32Array(2048);#f=new Float32Array(2048);#m=new Float32Array(2048);#w=new Float32Array(2048);#b=new Float32Array(2048);#_=new Float32Array(2048);#$=new Float32Array(2048);#F=new Float32Array(1024);#N=new Float32Array(512);#A=new Float32Array(512);#x=new Float32Array(256);#y;#g;#E=0;#S=0;#P=0;#B=0;#k=0;#I=0;#T=0;#D=0;#C=0;#R=0;#O=0;#M=0;#V=0;#z=0;#U=0;#j=0;#L=0;#K=0;#W=0;#Z=0;#q=0;#H=0;#J=0;#Q=0;#Y=0;#X=0;#ee=0;#te=0;#re=0;#ie=0;#ne=0;#oe=0;#se=0;#ae=0;#le=0;#ce=0;#ue=0;#de=0;#he=0;#pe=0;#v=0;#G=0;constructor(e=.5){this.#y=kn(Math.ceil(e*sampleRate)),this.#g=new Float32Array(this.#y<<1),this.damp=0,this.roomSize=.5,this.wetGain=.3333,this.dryGain=1-this.wetGain,this.#v=0,this.#G=0,this.predelayInSamples=.008*sampleRate,this.clearHistory()}clear(){this.#v=0,this.#G=0,this.clearHistory(),this.clearBuffers()}process(e,t,n,i){let[o,s]=t.channels(),[a,c]=e.channels(),l=.4*this.damp,d=1-l,h=.7+.28*this.roomSize;for(let f=n;f<i;++f){let v=o[f],m=s[f],y=this.#G-this.predelayInSamples;y<0&&(y+=this.#y);let x;x=y<<1;let S=.01,C=this.#g[x]*S,V=this.#g[x+1]*S;x=this.#G<<1,this.#g[x]=v,this.#g[x+1]=m,this.#G=this.#G+1&this.#y-1;let K=this.#v&2047;this.#E=d*this.#S+l*this.#E,this.#e[K]=C+h*this.#E,this.#S=this.#e[this.#v-1617&2047],this.#P=d*this.#B+l*this.#P,this.#t[K]=C+h*this.#P,this.#B=this.#t[this.#v-1557&2047],this.#k=d*this.#I+l*this.#k,this.#r[K]=C+h*this.#k,this.#I=this.#r[this.#v-1491&2047],this.#T=d*this.#D+l*this.#T,this.#i[K]=C+h*this.#T,this.#D=this.#i[this.#v-1422&2047],this.#C=d*this.#R+l*this.#C,this.#n[K]=C+h*this.#C,this.#R=this.#n[this.#v-1356&2047],this.#O=d*this.#M+l*this.#O,this.#o[K]=C+h*this.#O,this.#M=this.#o[this.#v-1277&2047],this.#V=d*this.#z+l*this.#V,this.#s[K]=C+h*this.#V,this.#z=this.#s[this.#v-1188&2047],this.#U=d*this.#j+l*this.#U,this.#l[K]=C+h*this.#U,this.#j=this.#l[this.#v-1116&2047];let G=this.#j+this.#z+this.#M+this.#R+this.#D+this.#I+this.#B+this.#S,ye=this.#L-G,ke=this.#K-ye,re=this.#W-ke;this.#a[this.#v&1023]=G+.5*this.#L,this.#L=this.#a[this.#v-556&1023],this.#c[this.#v&511]=ye+.5*this.#K,this.#K=this.#c[this.#v-441&511],this.#u[this.#v&511]=ke+.5*this.#W,this.#W=this.#u[this.#v-341&511],this.#h[this.#v&255]=re+.5*this.#Z,this.#Z=this.#h[this.#v-225&255],a[f]=this.dryGain*v+this.wetGain*(this.#Z-re),this.#q=d*this.#H+l*this.#q,this.#d[K]=V+h*this.#q,this.#H=this.#d[this.#v-1640&2047],this.#J=d*this.#Q+l*this.#J,this.#p[K]=V+h*this.#J,this.#Q=this.#p[this.#v-1580&2047],this.#Y=d*this.#X+l*this.#Y,this.#f[K]=V+h*this.#Y,this.#X=this.#f[this.#v-1514&2047],this.#ee=d*this.#te+l*this.#ee,this.#m[K]=V+h*this.#ee,this.#te=this.#m[this.#v-1445&2047],this.#re=d*this.#ie+l*this.#re,this.#w[K]=V+h*this.#re,this.#ie=this.#w[this.#v-1379&2047],this.#ne=d*this.#oe+l*this.#ne,this.#b[K]=V+h*this.#ne,this.#oe=this.#b[this.#v-1300&2047],this.#se=d*this.#ae+l*this.#se,this.#_[K]=V+h*this.#se,this.#ae=this.#_[this.#v-1211&2047],this.#le=d*this.#ce+l*this.#le,this.#$[K]=V+h*this.#le,this.#ce=this.#$[this.#v-1139&2047];let be=this.#ce+this.#ae+this.#oe+this.#ie+this.#te+this.#X+this.#Q+this.#H,H=this.#ue-be,xe=this.#de-H,Te=this.#he-xe;this.#F[this.#v&1023]=be+.5*this.#ue,this.#ue=this.#F[this.#v-579&1023],this.#N[this.#v&511]=H+.5*this.#de,this.#de=this.#N[this.#v-464&511],this.#A[this.#v&511]=xe+.5*this.#he,this.#he=this.#A[this.#v-364&511],this.#x[this.#v&255]=Te+.5*this.#pe,this.#pe=this.#x[this.#v-248&255],c[f]=this.dryGain*m+this.wetGain*(this.#pe-Te),this.#v++}}clearBuffers(){this.#e.fill(0),this.#t.fill(0),this.#r.fill(0),this.#i.fill(0),this.#n.fill(0),this.#o.fill(0),this.#s.fill(0),this.#l.fill(0),this.#a.fill(0),this.#c.fill(0),this.#u.fill(0),this.#h.fill(0),this.#d.fill(0),this.#p.fill(0),this.#f.fill(0),this.#m.fill(0),this.#w.fill(0),this.#b.fill(0),this.#_.fill(0),this.#$.fill(0),this.#F.fill(0),this.#N.fill(0),this.#A.fill(0),this.#x.fill(0),this.#g.fill(0)}clearHistory(){this.#E=0,this.#S=0,this.#P=0,this.#B=0,this.#k=0,this.#I=0,this.#T=0,this.#D=0,this.#C=0,this.#R=0,this.#O=0,this.#M=0,this.#V=0,this.#z=0,this.#U=0,this.#j=0,this.#L=0,this.#K=0,this.#W=0,this.#Z=0,this.#q=0,this.#H=0,this.#J=0,this.#Q=0,this.#Y=0,this.#X=0,this.#ee=0,this.#te=0,this.#re=0,this.#ie=0,this.#ne=0,this.#oe=0,this.#se=0,this.#ae=0,this.#le=0,this.#ce=0,this.#ue=0,this.#de=0,this.#he=0,this.#pe=0}};var Vv=class r extends Me{static ID=0;#e=r.ID++;#t;#r;#i;#n;#o;#s;#l;#a;#c;#u=g.None;constructor(e,t){super(e),this.#t=t,this.#r=new pe,this.#i=this.own(new _e(e.broadcaster,t.address)),this.#n=new Ov;let{decay:n,preDelay:i,damp:o,wet:s,dry:a}=this.#t.namedParameter;this.#o=this.own(this.bindParameter(n)),this.#s=this.own(this.bindParameter(i)),this.#l=this.own(this.bindParameter(o)),this.#a=this.own(this.bindParameter(s)),this.#c=this.own(this.bindParameter(a)),this.own(e.registerProcessor(this)),this.readAllParameters()}get incoming(){return this}get outgoing(){return this}reset(){this.#i.clear(),this.#n.clear(),this.#r.clear(),this.eventInput.clear()}get uuid(){return this.#t.uuid}get audioOutput(){return this.#r}setAudioSource(e){return this.#u=g.wrap(e),{terminate:()=>this.#u=g.None}}index(){return this.#t.indexField.getValue()}adapter(){return this.#t}processAudio(e,t,n){if(this.#u.isEmpty())return;this.#n.process(this.#r,this.#u.unwrap(),t,n);let[i,o]=this.#r.channels();this.#i.process(i,o,t,n)}parameterChanged(e){this.#o===e?this.#n.roomSize=this.#o.getValue():this.#s===e?this.#n.predelayInSamples=Math.ceil(this.#s.getValue()*sampleRate):this.#l===e?this.#n.damp=this.#l.getValue():this.#a===e?this.#n.wetGain=Oe(this.#a.getValue()):this.#c===e&&(this.#n.dryGain=Oe(this.#c.getValue()))}toString(){return`{${this.constructor.name} (${this.#e})`}};var zv=class extends Me{#e;#t;#r;#i;#n;#o;#s;gain=1;release=1;loader=g.None;constructor(e,t){super(e),this.#e=t,this.#t=[],this.#r=new pe,this.#i=new Sn(this,e.broadcaster,t.audioUnitBoxAdapter().address),this.#n=this.own(new _e(e.broadcaster,t.address)),this.#o=this.own(this.bindParameter(this.#e.namedParameter.volume)),this.#s=this.own(this.bindParameter(this.#e.namedParameter.release)),this.ownAll(e.registerProcessor(this),t.box.file.catchupAndSubscribe(n=>this.loader=n.targetVertex.map(({box:i})=>e.sampleManager.getOrCreate(i.address.uuid)))),this.readAllParameters()}get noteEventTarget(){return g.wrap(this)}introduceBlock(e){this.#i.introduceBlock(e)}setNoteEventSource(e){return this.#i.setNoteEventSource(e)}get incoming(){return this}get outgoing(){return this}reset(){this.#t.length=0,this.#r.clear(),this.eventInput.clear(),this.#i.clear(),this.#n.clear()}get uuid(){return this.#e.uuid}get audioOutput(){return this.#r}get adapter(){return this.#e}handleEvent(e){me.isStart(e)?this.#t.push(new p_(this,e)):me.isStop(e)&&this.#t.find(t=>t.event().id===e.id)?.stop()}processAudio(e,t,n){this.#r.clear(t,n);for(let i=this.#t.length-1;i>=0;i--)this.#t[i].processAdd(this.#r,t,n)&&this.#t.splice(i,1)}parameterChanged(e){e===this.#o?this.gain=Oe(this.#o.getValue()):e===this.#s&&(this.release=this.#s.getValue()*sampleRate)}finishProcess(){this.#r.assertSanity(),this.#n.process(this.#r.getChannel(0),this.#r.getChannel(1))}toString(){return"{NanoDevice}"}},p_=class{#e;#t;#r=1;#i=0;#n=.003*sampleRate|0;#o=0;#s=Number.POSITIVE_INFINITY;constructor(e,t){this.#e=e,this.#t=t,this.#r=Math.pow(2,(t.pitch+t.cent/100)/12-5)}event(){return this.#t}stop(){this.#s=this.#o}processAdd(e,t,n){let i=this.#e.loader;if(i.isEmpty())return!0;let o=i.unwrap();return o.data.isEmpty()?!0:this.processSimple(e.channels(),o.data.unwrap(),t,n)}processSimple(e,t,n,i){let[o,s]=e,a=t.frames[0],c=t.frames[1]??a,l=t.numberOfFrames,d=t.sampleRate/sampleRate,h=this.#e.gain*this.#t.velocity,f=this.#e.release,v=1/f;for(let m=n;m<i;m++){let y=this.#i|0;if(y>=l-1)return!0;let x=this.#i-y,S=this.#o<this.#n?this.#o/this.#n:1,C=(Math.min(1-(this.#o-this.#s)*v,1)*S)**2,V=a[y]*(1-x)+a[y+1]*x,K=c[y]*(1-x)+c[y+1]*x;if(o[m]+=V*h*C,s[m]+=K*h*C,this.#i+=this.#r*d,++this.#o-this.#s>f)return!0}return!1}};var Uv=class extends $r{#e;#t;constructor(e,t){super(e),this.#e=t,this.#t=new Sn(this,e.broadcaster,t.adapter.audioUnitBoxAdapter().address),this.own(e.registerProcessor(this)),this.readAllParameters()}introduceBlock(e){this.#t.introduceBlock(e)}setNoteEventSource(e){return this.#t.setNoteEventSource(e)}reset(){this.eventInput.clear(),this.#t.clear()}processEvents(e,t,n){}handleEvent({index:e},t){me.isStart(t)?this.#e.optSampleProcessor(t.pitch).ifSome(({eventInput:n})=>n.add(e,t)):me.isStop(t)&&this.#e.optSampleProcessor(t.pitch).ifSome(({eventInput:n})=>n.add(e,t))}toString(){return"{PlayfieldSequencer}"}};var jv=class extends Me{#e;#t;#r;#i;#n;constructor(e,t){super(e),this.#e=t,this.#t=new pe,this.#r=this.own(new _e(e.broadcaster,t.adapter.address)),this.#i=[],this.#n=new cu,this.own(e.registerProcessor(this)),this.readAllParameters()}get uuid(){return this.#e.uuid}get incoming(){return this}get outgoing(){return this}setAudioSource(e){return this.#i.push(e),{terminate:()=>{D.remove(this.#i,e),this.#t.clear()}}}get audioOutput(){return this.#t}get eventInput(){return this.#n}processAudio(e,t,n){}reset(){this.#r.clear()}finishProcess(){this.#t.clear();let[e,t]=this.#t.channels();for(let n of this.#i){let[i,o]=n.channels();for(let s=0;s<128;s++)e[s]+=i[s],t[s]+=o[s]}this.#t.assertSanity(),this.#r.process(this.#t.getChannel(0),this.#t.getChannel(1))}toString(){return"{PlayfieldMixProcessor}"}};var Lv=class r{static create(e,t,n,i){return new r(e,t,n,i)}#e=new j;#t;#r;#i=[];#n=!0;constructor(e,t,n,i){this.#t=E.newSet(({device:o})=>o.uuid),this.#r=this.#e.own(new j),this.#e.ownAll(t.catchupAndSubscribe({onAdd:o=>{this.invalidateWiring();let s=op.create(e,o.box),a=this.#t.add({device:s,subscription:s.adapter().enabledField.subscribe(()=>this.invalidateWiring())});B(a,"Could not add.")},onRemove:o=>{this.invalidateWiring();let{device:s,subscription:a}=this.#t.removeByKey(o.uuid);a.terminate(),s.terminate()},onReorder:o=>this.invalidateWiring()}),e.subscribeProcessPhase(o=>{if(o===0&&this.#n){let s=n;D.replace(this.#i,t.adapters().map(({uuid:a})=>this.#t.get(a).device));for(let a of this.#i)a.adapter().enabledField.getValue()&&(this.#r.own(a.setAudioSource(s.audioOutput)),this.#r.own(e.registerEdge(s.outgoing,a.incoming)),s=a);this.#r.own(i.setAudioSource(s.audioOutput)),this.#r.own(e.registerEdge(s.outgoing,i.incoming)),this.#n=!1}}))}invalidateWiring(){this.#r.terminate(),this.#n=!0}terminate(){this.#e.terminate(),this.#t.forEach(({device:e})=>e.terminate()),this.#t.clear(),this.#i=[]}toString(){return`{${this.constructor.name}}`}};var sp=Math.floor(.005*sampleRate),Wv=class{#e;#t;#r;#i;#n;#o;#s=0;#l=Number.POSITIVE_INFINITY;#a;#c;#u;#h;#d;#p;#f=!0;#m=!1;constructor(e,t,n,i){this.#e=e,this.#t=t,this.#i=n,this.#r=i,this.#n=e.gate,this.#o=tl(this.#r.velocity);let{attack:o,release:s,sampleStart:a,sampleEnd:c}=this.#t;this.#a=o.getValue()*sampleRate,this.#c=s.getValue()*sampleRate,this.#u=(n.numberOfFrames-1)*a.getValue(),this.#h=(n.numberOfFrames-1)*c.getValue(),this.#d=this.#u,this.#p=0}get sample(){return this.#e}get event(){return this.#r}get position(){return this.#d}get envelope(){return this.#p}release(e=!1){this.#f&&(e?(this.#c=sp,this.#w(),this.#f=!1):this.#n!==Pn.Off&&this.#w())}processAdd(e,t,n){let[i,o]=e,{frames:s,numberOfFrames:a}=this.#i,c=s[0],l=s[1]??c,{pitch:d}=this.#t,h=this.#h-this.#u,f=Math.sign(h),v=this.#i.sampleRate/sampleRate*f*2**(d.getValue()/1200),m=0;for(let y=t;y<n;y++){let x=this.#d|0,S=this.#d-x,C=c[x]*(1-S)+(c[x+1]??0)*S,V=l[x]*(1-S)+(l[x+1]??0)*S;if(m=Math.min(this.#s/this.#a,1-(this.#s-(this.#l+this.#a))/this.#c,1),this.#d+=v,f>0){if(this.#n===Pn.Off){if(this.#d>=a)return!0;!this.#m&&this.#d>=this.#h&&this.#w()}else if(this.#n===Pn.On){if(this.#d>=this.#h-sp){if(this.#d>=this.#h)return!0;m*=(this.#h-this.#d)/sp}}else if(this.#n===Pn.Loop)for(;this.#d>=this.#h;)this.#d-=h}else if(f<0){if(this.#n===Pn.Off){if(this.#d<=0)return!0;!this.#m&&this.#d<=this.#h&&this.#w()}else if(this.#n===Pn.On){if(this.#d<=this.#h+sp){if(this.#d<=this.#h)return!0;m*=(this.#h-this.#d)/sp}}else if(this.#n===Pn.Loop)for(;this.#d<=this.#h;)this.#d-=h}if(++this.#s-this.#l>this.#a+this.#c)return!0;m*=this.#o*m,i[y]+=C*m,o[y]+=V*m}return this.#p=m,!1}toString(){return"{PlayfieldSampleVoice}"}#w(){this.#m||(this.#m=!0,this.#l=this.#s<this.#a?this.#s-this.#a:this.#s)}};var Zv=class extends Me{#e;#t;#r;#i;#n;#o;constructor(e,t,n,i){super(e),this.#e=t,this.#t=n,this.#r=[],this.#i=new pe,this.#n=this.own(new _e(e.broadcaster,n.peakAddress));let{sampleStart:o,sampleEnd:s,attack:a,release:c,pitch:l}=n.namedParameter;this.#o=Object.freeze({sampleStart:this.own(this.bindParameter(o)),sampleEnd:this.own(this.bindParameter(s)),attack:this.own(this.bindParameter(a)),release:this.own(this.bindParameter(c)),pitch:this.own(this.bindParameter(l))});let d=new Float32Array(16);this.ownAll(Lv.create(e,n.audioEffects,this,i),e.broadcaster.broadcastFloats(n.address,d,()=>{let h=this.#r.length<d.length?this.#r:this.#r.slice(0,d.length);h.forEach(({position:f},v)=>d[v]=f),d[h.length]=-1}),e.registerProcessor(this)),this.readAllParameters()}get uuid(){return this.#t.uuid}get incoming(){return this}get outgoing(){return this}get audioOutput(){return this.#i}get adapter(){return this.#t}handleEvent(e){if(me.isStart(e)){let t=this.#t.file().flatMap(d=>d.getOrCreateLoader().data);if(t.isEmpty())return;let{mute:n,solo:i,polyphone:o,exclude:s}=this.#t.namedParameter,a=n.getValue(),c=i.getValue();if(a||this.#e.hasSolo()&&!c)return;o.getValue()||this.#r.forEach(d=>d.release(!0)),s.getValue()&&this.#e.stopExcludeOthers(this.#t),this.#r.push(new Wv(this.#t,this.#o,t.unwrap(),e))}else me.isStop(e)&&this.#r.find(t=>t.event.id===e.id)?.release()}processAudio(e,t,n){this.#i.clear(t,n);for(let i=this.#r.length-1;i>=0;i--)this.#r[i].processAdd(this.#i.channels(),t,n)&&this.#r.splice(i,1)}forceStop(){this.#r.forEach(e=>e.release(!0))}parameterChanged(e){}reset(){this.#r.length=0,this.#i.clear(),this.#n.clear()}finishProcess(){this.#i.assertSanity(),this.#n.process(this.#i.getChannel(0),this.#i.getChannel(1))}toString(){return`{PlayfieldSampleProcessor note: ${this.#t.indexField.getValue()}}`}};var Gv=class{#e=new j;#t;#r;#i;#n;constructor(e,t){this.#t=t,this.#r=this.#e.own(new Uv(e,this)),this.#i=this.#e.own(new jv(e,this)),this.#n=E.newSet(n=>n.uuid),this.#e.ownAll(t.samples.catchupAndSubscribe({onAdd:n=>{let i=new Zv(e,this,n,this.#i);this.#n.add({uuid:n.uuid,processor:i,terminable:e.registerEdge(this.#r,i)}),e.sampleManager.getOrCreate(n.fileUUID())},onRemove:n=>{let{terminable:i,processor:o}=this.#n.removeByKey(n.uuid);i.terminate(),o.terminate()},onReorder:n=>{}}),{terminate:()=>{this.#n.forEach(({terminable:n,processor:i})=>{n.terminate(),i.terminate()}),this.#n.clear()}})}setNoteEventSource(e){return this.#r.setNoteEventSource(e)}get noteEventTarget(){return g.wrap(this)}get incoming(){return this.#r}get outgoing(){return this.#i}optSampleProcessor(e){return this.#t.samples.getAdapterByIndex(e).flatMap(t=>this.#n.opt(t.uuid)).map(t=>t.processor)}hasSolo(){return this.#t.samples.adapters().some(e=>e.namedParameter.solo.getValue())}stopExcludeOthers(e){for(let t of this.#t.samples.adapters())t.exclude&&t!==e&&this.#n.opt(t.uuid).ifSome(({processor:n})=>n.forceStop())}get uuid(){return this.#t.uuid}get adapter(){return this.#t}get audioOutput(){return this.#i.audioOutput}parameterChanged(e){}terminate(){this.#e.terminate()}toString(){return"{PlayfieldDeviceProcessor}"}};var qv=class extends Me{#e;#t;#r;#i=Zt.stereoMatrix(sampleRate);#n={gain:0,panning:0,stereo:0,invertL:!1,invertR:!1,swap:!1};#o;#s;#l;#a;#c;#u;#h=g.None;#d=Yi.Linear;#p=!0;#f=!1;constructor(e,t){super(e),this.#e=t,this.#t=new pe,this.#r=this.own(new _e(e.broadcaster,t.address)),this.#o=this.own(this.bindParameter(t.namedParameter.volume)),this.#s=this.own(this.bindParameter(t.namedParameter.panning)),this.#l=this.own(this.bindParameter(t.namedParameter.stereo)),this.#a=this.own(this.bindParameter(t.namedParameter.invertL)),this.#c=this.own(this.bindParameter(t.namedParameter.invertR)),this.#u=this.own(this.bindParameter(t.namedParameter.swap)),this.ownAll(t.box.panningMixing.catchupAndSubscribe(n=>{this.#d=n.getValue(),this.#p=!0}),e.registerProcessor(this)),this.readAllParameters()}get incoming(){return this}get outgoing(){return this}reset(){this.#r.clear(),this.#t.clear(),this.eventInput.clear(),this.#f=!1}get uuid(){return this.#e.uuid}get audioOutput(){return this.#t}setAudioSource(e){return this.#h=g.wrap(e),{terminate:()=>this.#h=g.None}}index(){return this.#e.indexField.getValue()}adapter(){return this.#e}processAudio(e,t,n){if(this.#h.isEmpty())return;this.#p&&(this.#i.update(this.#n,this.#d,this.#f),this.#p=!1);let i=this.#h.unwrap().channels(),o=this.#t.channels();this.#i.processFrames(i,o,t,n),this.#r.processStereo(o,t,n),this.#f=!0}parameterChanged(e){switch(e){case this.#o:this.#n.gain=Oe(this.#o.getValue()),this.#p=!0;return;case this.#s:this.#n.panning=this.#s.getValue(),this.#p=!0;return;case this.#l:this.#n.stereo=this.#l.getValue(),this.#p=!0;return;case this.#a:this.#n.invertL=this.#a.getValue(),this.#p=!0;return;case this.#c:this.#n.invertR=this.#c.getValue(),this.#p=!0;return;case this.#u:this.#n.swap=this.#u.getValue(),this.#p=!0;return}}toString(){return`{${this.constructor.name}}`}};var Hv=class extends $r{#e;#t;#r=g.None;#i=g.None;constructor(e,t){super(e),this.#e=t,this.#t=this.own(new bi(e.broadcaster,t.address)),this.ownAll(t.box.groove.catchupAndSubscribe(n=>{this.#r.ifSome(i=>i.terminate()),this.#r=g.wrap(n.targetVertex.isEmpty()?null:e.boxAdapters.adapterFor(n.targetVertex.unwrap().box,$a.checkType))}),W.create(()=>{this.#r.ifSome(n=>n.terminate()),this.#r=g.None}),e.registerProcessor(this))}get uuid(){return this.#e.uuid}index(){return this.#e.indexField.getValue()}adapter(){return this.#e}setNoteEventSource(e){return B(this.#i.isEmpty(),"NoteEventSource already set"),this.#i=g.wrap(e),W.create(()=>this.#i=g.None)}*processNotes(e,t,n){if(this.#i.isEmpty())return;let i=this.#i.unwrap(),o=this.#r.mapOr(fu,Au.Identity);for(let s of i.processNotes(o.unwarp(e),o.unwarp(t),n))me.isStart(s)?this.#t.noteOn(s.pitch):this.#t.noteOff(s.pitch),yield Ir.overwrite(s,{position:X(o.warp(s.position),e,t)})}*iterateActiveNotesAt(e,t){if(this.#i.isEmpty())return;let n=this.#i.unwrap(),i=this.#r.mapOr(fu,Au.Identity);for(let o of n.iterateActiveNotesAt(i.unwarp(e),t))yield Ir.overwrite(o,{position:i.warp(o.position)})}reset(){this.eventInput.clear()}parameterChanged(e){}handleEvent(e,t){}processEvents(e,t,n){}};var Jv=class extends $r{#e;#t;#r=g.None;constructor(e,t){super(e),this.#e=t,this.#t=this.own(new bi(e.broadcaster,t.address)),this.own(e.registerProcessor(this)),this.readAllParameters()}setNoteEventSource(e){return B(this.#r.isEmpty(),"NoteEventSource already set"),this.#r=g.wrap(e),W.create(()=>this.#r=g.None)}get uuid(){return this.#e.uuid}get incoming(){return this}get outgoing(){return this}*processNotes(e,t,n){if(!this.#r.isEmpty())for(let i of this.#r.unwrap().processNotes(e,t,n))yield i}*iterateActiveNotesAt(e,t){if(!this.#r.isEmpty())for(let n of this.#r.unwrap().iterateActiveNotesAt(e,t))yield n}reset(){this.eventInput.clear()}processEvents(e,t,n){}parameterChanged(e){}handleEvent(e,t){}index(){return this.#e.indexField.getValue()}adapter(){return this.#e}};var Qv=(r,e)=>(r[e]??r[e.toString()])?.value,hu=(r,e,t)=>Qv(e,t)??Qv(r,t),kS=new Float32Array(128),Yv=class{event;sampleData;envelope;#e;rootKey;sampleRate;loopStart;loopEnd;pan;shouldLoop;playbackPosition=0;isReleasing=!1;constructor(e,t,n,i){this.event=e;let o=t.generators,s=n?.generators,a=Qv(s,53)??0,c=n?.sample??i.samples[a];this.sampleData=c.data,this.rootKey=Qv(s,58)??c?.header.originalPitch??60,this.sampleRate=c?.header.sampleRate??sampleRate,this.loopStart=c?.header.startLoop??0,this.loopEnd=c?.header.endLoop??this.sampleData.length;let l=hu(o,s,54)??0;this.shouldLoop=l===1||l===3,this.pan=(hu(o,s,17)??0)/1e3;let d=hu(o,s,34),h=hu(o,s,36),f=hu(o,s,37),v=hu(o,s,38),m=La(d)?Math.pow(2,d/1200):.005,y=La(h)?Math.pow(2,h/1200):.005,x=1-(f??0)/1e3,S=La(v)?Math.pow(2,v/1200):.005;this.envelope=new el(sampleRate),this.envelope.set(m,y,x,S),this.envelope.gateOn(),this.#e=new Fi(.003,sampleRate)}release(){this.isReleasing=!0,this.envelope.gateOff()}processAdd(e,t,n){let o=wu(this.event.pitch+this.event.cent/100,440)/wu(this.rootKey,440)*(this.sampleRate/sampleRate),s=tl(this.event.velocity),a=Math.cos((this.pan+1)*Math.PI/4),c=Math.sin((this.pan+1)*Math.PI/4);this.envelope.process(kS,t,n);let l=e.getChannel(0),d=e.getChannel(1);for(let h=t;h<n;h++){let f=Math.floor(this.playbackPosition),m=this.#t(f)/32768*s*this.#e.process(kS[h]);if(l[h]+=m*a,d[h]+=m*c,this.playbackPosition+=o,this.shouldLoop)this.playbackPosition>=this.loopEnd&&this.loopEnd>this.loopStart&&(this.playbackPosition=this.loopStart+(this.playbackPosition-this.loopEnd));else if(this.playbackPosition>=this.sampleData.length-1)return!0}return this.envelope.complete&&this.#e.value<1e-4}#t(e){if(e>=this.sampleData.length-1)return this.sampleData[this.sampleData.length-1];let t=this.playbackPosition-e;return this.sampleData[e]*(1-t)+this.sampleData[e+1]*t}};var Xv=class extends Me{#e;#t;#r;#i;#n;#o=g.None;constructor(e,t){super(e),this.#e=t,this.#t=[],this.#r=new Sn(this,e.broadcaster,t.audioUnitBoxAdapter().address),this.#i=new pe,this.#n=this.own(new _e(e.broadcaster,t.address)),this.ownAll(e.registerProcessor(this),t.box.file.catchupAndSubscribe(n=>this.#o=n.targetVertex.map(({box:i})=>e.soundfontManager.getOrCreate(i.address.uuid))))}introduceBlock(e){this.#r.introduceBlock(e)}setNoteEventSource(e){return this.#r.setNoteEventSource(e)}get noteEventTarget(){return g.wrap(this)}get incoming(){return this}get outgoing(){return this}get uuid(){return this.#e.uuid}get audioOutput(){return this.#i}get adapter(){return this.#e}reset(){this.#r.clear(),this.#n.clear(),this.#t.length=0,this.#i.clear(),this.eventInput.clear()}handleEvent(e){let t=this.#o.flatMap(i=>i.soundfont);if(t.isEmpty())return;let n=t.unwrap();if(me.isStart(e)){let i=n.presets[this.#e.presetIndex]??n.presets[0];if(Ka(i)){console.warn("No preset available");return}let o=0;for(let s of i.zones){let a=Math.round(e.velocity*127);if(this.#s(e.pitch,a,s)){let c=s.instrument.zones;for(let l=0;l<c.length;l++){let d=c[l];this.#s(e.pitch,a,d)&&(this.#t.push(new Yv(e,s,d,n)),o++)}}}}else me.isStop(e)&&this.#t.forEach(i=>{i.event.id===e.id&&i.release()})}processAudio(e,t,n){this.#i.clear(t,n);for(let i=this.#t.length-1;i>=0;i--)this.#t[i].processAdd(this.#i,t,n)&&this.#t.splice(i,1)}finishProcess(){this.#i.assertSanity(),this.#n.process(this.#i.getChannel(0),this.#i.getChannel(1))}toString(){return"{SoundfontDevice}"}#s(e,t,n){return this.#l(n.generators[44]?.range,t)&&this.#l(n.generators[43]?.range,e)}#l(e,t){return ja(e)||t>=e.lo&&t<=e.hi}};var IS=r=>r>0?20*Math.log10(r):-100,DS=r=>Math.pow(10,r*.05);var ey=class{#e=.08;#t=1;#r;#i;#n=0;#o=.14;#s=0;#l=.14;#a=0;#c=0;#u=0;constructor(e){this.#r=Math.exp(-1/(e*.2)),this.#i=1-this.#r}process(e,t,n){this.#a===0&&(this.#a=e[0]),this.#c===0&&(this.#c=e[0]),this.#s=0,this.#l=0;for(let o=t;o<n;++o){let s=e[o]*e[o];this.#a=Math.max(s,this.#r*this.#a+this.#i*s),this.#c=this.#r*this.#c+this.#i*s;let a=this.#a/this.#c;this.#u=a>0?a:0,this.#u>0&&(this.#n=2*(this.#e/this.#u),this.#o=2*(this.#t/this.#u)-this.#n,this.#s+=this.#n,this.#l+=this.#o)}let i=n-t;this.#s/=i,this.#l/=i}getAvgAttack(){return this.#s}getAvgRelease(){return this.#l}};var ty=class{#e=[];#t;#r;#i;#n=0;constructor(e,t,n,i){this.#i=i,this.#r=Math.floor(e*t),this.#t=n+this.#r;for(let o=0;o<i;o++)this.#e[o]=new Float32Array(this.#t);this.#n=0}process(e,t,n){if(this.#r===0)return;let i=(this.#n-this.#r+this.#t)%this.#t;for(let o=0;o<this.#i;o++){let s=e.getChannel(o),a=this.#n,c=i;for(let l=t;l<n;l++){let d=this.#e[o][c];this.#e[o][a]=s[l],s[l]=d,a=(a+1)%this.#t,c=(c+1)%this.#t}}this.#n=(this.#n+(n-t))%this.#t}};var ry=class{#e=-20;#t=2;#r=6;#i=3;#n=-.5;setThreshold(e){this.#e=e}setRatio(e){this.#t!==e&&(this.#t=e,this.#t>23.9&&(this.#t=-1/0),this.#n=1/e-1)}setKnee(e){e!==this.#r&&(this.#r=e,this.#i=e/2)}applyCompression(e){let t=e-this.#e;return t<=-this.#i?0:t>-this.#i&&t<=this.#i?.5*this.#n*((t+this.#i)*(t+this.#i))/this.#r:this.#n*t}applyCompressionToBuffer(e,t,n){for(let i=t;i<n;++i){let o=Math.max(Math.abs(e[i]),1e-6),s=IS(o);e[i]=this.applyCompression(s)}}};var za=class{#e;#t=1;#r=0;#i=0;#n=!0;constructor(e){this.#e=e,this.#t=1,this.#r=1-this.#t}process(e){this.#n&&(this.#i=e,this.#n=!1),this.#i=this.#t*e+this.#r*this.#i}setAlpha(e){this.#t=e,this.#r=1-this.#t}setAlphaWithTime(e){this.#t=Math.exp(-1/(this.#e*e)),this.#r=1-this.#t}getState(){return this.#i}};var iy=class{#e;#t;#r;#i;#n=.01;#o=0;#s=.14;#l=0;#a=0;#c=0;#u=!1;#h=!1;constructor(e){this.#e=e,this.#t=new ey(e),this.#r=new za(e),this.#i=new za(e),this.#o=Math.exp(-1/(e*this.#n)),this.#l=Math.exp(-1/(e*this.#s)),this.#a=0,this.#c=0}setAttack(e){e!==this.#n&&(this.#n=e,this.#o=Math.exp(-1/(this.#e*this.#n)))}setRelease(e){e!==this.#s&&(this.#s=e,this.#l=Math.exp(-1/(this.#e*this.#s)))}setAutoAttack(e){this.#u=e}setAutoRelease(e){this.#h=e}#d(e){return e<this.#a?this.#a=this.#o*this.#a+(1-this.#o)*e:this.#a=this.#l*this.#a+(1-this.#l)*e,this.#a}applyBallistics(e,t,n){for(let i=t;i<n;++i)e[i]=this.#d(e[i])}processCrestFactor(e,t,n){(this.#u||this.#h)&&(this.#t.process(e,t,n),this.#r.process(this.#t.getAvgAttack()),this.#i.process(this.#t.getAvgRelease()),this.#u&&this.setAttack(this.#r.getState()),this.#h&&this.setRelease(this.#i.getState()))}};var ny=class{#e;#t;#r;#i=0;#n=0;constructor(e,t,n){this.#t=Math.floor(e*t),this.#r=n+this.#t,this.#e=new Float32Array(this.#r),this.#i=0}process(e,t,n){this.#o(e,t,n),this.#l(),this.#s(e,t,n)}#o(e,t,n){for(let i=t;i<n;i++)this.#e[this.#i]=e[i],this.#i=(this.#i+1)%this.#r;this.#n=n-t}#s(e,t,n){let i=this.#i-this.#n-this.#t;i<0&&(i+=this.#r);for(let o=t;o<n;o++)e[o]=this.#e[i],i=(i+1)%this.#r}#l(){let e=this.#i-1;e<0&&(e+=this.#r);let t=0,n=0;for(let o=0;o<this.#n;o++){let s=this.#e[e];s>t?(this.#e[e]=t,t+=n):(n=-s/this.#t,t=s+n),e=e-1,e<0&&(e+=this.#r)}let i=!1;for(let o=0;o<this.#t&&!i;o++){if(this.#e[e]>t)this.#e[e]=t,t+=n;else{i=!0;break}e=e-1,e<0&&(e+=this.#r)}}};var oy=class r extends Me{static PEAK_DECAY_PER_SAMPLE=Math.exp(-1/(sampleRate*.5));static REDUCTION_DECAY_PER_SAMPLE=128/sampleRate*.05;static ID=0;#e=r.ID++;#t;parameterLookahead;parameterAutomakeup;parameterAutoattack;parameterAutorelease;parameterInputgain;parameterThreshold;parameterRatio;parameterKnee;parameterAttack;parameterRelease;parameterMakeup;parameterMix;#r;#i;#n;#o;#s;#l;#a;#c;#u;#h=.005;#d;#p;#f=g.None;#m=!1;#w=!1;#b=!1;#_=!1;#$=-10;#F=2;#N=6;#A=2;#x=140;#y=0;#g=1;#E=0;#S=0;#P=0;#B=0;#k=!1;constructor(e,t){super(e),this.#t=t,this.#r=new pe,this.#i=this.own(new _e(e.broadcaster,t.address)),this.#d=new Float32Array([Number.NEGATIVE_INFINITY,0,Number.NEGATIVE_INFINITY]),this.#p=Zt.linear(sampleRate);let{lookahead:n,automakeup:i,autoattack:o,autorelease:s,inputgain:a,threshold:c,ratio:l,knee:d,attack:h,release:f,makeup:v,mix:m}=t.namedParameter;this.parameterLookahead=this.own(this.bindParameter(n)),this.parameterAutomakeup=this.own(this.bindParameter(i)),this.parameterAutoattack=this.own(this.bindParameter(o)),this.parameterAutorelease=this.own(this.bindParameter(s)),this.parameterInputgain=this.own(this.bindParameter(a)),this.parameterThreshold=this.own(this.bindParameter(c)),this.parameterRatio=this.own(this.bindParameter(l)),this.parameterKnee=this.own(this.bindParameter(d)),this.parameterAttack=this.own(this.bindParameter(h)),this.parameterRelease=this.own(this.bindParameter(f)),this.parameterMakeup=this.own(this.bindParameter(v)),this.parameterMix=this.own(this.bindParameter(m)),this.#n=new iy(sampleRate),this.#o=new ry,this.#s=new ty(sampleRate,.005,128,2),this.#l=new ny(sampleRate,this.#h,128),this.#a=new za(sampleRate),this.#a.setAlpha(.03),this.#c=new Float32Array(128),this.#u=[new Float32Array(128),new Float32Array(128)],this.ownAll(e.registerProcessor(this),e.broadcaster.broadcastFloats(t.address.append(0),this.#d,()=>{this.#d[0]=qy(this.#S),this.#d[1]=this.#B,this.#d[2]=qy(this.#P)})),this.readAllParameters()}get incoming(){return this}get outgoing(){return this}reset(){this.#k=!1,this.#r.clear(),this.#i.clear(),this.eventInput.clear(),this.#c.fill(0),this.#u[0].fill(0),this.#u[1].fill(0),this.#E=0,this.#S=0,this.#P=0,this.#B=0}get uuid(){return this.#t.uuid}get audioOutput(){return this.#r}setAudioSource(e){return this.#f=g.wrap(e),{terminate:()=>this.#f=g.None}}index(){return this.#t.indexField.getValue()}adapter(){return this.#t}handleEvent(e){}processAudio(e,t,n){if(this.#f.isEmpty())return;let i=this.#f.unwrap(),o=i.getChannel(0),s=i.getChannel(1),a=this.#r.getChannel(0),c=this.#r.getChannel(1);for(let l=t;l<n;l++){let d=this.#p.moveAndGet(),h=a[l]=o[l]*d,f=c[l]=s[l]*d,v=Math.max(Math.abs(h),Math.abs(f));this.#S<=v?this.#S=v:this.#S*=r.PEAK_DECAY_PER_SAMPLE}this.#c.fill(0,t,n);for(let l=t;l<n;l++)this.#c[l]=Math.max(Math.abs(a[l]),Math.abs(c[l]));this.#n.processCrestFactor(this.#c,t,n),this.#o.applyCompressionToBuffer(this.#c,t,n),this.#n.applyBallistics(this.#c,t,n);for(let l=t;l<n;l++){let d=this.#c[l];this.#B>=d?this.#B=d:this.#B+=r.REDUCTION_DECAY_PER_SAMPLE}this.#E=this.#I(this.#c,t,n),this.#m&&(this.#s.process(this.#r,t,n),this.#l.process(this.#c,t,n));for(let l=t;l<n;l++)this.#c[l]=DS(this.#c[l]+this.#y+this.#E);for(let l=t;l<n;l++)this.#u[0][l]=a[l],this.#u[1][l]=c[l];for(let l=t;l<n;l++)a[l]*=this.#c[l],c[l]*=this.#c[l];for(let l=t;l<n;l++){let d=a[l]*this.#g+this.#u[0][l]*(1-this.#g),h=c[l]*this.#g+this.#u[1][l]*(1-this.#g),f=Math.max(Math.abs(d),Math.abs(h));this.#P<=f?this.#P=f:this.#P*=r.PEAK_DECAY_PER_SAMPLE,a[l]=d,c[l]=h}this.#i.process(a,c,t,n),this.#k=!0}#I(e,t,n){let i=0;for(let o=t;o<n;o++)i+=e[o];return this.#a.process(-i/(n-t)),this.#w?this.#a.getState():0}parameterChanged(e){e===this.parameterLookahead?this.#m=this.parameterLookahead.getValue():e===this.parameterAutomakeup?this.#w=this.parameterAutomakeup.getValue():e===this.parameterAutoattack?(this.#b=this.parameterAutoattack.getValue(),this.#n.setAutoAttack(this.#b),this.#b||this.#n.setAttack(this.#A*.001)):e===this.parameterAutorelease?(this.#_=this.parameterAutorelease.getValue(),this.#n.setAutoRelease(this.#_),this.#_||this.#n.setRelease(this.#x*.001)):e===this.parameterInputgain?this.#p.set(Oe(this.parameterInputgain.getValue()),this.#k):e===this.parameterThreshold?(this.#$=this.parameterThreshold.getValue(),this.#o.setThreshold(this.#$)):e===this.parameterRatio?(this.#F=this.parameterRatio.getValue(),this.#o.setRatio(this.#F)):e===this.parameterKnee?(this.#N=this.parameterKnee.getValue(),this.#o.setKnee(this.#N)):e===this.parameterAttack?(this.#A=this.parameterAttack.getValue(),this.#b||this.#n.setAttack(this.#A*.001)):e===this.parameterRelease?(this.#x=this.parameterRelease.getValue(),this.#_||this.#n.setRelease(this.#x*.001)):e===this.parameterMakeup?this.#y=this.parameterMakeup.getValue():e===this.parameterMix&&(this.#g=this.parameterMix.getValue())}toString(){return`{${this.constructor.name} (${this.#e})}`}};var sy=class r extends Me{static ID=0;#e=r.ID++;#t;#r;#i;#n;parameterCrusherRate;parameterBitDepth;parameterBoost;parameterMix;#o=g.None;constructor(e,t){super(e),this.#t=t,this.#r=new pe,this.#i=new mp(sampleRate),this.#n=this.own(new _e(e.broadcaster,t.address));let{crush:n,bits:i,boost:o,mix:s}=t.namedParameter;this.parameterCrusherRate=this.own(this.bindParameter(n)),this.parameterBitDepth=this.own(this.bindParameter(i)),this.parameterBoost=this.own(this.bindParameter(o)),this.parameterMix=this.own(this.bindParameter(s)),this.own(e.registerProcessor(this)),this.readAllParameters()}get incoming(){return this}get outgoing(){return this}reset(){this.#i.reset(),this.#n.clear(),this.#r.clear(),this.eventInput.clear()}get uuid(){return this.#t.uuid}get audioOutput(){return this.#r}setAudioSource(e){return this.#o=g.wrap(e),{terminate:()=>this.#o=g.None}}index(){return this.#t.indexField.getValue()}adapter(){return this.#t}processAudio(e,t,n){if(this.#o.isEmpty())return;let i=this.#o.unwrap();this.#i.process(i.channels(),this.#r.channels(),t,n),this.#n.process(this.#r.getChannel(0),this.#r.getChannel(1),t,n)}parameterChanged(e){e===this.parameterCrusherRate?this.#i.setCrush(1-this.parameterCrusherRate.getValue()):e===this.parameterBitDepth?this.#i.setBitDepth(this.parameterBitDepth.getValue()):e===this.parameterBoost?this.#i.setBoost(this.parameterBoost.getValue()):e===this.parameterMix&&this.#i.setMix(this.parameterMix.getValue())}toString(){return`{${this.constructor.name} (${this.#e})`}};var Ik=[2,4,8],MS=8,ay=class r extends Me{static ID=0;#e=r.ID++;#t;#r;#i;#n;parameterDrive;parameterVolume;#o=g.None;#s=!1;#l;#a;#c;#u;constructor(e,t){super(e),this.#t=t,this.#r=new pe,this.#i=[new Float32Array(128*MS),new Float32Array(128*MS)],this.#n=this.own(new _e(e.broadcaster,t.address));let{drive:n,volume:i}=t.namedParameter;this.parameterDrive=this.own(this.bindParameter(n)),this.parameterVolume=this.own(this.bindParameter(i)),this.ownAll(e.registerProcessor(this),t.box.overSampling.catchupAndSubscribe(o=>{let s=Ik[o.getValue()];this.#l=new Ep(s),this.#c=Zt.linear(sampleRate*s),this.#c.set(Oe(this.parameterDrive.getValue()),this.#s),this.#u=Zt.linear(sampleRate*s),this.#u.set(Oe(this.parameterVolume.getValue()),this.#s),this.#a=s})),this.readAllParameters()}get incoming(){return this}get outgoing(){return this}reset(){console.debug("reset"),this.#s=!1,this.#n.clear(),this.#r.clear(),this.eventInput.clear()}get uuid(){return this.#t.uuid}get audioOutput(){return this.#r}setAudioSource(e){return this.#o=g.wrap(e),{terminate:()=>this.#o=g.None}}index(){return this.#t.indexField.getValue()}adapter(){return this.#t}processAudio(e,t,n){if(this.#o.isEmpty())return;this.#l.upsample(this.#o.unwrap().channels(),this.#i,t,n);let i=(n-t)*this.#a,[o,s]=this.#i;for(let a=0;a<i;a++){let c=this.#u.moveAndGet(),l=this.#c.moveAndGet();o[a]=Hy(o[a]*l)*c,s[a]=Hy(s[a]*l)*c}this.#l.downsample(this.#i,this.#r.channels(),t,n),this.#n.process(this.#r.getChannel(0),this.#r.getChannel(1),t,n),this.#s=!0}parameterChanged(e){e===this.parameterDrive?this.#c.set(Oe(this.parameterDrive.getValue()),this.#s):e===this.parameterVolume&&this.#u.set(Oe(this.parameterVolume.getValue()),this.#s)}toString(){return`{${this.constructor.name} (${this.#e})`}};var ly=class extends Me{#e;#t;#r=[];#i;#n;#o=g.None;constructor(e,t){super(e),this.#e=t,this.#t=new pe,this.#i=[];let{midiDevice:n,box:i,parameters:o}=t;this.#n=i.channel.getValue(),this.ownAll(i.parameters.pointerHub.catchupAndSubscribe({onAdded:(({box:s})=>this.#i.push(this.bindParameter(o.parameterAt(Be(s,ki).value.address)))),onRemoved:(({box:s})=>D.removeIf(this.#i,a=>a.address===Be(s,ki).value.address))}),i.channel.subscribe(s=>{n.ifSome(a=>this.#r.forEach(c=>e.sendMIDIData(a.id.getValue(),ot.noteOff(this.#n,c),a.delayInMs.getValue()))),this.#r.length=0,this.#n=s.getValue()}),e.registerProcessor(this)),this.readAllParameters()}get noteEventTarget(){return g.wrap(this)}introduceBlock({p0:e,p1:t,s0:n,flags:i,bpm:o}){if(this.#o.isEmpty())return;let{box:{channel:s,device:a}}=this.#e,c=a.targetVertex.match({none:()=>g.None,some:({box:d})=>g.wrap(Be(d,$i))}),l=c.mapOr(d=>d.delayInMs.getValue(),0);for(let d of this.#o.unwrap().processNotes(e,t,i))if(d.pitch>=0&&d.pitch<=127){let h=n/sampleRate,f=Y.pulsesToSeconds(d.position-e,o),v=(h+f)*1e3+l,m=s.getValue();if(me.isStart(d)){let y=Math.round(d.velocity*127);this.#r.push(d.pitch),c.ifSome(x=>this.context.sendMIDIData(x.id.getValue(),ot.noteOn(m,d.pitch,y),v))}else if(me.isStop(d)){let y=this.#r.indexOf(d.pitch);y>-1&&this.#r.splice(y,1),c.ifSome(x=>this.context.sendMIDIData(x.id.getValue(),ot.noteOff(m,d.pitch),v))}}}setNoteEventSource(e){return this.#o=g.wrap(e),W.create(()=>this.#o=g.None)}get incoming(){return this}get outgoing(){return this}reset(){}get uuid(){return this.#e.uuid}get audioOutput(){return this.#t}get adapter(){return this.#e}handleEvent(e){}processAudio(e,t,n){}parameterChanged(e,t=0){let{box:{channel:n,device:i}}=this.#e;if(i.isEmpty())return;let{id:o,delayInMs:s}=Be(i.targetVertex.unwrap().box,$i),a=t*1e3*s.getValue(),c=Be(e.adapter.field.box,ki).controller.getValue(),l=Math.round(e.getValue()*127),d=ot.control(n.getValue(),c,l);this.context.sendMIDIData(o.getValue(),d,a)}finishProcess(){}toString(){return"{MIDIOutputDeviceProcessor}"}};var cy=class extends $r{#e;#t;#r;#i=g.None;#n;constructor(e,t){super(e),this.#e=t,this.#t=this.own(new bi(e.broadcaster,t.address)),this.#r=new Int32Array(1024),this.#n=0;let{magnetPosition:n,magnetStrength:i,randomSeed:o,randomAmount:s,offset:a,mix:c}=t.namedParameter;this.ownAll(this.bindParameter(n),this.bindParameter(i),this.bindParameter(o),this.bindParameter(s),this.bindParameter(a),this.bindParameter(c),e.broadcaster.broadcastIntegers(t.address.append(0),this.#r,()=>{this.#r[this.#n]=0,this.#n=0}),e.registerProcessor(this)),this.readAllParameters()}setNoteEventSource(e){return B(this.#i.isEmpty(),"NoteEventSource already set"),this.#i=g.wrap(e),W.create(()=>this.#i=g.None)}get uuid(){return this.#e.uuid}get incoming(){return this}get outgoing(){return this}*processNotes(e,t,n){if(!this.#i.isEmpty())for(let i of this.#i.unwrap().processNotes(e,t,n))if(me.isStart(i)){this.#t.noteOn(i.pitch);let o=this.#e.computeVelocity(i.position,i.velocity);this.#r[this.#n++]=Math.round(i.velocity*127)|Math.round(o*127)<<8|65536,yield Ir.overwrite(i,{velocity:o})}else this.#t.noteOff(i.pitch),yield i}*iterateActiveNotesAt(e,t){if(!this.#i.isEmpty())for(let n of this.#i.unwrap().iterateActiveNotesAt(e,t))n.type==="note-event"&&(yield Ir.overwrite(n,{velocity:this.#e.computeVelocity(n.position,n.velocity)}))}reset(){this.eventInput.clear()}processEvents(e,t,n){}parameterChanged(e){}handleEvent(e,t){}index(){return this.#e.indexField.getValue()}adapter(){return this.#e}};var uy=class r extends Me{static ID=0;#e=r.ID++;#t;#r;#i;#n;#o;#s;#l;#a;#c;#u;#h;#d;#p=g.None;#f=!0;#m=0;constructor(e,t){super(e),this.#t=t,this.#r=new pe,this.#i=this.own(new _e(e.broadcaster,t.address)),this.#n=new gp,this.#o=new Fi(.003,sampleRate),this.#s=new Fi(.003,sampleRate);let{rate:n,depth:i,slope:o,symmetry:s,offset:a,channelOffset:c}=t.namedParameter;this.#l=this.bindParameter(n),this.#a=this.bindParameter(i),this.#c=this.bindParameter(o),this.#u=this.bindParameter(s),this.#h=this.bindParameter(a),this.#d=this.bindParameter(c),this.ownAll(e.broadcaster.broadcastFloat(t.address.append(0),()=>this.#m),e.registerProcessor(this)),this.readAllParameters()}get incoming(){return this}get outgoing(){return this}reset(){this.#m=0,this.#f=!0,this.#i.clear(),this.#r.clear(),this.eventInput.clear()}get uuid(){return this.#t.uuid}get audioOutput(){return this.#r}setAudioSource(e){return this.#p=g.wrap(e),{terminate:()=>this.#p=g.None}}index(){return this.#t.indexField.getValue()}adapter(){return this.#t}processAudio({p0:e,bpm:t,flags:n},i,o){if(this.#p.isEmpty())return;let s=this.#p.unwrap(),[a,c]=s.channels(),[l,d]=this.#r.channels();this.#f&&(this.#n.set(this.#a.getValue(),this.#c.getValue(),this.#u.getValue()),this.#f=!1);let{RateFractions:h}=Gi,f=Y.samplesToPulses(1,t,sampleRate),m=1/ir.toPPQN(h[this.#l.getValue()]),y=this.#h.getValue()/360,x=y+this.#d.getValue()/360;for(let S=i;S<o;S++){let C=(e+S*f)*m+y,V=(e+S*f)*m+x;l[S]=a[S]*this.#o.process(this.#n.compute(C-Math.floor(C))),d[S]=c[S]*this.#s.process(this.#n.compute(V-Math.floor(V)))}this.#i.process(l,d),st.every(n,5)&&(this.#m=(e+(o-i)*f)*m)}parameterChanged(e){(e===this.#a||e===this.#c||e===this.#u)&&(this.#f=!0)}toString(){return`{${this.constructor.name} (${this.#e})`}};var dy=class{#e;#t=[];#r;#i;#n;#o=0;#s=0;#l=0;#a=0;#c=0;#u=0;#h=.9999;#d=.75;#p=.625;#f=.5;#m=.7;#w=.5;#b=.005;#_=.5;#$=.7;#F=.3;#N=.6;constructor(e){this.#e=e,this.#n=e+1,this.#r=new Float32Array(this.#n),[.004771345,.003595309,.012734787,.009307483,.022579886,.149625349,.060481839,.1249958,.030509727,.141695508,.089244313,.106280031].forEach(i=>this.#A(i));let n=[.008937872,.099929438,.064278754,.067067639,.066866033,.006283391,.035818689,.011861161,.121870905,.041262054,.08981553,.070931756,.011256342,.004065724];this.#i=Int16Array.from(n,i=>Math.round(i*e))}#A(e){let t=Math.round(e*this.#e),n=2**Math.ceil(Math.log2(t));this.#t.push([new Float32Array(n),t-1,0,n-1])}#x(e,t){return this.#t[e][0][this.#t[e][1]]=t}#y(e){return this.#t[e][0][this.#t[e][2]]}#g(e,t){let n=this.#t[e];return n[0][n[2]+t&n[3]]}#E(e,t){let n=this.#t[e],i=t-~~t,o=~~t+n[2]-1,s=n[3],a=n[0][o++&s],c=n[0][o++&s],l=n[0][o++&s],d=n[0][o&s],h=(3*(c-l)-a+d)*.5,f=2*l+a-(5*c+d)*.5,v=(l-a)*.5;return((h*i+f)*i+v)*i+c}set preDelayMs(e){this.#u=Math.floor(e/1e3*this.#e)}set bandwidth(e){this.#h=e*.9999}set inputDiffusion1(e){this.#d=e}set inputDiffusion2(e){this.#p=e}set decay(e){this.#f=e}set decayDiffusion1(e){this.#m=e*.999999}set decayDiffusion2(e){this.#w=e*.999999}set damping(e){this.#b=e}set excursionRate(e){this.#_=e*2}set excursionDepth(e){this.#$=e*2}set wetGain(e){this.#F=e}set dryGain(e){this.#N=e}reset(){this.#r.fill(0),this.#t.forEach(e=>e[0].fill(0)),this.#o=0,this.#s=0,this.#l=0,this.#a=0,this.#c=0}process(e,t,n,i){let o=this.#u,s=this.#h,a=this.#d,c=this.#p,l=this.#f,d=this.#m,h=this.#w,f=1-this.#b,v=this.#_/this.#e,m=this.#$*this.#e/1e3,y=this.#F*.6,x=this.#N,S=e[0],C=e[1],V=t[0],K=t[1];for(let G=n;G<i;G++){let ye=S[G],ke=C[G];this.#r[this.#o]=(ye+ke)*.5,V[G]=ye*x,K[G]=ke*x;let re=this.#r[(this.#n+this.#o-o)%this.#n];this.#s+=s*(re-this.#s);let be=this.#x(0,this.#s-a*this.#y(0));be=this.#x(1,a*(be-this.#y(1))+this.#y(0)),be=this.#x(2,a*be+this.#y(1)-c*this.#y(2)),be=this.#x(3,c*(be-this.#y(3))+this.#y(2));let H=c*be+this.#y(3),xe=m*(1+Math.cos(this.#c*6.28)),Te=m*(1+Math.sin(this.#c*6.2847)),et=this.#x(4,H+l*this.#y(11)+d*this.#E(4,xe));this.#x(5,this.#E(4,xe)-d*et),this.#l+=f*(this.#y(5)-this.#l),et=this.#x(6,l*this.#l-h*this.#y(6)),this.#x(7,this.#y(6)+h*et),et=this.#x(8,H+l*this.#y(7)+d*this.#E(8,Te)),this.#x(9,this.#E(8,Te)-d*et),this.#a+=f*(this.#y(9)-this.#a),et=this.#x(10,l*this.#a-h*this.#y(10)),this.#x(11,this.#y(10)+h*et);let er=this.#g(9,this.#i[0])+this.#g(9,this.#i[1])-this.#g(10,this.#i[2])+this.#g(11,this.#i[3])-this.#g(5,this.#i[4])-this.#g(6,this.#i[5])-this.#g(7,this.#i[6]),Nt=this.#g(5,this.#i[7])+this.#g(5,this.#i[8])-this.#g(6,this.#i[9])+this.#g(7,this.#i[10])-this.#g(9,this.#i[11])-this.#g(10,this.#i[12])-this.#g(11,this.#i[13]);V[G]+=er*y,K[G]+=Nt*y,this.#c+=v,this.#o=(this.#o+1)%this.#n;for(let Pe=0;Pe<this.#t.length;Pe++){let Bt=this.#t[Pe];Bt[1]=Bt[1]+1&Bt[3],Bt[2]=Bt[2]+1&Bt[3]}}}};var hy=class r extends Me{static ID=0;#e=r.ID++;#t;parameterPreDelay;parameterBandwidth;parameterInputDiffusion1;parameterInputDiffusion2;parameterDecay;parameterDecayDiffusion1;parameterDecayDiffusion2;parameterDamping;parameterExcursionRate;parameterExcursionDepth;parameterWet;parameterDry;#r;#i;#n;#o=g.None;constructor(e,t){super(e),this.#t=t,this.#i=new pe,this.#n=this.own(new _e(e.broadcaster,t.address)),this.#r=new dy(sampleRate);let{preDelay:n,bandwidth:i,inputDiffusion1:o,inputDiffusion2:s,decay:a,decayDiffusion1:c,decayDiffusion2:l,damping:d,excursionRate:h,excursionDepth:f,wet:v,dry:m}=t.namedParameter;this.parameterPreDelay=this.own(this.bindParameter(n)),this.parameterBandwidth=this.own(this.bindParameter(i)),this.parameterInputDiffusion1=this.own(this.bindParameter(o)),this.parameterInputDiffusion2=this.own(this.bindParameter(s)),this.parameterDecay=this.own(this.bindParameter(a)),this.parameterDecayDiffusion1=this.own(this.bindParameter(c)),this.parameterDecayDiffusion2=this.own(this.bindParameter(l)),this.parameterDamping=this.own(this.bindParameter(d)),this.parameterExcursionRate=this.own(this.bindParameter(h)),this.parameterExcursionDepth=this.own(this.bindParameter(f)),this.parameterWet=this.own(this.bindParameter(v)),this.parameterDry=this.own(this.bindParameter(m)),this.own(e.registerProcessor(this)),this.readAllParameters()}get incoming(){return this}get outgoing(){return this}reset(){this.#r.reset(),this.#i.clear(),this.#n.clear(),this.eventInput.clear()}get uuid(){return this.#t.uuid}get audioOutput(){return this.#i}setAudioSource(e){return this.#o=g.wrap(e),{terminate:()=>this.#o=g.None}}index(){return this.#t.indexField.getValue()}adapter(){return this.#t}handleEvent(e){}processAudio(e,t,n){if(this.#o.isEmpty())return;let i=this.#o.unwrap();this.#r.process(i.channels(),this.#i.channels(),t,n),this.#n.process(this.#i.getChannel(0),this.#i.getChannel(1),t,n)}parameterChanged(e){e===this.parameterPreDelay?this.#r.preDelayMs=this.parameterPreDelay.getValue():e===this.parameterBandwidth?this.#r.bandwidth=this.parameterBandwidth.getValue():e===this.parameterInputDiffusion1?this.#r.inputDiffusion1=this.parameterInputDiffusion1.getValue():e===this.parameterInputDiffusion2?this.#r.inputDiffusion2=this.parameterInputDiffusion2.getValue():e===this.parameterDecay?this.#r.decay=this.parameterDecay.getValue():e===this.parameterDecayDiffusion1?this.#r.decayDiffusion1=this.parameterDecayDiffusion1.getValue():e===this.parameterDecayDiffusion2?this.#r.decayDiffusion2=this.parameterDecayDiffusion2.getValue():e===this.parameterDamping?this.#r.damping=this.parameterDamping.getValue():e===this.parameterExcursionRate?this.#r.excursionRate=this.parameterExcursionRate.getValue():e===this.parameterExcursionDepth?this.#r.excursionDepth=this.parameterExcursionDepth.getValue():e===this.parameterWet?this.#r.wetGain=Oe(this.parameterWet.getValue()):e===this.parameterDry&&(this.#r.dryGain=Oe(this.parameterDry.getValue()))}toString(){return`{${this.constructor.name} (${this.#e})}`}};var f_;(e=>e.create=(t,n)=>n.accept({visitAudioBusBox:i=>new uu(t,t.boxAdapters.adapterFor(i,lr)),visitVaporisateurDeviceBox:i=>new kv(t,t.boxAdapters.adapterFor(i,xc)),visitNanoDeviceBox:i=>new zv(t,t.boxAdapters.adapterFor(i,Ac)),visitTapeDeviceBox:i=>new Iv(t,t.boxAdapters.adapterFor(i,yc)),visitPlayfieldDeviceBox:i=>new Gv(t,t.boxAdapters.adapterFor(i,as)),visitSoundfontDeviceBox:i=>new Xv(t,t.boxAdapters.adapterFor(i,Mc)),visitMIDIOutputDeviceBox:i=>new ly(t,t.boxAdapters.adapterFor(i,Uc))}))(f_||={});var m_;(e=>e.create=(t,n)=>q(n.accept({visitUnknownMidiEffectDeviceBox:i=>new Jv(t,t.boxAdapters.adapterFor(i,kc)),visitArpeggioDeviceBox:i=>new Mv(t,t.boxAdapters.adapterFor(i,Ui)),visitPitchDeviceBox:i=>new Tv(t,t.boxAdapters.adapterFor(i,wc)),visitVelocityDeviceBox:i=>new cy(t,t.boxAdapters.adapterFor(i,jc)),visitZeitgeistDeviceBox:i=>new Hv(t,t.boxAdapters.adapterFor(i,Bc))}),`Could not create midi-effect for'${n.name}'`))(m_||={});var op;(e=>e.create=(t,n)=>q(n.accept({visitUnknownAudioEffectDeviceBox:i=>new rp(t,t.boxAdapters.adapterFor(i,$c)),visitStereoToolDeviceBox:i=>new qv(t,t.boxAdapters.adapterFor(i,Fc)),visitCompressorDeviceBox:i=>new oy(t,t.boxAdapters.adapterFor(i,Tc)),visitDelayDeviceBox:i=>new Ev(t,t.boxAdapters.adapterFor(i,ni)),visitDattorroReverbDeviceBox:i=>new hy(t,t.boxAdapters.adapterFor(i,Lc)),visitTidalDeviceBox:i=>new uy(t,t.boxAdapters.adapterFor(i,Gi)),visitCrusherDeviceBox:i=>new sy(t,t.boxAdapters.adapterFor(i,Cc)),visitFoldDeviceBox:i=>new ay(t,t.boxAdapters.adapterFor(i,Oc)),visitReverbDeviceBox:i=>new Vv(t,t.boxAdapters.adapterFor(i,Yl)),visitRevampDeviceBox:i=>new Rv(t,t.boxAdapters.adapterFor(i,Xl)),visitModularDeviceBox:i=>new rp(t,t.boxAdapters.adapterFor(i,ts))}),`Could not create audio-effect for'${n.name}'`))(op||={});var py=class extends Me{#e;#t;#r;#i;#n;#o;#s=g.None;#l=!0;#a=!1;constructor(e,t){super(e),this.#e=t,this.#t=new pe,this.#r=Zt.linear(sampleRate),this.#i=Zt.linear(sampleRate),this.#n=this.own(this.bindParameter(t.sendGain)),this.#o=this.own(this.bindParameter(t.sendPan)),this.own(e.registerProcessor(this)),this.readAllParameters()}reset(){this.#t.clear()}get adapter(){return this.#e}setAudioSource(e){return this.#s=g.wrap(e),{terminate:()=>this.#s=g.None}}get audioOutput(){return this.#t}processAudio(e,t,n){if(this.#s.isEmpty())return;if(this.#l){let l=Oe(this.#n.getValue()),d=this.#o.getValue();this.#r.set((1-Math.max(0,d))*l,this.#a),this.#i.set((1+Math.min(0,d))*l,this.#a),this.#l=!1}let i=this.#t.getChannel(0),o=this.#t.getChannel(1),s=this.#s.unwrap(),a=s.getChannel(0),c=s.getChannel(1);if(this.#r.isInterpolating()||this.#i.isInterpolating())for(let l=t;l<n;l++)i[l]=a[l]*this.#r.moveAndGet(),o[l]=c[l]*this.#i.moveAndGet();else{let l=this.#r.get(),d=this.#i.get();for(let h=t;h<n;h++)i[h]=a[h]*l,o[h]=c[h]*d}this.#a=!0}parameterChanged(e){this.#l=!0}};var fy=class extends Me{#e;#t;#r;#i;#n;#o;#s;#l;#a=Zt.linear(sampleRate);#c=Zt.linear(sampleRate);#u=Zt.linear(sampleRate);#h=g.None;#d=!0;#p=!1;constructor(e,t){super(e),this.#e=t,this.#t=new pe,this.#r=[new Float32Array(128),new Float32Array(128)],this.#i=this.own(new _e(e.broadcaster,this.#e.address)),this.#n=this.own(this.bindParameter(this.#e.namedParameter.volume)),this.#o=this.own(this.bindParameter(this.#e.namedParameter.panning)),this.#s=this.own(this.bindParameter(this.#e.namedParameter.mute)),this.#l=this.own(this.bindParameter(this.#e.namedParameter.solo)),this.ownAll(e.registerProcessor(this),e.mixer.attachChannelStrip(this)),this.readAllParameters()}reset(){this.#i.clear(),this.#t.clear(),this.#r[0].fill(0),this.#r[1].fill(0),this.#p=!1}get isMute(){return this.#s.getValue()}get isSolo(){return this.#l.getValue()}get adapter(){return this.#e}get audioOutput(){return this.#t}handleEvent(e){}processAudio(e,t,n){if(this.#h.isEmpty())return;if(this.#d){let h=this.context.mixer;h.updateSolo();let f=this.isSolo||h.isVirtualSolo(this),v=this.isMute||h.hasChannelSolo()&&!f&&!this.#e.isOutput,m=Oe(this.#n.getValue()),y=this.#o.getValue();this.#a.set((1-Math.max(0,y))*m,this.#p),this.#c.set((1+Math.min(0,y))*m,this.#p),this.#u.set(v?0:1,this.#p),this.#d=!1}let i=this.#h.unwrap(),[o,s]=i.channels(),[a,c]=this.#t.channels(),[l,d]=this.#r;if(this.#a.isInterpolating()||this.#c.isInterpolating()||this.#u.isInterpolating())for(let h=t;h<n;h++){let f=this.#u.moveAndGet(),v=o[h]*this.#a.moveAndGet(),m=s[h]*this.#c.moveAndGet();a[h]=v*f,c[h]=m*f,l[h]=v,d[h]=m}else{let h=this.#a.get(),f=this.#c.get(),v=this.#u.get();for(let m=t;m<n;m++){let y=o[m]*h,x=s[m]*f;l[m]=y,d[m]=x,a[m]=y*v,c[m]=x*v}}this.#i.process(l,d,t,n),this.#p=!0}finishProcess(){this.#t.assertSanity()}parameterChanged(e){e===this.#n?this.requestGainUpdate():e===this.#o?this.requestGainUpdate():e===this.#s?this.requestGainUpdate():e===this.#l&&this.context.mixer.onChannelStripSoloChanged(this)}requestGainUpdate(){this.#d=!0}requestSoloUpdate(){this.#d=!0}setAudioSource(e){return this.#h=g.wrap(e),{terminate:()=>this.#h=g.None}}toString(){return`{${this.constructor.name}}`}};var my=class{#e=new j;#t;#r;#i;#n;#o;#s;#l=[];#a=!1;constructor(e,t){this.#t=e,this.#r=t,this.#i=E.newSet(n=>n.adapter.uuid),this.#n=this.#e.own(new fy(this.#t.context,this.#t.adapter)),this.#o=E.newSet(({device:n})=>n.uuid),this.#s=this.#e.own(new j),this.#e.ownAll(this.#t.adapter.audioEffects.catchupAndSubscribe({onAdd:n=>{this.invalidateWiring();let i=op.create(this.#t.context,n.box),o=this.#o.add({device:i,subscription:i.adapter().enabledField.subscribe(()=>this.invalidateWiring())});B(o,"Could not add.")},onRemove:n=>{this.invalidateWiring();let{device:i,subscription:o}=this.#o.removeByKey(n.uuid);o.terminate(),i.terminate()},onReorder:n=>this.invalidateWiring()}),this.#t.adapter.auxSends.catchupAndSubscribe({onAdd:n=>{this.invalidateWiring();let i=this.#i.add(new py(this.#t.context,n));B(i,"Could not add.")},onRemove:({uuid:n})=>{this.invalidateWiring(),this.#i.removeByKey(n).terminate()},onReorder:n=>{}}),this.#t.adapter.output.catchupAndSubscribe(n=>this.invalidateWiring()),this.#t.context.subscribeProcessPhase(n=>{n===0&&this.#a&&(this.#c(),this.#a=!1)}))}get channelStrip(){return this.#n}invalidateWiring(){this.#s.terminate(),this.#a=!0}terminate(){this.#e.terminate(),this.#o.forEach(({device:e})=>e.terminate()),this.#o.clear(),this.#l=[]}toString(){return`{${this.constructor.name}}`}#c(){let e=this.#t.adapter.isOutput,t=this.#t.context,n=this.#t.input(),i=this.#t.adapter.output.adapter.map(s=>t.getAudioUnit(s.deviceHost().uuid).inputAsAudioBus());if(n.isEmpty()||i.isEmpty()&&!e)return;let o=n.unwrap();if(this.#r.includeAudioEffects){D.replace(this.#l,this.#t.adapter.audioEffects.adapters().map(({uuid:s})=>this.#o.get(s).device));for(let s of this.#l)s.adapter().enabledField.getValue()&&(this.#s.own(s.setAudioSource(o.audioOutput)),this.#s.own(t.registerEdge(o.outgoing,s.incoming)),o=s)}if(this.#r.includeSends&&this.#i.forEach(s=>{let a=t.getAudioUnit(s.adapter.targetBus.deviceHost().uuid);this.#s.own(s.setAudioSource(o.audioOutput)),this.#s.own(a.inputAsAudioBus().addAudioSource(s.audioOutput)),this.#s.own(t.registerEdge(o.outgoing,s)),this.#s.own(t.registerEdge(s,a.inputAsAudioBus()))}),this.#s.own(this.#n.setAudioSource(o.audioOutput)),this.#s.own(t.registerEdge(o.outgoing,this.#n)),i.nonEmpty()&&!e){let s=i.unwrap();this.#s.own(s.addAudioSource(this.#n.audioOutput)),this.#s.own(t.registerEdge(this.#n,s))}}};var gy=class{#e=new j;#t;#r;#i;#n;#o;constructor(e,t){this.#t=e,this.#r=t,this.#i=Ja.create(268431651),this.#n=new Set,this.#o=new rl,this.#e.ownAll(this.#t.subscribeProcessPhase(n=>{if(n===1)for(let i of this.#n)i.gate||this.#n.delete(i)}))}get uuid(){return this.#r.uuid}terminate(){this.#e.terminate()}pushRawNoteOn(e,t){this.#n.add({pitch:e,velocity:t,gate:!0,running:g.None})}pushRawNoteOff(e){for(let t of this.#n)if(t.running.isEmpty())this.#n.delete(t);else if(t.pitch===e){t.gate=!1;return}}*processNotes(e,t,n){let i=st.every(n,5);if(this.#o.nonEmpty()&&(!i||st.every(n,2)?yield*this.#c(e):yield*this.#u(e,t)),this.#n.size>0)for(let o of this.#n){if(o.running.isEmpty()){let{pitch:s,velocity:a}=o,c=Number.POSITIVE_INFINITY,l=me.start(e,c,s,a);o.running=g.wrap(l),yield l}o.gate||(this.#n.delete(o),yield me.stop(o.running.unwrap("raw note never started"),e))}if(i){let o=this.#r.tracks.collection.adapters().filter(s=>s.type===ee.Notes&&s.enabled.getValue());for(let s of o)for(let{optClip:a,sectionFrom:c,sectionTo:l}of this.#t.clipSequencing.iterate(s.uuid,e,t))a.isEmpty()?yield*this.#l(s,c,l):yield*this.#s(a.unwrap(),c,l);yield*this.#u(e,t)}}*iterateActiveNotesAt(e,t){if(this.#n.size>0)for(let{pitch:n,velocity:i}of this.#n)yield{type:"note-event",position:e,duration:Number.POSITIVE_INFINITY,pitch:n,velocity:i,cent:0};t||(yield*this.#o.overlapping(e,nr.Comparator))}reset(){this.#o.clear(),this.#n.clear()}toString(){return`{${this.constructor.name}}`}*#s(e,t,n){if(e.optCollection.isEmpty())return;let i=e.optCollection.unwrap(),o=e.duration,s=$n(t,o),a=s+o;n>a?(yield*this.#a(i,t,a,s),yield*this.#a(i,a,n,a)):yield*this.#a(i,t,n,s)}*#l(e,t,n){for(let i of e.regions.collection.iterateRange(t,n)){if(this.#t.ignoresRegion(i.address.uuid)||i.mute||!Ke(i,Lo))continue;let o=i.optCollection;if(o.isEmpty())continue;let s=o.unwrap();for(let{resultStart:a,resultEnd:c,rawStart:l}of vr.locateLoops(i,t,n))yield*this.#a(s,a,c,l)}}*#a(e,t,n,i){let o=t-i,s=n-i;for(let a of e.events.iterateRange(o-e.maxDuration,s)){if(!nr.isOfType(a))continue;let{position:c,duration:l,chance:d,playCount:h,playCurve:f}=a;if(!(d<100&&this.#i.nextDouble(0,100)>d)){if(h>1){let v=nr.inverseCurveFunc((o-c)/l,f),m=nr.inverseCurveFunc((s-c)/l,f),y=Math.floor(v*h),x=y/h;for(;x<m;){if(x>=v){let S=nr.curveFunc(x,f)*l;if(S>=l)break;let C=nr.curveFunc(x+1/h,f)*l,V=me.startWith(a,c+S+i,C-S);this.#o.addAndRetain({...V}),yield V}x=++y/h}}else if(o<=c&&c<s){let v=me.startWith(a,c+i);this.#o.addAndRetain({...v}),yield v}}}}*#c(e){for(let t of this.#o.releaseAll())yield me.stop(t,e)}*#u(e,t){for(let n of this.#o.releaseLinearCompleted(t)){let i=X(n.position+n.duration,e,t);yield me.stop(n,i)}}};var vy=class{#e=new j;#t;#r;#i;#n;#o=!1;constructor(e){this.#t=e,this.#r=this.#e.own(new gy(this.#t.context,this.#t.adapter)),this.#i=E.newSet(({device:t})=>t.uuid),this.#n=this.#e.own(new j),this.#e.ownAll(this.#t.adapter.midiEffects.catchupAndSubscribe({onAdd:t=>{this.invalidateWiring();let n=m_.create(this.#t.context,t.box),i=this.#i.add({device:n,subscription:n.adapter().enabledField.subscribe(()=>this.invalidateWiring())});B(i,"Could not add.")},onRemove:t=>{this.invalidateWiring();let{device:n,subscription:i}=this.#i.removeByKey(t.uuid);i.terminate(),n.terminate()},onReorder:t=>this.invalidateWiring()}),this.#t.context.subscribeProcessPhase(t=>{t===0&&this.#o&&(this.#s(),this.#o=!1)}))}get noteSequencer(){return this.#r}invalidateWiring(){this.#n.terminate(),this.#o=!0}terminate(){this.#e.terminate()}toString(){return`{${this.constructor.name}}`}#s(){let e=this.#t.input().flatMap(i=>i.noteEventTarget);if(e.isEmpty())return;let t=e.unwrap(),n=this.#r;this.#t.adapter.midiEffects.adapters().map(i=>this.#i.get(i.uuid).device).forEach(i=>{i.adapter().enabledField.getValue()&&(this.#n.ownAll(i.setNoteEventSource(n),this.#t.context.registerEdge(i,t.incoming)),n=i)}),this.#n.own(t.setNoteEventSource(n))}};var yy=class r{static ID=0;#e=r.ID++;#t=new j;#r;#i;#n;#o;#s=g.None;constructor(e,t,n){this.#r=e,this.#i=t,this.#n=this.#t.own(new vy(this)),this.#o=this.#t.own(new my(this,n)),this.#t.ownAll(this.#i.input.catchupAndSubscribe(i=>{this.#n.invalidateWiring(),this.#o.invalidateWiring(),this.#s.ifSome(o=>o.terminate()),this.#s=i.getValue().flatMap(o=>g.wrap(f_.create(e,o.box.box)))}))}input(){return this.#s}inputAsAudioBus(){return Be(this.#s.unwrap("No input available"),uu)}audioOutput(){return this.#o.channelStrip.audioOutput}get midiDeviceChain(){return this.#n}get audioDeviceChain(){return this.#o}get context(){return this.#r}get adapter(){return this.#i}terminate(){console.debug(`terminate ${this}`),this.#t.terminate(),this.#s.ifSome(e=>e.terminate()),this.#s=g.None}toString(){return`{${this.constructor.name}(${this.#e})}`}};var xy=class{#e;#t;#r;#i=!1;constructor(){this.#e=E.newSet(e=>e.adapter.uuid),this.#t=new Set,this.#r=new Set}attachChannelStrip(e){return this.#e.add(e),W.many(e.adapter.input.subscribe(()=>this.#n()),e.adapter.output.subscribe(()=>this.#n()),{terminate:()=>{this.#t.delete(e),this.#e.removeByValue(e),this.#n()}})}onChannelStripSoloChanged(e){e.isSolo?this.#t.add(e):this.#t.delete(e),this.#n()}hasChannelSolo(){return this.#t.size>0}isVirtualSolo(e){return this.#r.has(e)}#n(){this.#i||(this.#i=!0,this.#e.forEach(e=>e.requestSoloUpdate()))}updateSolo(){if(!this.#i)return;this.#r.clear();let e=new Set,t=n=>{e.has(n)||(e.add(n),n.adapter.input.getValue().ifSome(i=>{i.type==="bus"&&i.box.input.pointerHub.filter(u.AudioOutput).map(o=>q(o.box.accept({visitAudioUnitBox:({address:{uuid:s}})=>this.#e.get(s),visitAuxSendBox:({audioUnit:{targetVertex:s}})=>this.#e.get(s.unwrap().address.uuid)}),"Could not resolve channel-strip")).forEach(o=>{o.isSolo||this.#r.add(o),t(o)})}))};this.#e.forEach(n=>{n.isSolo&&t(n)}),this.#i=!1}};var As;(function(r){let e=typeof self<"u"&&"location"in self&&typeof self.location!==void 0,t=typeof self<"u"&&"navigator"in self&&typeof self.navigator!==void 0;r.isLocalHost=()=>e&&location.host.includes("localhost"),r.isMacOS=()=>t&&navigator.userAgent.includes("Mac OS X"),r.isWindows=()=>t&&navigator.userAgent.includes("Windows"),r.isChrome=()=>t&&/chrome|chromium|crios/.test(navigator.userAgent.toLowerCase())&&!/edg|opera|opr/.test(navigator.userAgent.toLowerCase()),r.isFirefox=()=>t&&navigator.userAgent.toLowerCase().includes("firefox"),r.isWeb=()=>!r.isTauriApp(),r.isVitest=typeof process<"u"&&process.env?.VITEST==="true",r.isTauriApp=()=>"__TAURI__"in window,r.userAgent=t?navigator.userAgent.replace(/^Mozilla\/[\d.]+\s*/,"").replace(/\bAppleWebKit\/[\d.]+\s*/g,"").replace(/\(KHTML, like Gecko\)\s*/g,"").replace(/\bSafari\/[\d.]+\s*/g,"").replace(/\s+/g," ").trim():"N/A",r.id=()=>{if(!e)return"";let n="__id__",i=localStorage.getItem(n);if(R(i))return i;let o=E.toString(E.generate());return localStorage.setItem(n,o),o}})(As||(As={}));var TS;(function(r){r.encode=async(e,t="gzip")=>{let n=new CompressionStream(t),i=n.writable.getWriter();return i.write(new Uint8Array(e)),i.close(),new Response(n.readable).arrayBuffer()},r.decode=async(e,t="gzip")=>{let n=new DecompressionStream(t),i=n.writable.getWriter();return i.write(new Uint8Array(e)),i.close(),new Response(n.readable).arrayBuffer()}})(TS||(TS={}));var CS;(function(r){r.exportMethod=(i,o)=>n(i,{value:o}),r.exportBoolean=(i,o=!1)=>{let s=new rr(o);return r.exportAccessor(i,()=>s.getValue(),a=>{let c=!!a;console.debug(`set to ${c}`),s.setValue(c)}),s},r.exportAccessor=(i,o,s=P_)=>n(i,{get:()=>{try{return console.debug(o()),0}catch(a){return console.error(a),1}},set:a=>{try{return s(a),o()}catch(c){return console.error(c),1}},enumerable:!1,configurable:!1});let e=(()=>{try{return self}catch{return{}}})(),t=e.opendaw??={},n=(i,o)=>{let s=i.split("."),a=s.splice(-1)[0],c=t;for(let l of s)c=c[l]??={};Object.defineProperty(c,a,o),console.debug(`Console command 'opendaw.${i}' exported`)}})(CS||(CS={}));var RS;(function(r){r.resolveString=e=>{if(!Ka(e)){if(typeof e=="string")return e;if(Array.isArray(e))return e.join(",");if(typeof e=="object"){if(typeof e.exact=="string")return e.exact;if(Array.isArray(e.exact))return e.exact.join(",");if(typeof e.ideal=="string")return e.ideal;if(Array.isArray(e.ideal))return e.ideal.join(",")}}}})(RS||(RS={}));var OS;(function(r){r.truncateText=(e,t,n)=>{if(t.length===0)return{text:"",width:0};let i=e.measureText(t).width;if(i<=n)return{text:t,width:i};let o=e.measureText("\u2026").width,s=0,a=t.length|0;for(;s<a;){let l=a+s>>>1;i=e.measureText(t.substring(0,l+1)).width+o,i<=n?s=l+1:a=l}if(s===0)return{text:"",width:0};let c=t.substring(0,s);return{text:c+"\u2026",width:e.measureText(c).width+o}},r.strokeRoundedRect=(e,t,n,i,o,s)=>{e.beginPath(),e.moveTo(t+s,n),e.lineTo(t+i-s,n),e.arcTo(t+i,n,t+i,n+s,s),e.lineTo(t+i,n+o-s),e.arcTo(t+i,n+o,t+i-s,n+o,s),e.lineTo(t+s,n+o),e.arcTo(t,n+o,t,n+o-s,s),e.lineTo(t,n+s),e.arcTo(t,n,t+s,n,s),e.closePath(),e.stroke()}})(OS||(OS={}));var VS;(function(r){r.calc=(t,n,i)=>{let o=/([0-9]*\.?[0-9]+)([a-zA-Z%]*)/g,s=t;return s.split(/\+|(?<!\d)-/).flatMap(a=>Array.from(a.matchAll(o))).forEach(([a,c,l])=>{let d=parseFloat(c);if(isNaN(d))return N(`${a} does not contain a number`);if(l==="em")s=s.replaceAll(a,`${d*i}`);else if(l==="%")s=s.replaceAll(a,`${d/100*n}`);else if(l==="px")s=s.replaceAll(a,`${d}`);else return N(`Unknown unit '${l}'`)}),Function(`return ${s}`)()};let e=new Map;r.registerCustomCursor=(t,n)=>e.set(t,n),r.setCursor=(t,n=document)=>{n.documentElement.style.cursor=typeof t=="number"?e.get(t)??"auto":t}})(VS||(VS={}));var ap;(function(r){let e=new Set,t=new Set,n=new Array,i=-1,o=null;r.add=a=>(t.add(a),{terminate:()=>t.delete(a)}),r.once=a=>{e.add(a)},r.start=a=>{o!==a&&(o?.cancelAnimationFrame(i),o=a,i=a.requestAnimationFrame(s))},r.stop=()=>{o?.cancelAnimationFrame(i),o=null,i=-1},r.terminate=()=>{r.stop(),n.length=0,t.clear(),e.clear()};let s=()=>{(t.size>0||e.size>0)&&(t.forEach(a=>n.push(a)),e.forEach(a=>n.push(a)),e.clear(),n.forEach(a=>a()),n.length=0),i=o?.requestAnimationFrame(s)??-1}})(ap||(ap={}));var kr=class{static subscribe(e,t,n,i){return e.addEventListener(t,n,i),{terminate:()=>e.removeEventListener(t,n,i)}}static subscribeAny(e,t,n,i){return e.addEventListener(t,n,i),{terminate:()=>e.removeEventListener(t,n,i)}}static DOUBLE_DOWN_THRESHOLD=200;static subscribeDblDwn=(e,t)=>{let n=0;return this.subscribe(e,"pointerdown",i=>{let o=performance.now();o-n<this.DOUBLE_DOWN_THRESHOLD&&(i.preventDefault(),i.stopImmediatePropagation(),t(i)),n=o},{capture:!0})};static PreventDefault=e=>e.preventDefault();static isTextInput=e=>e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&R(e.getAttribute("contenteditable"))};var _s;(function(r){r.isControlKey=({ctrlKey:e,metaKey:t})=>As.isMacOS()?t:e,r.isCopyKey=({altKey:e})=>e,r.GlobalShortcut=Object.freeze({isDelete:e=>!kr.isTextInput(e.target)&&(e.code==="Delete"||e.code==="Backspace"),isSelectAll:e=>r.isControlKey(e)&&!e.shiftKey&&e.code==="KeyA",isDeselectAll:e=>r.isControlKey(e)&&e.shiftKey&&e.code==="KeyA"})})(_s||(_s={}));var zS;(function(r){r.usePointerLock=!1,r.attach=(e,t,n)=>{let i=new j;return W.many(i,kr.subscribe(e,"pointerdown",o=>{if(n?.multiTouch!==!0&&!o.isPrimary||o.buttons!==1||As.isMacOS()&&o.ctrlKey)return;let s=t(o);if(s.isEmpty())return;let a=s.unwrap(),c=o.pointerId;o.stopPropagation(),o.stopImmediatePropagation(),e.setPointerCapture(c);let l=n?.pointerLock!==!1&&r.usePointerLock,d=n?.pointerLockThreshold??16,h=e instanceof Element?e:null,f=!1,v=(S,C)=>{if(!l||h===null||f)return;let V=S<d,K=S>window.innerWidth-d,G=C<d,ye=C>window.innerHeight-d;(V||K||G||ye)&&h.requestPointerLock().then(()=>f=!0,mr)},m={clientX:o.clientX,clientY:o.clientY,altKey:o.altKey,shiftKey:o.shiftKey,ctrlKey:_s.isControlKey(o)};n?.immediate===!0&&a.update(m),n?.permanentUpdates===!0?(i.own(ap.add(()=>a.update(m))),i.own(kr.subscribe(e,"pointermove",S=>{S.pointerId===c&&(h!==null&&document.pointerLockElement===h?(m.clientX+=S.movementX,m.clientY+=S.movementY):(m.clientX=S.clientX,m.clientY=S.clientY,v(S.clientX,S.clientY)),m.altKey=S.altKey,m.shiftKey=S.shiftKey,m.ctrlKey=_s.isControlKey(S))}))):i.own(kr.subscribe(e,"pointermove",S=>{S.pointerId===c&&(h!==null&&document.pointerLockElement===h?(m.clientX+=S.movementX,m.clientY+=S.movementY):(m.clientX=S.clientX,m.clientY=S.clientY,v(S.clientX,S.clientY)),m.altKey=S.altKey,m.shiftKey=S.shiftKey,m.ctrlKey=_s.isControlKey(S),a.update(m))}));let y=()=>{f&&h!==null&&document.pointerLockElement===h&&document.exitPointerLock(),a.cancel?.call(a),a.finally?.call(a),i.terminate()},x=__(e,"ownerDocument","defaultView")??self;i.ownAll(kr.subscribe(e,"pointerup",S=>{S.pointerId===c&&(f&&h!==null&&document.pointerLockElement===h&&document.exitPointerLock(),a.approve?.call(a),a.finally?.call(a),i.terminate())},{capture:!0}),kr.subscribe(e,"pointercancel",S=>{console.debug(S.type),S.pointerId===c&&(e.releasePointerCapture(c),y())},{capture:!0}),kr.subscribe(x,"beforeunload",S=>{e.releasePointerCapture(c),y()},{capture:!0}),kr.subscribe(x,"keydown",S=>{m.altKey=S.altKey,m.shiftKey=S.shiftKey,m.ctrlKey=_s.isControlKey(S),S.key==="Escape"?y():a.update(m)}),kr.subscribe(x,"keyup",S=>{m.altKey=S.altKey,m.shiftKey=S.shiftKey,m.ctrlKey=_s.isControlKey(S),a.update(m)})),R(a.abortSignal)&&i.own(kr.subscribe(a.abortSignal,"abort",()=>{e.releasePointerCapture(c),y()}))}))}})(zS||(zS={}));var US;(function(r){r.save=async(e,t)=>{if(R(window.showSaveFilePicker)){let n=await window.showSaveFilePicker(t),i=await n.createWritable();return await i.truncate(0),await i.write(e),await i.close(),n.name??"unknown"}else{let n=new Blob([e]),i=URL.createObjectURL(n),o=document.createElement("a");return o.href=i,o.download=t?.suggestedName??"unknown",o.click(),URL.revokeObjectURL(i),t?.suggestedName??"Unknown"}},r.open=async e=>{if(R(window.showOpenFilePicker)){let{status:t,value:n,error:i}=await wo.tryCatch(window.showOpenFilePicker(e));return t==="rejected"?Promise.reject(i):Promise.all(n.map(o=>o.getFile()))}else return new Promise((t,n)=>{R(e)&&console.warn("FileApi.showOpenFilePicker is emulated in this browser. OpenFilePickerOptions are ignored.");let i=document.createElement("input");i.type="file",i.multiple=e?.multiple??!1,i.style.display="none",i.addEventListener("cancel",async()=>{i.remove(),n(new DOMException("cancel","AbortError"))}),i.addEventListener("change",async o=>{let a=o.target.files;R(a)?t(D.create(c=>q(a.item(c),`No file at index ${c}`),a.length)):n(new DOMException("cancel","AbortError")),i.remove()}),document.body.appendChild(i),i.click()})}})(US||(US={}));var jS;(function(r){r.parse=e=>{let t=document.createElement("div");if(t.innerHTML=e,t.childElementCount!==1)return N(`Source html has more than one root elements: '${e}'`);let n=t.firstChild;return n instanceof HTMLElement||n instanceof SVGSVGElement?n:N(`Cannot parse to HTMLOrSVGElement from '${e}'`)},r.empty=e=>{for(;e.firstChild!==null;)e.firstChild.remove()},r.query=(e,t=document)=>q(t.querySelector(e)),r.queryAll=(e,t=document)=>Array.from(t.querySelectorAll(e)),r.sanitize=e=>{e.querySelectorAll("script").forEach(t=>t.remove()),e.querySelectorAll("*").forEach(t=>{[...t.attributes].forEach(n=>{n.name.toLowerCase().startsWith("on")&&t.removeAttribute(n.name)})})},r.nextID=(()=>{let e=0;return()=>(++e).toString(16).padStart(4,"0")})(),r.adoptStyleSheet=(e,t)=>{B(e.includes("component"),`No 'component' found in: ${e}`);let n=`${t??"C"}${r.nextID()}`,i=new CSSStyleSheet;return i.replaceSync(e.replaceAll("component",`.${n}`)),i.cssRules.length===0?N(`No cssRules found in: ${e}`):(document.adoptedStyleSheets.push(i),n)},r.buildClassList=(...e)=>e.filter(t=>t!==!1&&t!==void 0).join(" "),r.readCssVarColor=(...e)=>{let t=document.createElement("div");document.body.appendChild(t);let n=e.map(i=>(t.style.color=i,dt.parseCssRgbOrRgba(getComputedStyle(t).color)));return t.remove(),n},r.watchResize=(e,t,n)=>{let i=new ResizeObserver(([o],s)=>t(o,s));return i.observe(e,n),{terminate:()=>i.disconnect()}},r.watchIntersection=(e,t,n)=>{let i=new IntersectionObserver(t,n);return i.observe(e),{terminate:()=>i.disconnect()}},r.secureBoundingBox=e=>{let t=e.getBoundingClientRect();if(!gu.isEmpty(t))return t;for(let n of e.children)gu.union(t,r.secureBoundingBox(n));return t},r.unfocus=(e=self)=>{let t=e.document.activeElement;t!==null&&"blur"in t&&typeof t.blur=="function"&&t.blur()},r.selectContent=e=>{let t=document.createRange(),n=window.getSelection();R(n)&&(t.selectNodeContents(e),n.removeAllRanges(),n.addRange(t))},r.unselectContent=e=>{let t=window.getSelection();!R(t)||t.rangeCount===0||e.contains(t.getRangeAt(0).commonAncestorContainer)&&t.removeAllRanges()},r.limitChars=(e,t,n)=>{if(!(t in e))return N(`${t} not found in ${e}`);if(typeof e[t]!="string")return N(`${t} in ${e} is not a string`);if(e[t].length>n)if(e[t]=e[t].substring(0,n),e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)e.setSelectionRange(n,n);else{let i=e.ownerDocument,o=i.createRange(),s=i.defaultView?.getSelection();if(!R(s))return;o.selectNodeContents(e),o.collapse(!1),s.removeAllRanges(),s.addRange(o)}},r.EmptyGif="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="})(jS||(jS={}));var vde=(()=>{let r={Cmd:"\u2318",Opt:"\u2325",Shift:"\u21E7"},e={Cmd:"Ctrl",Opt:"Alt",Shift:"\u21E7"};return Object.freeze({Mac:r,Win:e,System:As.isMacOS()?r:e})})();var LS;(function(r){r.read=async e=>{let t=[];for(;;){let{done:s,value:a}=await e.read();if(s)break;t.push(a)}let n=t.reduce((s,a)=>s+a.length,0),i=new Uint8Array(n),o=0;for(let s of t)i.set(s,o),o+=s.length;return i.buffer}})(LS||(LS={}));var KS;(function(r){r.pathBuilder=()=>new class{#e="";moveTo(e,t){return this.#e+=`M${e.toFixed(3)} ${t.toFixed(3)}`,this}lineTo(e,t){return this.#e+=`L${e.toFixed(3)} ${t.toFixed(3)}`,this}quadratic(e,t,n,i){return this.#e+=`Q${e.toFixed(3)} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)}`,this}quadraticTo(e,t){return this.#e+=`T${e.toFixed(3)} ${t.toFixed(3)}`,this}cubic(e,t,n,i,o,s){return this.#e+=`Q${e.toFixed(3)} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)} ${o.toFixed(3)} ${s.toFixed(3)}`,this}arc(e,t,n,i,o,s,a){return this.#e+=`A${e} ${t} ${n} ${i?1:0} ${o?1:0} ${s.toFixed(3)} ${a.toFixed(3)}`,this}circleSegment(e,t,n,i,o){let s=e+Math.cos(i)*n,a=t+Math.sin(i)*n,c=e+Math.cos(o)*n,l=t+Math.sin(o)*n,d=o-i;for(;d<0;)d+=Math.PI*2;return this.moveTo(s,a).arc(n,n,0,d>Math.PI,!0,c,l)}close(){return this.#e+="Z",this}get(){return this.#e}}})(KS||(KS={}));var WS;(function(r){let e=new Array;r.watchWeak=(n,i)=>{let o=new WeakRef(n),s=i(o);return e.push([o,s]),e.length===1&&t(),n};let t=()=>{console.debug("start weak watching");let n=setInterval(()=>{let i=e.length;for(;--i>=0;){let o=e[i];o[0].deref()===void 0&&(o[1].terminate(),e.splice(i,1),e.length===0&&clearInterval(n))}},1e3)}})(WS||(WS={}));var wy=Symbol.for("@openDAW/lib-dom");globalThis[wy]?console.debug(`%c${wy.description}%c is already available in ${globalThis.constructor.name}.`,"color: hsl(10, 83%, 60%)","color: inherit"):(globalThis[wy]=!0,console.debug(`%c${wy.description}%c is now available in ${globalThis.constructor.name}.`,"color: hsl(200, 83%, 60%)","color: inherit"));var ao;(function(r){r[r.Float=0]="Float",r[r.FloatArray=1]="FloatArray",r[r.Integer=2]="Integer",r[r.IntegerArray=3]="IntegerArray",r[r.ByteArray=4]="ByteArray"})(ao||(ao={}));var pu;(function(r){r[r.WRITE=0]="WRITE",r[r.READ=1]="READ"})(pu||(pu={}));var Ua;(function(r){r[r.ID=15793935]="ID",r[r.START=15790320]="START",r[r.END=986895]="END"})(Ua||(Ua={}));var by=class r{static create(e,t){return new r(e.channel(t))}#e=[];#t=new SharedArrayBuffer(1);#r=new Int8Array(this.#t);#i;#n=Ze.create(0);#o=g.None;#s=g.None;#l=-1;#a=-1;#c=!1;#u=!1;constructor(e){this.#i=or.sender(e,({dispatchAndForget:t})=>new class{sendShareLock(n){t(this.sendShareLock,n)}sendUpdateData(n){t(this.sendUpdateData,n)}sendUpdateStructure(n){t(this.sendUpdateStructure,n)}})}flush(){let e=this.#h();if(e.nonEmpty()){this.#u||(this.#i.sendShareLock(this.#t),this.#u=!0),this.#i.sendUpdateStructure(e.unwrap());let t=this.#d();if(this.#n.remaining<t){let n=kn(t),i=new SharedArrayBuffer(n);this.#n=Ze.use(i),this.#o=g.wrap(i),this.#i.sendUpdateData(i)}}this.#o.isEmpty()||Atomics.load(this.#r,0)===pu.WRITE&&(this.#p(this.#n),this.#n.position=0,Atomics.store(this.#r,0,pu.READ))}broadcastFloat(e,t){return this.#m(new class{type=ao.Float;address=e;capacity=8;put(n){n.writeFloat(t())}})}broadcastInteger(e,t){return this.#m(new class{type=ao.Integer;address=e;capacity=8;put(n){n.writeInt(t())}})}broadcastFloats(e,t,n,i){return this.#m(new class{type=ao.FloatArray;address=e;capacity=4+(t.byteLength<<2);put(o){_(n),o.writeInt(t.length);for(let s of t)o.writeFloat(s);_(i)}})}broadcastIntegers(e,t,n){return this.#m(new class{type=ao.IntegerArray;address=e;capacity=4+(t.byteLength<<2);put(i){n(),i.writeInt(t.length),t.forEach(o=>i.writeInt(o))}})}broadcastByteArray(e,t,n){return this.#m(new class{type=ao.ByteArray;address=e;capacity=4+t.byteLength;put(i){n(),i.writeInt(t.byteLength),i.writeBytes(t)}})}#h(){if(this.#c){try{this.#s=g.wrap(this.#b())}catch(e){throw e}this.#c=!1}if(this.#s.nonEmpty()){let e=this.#s;return this.#s=g.None,e}return g.None}#d(){return this.#a===-1&&(this.#a=this.#f()+12),this.#a}terminate(){D.clear(this.#e),this.#s=g.None,this.#c=!1,this.#a=0}#p(e){B(!this.#c&&this.#s.isEmpty(),"Cannot flush while update is available");let t=this.#d();B(e.remaining>=t,"Insufficient data"),e.writeInt(this.#l),e.writeInt(Ua.START);for(let n of this.#e)n.put(e);e.writeInt(Ua.END)}#f(){return this.#e.reduce((e,t)=>e+t.capacity,0)}#m(e){return this.#e.push(e),this.#w(),{terminate:()=>{D.removeOpt(this.#e,e),this.#w()}}}#w(){this.#a=-1,this.#c=!0}#b(){let e=Ze.create();e.writeInt(Ua.ID),e.writeInt(++this.#l),e.writeInt(this.#e.length);for(let{address:t,type:n}of this.#e)t.write(e),e.writeByte(n);return e.toArrayBuffer()}};var Ps;(function(r){class e{shift;numPeaks;dataOffset;constructor(n,i,o){this.shift=n,this.numPeaks=i,this.dataOffset=o}unitsEachPeak(){return 1<<this.shift}}r.Stage=e,r.unpack=(t,n)=>{switch(n){case 0:return uo.intBitsToFloat(t);case 1:return uo.intBitsToFloat(t>>16);default:return Fn(n)}}})(Ps||(Ps={}));var Ay=class r{stages;data;numFrames;numChannels;static from(e){B(e.readString()==="PEAKS","Wrong header");let t=e.readInt(),n=[];for(let c=0;c<t;c++){let l=e.readInt(),d=e.readInt(),h=e.readInt();e.readInt(),n[c]=new Ps.Stage(h,d,l)}let i=e.readInt(),o=[];for(let c=0;c<i;c++){let l=new Int8Array(e.readInt());e.readBytes(l),o[c]=new Int32Array(l.buffer)}let s=e.readInt(),a=e.readInt();return new r(n,o,s,a)}static None=new r([],[],0,0);static findBestFit=(e,t=1200)=>{let n=e/t;if(n<=1)return new Uint8Array(0);let i=3,o=Math.floor(Math.log(n)/Math.LN2),s=Math.max(1,Math.floor(o/i));return new Uint8Array(D.create(a=>i*(a+1),s))};constructor(e,t,n,i){this.stages=e,this.data=t,this.numFrames=n,this.numChannels=i}nearest(e){if(this.stages.length===0)return null;let t=Math.floor(Math.log(Math.abs(e))/Math.LN2),n=this.stages.length;for(;--n>-1;)if(t>=this.stages[n].shift)return this.stages[n];return this.stages[0]}toArrayBuffer(){let e=Ze.create();e.writeString("PEAKS"),e.writeInt(this.stages.length);for(let t=0;t<this.stages.length;t++){let{dataOffset:n,numPeaks:i,shift:o}=this.stages[t];e.writeInt(n),e.writeInt(i),e.writeInt(o),e.writeInt((1<<o)-1)}e.writeInt(this.data.length);for(let t=0;t<this.data.length;t++){let n=new Int8Array(this.data[t].buffer);e.writeInt(n.length),e.writeBytes(n)}return e.writeInt(this.numFrames),e.writeInt(this.numChannels),e.toArrayBuffer()}toString(){return`{SamplePeaks num-stages: ${this.stages.length}}`}};var ZS;(function(r){r.install=n=>or.executor(n.channel("peaks"),new class{async generateAsync(i,o,s,a,c){return e(i,o,s,a,c).toArrayBuffer()}});let e=(n,i,o,s,a)=>{if(o.length!==a)return N(`Invalid numberOfChannels. Expected: ${a}. Got ${o.length}`);class c{min=Number.POSITIVE_INFINITY;max=Number.NEGATIVE_INFINITY;index=0}let l=i1(),d=i.length,[h,f]=t(i,s),v=D.create(()=>new Int32Array(f),a),m=(1<<h[0].shift)-1,y=a*s,x=0;for(let S=0;S<a;++S){let C=v[S],V=o[S],K=D.create(()=>new c,d),G=Number.POSITIVE_INFINITY,ye=Number.NEGATIVE_INFINITY,ke=0;for(let re=0;re<s;++re){let be=V[re];if(G=Math.min(be,G),ye=Math.max(be,ye),(++ke&m)===0){for(let H=0;H<d;++H){let xe=h[H],Te=K[H];Te.min=Math.min(Te.min,G),Te.max=Math.max(Te.max,ye),((1<<xe.shift)-1&ke)===0&&(C[xe.dataOffset+Te.index++]=r.pack(Te.min,Te.max),Te.min=Number.POSITIVE_INFINITY,Te.max=Number.NEGATIVE_INFINITY)}G=Number.POSITIVE_INFINITY,ye=Number.NEGATIVE_INFINITY}(++x&65535)===0&&n(x/y)}}return n(1),l.lab(`SamplePeaks '${self.constructor.name}'`),new Ay(h,v,s,a)},t=(n,i)=>{let o=0;return[D.create(a=>{let c=n[a],l=Math.ceil(i/(1<<c)),d=new Ps.Stage(c,l,o);return o+=l,d},n.length),o]};r.pack=(n,i)=>{let o=uo.floatToIntBits(n),s=uo.floatToIntBits(i);return o|s<<16}})(ZS||(ZS={}));var GS;(function(r){r.renderBlocks=(e,t,n,{u0:i,u1:o,v0:s,v1:a,x0:c,x1:l,y0:d,y1:h})=>{let f=(o-i)/(l-c),v=t.nearest(f);if(v===null)return;let m=(h-d-1)/(a-s),y=v.unitsEachPeak(),x=c-Math.floor(c),S=f/y,C=(i-x*f)/f*S,V=Math.floor(C),K=0,G=0,ye=t.data[n];for(let ke=Math.floor(c);ke<Math.floor(l);ke++){let re=C+S,be=Math.floor(re),H=!1;for(;V<be;){let Nt=ye[v.dataOffset+V++];K=Math.min(Ps.unpack(Nt,0),K),G=Math.max(Ps.unpack(Nt,1),G),H=!0}let xe=d+Math.floor((K-s)*m),Te=d+Math.floor((G-s)*m),et=Math.max(d,Math.min(xe,Te)),er=Math.min(h,Math.max(xe,Te));if(e.fillRect(ke,et,1,er===et?1:er-et),H){let Nt=G;G=K,K=Nt}C=re,V=be}}})(GS||(GS={}));var qS;(function(r){r.init=n=>or.executor(n.channel("opfs"),new class{#e=new Map;async write(i,o){await this.#t(i,async()=>{let s=await this.#r(i,{create:!0});try{s.truncate(o.length),s.write(o.buffer,{at:0}),s.flush()}finally{s.close()}})}async read(i){return await this.#t(i,async()=>{let o=await this.#r(i);try{let s=o.getSize(),a=new Uint8Array(s);return o.read(a),a}finally{o.close()}})}async delete(i){await this.#t(i,async()=>{let o=t(i);return o.length===0?this.clear():this.#i(o.slice(0,-1)).then(s=>s.removeEntry(q(o.at(-1)),{recursive:!0}))})}async list(i){let o=t(i),{status:s,value:a}=await wo.tryCatch(this.#i(o));if(s==="rejected")return D.empty();let c=[];for await(let{name:l,kind:d}of a.values())c.push({name:l,kind:d});return c}async clear(){let i=await navigator.storage.getDirectory();for await(let[o,s]of i.entries())s.kind==="file"?await i.removeEntry(o):s.kind==="directory"&&await i.removeEntry(o,{recursive:!0})}async#t(i,o){for(;;){let s=this.#e.get(i);if(La(s)){await s;continue}let a=()=>N("Lock not acquired"),c=new Promise(l=>a=l);this.#e.set(i,c);try{return await o()}finally{this.#e.get(i)===c&&this.#e.delete(i),a()}}}async#r(i,o){let s=t(i);return await(await(await this.#i(s.slice(0,-1),o)).getFileHandle(q(s.at(-1)),o)).createSyncAccessHandle()}async#i(i,o){let s=await navigator.storage.getDirectory();for(let a of i)s=await s.getDirectoryHandle(a,o);return s}});let t=n=>{let i=n.replace(/^\/+|\/+$/g,"");return i===""?[]:i.split("/")}})(qS||(qS={}));var _y=Symbol.for("@openDAW/lib-fusion");globalThis[_y]?console.debug(`%c${_y.description}%c is already available in ${globalThis.constructor.name}.`,"color: hsl(10, 83%, 60%)","color: inherit"):(globalThis[_y]=!0,console.debug(`%c${_y.description}%c is now available in ${globalThis.constructor.name}.`,"color: hsl(200, 83%, 60%)","color: inherit"));var Py=class{#e;#t;#r=new pe;#i=[];constructor(e,t){this.#e=e,this.#t=t}process({blocks:e}){e.forEach(({p0:t,p1:n,bpm:i,s0:o,s1:s,flags:a})=>{if(this.#t.metronomeEnabled&&st.every(a,1)){let[c,l]=this.#e.signature,d=Y.fromSignature(1,l);for(let h of Qi.iterate(t,n,d)){B(t<=h&&h<n,()=>`${h} out of bounds (${t}, ${n})`);let f=Math.floor(Y.pulsesToSamples(h-t,i,sampleRate));this.#i.push(new g_(h,o+f,c,l))}}this.#r.clear(o,s);for(let c=this.#i.length-1;c>=0;c--)this.#i[c].processAdd(this.#r,o,s)&&this.#i.splice(c,1)})}get output(){return this.#r}},g_=class{#e;#t=0;#r=0;constructor(e,t,n,i){B(t>=0&&t<128,`${t} out of bounds`),this.#e=Y.toParts(e,n,i).beats===0?880:440,this.#r=t}processAdd(e,t,n){let[i,o]=e.channels(),s=Math.floor(.002*sampleRate),a=Math.floor(.05*sampleRate);for(let c=Math.max(this.#r,t);c<n;c++){let l=Math.min(this.#t/s,1-(this.#t-s)/a),d=Math.sin(this.#t/sampleRate*Si*this.#e)*.25*l*l;if(i[c]+=d,o[c]+=d,++this.#t>s+a)return!0}return this.#r=0,!1}};var Ey=class{#e;#t;#r=!0;#i=!1;#n=null;#o=!1;#s=0;constructor(e,t){this.#e=e,this.#e.timelineBoxAdapter.markerTrack.subscribe(()=>this.#o=!0),this.#e.timelineBoxAdapter.box.bpm.subscribe(()=>this.#i=!0),this.#r=t?.pauseOnLoopDisabled??!1,this.#t=new Ha}setCallback(e,t){return this.#t.add(e,t),W.create(()=>this.#t.remove(e,t))}reset(){this.#i=!1,this.#o=!1,this.#s=0,this.#n=null}process(e){let t=!1,{timeInfo:n,timelineBoxAdapter:{box:i,markerTrack:o}}=this.#e,s=i.bpm.getValue(),a=n.transporting;if(a){let c=[],l=n.position,d=0,h=0,f=n.getLeapStateAndReset();for(;d<128;){if(this.#o||f){this.#o=!1;let re=o.events.lowerEqual(l);(this.#n?.at(0)??null)!==re&&(this.#n=R(re)?[re,0]:null,t=!0)}let v=128-d,m=l+Y.samplesToPulses(v,s,sampleRate),y=null,x=Number.POSITIVE_INFINITY;if(o.enabled){let re=Array.from(Qe.take(o.events.iterateFrom(l),2));if(re.length>0){let[be,H]=re;this.#n===null?be.position>=l&&be.position<m&&(y={type:"marker",prev:be,next:H},x=be.position):R(H)&&H!==this.#n[0]&&be.position<l&&H.position<m&&(y={type:"marker",prev:be,next:H},x=H.position)}}let{isRecording:S,isCountingIn:C}=this.#e.timeInfo,{from:V,to:K,enabled:G}=i.loopArea;if(G.getValue()&&!(S||C)||this.#r){let re=K.getValue();l<re&&m>re&&re<x&&(y={type:"loop",target:V.getValue()},x=re)}if(this.#t.keyCount()>0)for(let re of this.#t.keys())l<re&&m>re&&re<x&&(y={type:"callback",position:re,callbacks:this.#t.get(re)},x=re);let ke=!n.isCountingIn;if(y===null){let re=d+v;c.push({index:h++,p0:l,p1:m,s0:d,s1:re,bpm:s,flags:lu.create(a,f,ke,this.#i)}),f=!1,l=m,d=re}else{let re=()=>{if(x>l){let H=d+Y.pulsesToSamples(x-l,s,sampleRate)|0;c.push({index:h++,p0:l,p1:x,s0:d,s1:H,bpm:s,flags:lu.create(a,f,ke,this.#i)}),f=!1,l=x,d=H}},be=()=>{if(d<128){let H=d+Y.pulsesToSamples(m-l,s,sampleRate)|0;c.push({index:h++,p0:l,p1:x,s0:d,s1:H,bpm:s,flags:lu.create(!1,!1,!1,this.#i)}),d=H}};switch(y.type){case"loop":{re(),this.#r?(this.#e.timeInfo.pause(),be()):(l=y.target,f=!0);break}case"marker":{let{prev:H,next:xe}=y;!R(this.#n)||this.#n[0]!==H?this.#n=[H,0]:++this.#n[1]<H.plays||H.plays===0?(re(),l=H.position,f=!0):this.#n=[xe,0],t=!0;break}case"callback":{re(),y.callbacks.forEach(H=>H());break}}}this.#i=!1}e({blocks:c}),n.advanceTo(l),this.#s=l}else{if(this.#o||n.getLeapStateAndReset()){this.#o=!1;let h=o.events.lowerEqual(n.position);h!==null&&this.#n?.at(0)!==h&&(this.#n=[h,0],t=!0)}let c=this.#s,l=c+Y.samplesToPulses(128,s,sampleRate),d={blocks:[{index:0,p0:c,p1:l,s0:0,s1:128,bpm:s,flags:lu.create(!1,!1,!1,!1)}]};e(d),this.#s=l}t&&this.#e.engineToClient.switchMarkerState(R(this.#n)?[this.#n[0].uuid,this.#n[1]]:null)}};var v_=class{constructor(e,t){this.uuid=e;this.engineToClient=t;t.fetchAudio(e).then(n=>this.#t=g.wrap(n))}peaks=g.None;#e={type:"idle"};#t=g.None;get data(){return this.#t}get state(){return this.#e}subscribe(e){return W.Empty}invalidate(){}toString(){return"{AudioLoaderWorklet}"}},Sy=class{#e;#t;constructor(e){this.#e=e,this.#t=E.newSet(t=>t.uuid)}record(e){}getOrCreate(e){return this.#t.getOrCreate(e,t=>new v_(t,this.#e))}remove(e){}invalidate(e){}};var Fy=class{constructor(e){this.uuid=e}waiting=g.None;playing=g.None},Ny=class{#e;#t;#r=[];#i=[];#n=[];constructor(e){this.#e=e,this.#e.subscribeToAllUpdatesImmediate({onUpdate:t=>{if(t.type==="delete"){let n=t.uuid;this.#t.opt(n).ifSome(i=>{i.playing.ifSome(o=>this.#s(o.uuid)),i.playing=g.None,i.waiting=g.None}),this.#t.forEach(i=>{i.playing.nonEmpty()&&E.equals(i.playing.unwrap().uuid,n)&&(i.playing=g.None,this.#s(n));let o=i.waiting.flatMap(fu);o.nonEmpty()&&E.equals(o.unwrap().uuid,n)&&(i.waiting=g.None)})}}}),this.#t=E.newSet(t=>t.uuid)}schedulePlay(e){e.trackBoxAdapter.ifSome(({uuid:t})=>{let n=this.#t.getOrCreate(t,o=>new Fy(o));if(n.playing.nonEmpty()&&n.playing.unwrap()===e){console.debug(`${e} is already playing (ignore)`);return}let i=n.waiting.flatMap(o=>o);i.nonEmpty()&&(console.debug("obsolete",i.unwrap()),this.#n.push(i.unwrap().uuid),n.waiting=g.None),console.debug(`schedulePlay(${E.toString(n.uuid)} > ${e})`),D.removeOpt(this.#n,e.uuid),n.waiting=g.wrap(g.wrap(e))})}scheduleStop({uuid:e}){let t=this.#t.getOrCreate(e,i=>new Fy(i)),n=t.waiting.flatMap(i=>i);n.nonEmpty()&&(console.debug("obsolete",n.unwrap()),this.#n.push(n.unwrap().uuid),t.waiting=g.None),t.playing.nonEmpty()&&(console.debug(`scheduleStop(${E.toString(e)})`),t.waiting=g.wrap(g.None))}reset(){this.#t.forEach(e=>{e.waiting.ifSome(t=>t.ifSome(n=>this.#n.push(n.uuid))),e.waiting=g.None,e.playing.ifSome(t=>this.#s(t.uuid)),e.playing=g.None}),this.#t.clear()}*iterate(e,t,n){let i=this.#t.getOrNull(e);if(i===null){yield{optClip:g.None,sectionFrom:t,sectionTo:n};return}if(i.waiting.nonEmpty()){let o=i.waiting.unwrap(),s=i.playing.mapOr(c=>c.duration,Y.Bar),a=$n(n,s);a>=t?(t<a&&(yield{optClip:i.playing,sectionFrom:t,sectionTo:a}),i.waiting=g.None,i.playing.ifSome(c=>this.#s(c.uuid)),o.nonEmpty()?(i.playing=o,this.#o(o.unwrap().uuid)):i.playing=g.None,yield{optClip:i.playing,sectionFrom:a,sectionTo:n}):yield{optClip:i.playing,sectionFrom:t,sectionTo:n}}else if(i.playing.nonEmpty()){let o=i.playing.unwrap();if(o.box.playback.loop.getValue())yield{optClip:i.playing,sectionFrom:t,sectionTo:n};else{let s=$n(t,o.duration)+o.duration;s<=n?(yield{optClip:i.playing,sectionFrom:t,sectionTo:s},i.playing=g.None,this.#s(o.uuid),s<n&&(yield{optClip:g.None,sectionFrom:s,sectionTo:n})):yield{optClip:i.playing,sectionFrom:t,sectionTo:n}}}else yield{optClip:g.None,sectionFrom:t,sectionTo:n}}changes(){if(this.#r.length>0||this.#i.length>0||this.#n.length>0){let e=g.wrap({started:this.#r.slice(),stopped:this.#i.slice(),obsolete:this.#n.slice()});return this.#r.length=0,this.#i.length=0,this.#n.length=0,e}return g.None}terminate(){this.#t.clear(),this.#r.length=0,this.#i.length=0,this.#n.length=0}#o(e){this.#r.push(e)}#s(e){this.#i.push(e)}};var y_;(e=>e.Default={includeAudioEffects:!0,includeSends:!0})(y_||={});var x_=class{constructor(e,t){this.uuid=e;this.engineToClient=t;t.fetchSoundfont(e).then(n=>this.#t=g.wrap(n))}peaks=g.None;#e={type:"idle"};#t=g.None;get soundfont(){return this.#t}get state(){return this.#e}subscribe(e){return W.Empty}invalidate(){}toString(){return"{SoundfontLoaderWorklet}"}},By=class{#e;#t;constructor(e){this.#e=e,this.#t=E.newSet(t=>t.uuid)}getOrCreate(e){return this.#t.getOrCreate(e,t=>new x_(t,this.#e))}remove(e){}invalidate(e){}};var $y=class r extends Xt{static ClockRate=Y.fromSignature(1,96);#e;#t;constructor(e,t){super(e),this.#e=t,this.#t=[],this.own(this.context.registerProcessor(this))}schedule(e){this.#t.push(e)}reset(){this.eventInput.clear()}process({blocks:e}){let t=this.#e.midiOutputDevices;if(t.length===0){this.#t.length=0;return}let n=t.filter(i=>i.sendTransportMessages.getValue()&&i.id.getValue()!=="");if(n.length===0){this.#t.length=0;return}n.forEach(i=>{let o=i.id.getValue(),s=i.delayInMs.getValue();this.#t.forEach(a=>this.context.sendMIDIData(o,a,s)),this.#t.length=0}),e.forEach(({p0:i,p1:o,s0:s,bpm:a,flags:c})=>{let l=s/sampleRate;if(st.every(c,1))for(let d of Qi.iterate(i,o,r.ClockRate)){let h=Y.pulsesToSeconds(d-i,a);n.forEach(f=>{let v=f.id.getValue(),m=f.delayInMs.getValue(),y=(l+h)*1e3+m;this.context.sendMIDIData(v,ot.Clock,y)})}})}toString(){return`{${this.constructor.name}}`}};var ky=class{#e;#t;#r;#i;#n=new Map;#o=[];constructor(e,t){this.#e=e,this.#t=new Uint32Array(t,0,2),this.#r=new Uint32Array(t,8),this.#i=(this.#r.length>>1)-1}send(e,t,n){let i=this.#n.get(e);if(ja(i)){if(i=this.#o.length,i>=64)return console.error(`Too many MIDI devices: ${i}, max is 64`),!1;this.#n.set(e,i),this.#o.push(e),this.#e.postMessage({registerDevice:e,id:i})}let o=Atomics.load(this.#t,0),s=o+1&this.#i;if(s===Atomics.load(this.#t,1))return!1;let a=t.length,c=t[0]??0,l=t[1]??0,d=t[2]??0,h=a<<30|i<<24|c<<16|l<<8|d,f=n|0,v=o<<1;return this.#r[v]=h,this.#r[v+1]=f,Atomics.store(this.#t,0,s),this.#e.postMessage(null),!0}};var Dk=!1,Iy=class extends AudioWorkletProcessor{#e;#t;#r;#i;#n;#o;#s;#l;#a;#c;#u;#h;#d;#p;#f;#m;#w;#b;#_;#$;#F;#N;#A;#x;#y;#g;#E;#S;#P=g.None;#B=g.None;#k=g.None;#I=g.None;#T=!1;#D=!0;#C=!1;#R=.5;#O=0;#M=0;#V=!0;#z=1;constructor({processorOptions:{syncStreamBuffer:e,controlFlagsBuffer:t,project:n,exportConfiguration:i,options:o}}){super();let{boxGraph:s,mandatoryBoxes:{rootBox:a,timelineBox:c}}=ps.decode(n);this.#e=new j,this.#t=t1.for(this.port),this.#r=s,this.#i=new Op,this.#g=new Int32Array(t),this.#n=or.sender(this.#t.channel("engine-to-client"),l=>new class{log(d){l.dispatchAndForget(this.log,d)}error(d){l.dispatchAndForget(this.error,d)}fetchAudio(d){return l.dispatchAndReturn(this.fetchAudio,d)}fetchSoundfont(d){return l.dispatchAndReturn(this.fetchSoundfont,d)}notifyClipSequenceChanges(d){l.dispatchAndForget(this.notifyClipSequenceChanges,d)}switchMarkerState(d){l.dispatchAndForget(this.switchMarkerState,d)}ready(){l.dispatchAndForget(this.ready)}}),this.#s=new Sy(this.#n),this.#l=new By(this.#n),this.#a=E.newSet(l=>l.adapter.uuid),this.#d=new cg,this.#h=new Fp(c.bpm),this.#o=this.#e.own(new Ym(this)),this.#c=this.#o.adapterFor(a,vc),this.#u=this.#o.adapterFor(c,mn),this.#p=new xp,this.#f=new wp(this.#p),this.#m=new ne,this.#w=new xy,this.#N=new Py(this.#u,this.#i),this.#A=new $y(this,this.#c),this.#x=new Ey(this,o),this.#S=E.newSet(l=>l),this.#y=Xa.writer(eP(),e,l=>{let{transporting:d,isCountingIn:h,isRecording:f,position:v}=this.#i,m=this.#u.box.signature.denominator.getValue();l.position=v,l.playbackTimestamp=this.#M,l.countInBeatsRemaining=h?(this.#O-v)/Y.fromSignature(1,m):0,l.isPlaying=d,l.isRecording=f,l.isCountingIn=h}),this.#b=this.#e.own(by.create(this.#t,"engine-live-data")),this.#$=new _v(this),this.#F=this.#e.own(new _e(this.#b,fe.compose(E.Lowest))),this.#_=this.#e.own(new Ny(this.#r)),this.#e.ownAll(o1(this.#r,this.#t.channel("engine-sync")),or.executor(this.#t.channel("engine-commands"),{play:()=>this.#U(),stop:l=>this.#j(l),setPosition:l=>this.#L(l),prepareRecordingState:l=>this.#K(l),stopRecording:()=>this.#W(),setMetronomeEnabled:l=>this.#i.metronomeEnabled=this.#C=l,setMetronomeVolume:l=>this.#i.metronomeVolume=this.#R=l,setPlaybackTimestampEnabled:l=>this.#V=l,setCountInBarsTotal:l=>this.#z=l,queryLoadingComplete:()=>Promise.resolve(this.#r.boxes().every(l=>l.accept({visitAudioFileBox:d=>this.#s.getOrCreate(d.address.uuid).data.nonEmpty()&&d.pointerHub.nonEmpty()})??!0)),panic:()=>this.#T=!0,noteSignal:l=>{if(ds.isOn(l)){let{uuid:d,pitch:h,velocity:f}=l;this.optAudioUnit(d).ifSome(v=>v.midiDeviceChain.noteSequencer.pushRawNoteOn(h,f))}else if(ds.isOff(l)){let{uuid:d,pitch:h}=l;this.optAudioUnit(d).ifSome(f=>f.midiDeviceChain.noteSequencer.pushRawNoteOff(h))}},ignoreNoteRegion:l=>this.#S.add(l),scheduleClipPlay:l=>{l.forEach(d=>{let h=this.#r.findBox(d);if(h.isEmpty())console.warn(`Could not scheduleClipPlay. Cannot find clip: '${E.toString(d)}'`);else{let f=Bf.for(this.#o,h.unwrap());this.#_.schedulePlay(f)}}),this.#i.transporting=!0,this.#A.schedule(ot.Start)},scheduleClipStop:l=>{l.forEach(d=>{let h=this.#r.findBox(d);h.isEmpty()?console.warn(`Could not scheduleClipStop. Cannot find track: '${E.toString(d)}'`):this.#_.scheduleStop(this.#o.adapterFor(h.unwrap(),pt))})},setupMIDI:(l,d)=>{this.#I=g.wrap(new ky(l,d))},terminate:()=>{this.#k.ifSome(l=>l.terminate()),this.#k=g.None,this.#D=!1,this.#S.clear(),this.#e.terminate()}}),this.#c.audioUnits.catchupAndSubscribe({onAdd:l=>{let d=E.toString(l.uuid),h=R(i?.[d])?i[d]:y_.Default,f=new yy(this,l,h),v=this.#a.add(f);if(B(v,`Could not add ${f}`),f.adapter.isOutput){B(this.#B.isEmpty(),"Output can only assigned once."),this.#B=g.wrap(f);return}},onRemove:({uuid:l})=>this.#a.removeByKey(l).terminate(),onReorder:mr})),this.#E=g.wrap(i).match({none:()=>D.empty(),some:l=>Object.keys(l).map(d=>this.#a.get(E.parse(d)))}),this.#n.ready(),console.log=(...l)=>this.#n.log(l.join(", "))}ignoresRegion(e){return this.#S.hasKey(e)}process(e,t){if(!this.#D)return!1;if(Atomics.load(this.#g,0)===1)return!0;try{return this.render(e,t)}catch(n){return console.debug(n),this.#D=!1,this.#n.error(n),this.terminate(),!1}}render(e,[t]){if(!this.#D)return!1;if(this.#T)return N("Manual Panic");let n=this.#i.metronomeEnabled;this.#m.notify(0),this.#P.isEmpty()&&(this.#f.update(),this.#P=g.wrap(this.#f.sorted().concat()),Dk&&console.debug(`%cAudio-Graph%c
${this.#P.unwrap().map((o,s)=>`${s+1}: ${o}`).join(`
`)}`,"color: hsl(200, 83%, 60%)","color: inherit"));let i=this.#P.unwrap();return this.#x.process(o=>{i.forEach(s=>s.process(o)),n&&this.#N.process(o)}),this.#E.length===0?(this.#B.unwrap().audioOutput().replaceInto(t),n&&this.#N.output.mixInto(t),this.#F.process(t[0],t[1])):this.#E.forEach((o,s)=>{let[a,c]=o.audioOutput().channels();t[s*2].set(a),t[s*2+1].set(c)}),this.#m.notify(1),this.#_.changes().ifSome(o=>this.#n.notifyClipSequenceChanges(o)),this.#y.tryWrite(),this.#b.flush(),!0}getAudioUnit(e){return this.#a.get(e)}optAudioUnit(e){return this.#a.opt(e)}subscribeProcessPhase(e){return this.#m.subscribe(e)}registerProcessor(e){return this.#p.addVertex(e),this.#P=g.None,{terminate:()=>{this.#p.removeVertex(e),this.#P=g.None}}}registerEdge(e,t){return this.#p.addEdge([e,t]),this.#P=g.None,{terminate:()=>{this.#p.removeEdge([e,t]),this.#P=g.None}}}get boxGraph(){return this.#r}get boxAdapters(){return this.#o}get sampleManager(){return this.#s}get soundfontManager(){return this.#l}get rootBoxAdapter(){return this.#c}get timelineBoxAdapter(){return this.#u}get signatureDuration(){return this.timelineBoxAdapter.signatureDuration}get tempoMap(){return this.#h}get liveStreamBroadcaster(){return this.#b}get liveStreamReceiver(){return N("Only available in main thread")}get parameterFieldAdapters(){return this.#d}get clipSequencing(){return this.#_}get broadcaster(){return this.#b}get updateClock(){return this.#$}get timeInfo(){return this.#i}get mixer(){return this.#w}get engineToClient(){return this.#n}get isMainThread(){return!1}get isAudioContext(){return!0}sendMIDIData(e,t,n){this.#I.ifSome(i=>i.send(e,t,n))}terminate(){console.trace(`terminate: ${this}`),this.#e.terminate(),this.#a.forEach(e=>e.terminate()),this.#a.clear()}#U(){this.#V&&(this.#i.position=this.#M,this.#A.schedule(ot.positionInPPQN(this.#i.position))),this.#i.transporting=!0,this.#A.schedule(ot.Start)}#j(e){(this.#i.isRecording||this.#i.isCountingIn)&&(this.#i.isRecording=!1,this.#i.isCountingIn=!1,this.#i.position=this.#V?this.#M:0,this.#A.schedule(ot.positionInPPQN(this.#i.position)));let t=this.#i.transporting;this.#i.transporting=!1,this.#i.metronomeEnabled=this.#C,this.#i.metronomeVolume=this.#R,this.#S.clear(),(e||!t)&&this.#Z(),this.#A.schedule(ot.Stop)}#L(e){this.#i.isRecording||(this.#i.position=this.#M=e,this.#A.schedule(ot.positionInPPQN(this.#i.position)))}#K(e){if(!(this.#i.isRecording||this.#i.isCountingIn))if(!this.#i.transporting&&e){let t=this.#i.position,[n,i]=this.#u.signature;this.#O=$n(t,Y.fromSignature(n,i)),this.#i.isCountingIn=!0,this.#i.metronomeEnabled=!0,this.#i.transporting=!0,this.#i.position=this.#O-Y.fromSignature(this.#z*n,i);let o=this.#x.setCallback(this.#O,()=>{this.#i.isCountingIn=!1,this.#i.isRecording=!0,this.#i.metronomeEnabled=this.#C,o.terminate()});this.#A.schedule(ot.positionInPPQN(this.#i.position))}else this.#i.transporting=!0,this.#i.isRecording=!0,this.#A.schedule(ot.Start)}#W(){!this.#i.isRecording&&!this.#i.isCountingIn||(this.#i.isRecording=!1,this.#i.isCountingIn=!1,this.#i.metronomeEnabled=this.#C,this.#i.metronomeVolume=this.#R,this.#i.transporting=!1,this.#S.clear(),this.#A.schedule(ot.Stop))}#Z(){this.#M=0,this.#i.isRecording=!1,this.#i.isCountingIn=!1,this.#i.metronomeEnabled=this.#C,this.#i.metronomeVolume=this.#R,this.#i.position=0,this.#i.transporting=!1,this.#x.reset(),this.#_.reset(),this.#f.sorted().forEach(e=>e.reset()),this.#F.clear()}};var Dy=class extends AudioWorkletProcessor{#e;constructor({processorOptions:e}){super(),this.#e=dg.writer(e)}process(e){return this.#e.write(e[0]),!0}};registerProcessor("meter-processor",kp);registerProcessor("engine-processor",Iy);registerProcessor("recording-processor",Dy);
//# sourceMappingURL=processors.js.map
